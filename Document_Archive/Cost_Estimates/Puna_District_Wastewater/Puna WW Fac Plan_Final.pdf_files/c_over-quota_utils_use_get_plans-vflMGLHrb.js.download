!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="58522d98-f70c-3be4-885c-0a3ec1228be1")}catch(e){}}();
define(["require","exports","react","./c_core_i18n","./e_file_viewer_static_scl_page_file","./c_trial-plan-card_components_header","./c_trial-cards_trial-plan-card","./c_spectrum_util_raf_throttle","./e_data_modules_stormcrow","./c_pap-events_navigation_select_create_folder_action"],(function(e,a,t,i,l,r,o,n,s,d){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}var c=u(t);const g=i.intl.formatMessage({id:"RwfIPM",defaultMessage:"Upgrade"}),f=i.intl.formatMessage({id:"Ts3pxe",defaultMessage:"Manage files"}),v=i.intl.formatMessage({id:"1Puvc2",defaultMessage:"Contact admin"}),m=e=>i.intl.formatMessage({id:"oZoBRB",defaultMessage:"Get {planSize}"},{planSize:e}),_=i.intl.formatMessage({id:"gAT+r8",defaultMessage:"View plans"}),p=i.intl.formatMessage({id:"fkOQG8",defaultMessage:"Download file"}),M=(e,a)=>i.intl.formatMessage({id:"Ju0e9k",defaultMessage:"You're using <b>{usedBytes} of {quotaBytes}</b> of your free Dropbox storage space. Upgrade to a plan that scales with your work—or your over-quota files may be deleted."},{usedBytes:e,quotaBytes:a,b:e=>c.default.createElement("strong",null,e)}),y=i.intl.formatMessage({id:"r5pMlA",defaultMessage:"Warning"}),C=i.intl.formatMessage({id:"gW6Dlh",defaultMessage:"Current plan"}),h=i.intl.formatMessage({id:"XHZW23",defaultMessage:"Upgrade to continue collaborating on shared files"}),b=e=>i.intl.formatMessage({id:"QRtV/H",defaultMessage:"<b>Sharing will be restricted on {restrictionsDate}</b> if you're still over your storage limit."},{restrictionsDate:e,b:e=>c.default.createElement("strong",null,e)}),w=i.intl.formatMessage({id:"ac6d5L",defaultMessage:"<b>Sharing will be restricted soon</b> if you’re still over your storage limit."},{b:e=>c.default.createElement("strong",null,e)}),I=i.intl.formatMessage({id:"4pCtin",defaultMessage:"Sharing is unavailable because your team has <a>limited features</a>."},{a:e=>c.default.createElement("a",{href:"https://help.dropbox.com/account-access/team-locked-state?_tk=oq_restrictions_modal",target:"_blank",rel:"noreferrer noopener"},e)}),S=i.intl.formatMessage({id:"tELEKM",defaultMessage:"Sharing is restricted because you’re over your storage limit."}),P=e=>i.intl.formatMessage({id:"+CKpIi",defaultMessage:"Upgrade to view {fileName}"},{fileName:e}),E=e=>i.intl.formatMessage({id:"8t0sN4",defaultMessage:"<b>Preview will be restricted on {restrictionsDate}</b> if you're still over your storage limit."},{restrictionsDate:e,b:e=>c.default.createElement("strong",null,e)}),T=i.intl.formatMessage({id:"D9G/dF",defaultMessage:"<b>Preview will be restricted soon</b> if you’re still over your storage limit."},{b:e=>c.default.createElement("strong",null,e)}),U=i.intl.formatMessage({id:"e3Hu53",defaultMessage:"Preview is restricted because you’re over your storage limit."}),A=i.intl.formatMessage({id:"cp1Kff",defaultMessage:"Upgrade to continue adding content"}),L=i.intl.formatMessage({id:"FMGZlv",defaultMessage:"You’ve exceeded your storage limit. Upgrade to get more storage."});i.intl.formatMessage({id:"RwfIPM",defaultMessage:"Upgrade"}),i.intl.formatMessage({id:"Ts3pxe",defaultMessage:"Manage files"}),i.intl.formatMessage({id:"s+3YBE",defaultMessage:"Includes"}),i.intl.formatMessage({id:"gAT+r8",defaultMessage:"View plans"});const D=i.intl.formatMessage({id:"Z6zJXZ",defaultMessage:"Show all plans"}),N=i.intl.formatMessage({id:"YvYJx0",defaultMessage:"Your special savings"}),x=i.intl.formatMessage({id:"5kkHg1",defaultMessage:"Redeem offer"});i.intl.formatMessage({id:"fkOQG8",defaultMessage:"Download file"}),i.intl.formatMessage({id:"r5pMlA",defaultMessage:"Warning"}),i.intl.formatMessage({id:"gW6Dlh",defaultMessage:"Current plan"}),i.intl.formatMessage({id:"XHZW23",defaultMessage:"Upgrade to continue collaborating on shared files"}),i.intl.formatMessage({id:"ac6d5L",defaultMessage:"<b>Sharing will be restricted soon</b> if you’re still over your storage limit."},{b:e=>c.default.createElement("strong",null,e)}),i.intl.formatMessage({id:"tELEKM",defaultMessage:"Sharing is restricted because you’re over your storage limit."}),i.intl.formatMessage({id:"D9G/dF",defaultMessage:"<b>Preview will be restricted soon</b> if you’re still over your storage limit."},{b:e=>c.default.createElement("strong",null,e)}),i.intl.formatMessage({id:"e3Hu53",defaultMessage:"Preview is restricted because you’re over your storage limit."}),i.intl.formatMessage({id:"cp1Kff",defaultMessage:"Upgrade to continue adding content"}),i.intl.formatMessage({id:"FMGZlv",defaultMessage:"You’ve exceeded your storage limit. Upgrade to get more storage."});const V=i.intl.formatMessage({id:"aRx2b4",defaultMessage:"Get more storage to upload your file(s)"}),k=i.intl.formatMessage({id:"VPYpFU",defaultMessage:"Uploading the selected file(s) would put you over your storage limit."});i.intl.formatMessage({id:"EcxI0t",defaultMessage:"Compare plans"});const O="portable-checkout-modal";var R;a.ViewMode=void 0,(R=a.ViewMode||(a.ViewMode={})).Sharing="SHARING",R.Preview="PREVIEW",R.UploadOrCreate="UPLOAD_OR_CREATE",R.UploadNearQuota="UPLOAD_NEAR_QUOTA";const B=e=>{throw new Error(`Unhandled value: ${e}`)};function F(e){if(null==e)return"";const a=new Date(1e3*e);return i.intl.formatDate(a,{year:"numeric",month:"long",day:"numeric"})}const G=l.createDefaultApiv2QueryFn(d.GetSpaceUpsellsRoutes,"get_plans"),q=l.createApiv2Query({nsClient:d.GetSpaceUpsellsRoutes,rpc:"get_plans",queryFn:(...e)=>(...a)=>l.reportExceptionIfRequestFails((async()=>await G(...e)(...a)),["get_plans"])});a.CONTACT_ADMIN=v,a.CURRENT_PLAN=C,a.DOWNLOAD_FILE=p,a.GET_PLAN=m,a.MANAGE_FILES=f,a.OVER_QUOTA_DELETION_WARNING=M,a.OVER_QUOTA_RESTRICTIONS_MODAL_MIN_WIDTH_DESKTOP=706,a.PORTABLE_CHECKOUT_MODAL_ID=O,a.PREVIEW_TITLE=P,a.SHARING_ENFORCE_RESTRICTIONS=S,a.SHARING_ENFORCE_RESTRICTION_LOCKED_STATE_TEAM=I,a.SHARING_RESTRICTION_WARNING=b,a.SHARING_RESTRICTION_WARNING_NO_DATE=w,a.UPGRADE=g,a.VIEW_PLANS=_,a.WARNING_BADGE=y,a.getAutoLayoutModalProps=function({viewMode:e,isMobileView:t,fileName:s,quotaUpsellInfo:d,warningMode:u,usedLessThanPlusQuota:g,filePreview:v,planContent:y,quotaUsedBytes:I,quotaAllocatedBytes:O,shouldUseSmallSkus:R,onViewPlansClick:G,onCloseClick:q,onDownloadFileClick:H,onManageFilesClick:W,onGetPlanClick:z}){const Q=function(e,t){switch(e){case a.ViewMode.Sharing:return h;case a.ViewMode.Preview:return P(t||"");case a.ViewMode.UploadOrCreate:return A;case a.ViewMode.UploadNearQuota:return V;default:return B(e)}}(e,s),Y=function(e,t){var i;const l=null===(i=null==t?void 0:t.restrictions)||void 0===i?void 0:i.restrictions_start_time_utc_seconds;switch(e){case a.ViewMode.Sharing:return l?b(F(l)):w;case a.ViewMode.Preview:return l?E(F(l)):T;case a.ViewMode.UploadOrCreate:return L;case a.ViewMode.UploadNearQuota:return k;default:return B(e)}}(e,d),K=function(e){switch(e){case a.ViewMode.Sharing:return S;case a.ViewMode.Preview:return U;case a.ViewMode.UploadOrCreate:return L;case a.ViewMode.UploadNearQuota:return k;default:return B(e)}}(e),Z=void 0!==H&&e===a.ViewMode.Preview&&!u&&(!t||t&&!g),J={title:Q,bannerOptions:{type:u?"warning":"alert",text:u?Y:K,ctaText:Z?p:void 0,ctaOnClick:Z?H:void 0},firstChild:c.default.createElement(c.default.Fragment,null),primaryCtaText:R?D:_,primaryCtaOnClick:G,showCloseButton:u||t,onCloseButtonClick:e=>q(e),width:706,minWidth:706,maxWidth:1200};if(g&&y){const i=function(e,a,t,i,r,o,n){var s,d,u,c,g,v,m;const _={heading:null===(s=null==e?void 0:e.INDIVIDUAL)||void 0===s?void 0:s.advertised_space_short_gb_rounded,productFamily:(null===(d=null==e?void 0:e.INDIVIDUAL)||void 0===d?void 0:d.display_name)||"",eyebrow:n?(null===(u=null==e?void 0:e.INDIVIDUAL)||void 0===u?void 0:u.dropbox_brand_name)+" "+(null===(c=null==e?void 0:e.INDIVIDUAL)||void 0===c?void 0:c.display_name):null===(g=null==e?void 0:e.INDIVIDUAL)||void 0===g?void 0:g.display_name,eyebrowSubtle:!0,primaryCtaText:f,primaryOnClick:o,boldHeading:!0,fillMode:"outline",cardSizeVariant:"narrow-full-height",bullets:a?[]:[[l.CheckmarkLine,(null===(m=null===(v=null==e?void 0:e.INDIVIDUAL)||void 0===v?void 0:v.features)||void 0===m?void 0:m[0])||""]],alternativeToPricingSectionText:C,alternativeToPricingSectionTextSize:n?"medium":"large",stretchToFillHeight:!0,centerInFlexContainer:!0,headingMarginTopSmall:!0,allowHorizontalExpansion:!a};return t||(_.quotaIndicatorInfo={usedBytes:i,quotaBytes:r,subtextVerbForm:"imperative",meterColor:"red",textSize:"small"}),_}(y,t,u,I,O,W,R),s=function(e,a,t,i,o,s){var d,u,c,g,f,v,_,p,M,y,C,h,b,w,I,S,P,E,T,U,A,L,D,V,k;let O;if(s){const s={planSelectorName:l.PlanTypes.basicPlus500GB,monthlyBillingByMonth:(null===(d=null==e?void 0:e.BASIC500)||void 0===d?void 0:d.monthly_billing_by_month)||"",annualBillingByMonth:(null===(u=null==e?void 0:e.BASIC500)||void 0===u?void 0:u.annual_billing_by_month)||"",advertisedYearlyPriceSavingsPercentage:(null===(c=null==e?void 0:e.BASIC500)||void 0===c?void 0:c.advertised_yearly_price_savings_percentage)||"",includedTaxString:(null===(g=null==e?void 0:e.BASIC500)||void 0===g?void 0:g.included_tax_string)||"",countryCode:n.getCountryCodeFromIP()||"US"};O={productFamily:(null===(f=null==e?void 0:e.BASIC500)||void 0===f?void 0:f.display_name)||"",heading:(null===(v=null==e?void 0:e.BASIC500)||void 0===v?void 0:v.advertised_space_short_gb_rounded)||"",eyebrow:(null===(_=null==e?void 0:e.BASIC500)||void 0===_?void 0:_.display_name)||"",eyebrowSubtle:!0,primaryCtaText:x,primaryOnClick:o,boldHeading:!0,cardSizeVariant:"narrow-full-height",pricingInfo:{...s,priceTextSize:"medium"},bullets:[[l.CheckmarkLine,(null===(M=null===(p=null==e?void 0:e.BASIC500)||void 0===p?void 0:p.features)||void 0===M?void 0:M[0])||""]],stretchToFillHeight:!0,centerInFlexContainer:!0,headingMarginTopSmall:!0,isRecommended:!0,recommendationVariant:r.TrialCardRecommendationVariants.PILL,recommendationIcon:l.UpsellFill,recommendedText:N,allowHorizontalExpansion:!a},t||(O.quotaIndicatorInfo={usedBytes:i,quotaBytes:(null===(y=null==e?void 0:e.BASIC500)||void 0===y?void 0:y.quota_bytes)||0,subtextVerbForm:"present_participle",meterColor:"black",quotaString:(null===(C=null==e?void 0:e.BASIC500)||void 0===C?void 0:C.advertised_space_short_gb_rounded)||"",textSize:"small"})}else{const r={planSelectorName:l.PlanTypes.plus,monthlyBillingByMonth:(null===(h=null==e?void 0:e.PLUS)||void 0===h?void 0:h.monthly_billing_by_month)||"",annualBillingByMonth:(null===(b=null==e?void 0:e.PLUS)||void 0===b?void 0:b.annual_billing_by_month)||"",advertisedYearlyPriceSavingsPercentage:(null===(w=null==e?void 0:e.PLUS)||void 0===w?void 0:w.advertised_yearly_price_savings_percentage)||"",includedTaxString:(null===(I=null==e?void 0:e.PLUS)||void 0===I?void 0:I.included_tax_string)||"",countryCode:n.getCountryCodeFromIP()||"US"};O={productFamily:(null===(S=null==e?void 0:e.PLUS)||void 0===S?void 0:S.display_name)||"",heading:(null===(P=null==e?void 0:e.PLUS)||void 0===P?void 0:P.advertised_space_short_gb_rounded)||"",eyebrow:(null===(E=null==e?void 0:e.PLUS)||void 0===E?void 0:E.display_name)||"",eyebrowSubtle:!0,primaryCtaText:m((null===(T=null==e?void 0:e.PLUS)||void 0===T?void 0:T.advertised_space_short_gb_rounded)||""),primaryOnClick:o,boldHeading:!0,cardSizeVariant:"narrow-full-height",pricingInfo:r,bullets:[[l.CheckmarkLine,(null===(A=null===(U=null==e?void 0:e.PLUS)||void 0===U?void 0:U.features)||void 0===A?void 0:A[0])||""],[l.CheckmarkLine,(null===(D=null===(L=null==e?void 0:e.PLUS)||void 0===L?void 0:L.features)||void 0===D?void 0:D[1])||""]],stretchToFillHeight:!0,centerInFlexContainer:!0,headingMarginTopSmall:!0,allowHorizontalExpansion:!a},t||(O.quotaIndicatorInfo={usedBytes:i,quotaBytes:(null===(V=null==e?void 0:e.PLUS)||void 0===V?void 0:V.quota_bytes)||0,subtextVerbForm:"present_participle",meterColor:"black",quotaString:(null===(k=null==e?void 0:e.PLUS)||void 0===k?void 0:k.advertised_space_short_gb_rounded)||"",textSize:"small"})}return O}(y,t,u,I,z,R);t?(J.firstChild=c.default.createElement(o.TrialPlanCard,{...s}),J.secondChild=c.default.createElement(o.TrialPlanCard,{...i})):(J.firstChild=c.default.createElement(o.TrialPlanCard,{...i}),J.secondChild=c.default.createElement(o.TrialPlanCard,{...s})),J.centerMobileView=!0,e!==a.ViewMode.Preview||u?J.primaryCtaProps=t?{variant:"transparent"}:{variant:"outline"}:t?(J.primaryCtaProps={variant:"opacity",size:"xlarge",fullWidth:!0,style:{maxWidth:"384px"}},void 0!==H&&(J.secondaryCtaProps={variant:"transparent",size:"large"},J.secondaryCtaText=p,J.secondaryCtaOnClick=H)):(J.firstChild=v,J.secondChild=c.default.createElement(o.TrialPlanCard,{...s}),J.primaryCtaProps={variant:"outline"},J.secondaryCtaText=f,J.secondaryCtaOnClick=W,J.secondaryCtaProps={variant:"transparent"})}else J.firstChild=c.default.createElement(l.Text,null,M(l.format_bytes(i.intl,I),l.format_bytes(i.intl,O))),J.secondaryCtaText=f,J.secondaryCtaOnClick=W,J.primaryCtaProps={variant:"primary"};return J},a.getRestrictionsDateString=F,a.getViewMode=function(e){switch(e){case"share_modal":case"share_link":case"share_add_people":case"transfer":case"photos_copy_link":case"share_qr_code":case"shared_page_create_shared_folder":return a.ViewMode.Sharing;case"file_viewer":case"quick_view":case"standalone_preview":return a.ViewMode.Preview;case"upload":case"create":case"upload_menu_action_bar":return a.ViewMode.UploadOrCreate;default:return B(e)}},a.openPortableCheckoutModal=a=>{new Promise((function(a,t){e(["./c_checkout_components_portable_checkout_frame"],a,t)})).then((function(e){return e.portable_checkout_frame_esnext})).then((async({PortableCheckoutModal:e})=>{l.mountModal(c.default.createElement(i.Provider,{value:i.intl},c.default.createElement(s.QueryClientProvider,{client:l.queryClient},c.default.createElement(e,{...a}))),void 0,O)}))},a.useGetPlans=({planNames:e,revenueContentLocation:a,locale:t=n.getPageLocale(),countryOverride:i=n.getCountryOverride(),enabled:r=!0})=>{var o;const s=a,{isError:d,data:u,isLoading:g,error:f}=q.useQuery({apiArg:{plan_names:e,revenue_content_location:s,locale:t,country_override:i}},{enabled:r});return c.default.useEffect((()=>{var e,t;d?l.UDCL.logEvent("get_plans",{tags:{status:"failed",location:a,errorMessage:(null===(e=null==f?void 0:f.apiError)||void 0===e?void 0:e.summary)||"unknown error"}}):!g&&(null==u?void 0:u.apiData)&&(null===(t=u.apiData)||void 0===t?void 0:t.plans)&&Object.keys(u.apiData.plans).length&&l.UDCL.logEvent("get_plans",{tags:{status:"success",location:a}})}),[u,f,d,a,g]),{plansInfo:null===(o=null==u?void 0:u.apiData)||void 0===o?void 0:o.plans,isLoadingPlansInfo:g,plansInfoError:f}}}));
//# sourceMappingURL=c_over-quota_utils_use_get_plans.js-vflTclpCY.map

//# debugId=58522d98-f70c-3be4-885c-0a3ec1228be1