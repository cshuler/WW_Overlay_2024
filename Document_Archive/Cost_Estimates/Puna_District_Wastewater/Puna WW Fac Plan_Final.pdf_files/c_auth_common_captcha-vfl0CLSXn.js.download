!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="8ca26fa1-f1e9-36cc-96a7-b85e3c39e3da")}catch(e){}}();
define(["require","exports","./e_file_viewer_static_scl_page_file","react","./c_spectrum_util_raf_throttle","./c_dotlottie_common_chunk-B7OIQIGJ","./e_core_exception"],(function(e,t,a,n,c,r,o){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var i=s(n);let p,l=!1,u=!1;const h=()=>c.isSeleniumTest()||"undefined"!=typeof jest;function d(t){return new Promise((async(n,s)=>{var i;window.recaptchaOnloadCallback=function(){n(window.grecaptcha)};if("ON"===(null===(i=(await a.fetchExperiment("ps_infra_load_funcaptcha")).experiment)||void 0===i?void 0:i.variant)&&l&&new Promise((function(t,a){e(["./c_abuse_funcaptcha_modal"],t,a)})).then((async({loadFuncaptchaModal:e,recordFunCaptchaLoadingStats:a})=>{const n=performance.now();let c,r=null,o=!1;try{await e(u),o=!0}catch(e){r=e}finally{c=performance.now()}a("funcaptcha_modal_loading",c-n,o,u,r,t)})),h())n(g);else{const e=function(){const e={onload:"recaptchaOnloadCallback",render:"explicit",hl:c.getPageLocale().replace("_","-")};return new r.URI({scheme:"https",authority:"www.google.com",path:"/recaptcha/api.js",query:e}).toString()}(),t=window.CSP_SCRIPT_NONCE;if(!t)return o.reportException({err:new Error("CSP nonce not set"),severity:o.SEVERITY.CRITICAL,tags:["product-safety-infra","recaptcha"]}),void s();!function(e,t){const a=document.createElement("script");a.setAttribute("src",e),a.setAttribute("nonce",t),document.body.appendChild(a)}(e,t)}}))}const _={},m={};let f=0;const v=e=>{e.setAttribute("class","g-recaptcha-response"),e.setAttribute("name","g-recaptcha-response"),e.value=""},g={reset(e){const t=m[e].querySelector(".g-recaptcha-response");return v(t),!0},render(e,t,a){const n=f;f+=1,r.assert(null==e.querySelector(".g-recaptcha-response"),"can't render multiple recaptcha elements in same div");const c=document.createElement("textarea");return c.id=`g-recaptcha-response-${n}`,v(c),e.appendChild(c),m[n]=e,_[n]=()=>{const e="DUMMY-RESPONSE";return c.value=e,t.callback&&t.callback(e),e},n},execute:e=>Promise.resolve(_[e]())};let w=!1;(async()=>{var e;const t=await a.fetchExperiment("arkose_vanity_url_rollout");w="ON"===(null===(e=t.experiment)||void 0===e?void 0:e.variant)})();class C extends i.default.Component{constructor(e){super(e)}handle_captcha_errors(t,n){return t&&t.funcaptcha_verification_error&&a.notifyCaptchaConnectionError(),!(!t||!t.funcaptcha_response)&&(new Promise((function(t,a){e(["./c_abuse_funcaptcha_modal"],t,a)})).then((({openFuncaptchaModal:e})=>{e(this.props.email||"",n||this.props.source,(e=>{this.funcaptcha_response=e,this.props.onSubmit()}),w,this.props.onReady)})),!0)}clear_captcha_response(){this.funcaptcha_response=void 0}componentDidMount(){var e;const t=null!==(e=this.props.source)&&void 0!==e?e:"UNKNOWN";!function(e,t,n,c="UNKNOWN"){void 0!==t&&(l=t),void 0!==n&&(u=n),p||(p=e?new Promise(((e,t)=>{a.waitForTTI().then(e),setTimeout(e,2500)})).then((()=>d(c))):d(c))}(void 0,!0,w,t)}render(){return i.default.createElement("div",{ref:"container_div",className:a.cx({"recaptcha-v2-challenge-container":!0,"recaptcha-v2-challenge-container--invisible":!0})},i.default.createElement("div",{ref:"captcha_div",className:"recaptcha_v2_challenge"}))}submit(){this.clear_captcha_response(),this.props.onSubmit()}}C.displayName="CaptchaComponent";const y=a.requireCssWithComponent(C,["/static/metaserver/static/css/recaptcha-vflIN6j39.css"]);t.Captcha=y,t.clear_captcha_response=function(e){return e.getWrappedComponent().clear_captcha_response()},t.get_captcha_responses=function(e){const t=e.getWrappedComponent();return{"g-recaptcha-response":t.recaptcha_response,"funcaptcha-response":t.funcaptcha_response}},t.handle_captcha_errors=function(e,t,a){return e.getWrappedComponent().handle_captcha_errors(t,a)}}));
//# sourceMappingURL=c_auth_common_captcha.js-vfln1nbBw.map

//# debugId=8ca26fa1-f1e9-36cc-96a7-b85e3c39e3da