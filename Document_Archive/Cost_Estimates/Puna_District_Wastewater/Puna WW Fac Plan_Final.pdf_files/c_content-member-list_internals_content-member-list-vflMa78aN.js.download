!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="3f62b72a-8ce8-3209-abf3-d018e3a3914e")}catch(e){}}();
define(["exports","react","./c_core_i18n","./e_file_viewer_static_scl_page_file","./c_utils_dsx_dsx-react","./c_src_utils_initials","./c_src_bindings_provider","./e_data_modules_stormcrow","./c_api_v2_routes_team_insights_provider","./c_dig-illustrations_spot_bowl-empty","./e_core_exception","./c_dig-icons_assets_ui-icon_line_team","./c_dig-content-icons_icons_folder-shared-default-small","./c_dig-foundations__global_slot","./c_dig-icons_assets_ui-icon_line_no-fill"],(function(e,t,a,s,n,r,o,i,l,c,m,d,u,g,_){"use strict";function p(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var s=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var f=p(t);const E="phrasing",h="flow",b=f.createContext({permittedContentType:h}),M=e=>{switch(e){case E:return"span";case h:return"div"}},S=()=>{const e=f.useContext(b);return l._objectSpread2(l._objectSpread2({},e),{},{tagName:M(e.permittedContentType)})},v=e=>{const{permittedContentType:t}=S(),a=M(t),s=e||a,n=(e=>"span"===e?E:h)(s);return((e,t)=>{if(e===E&&t===h)throw new Error(`Cannot use flow content (${h}) within phrasing content (${E}) context. This may cause invalid HTML.`)})(t,n),{permittedContentType:n,tagName:s}},A=["children","division","tagName","className"],y=e=>{let{children:t,division:a,tagName:n,className:r}=e,o=l._objectWithoutProperties(e,A);const{permittedContentType:i,tagName:c}=v(n),m=n||c||"div",d={permittedContentType:i};return f.createElement(b.Provider,{value:d},f.createElement(m,l._objectSpread2(l._objectSpread2({},o),{},{className:s.classnames("dig-15ez4hg0_5-1-2",r)}),t,f.createElement(g.Slot,{className:"dig-15ez4hg1_5-1-2"},a)))};var I=s.createRuntimeFn({defaultClassName:"dig-1nspl2n9_5-1-2",variantClassNames:{shouldDisplayToFit:{true:"dig-1nspl2na_5-1-2"},cellAlignX:{start:"dig-1nspl2nb_5-1-2",center:"dig-1nspl2nc_5-1-2",end:"dig-1nspl2nd_5-1-2"},cellAlignY:{start:"dig-1nspl2ne_5-1-2",center:"dig-1nspl2nf_5-1-2",end:"dig-1nspl2ng_5-1-2"}},defaultVariants:{},compoundVariants:[]});const C="start",N="center",R="end",L=[C,N,R];var T=s.createRuntimeFn({defaultClassName:"dig-18lvhyf3_5-1-2",variantClassNames:{display:{"inline-grid":"dig-18lvhyf4_5-1-2",grid:"dig-18lvhyf5_5-1-2"},grid:{single:"dig-18lvhyf6_5-1-2",nineSlice:"dig-18lvhyf7_5-1-2",quadrants:"dig-18lvhyf8_5-1-2",horizontalSplit:"dig-18lvhyf9_5-1-2"}},defaultVariants:{},compoundVariants:[]});const w=["tagName","children","grid","display","className"],P=e=>{let{tagName:t,children:a,grid:n="quadrants",display:r="grid",className:o}=e,i=l._objectWithoutProperties(e,w);const{permittedContentType:c,tagName:m}=v(t),d=t||m||"div",u={permittedContentType:c};return f.createElement(b.Provider,{value:u},f.createElement(d,l._objectSpread2(l._objectSpread2({},i),{},{className:s.classnames(T({grid:n,display:r}),o)}),a))},F=["children","cell","className","style"],x=Object.assign(P,{Cell:e=>{let{children:t,cell:a,className:n,style:r}=e,o=l._objectWithoutProperties(e,F);const{tagName:i}=S(),c=i;return f.createElement(c,l._objectSpread2(l._objectSpread2({},o),{},{className:s.classnames("dig-18lvhyf2_5-1-2",n),style:l._objectSpread2(l._objectSpread2({},r),s.assignInlineVars({"var(--dig-18lvhyf1_5-1-2)":a}))}),t)}}),D=["children","stickerAnchorX","stickerAnchorY","cellAlignX","cellAlignY","stickerOffsetX","stickerOffsetY","cell","cellOffsetX","cellOffsetY","shouldDisplayToFit","className","style"],O={[C]:"-50%",[N]:"0%",[R]:"50%"},k={[C]:"0%",[N]:"50%",[R]:"100%"};function B(e){return L.includes(e)}const j=Object.assign(y,{Sticker:function(e){let{children:t,stickerAnchorX:a="center",stickerAnchorY:n="center",cellAlignX:r="center",cellAlignY:o="center",stickerOffsetX:i="0px",stickerOffsetY:c="0px",cell:m,cellOffsetX:d="0%",cellOffsetY:u="0%",shouldDisplayToFit:g=!1,className:_,style:p}=e,E=l._objectWithoutProperties(e,D);const{tagName:h}=S(),b=B(a)?k[a]:a,M=B(n)?k[n]:n,v=h;return f.createElement(x.Cell,{cell:m,className:"dig-1nspl2n2_5-1-2",style:l._objectSpread2({},s.assignInlineVars({"var(--dig-1nspl2n0_5-1-2)":d,"var(--dig-1nspl2n1_5-1-2)":u}))},f.createElement(v,l._objectSpread2(l._objectSpread2({},E),{},{className:s.classnames(I({cellAlignX:r,cellAlignY:o,shouldDisplayToFit:g}),_),style:l._objectSpread2(l._objectSpread2({},p),s.assignInlineVars({"var(--dig-1nspl2n3_5-1-2)":O[r],"var(--dig-1nspl2n4_5-1-2)":O[o],"var(--dig-1nspl2n5_5-1-2)":i,"var(--dig-1nspl2n6_5-1-2)":c,"var(--dig-1nspl2n7_5-1-2)":b,"var(--dig-1nspl2n8_5-1-2)":M}))}),t))}}),$=e=>{const t=U(e);return f.useMemo((()=>{if(!t||t.isLoading)return{isLoading:!0};if(t.isError)return{isError:!0,isLoading:!1,error:t.error.appError};{const e={};return Object.values(t.data.apiData).forEach((t=>{e[t.account_id]=t})),{isError:!1,isLoading:!1,output:e}}}),[t])},U=e=>s.getAccountBatchPackage.useQuery({apiArg:{account_ids:e}},{enabled:e.length>0,staleTime:3e5,keepPreviousData:!0}),H=(e,t)=>{const a=Z(e,t),{isNonUserRelativeContext:n}=s.useSharingApiContext();return f.default.useMemo((()=>n?{isLoading:!1,isError:!1,output:{links:[],has_more:!1}}:!a||a.isLoading?{isLoading:!0}:a.isError?{isError:!0,isLoading:!1,error:a.error.appError}:{isError:!1,isLoading:!1,output:a.data.apiData}),[a,n])},Z=(e,t)=>{const{isNonUserRelativeContext:a}=s.useSharingApiContext(),n=s.getContentIdOrPathFromObjectIdentifier(e);return s.sharingListSharedLinksPackage.useQuery({apiArg:{path:n,direct_only:!0}},{staleTime:3e5,enabled:!a,refetchOnMount:t&&"always"})};const W={$props:n.atom({onClick:()=>{},onView:()=>{},oid:{".tag":"file",fileId:""},disableRightChevron:!1,backgroundColor:void 0,objectMetadataResult:{isLoading:!0},objectMembersResult:{isLoading:!0,isFirstPageLoaded:!1},listSharedLinksResult:{isLoading:!0},seenStateInfoResult:{isLoading:!0},accountDataBatchResult:{isLoading:!0},intl:a.createIntl({locale:"en"})})},{StoreProvider:G,useStore:Y}=n.defineStoreProvider((e=>({$props:e})),W),V=e=>{const t=a.useIntl(),{user:n}=s.useActiveUser(),o=r.useSharingObjectMetadata(e.oid.fileId),i=s.useObjectMembers(e.oid),l=H(e.oid),c=s.useSeenStateInfo(e.oid),m=((e,t)=>{const a=[];return e.isFirstPageLoaded&&e.isFirstPageOnly?(e.firstPage.users.map((e=>a.push(e.user.account_id))),0===e.firstPage.users.length&&t&&a.push(t.account_id),a):[]})(i,n),d=$(m);return f.createElement(G,{intl:t,objectMetadataResult:o,objectMembersResult:i,listSharedLinksResult:l,seenStateInfoResult:c,accountDataBatchResult:d,...e})};s.injectInternalStyle("/static/metaserver/static/js/sharing/sharing-sdk/legos/content-member-facepile-button/internals/button.module.out-vflMXkwFh.css",(e=>"._base-button_1ih7a_1{background:var(--dig-color__background__base);border:1px solid var(--dig-color__border__subtle);border-radius:var(--dig-radius__large);cursor:pointer;width:100%;word-break:break-word}._base-button_1ih7a_1:focus-visible{box-shadow:var(--dig-utilities__boxshadow__focus-ring)!important}._base-button_1ih7a_1:hover:not(:disabled){background:var(--dig-color__secondary__surface)}._base-button_1ih7a_1:active:not(:disabled){background:var(--dig-color__secondary__surface--state-1)}._content-member-facepile-button_1ih7a_22{background-color:var(--button-bg-color,var(--dig-color__opacity__surface--state-1));border:0;border-radius:17px;color:var(--dig-color__text__subtle);height:34px;margin-right:8px}._content-member-facepile-button-facepile_1ih7a_31{padding-left:12px}._content-member-facepile-button-facepile-other-item_1ih7a_35>*>div{background:var(--dig-color__secondary__surface--state-1)}._content-member-facepile-button-icon-container_1ih7a_40{align-items:center;display:flex;height:100%;justify-content:center}"));const z="_base-button_1ih7a_1",q="_content-member-facepile-button_1ih7a_22",K="_content-member-facepile-button-facepile_1ih7a_31",J="_content-member-facepile-button-facepile-other-item_1ih7a_35",Q="_content-member-facepile-button-icon-container_1ih7a_40",X=(e,t)=>t?e.toLocaleUpperCase(t):e.toUpperCase(),ee=(e,t,a)=>{const n=r.getUserInitials(t.name.display_name,null!=a?a:"en");return f.default.createElement(s.Facepile.Item,{key:e,alt:t.name.display_name,cursor:"pointer","aria-label":t.name.display_name,src:t.profile_photo_url,"data-testid":"content-member-avatar"},X(n,a))},te=(e,t,a)=>{const n=r.getUserInitials(t.user.display_name,null!=a?a:"en");return f.default.createElement(s.Facepile.Item,{key:e,cursor:"pointer","aria-label":t.user.display_name+" "+t.user.email,"data-testid":"content-member-avatar"},X(n,a))},ae=(e,t,a)=>{var n,o;const i="email"===t.invitee[".tag"]?t.invitee.email:null===(n=t.user)||void 0===n?void 0:n.display_name,l=r.getUserInitials(null!=i?i:"",null!=a?a:"en");return f.default.createElement(s.Facepile.Item,{key:e,cursor:"pointer","aria-label":i,alt:null===(o=t.user)||void 0===o?void 0:o.display_name,"data-testid":"content-member-avatar"},X(l,a))},se=(e,t,a)=>"team"===t.group.group_type[".tag"]?f.default.createElement(s.Facepile.Item,{key:e,cursor:"pointer",alt:t.group.group_name,"aria-label":t.group.group_name,"data-testid":"content-member-avatar"},f.default.createElement(s.UIIcon,{src:d.TeamLine,role:"presentation"})):f.default.createElement(s.Facepile.Item,{key:e,cursor:"pointer",alt:t.group.group_name,"aria-label":t.group.group_name,"data-testid":"content-member-avatar"},X(r.getGroupInitials(t.group.group_name),a)),ne=({disableRightChevron:e})=>f.default.createElement("div",{className:K,style:{paddingLeft:e?"12px":"8px",paddingRight:e?"6px":"0px"}},f.default.createElement(s.Facepile,{size:"xsmall",isInteractive:!1,interactivity:"Avatar",hasLegacySpacing:!0},new Array(3).fill(0).map(((e,t)=>(e=>f.default.createElement(s.Facepile.Item,{key:e,"data-testid":"skeleton-avatar"},f.default.createElement(s.Skeleton.Avatar,{size:"xsmall"})))(t))))),re=e=>{const{accountData:t,objectMembers:n,disableRightChevron:r}=e,{user:o}=s.useActiveUser(),i=a.useIntl().locale;let l=0,c=[];const{groups:m,users:d,invitees:u}=n,g=o?t[o.account_id]:void 0;var _;return g?c.push(ee(l++,g,i)):o&&c.push(te(l++,(e=>({user:{account_id:e.account_id,email:e.email,display_name:e.display_name,same_team:!0,disabled:!1}}))(o),i)),m.forEach((e=>{c.push(se(l++,e,i))})),d.forEach((e=>{if(o&&e.user.account_id===o.account_id)return;const a=t[e.user.account_id];if(a){const e=ee(l++,a,i);c.push(e)}else{const t=te(l++,e,i);c.push(t)}})),u.forEach((e=>{const t=ae(l++,e,i);c.push(t)})),c.length>3&&(c=c.slice(0,2),c.push((_=l++,f.default.createElement(s.Facepile.Item,{className:J,key:_,cursor:"pointer",colorPalette:{background:"#00000000",foreground:"var(--dig-color__text__base)"},"data-testid":"content-member-avatar"},f.default.createElement(s.UIIcon,{src:s.PersonMultipleLine,role:"presentation"}))))),f.default.createElement("div",{className:K,style:{paddingRight:r?"6px":"0px"}},f.default.createElement(s.Facepile,{size:"xsmall",isInteractive:!1,interactivity:"Avatar",hasLegacySpacing:!0},c))};re.displayName="ContentMemberFacepileButtonFacepile";const oe=({children:e,accountData:t,objectMembers:n,objectMetadata:r})=>{const i=a.useIntl(),{user:l}=s.useActiveUser(),c=o.usePlatform()===o.Platforms.DESKTOP,m=f.default.useMemo((()=>{if(s.getIsNonSharedFolder(r)&&s.getParentFolderName(r))return((e,t)=>e.formatMessage({id:"9P0o7J",defaultMessage:"All users with access to <b>{parentFolderName}</b> have access"},{parentFolderName:t,b:e=>f.default.createElement("b",null,e)}))(i,s.getParentFolderName(r));let e=!1,a=[];const{groups:o,users:c,invitees:m}=n;return c.forEach((e=>{if(!l||e.user.account_id!==l.account_id)if(Object.keys(t).length>0){const s=t[e.user.account_id];s&&a.push(s.name.display_name)}else a.push(e.user.display_name.split(" ")[0])})),o.forEach((e=>{var t;a.push(((e,t,a)=>"team"===a?e.formatMessage({id:"dQzOmZ",defaultMessage:"Everyone at {team_name}"},{team_name:t.replace(/^Everyone at /,"")}):t)(i,e.group.group_name,null===(t=e.group.group_type)||void 0===t?void 0:t[".tag"]))})),m.forEach((t=>{var s,n;"email"===t.invitee[".tag"]?a.push(null!==(n=null===(s=t.user)||void 0===s?void 0:s.display_name)&&void 0!==n?n:t.invitee.email):e=!0})),a.length>3&&(e=!0,a=a.slice(0,3)),0===a.length?e?(e=>e.formatMessage({id:"EHtbiI",defaultMessage:"Others have access"}))(i):(e=>e.formatMessage({id:"oW+UlP",defaultMessage:"Only you have access"}))(i):e?((e,t)=>1===t.length?e.formatMessage({id:"kK5uwj",defaultMessage:"{member} and others have access"},{member:t[0]}):e.formatMessage({id:"jf6sct",defaultMessage:"{listOfMembers}, and others have access"},{listOfMembers:t.join(", ")}))(i,a):((e,t)=>1===t.length?e.formatMessage({id:"eRyaP6",defaultMessage:"{memberName} has access"},{memberName:t[0]}):2===t.length?e.formatMessage({id:"xi7j54",defaultMessage:"{firstMember} and {secondMember} have access"},{firstMember:t[0],secondMember:t[1]}):e.formatMessage({id:"seGTYd",defaultMessage:"{allButLastMember}, and {lastMember} have access"},{allButLastMember:t.slice(0,-1).join(", "),lastMember:t[t.length-1]}))(i,a)}),[r,n,i,l,t]);return f.default.createElement(s.Tooltip,{title:m,placement:"bottom",maxWidth:160,contentBreak:c?"word":void 0},f.default.createElement("div",null,e))};oe.displayName="ContentMemberFacepileButtonTooltip";const ie=[{action:{".tag":"make_editor"},allow:!1},{action:{".tag":"make_owner"},allow:!1},{action:{".tag":"make_viewer"},allow:!1},{action:{".tag":"make_viewer_no_comment"},allow:!1},{action:{".tag":"remove"},allow:!1}],le=()=>{const e=Y(),{disableRightChevron:t}=n.useAtom(e.$props);return f.default.createElement(s.StylelessButton,{"data-testid":"content-member-facepile-button-loading",className:s.cx(z,q)},f.default.createElement(ne,{disableRightChevron:t}),!0!==t&&f.default.createElement(s.Box,{className:Q},f.default.createElement(s.UIIcon,{size:"small",src:s.ChevronRightLine})))},ce=()=>{const e=Y(),t=n.useAtom(e.$props),{objectMetadataResult:a,objectMembersResult:r,listSharedLinksResult:o,seenStateInfoResult:i,accountDataBatchResult:l,onView:c}=t,m=f.default.useRef(!1),d=a.isLoading,u=!a.isLoading&&!a.isError,g=r.isLoading,_=r.isFirstPageLoaded&&r.isFirstPageOnly,p=!o.isLoading&&!o.isError,E=p?o.output:void 0,h=o.isLoading,b=i.isLoading||i.isError?void 0:i.output,M=s.getLinkSeenStateInfo(b,E),S=(v=M)?v.map((e=>{const{seen_state_user:{user_id:t,display_name:a,email:s,sharing_access_type:n,same_team:r},when_last_seen:o}=e;let i={".tag":"viewer"};return n&&"edit_link_access"===n[".tag"]&&(i={".tag":"editor"}),{access_type:i,user:{account_id:t,display_name:a,email:s||"",same_team:r,disabled:!1},is_inherited:!1,permissions:ie,time_last_seen:o?new Date(1e3*o).toString():void 0}})):[];var v;const A=(e=>{if(!e)return{};const t={};return e.forEach((e=>{const{seen_state_user:{user_id:a,display_name:s,email:n,photo_circle_url:r,same_team:o}}=e,i={account_id:a,name:{given_name:"",surname:"",familiar_name:"",display_name:s,abbreviated_name:""},email:n||"",email_verified:!0,profile_photo_url:r,is_teammate:o,disabled:!1};t[a]=i})),t})(M),y=!l.isLoading&&!l.isError,I=_&&u&&p,C=g||d||h;if(f.default.useEffect((()=>{!m.current&&I&&(m.current=!0,c())}),[I,c]),I){const e={...r.firstPage};e.users=[...e.users,...S];const t=y?{...l.output,...A}:A;return f.default.createElement(me,{objectMetadata:a.output,objectMembers:e,accountData:t})}return C?f.default.createElement(le,null):null};ce.displayName="ContentMemberFacepileButtonWithStore";const me=({objectMembers:e,accountData:t,objectMetadata:r})=>{const o=Y(),{onClick:i,disableRightChevron:l,backgroundColor:c}=n.useAtom(o.$props);return f.default.createElement(oe,{objectMembers:e,accountData:t,objectMetadata:r},f.default.createElement(s.StylelessButton,{className:s.cx(z,q),style:{"--button-bg-color":c||"var(--dig-color__opacity__surface--state-1)"},onClick:i,"data-uxa-log":"content_member_facepile_button","data-testid":"content-member-facepile-button","aria-label":a.intl.formatMessage({id:"B+lBmk",defaultMessage:"Manage access"}),"aria-controls":"sm24-access-management-member-list"},f.default.createElement(re,{objectMembers:e,accountData:t,disableRightChevron:l}),!0!==l&&f.default.createElement(s.Box,{className:Q},f.default.createElement(s.UIIcon,{size:"small",src:s.ChevronRightLine}))))};me.displayName="ContentMemberFacepileButtonInner";const de=e=>f.default.createElement(a.Provider,{value:a.intl},f.default.createElement(V,{...e},f.default.createElement(ce,null)));var ue;function ge(e){return{class:"share",action:"view",object:"manage_access",properties:e}}de.displayName="ContentMemberFacepileButton",function(e){e.SUCCESS="SUCCESS",e.ERROR="ERROR",e.FATAL="FATAL"}(ue||(ue={}));const _e=["altText","inverse"];var pe=e=>{let{altText:t,inverse:a}=e,n=l._objectWithoutProperties(e,_e);const{getInverseProps:r}=s.useTheme(),{className:o}=r(),i="dig-Illustration dig-13or4mr1_4-5-0 dig-Illustration-spot"+(a?o+" dig-Illustration--inverse":"");return f.createElement("svg",l._objectSpread2(l._objectSpread2({role:"presentation"},n),{},{className:i,viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),f.createElement("title",null,t),f.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},f.createElement("path",{d:"M136.608 219.783c-.342.342-9.166.718-21.52.916-7.467.12-15.13.436-17.029.703-3.389.477-9.153 2.017-17.153 4.585-6.83 2.192-12.763 6.926-12.763 10.183 0 1.285.948 2.347 1.922 2.153.335-.068 1.23.205 1.99.604.76.398 4.653 1.698 8.653 2.888 4 1.189 7.935 2.426 8.745 2.748.81.322 3.957.95 6.995 1.396 3.038.447 6.766 1.109 8.285 1.472 1.519.363 6.179.859 10.355 1.102 4.177.243 11.323.694 15.879 1.001 4.557.307 13.877.571 20.712.585 8.356.017 13.439.225 15.519.636 3.939.776 5.306.256 6.821-2.6 1.333-2.514 2.347-3.199 6.052-4.092 3.643-.877 11.22-.573 18.783.754 2.912.511 6.743.935 8.515.941 3.191.012 4.857.217 12.887 1.585 2.278.388 7.456 1.117 11.507 1.621 10.391 1.293 17.48 3.696 23.671 8.026 2.213 1.547 4.645 2.044 10.21 2.082 2.18.015 5.079.239 6.443.498 1.363.258 8.044.572 14.844.696 6.801.124 12.567.351 12.814.503.247.153 5.245.251 11.108.218 7.33-.041 12.921.188 17.904.731 6.665.728 7.291.732 7.824.048.495-.635 1.152-.691 4.488-.383 7.189.664 11.632-.544 23.937-6.505 6.357-3.08 6.87-3.434 10.816-7.446 6.363-6.469 6.816-7.896 3.777-11.88-2.419-3.171-5.583-5.312-8.328-5.636-5.711-.673-60.96-3.99-80.826-4.853-12.024-.522-24.348-1.154-27.385-1.404-3.038-.251-9.05-.661-13.36-.913-4.309-.25-8.81-.59-10.001-.753-2.464-.337-2.424-.387-2.867 3.573-.354 3.163-2.526 7.021-4.839 8.594-1.379.938-2.011 1.065-4.386.882-3.063-.236-6.457-1.712-6.84-2.975-.136-.447-.29-2.946-.343-5.552-.052-2.607-.258-4.839-.456-4.962-.352-.218-14.986-.809-35.019-1.415l-9.993-.302.242 1.567c.133.861-.049 2.39-.405 3.397-.614 1.734-.791 1.862-3.366 2.419-2.754.595-6.588.424-8.051-.358-1.155-.618-2.849-3.547-3.16-5.464l-.269-1.649-11.603-.049c-6.381-.027-11.662.011-11.736.084Z",fill:"#14C8EB"}),f.createElement("path",{d:"M220.118 164.552c-1.416 1.416-.008 5.05 2.264 5.842 3.399 1.185 5.468.37 5.468-2.153 0-2.364-2.291-4.241-5.176-4.241-1.102 0-2.252.249-2.556.552Zm4.555.86c2.176 1.55 1.652 4.571-.793 4.571-1.146 0-2.933-1.981-2.933-3.25 0-.898 1.16-2.273 1.917-2.273.26 0 1.073.429 1.809.952Zm-15.348 2.998c-2.979 1.606-.271 4.964 3.809 4.723 2.868-.169 5.32 2.581 7.969 8.937.709 1.702.706 1.722-.225 1.224-.52-.279-1.702-.567-2.625-.642a37.632 37.632 0 0 1-3.431-.475c-1.47-.285-1.932-.17-2.876.718-1.563 1.468-1.425 2.99.44 4.854 1.799 1.799 2.38 1.89 3.914.613.849-.707 1.117-1.402 1.151-2.977.05-2.325.538-2.534 3.264-1.394 1.124.469 1.655 1.034 1.842 1.956.145.713.463 1.932.707 2.709.626 1.993.553 3.217-.233 3.869-.52.431-.707 1.959-.806 6.561l-.128 5.998-4.279 1.078c-3.882.978-4.608 1.345-7.825 3.954-1.949 1.58-3.782 3.191-4.072 3.578a40.945 40.945 0 0 1-1.507 1.822c-.991 1.133-1.06 1.916-.193 2.205.261.087 2.219-1.671 4.351-3.906 4.932-5.172 6.062-5.986 9.409-6.786 4.149-.99 4.369-.947 4.063.81-.144.823-.707 2.842-1.252 4.488-.857 2.588-.991 4.044-.993 10.816-.003 7.392.055 7.904 1.039 9.284 1.448 2.031 4.462 3.114 7.726 2.777 3.431-.354 5.138-1.466 6.672-4.344 1.703-3.199 1.934-4.452 1.886-10.263-.045-5.46-.716-7.418-4.039-11.769-1.241-1.627-1.683-2.704-1.844-4.498-.867-9.639-1.045-10.639-2.041-11.449-.544-.443-1.484-.806-2.089-.806-.965 0-1.099-.211-1.093-1.726.008-1.971 1.062-6.75 1.89-8.567.492-1.08.743-1.191 2.111-.934 2.852.535 4.598-2.579 2.333-4.165-1.554-1.089-2.493-.872-3.833.884-1.233 1.617-3.393 7.783-3.47 9.906-.035.98-.108.917-.494-.427-.249-.867-.593-4.785-.764-8.707-.221-5.066-.478-7.186-.886-7.321-.437-.145-.577 1.013-.58 4.795l-.004 4.986-1.372-2.391c-1.218-2.124-4.999-5.663-6.05-5.663-.217 0-.394-.586-.394-1.301 0-1.379-1.411-3.009-2.992-3.456-.506-.144-1.489.046-2.186.422Zm3.346 1.131c.276.515.369 1.355.207 1.867-.455 1.436-3.15 1.053-3.366-.478-.283-2.003 2.238-3.111 3.159-1.389Zm19.443 7.621c.46.46-.135 1.469-1.324 2.248-1.627 1.067-2.215.425-1.076-1.174.913-1.283 1.797-1.678 2.4-1.074Zm-16.235 6.393c.601.724.305 2.771-.549 3.8-.676.816-2.516.719-2.849-.15-.497-1.296-.299-2.299.659-3.327 1.097-1.177 1.947-1.278 2.739-.323Zm11.051 11.044 2.071.313.103 5.796.103 5.795 2.236 3.257c3.443 5.016 3.928 6.685 3.683 12.659-.189 4.568-.351 5.326-1.711 8.006-.834 1.643-2.008 3.231-2.637 3.568-2.686 1.437-6.559.071-8.074-2.849-.723-1.395-.874-2.811-.933-8.745-.062-6.189.053-7.418.91-9.759 1.15-3.142 1.831-13.434 1.125-16.98-.385-1.929-.351-2.125.31-1.772.409.219 1.675.539 2.814.711Zm5.983 10.339c0 .267.155.506.345.531 1.226.166 4.492.347 10.931.607 8.407.339 12.441.859 17.03 2.195 5.885 1.714 9.435 4.137 9.435 6.442 0 .485.282 1.44.625 2.124.345.684.761 2.267.925 3.519.281 2.145.965 3.223 1.742 2.743.399-.247.081-4.095-.586-7.09-1.054-4.73-6.5-8.094-16.336-10.093-5.298-1.077-24.111-1.84-24.111-.978Zm-70.375 2.927c-3.543 1.241-4.12 4.647-2.533 14.933.248 1.611 2.013 3.585 3.87 4.329 1.702.681 9.003.014 10.137-.927.783-.65.93-1.435 1.047-5.589.184-6.458-.328-9.563-1.835-11.136-1.902-1.986-7.295-2.798-10.686-1.61Zm6.766.313c1.022.004 1.915.405 2.738 1.228l1.222 1.221-1.127.433c-2.016.775-11.023-.419-11.023-1.461 0-.792 4.041-1.915 5.753-1.598.506.094 1.603.174 2.437.177Zm136.099 2.049c-3.668.451-5.489.965-8.972 2.534-5.127 2.309-6.987 3.685-9.657 7.145-1.628 2.11-1.866 2.665-1.392 3.237.315.379.747.69.961.69.213 0 1.862-1.536 3.663-3.412 2.474-2.576 4.124-3.825 6.739-5.1 5.876-2.866 6.506-2.996 14.354-2.974 9.574.027 31.69 1.174 33.426 1.734 5.941 1.914 6.559 2.316 8.849 5.752 1.213 1.82 2.609 4.293 3.101 5.496.94 2.295 1.048 2.393 1.969 1.808 1.267-.804-1.761-7.824-4.712-10.924-1.732-1.819-11.101-4.351-18.643-5.037-1.645-.15-3.923-.36-5.062-.466-1.14-.106-5.385-.311-9.436-.454-4.05-.143-8.089-.336-8.975-.428-.886-.092-3.682.087-6.213.399Zm-140.711 1.446c1.082.339 3.486.675 5.342.746l3.375.129.091 5.915c.116 7.589-.045 7.885-4.539 8.327-3.278.324-5.297.059-4.868-.637.128-.206-.09-.642-.483-.969-1.637-1.358-2.16-3.35-2.391-9.117-.22-5.477-.192-5.712.638-5.369.477.197 1.753.636 2.835.975Zm98.289 2.61c.877 1.075 1.916 2.733 2.309 3.682.636 1.536.894 1.726 2.349 1.726.899 0 1.634-.142 1.634-.315 0-1.308-2.172-4.277-4.063-5.554-3.264-2.204-4.236-2.003-2.229.461Zm160.707 13.759c-6.483 1.463-8.45 2.811-14.339 9.829-2.125 2.531-4.646 5.431-5.605 6.443-1.881 1.988-4.62 6.037-10.867 16.063-8.484 13.615-12.208 16.067-29.752 19.584a60.29 60.29 0 0 1-5.293.761c-1.497.135-4.379.438-6.404.672a183.82 183.82 0 0 1-7.824.688c-3.732.237-6.421.574-11.276 1.414-2.151.373-3.553 1.729-4.888 4.727-2.206 4.957-2.514 7.186-2.375 17.195.128 9.272.135 9.328 1.49 12.076 1.615 3.279 5.7 9.379 8.025 11.987a110.62 110.62 0 0 1 3.492 4.18c1.685 2.134 9.145 8.517 13.082 11.193.91.619 1.929 1.395 2.263 1.726.335.33.819.601 1.076.601.412 0-.358 1.553-4.451 8.975-.558 1.012-1.8 3.29-2.761 5.062-.96 1.772-2.232 3.995-2.826 4.939-.595.944-1.081 1.81-1.081 1.923 0 .114-.756 1.515-1.68 3.116-.925 1.6-2.447 4.256-3.383 5.901a1975.49 1975.49 0 0 1-3.553 6.214c-6.731 11.717-9.334 16.375-9.334 16.706 0 .924-1.219 1.967-1.965 1.681-.735-.282-.728-.392.103-1.559.492-.69 1.295-2.274 1.787-3.52.491-1.246 1.32-2.99 1.842-3.875.522-.885 2.177-4.509 3.677-8.053 1.501-3.544 4.329-9.861 6.285-14.037 1.956-4.177 4.078-8.734 4.715-10.126.637-1.392 2.605-5.61 4.371-9.372 2.909-6.198 3.143-6.908 2.493-7.559-.65-.651-.766-.591-1.229.628-.281.74-1.145 2.691-1.92 4.336-2.944 6.252-4.902 10.443-6.021 12.888-1.034 2.259-2.298 4.968-6.765 14.498-2.289 4.885-3.231 7.073-3.231 7.512 0 .236-.29.67-.645.965-.355.294-.786 1.096-.958 1.782-.172.686-.909 2.49-1.638 4.008a120.056 120.056 0 0 0-2.532 5.754 937.766 937.766 0 0 1-1.727 4.25c-.445 1.075-.389 1.359.383 1.953.497.383 1.509.645 2.248.583 1.446-.122.333 1.703 15.366-25.197 3.461-6.191 5.101-9.098 8.833-15.648a632.7 632.7 0 0 0 3.238-5.753 299.82 299.82 0 0 1 3.159-5.516c1.039-1.768 1.888-3.533 1.888-3.923 0-.389-.673-1.073-1.495-1.52-.823-.447-3.049-2.044-4.948-3.55a804.668 804.668 0 0 0-5.753-4.519c-4.362-3.377-13.17-13.57-14.381-16.642-.15-.38-.813-1.519-1.474-2.531-2.442-3.739-2.418-3.586-2.226-14.083.14-7.635.368-10.549 1.017-12.957.491-1.824 1.085-3.107 1.438-3.107.331 0 .933-.331 1.337-.735.95-.95 4.744-1.951 8.536-2.252 20.583-1.635 29.121-3.136 39.581-6.955 6.114-2.232 8.844-4.946 15.927-15.832.577-.886 1.681-2.543 2.455-3.682 3.048-4.491 4.768-7.214 5.662-8.964.514-1.007 2.512-3.781 4.44-6.166a620.193 620.193 0 0 0 4.779-5.974c4.829-6.203 9.561-8.057 20.587-8.065 5.227-.004 6.195.134 10.586 1.511 6.974 2.187 12.085 4.79 14.958 7.617 1.327 1.306 2.558 2.829 2.733 3.384.398 1.252.996 1.3 1.309.103.325-1.244-1.856-4.549-4.325-6.553-2.81-2.281-5.674-3.623-12.604-5.907-5.575-1.837-6.376-1.98-11.737-2.101-4.475-.1-6.673.079-9.895.805Zm-379.936 3.721c-.002.185-.78.736-1.729 1.225-.949.489-2.406 1.598-3.236 2.463-2.01 2.093-2.294 5.05-1.006 10.474.511 2.152 1.34 6.812 1.842 10.356.503 3.544 1.447 8.514 2.098 11.046a297.701 297.701 0 0 1 2.271 9.665c.598 2.785 1.52 6.306 2.05 7.824 1.115 3.201 2.277 8.3 2.57 11.277.112 1.139.498 2.899.857 3.912.36 1.012.78 2.469.934 3.238.353 1.761 3.942 8.89 5.51 10.947.652.853 1.184 1.789 1.184 2.081 0 .883 3.157 4.09 5.207 5.288 2.504 1.463 4.727 2.081 9.52 2.645 2.152.252 4.534.547 5.294.654.759.107 3.4.224 5.868.26 4.316.062 4.487.103 4.487 1.091 0 .565-.135 1.163-.3 1.329-.29.288-1.953 4.827-3.91 10.668-.508 1.519-1.095 3.176-1.302 3.682-.208.506-.59 1.542-.85 2.301-.905 2.654-3.402 9.673-3.765 10.586a72.791 72.791 0 0 0-.919 2.531c-.304.886-.738 2.025-.965 2.532-.226.506-.811 2.163-1.3 3.682-.489 1.519-1.643 4.832-2.564 7.364-3.235 8.889-8.068 23.807-8.177 25.243-.167 2.18 1.065 1.844 2.272-.62 1.18-2.411 1.394-2.272.35.228-.767 1.836-.618 2.994.385 2.994.548 0 2.203-3.122 4.148-7.824.366-.886 1.303-3.061 2.082-4.833.778-1.772 2.441-5.811 3.695-8.975 1.253-3.164 3.672-9.17 5.373-13.347 1.702-4.177 3.768-9.355 4.592-11.507.825-2.151 2.575-6.461 3.89-9.577 1.315-3.115 2.47-6.015 2.566-6.443.272-1.205 4.337-10.776 4.83-11.371.278-.335 2.581-.566 6.321-.634 3.235-.058 7.122-.179 8.638-.269 1.516-.089 5.655-.313 9.199-.496a889.42 889.42 0 0 0 8.054-.442c.886-.059 4.511-.259 8.055-.443 3.544-.184 6.598-.429 6.787-.544.572-.349 1.126 1.438 4.224 13.65 1.637 6.455 3.51 13.704 4.161 16.109a5226.94 5226.94 0 0 1 1.371 5.063c.102.38.524 2.037.939 3.682.796 3.166 1.505 5.842 2.744 10.356a1375.242 1375.242 0 0 1 4.461 16.799c2.625 10.132 3.555 13.597 4.507 16.799.527 1.772.86 3.481.739 3.797-.469 1.236-1.174.46-1.882-2.071-.407-1.456-1.527-5.132-2.488-8.169-8.761-27.679-10.16-32.053-11.264-35.21a320.568 320.568 0 0 1-2.495-7.594c-.797-2.531-2.698-8.427-4.225-13.101a1403.312 1403.312 0 0 1-4.398-13.693c-1.336-4.281-1.779-5.193-2.516-5.193-1.173 0-1.13.736.257 4.421.634 1.684 1.239 3.501 1.345 4.038.105.537.824 2.84 1.598 5.118.773 2.278 2.561 7.87 3.973 12.427 1.412 4.556 3.061 9.734 3.664 11.506.603 1.772 2.156 6.639 3.451 10.816 1.296 4.177 2.951 9.355 3.679 11.506.728 2.152 2.812 8.469 4.631 14.038 3.903 11.947 4.224 12.657 5.707 12.657 1.704 0 2.557-.477 2.557-1.429 0-.956-3.196-14.133-5.792-23.885-.91-3.417-1.921-7.352-2.247-8.745-.325-1.392-1.563-6.259-2.751-10.816-1.189-4.556-2.324-9.009-2.523-9.895-.2-.886-1.234-4.925-2.298-8.975l-3.568-13.577c-.899-3.418-1.892-7.198-2.206-8.4l-.572-2.186h7.229l.01 2.646c.043 11.533.632 17.859 1.701 18.27 1.25.48 1.611-.253 1.317-2.677-.157-1.298-.388-5.467-.513-9.264-.126-3.797-.345-7.473-.487-8.17-.196-.952-.081-1.265.462-1.265.396 0 2.639-.621 4.984-1.381 3.756-1.216 4.412-1.593 5.522-3.172 1.813-2.577 2.357-5.795 2.073-12.243-.436-9.906-3.131-15.038-9.479-18.047l-2.463-1.168.286-2.821c.571-5.617.504-28.314-.084-28.903-.304-.303-.711-.393-.905-.201-.527.525-.891 9.772-.85 21.586l.037 10.491-1.15-.288c-.632-.159-1.175-.323-1.206-.366-.03-.043-.407-3.495-.836-7.672a3123.368 3123.368 0 0 0-1.671-15.773c-.489-4.498-.89-8.381-.89-8.629 0-.248-.238-.451-.528-.451-.383 0-.435 1.105-.186 4.027.188 2.215.425 5.166.526 6.558.101 1.393.395 4.499.655 6.904.755 7.015 1.378 14.418 1.224 14.571-.077.078-1.81.013-3.849-.145l-3.708-.285-.05-2.353c-.071-3.307-.422-4.655-2.185-8.386-2.173-4.602-6.083-7.894-12.037-10.136-2.362-.889-3.805-1.091-8.054-1.123-2.847-.022-6.471.107-8.053.286-2.284.259-2.888.195-2.932-.309-.031-.349-.024-2.291.014-4.317.039-2.025-.056-4.976-.211-6.558-.252-2.582-.386-2.877-1.304-2.877-1.011 0-1.021.067-.849 5.638.095 3.102.348 6.311.562 7.134l.389 1.496h-5.91l-.07-3.797c-.038-2.089-.118-4.004-.177-4.257-.059-.253-.131-1.873-.16-3.599-.05-2.979-.106-3.132-1.088-2.992-.984.14-1.029.32-.894 3.599.078 1.899.336 5.093.572 7.099.237 2.005.38 3.69.319 3.743-.062.054-2.62-.034-5.682-.194l-5.57-.292-2.485-2.097c-3.82-3.223-9.364-6.73-15.948-10.088-2.09-1.065-3.674-2.137-3.522-2.383.384-.622-12.006-12.679-14.16-13.778-2.565-1.308-6.83-2.298-9.287-2.155-1.175.068-2.137.275-2.139.46Zm7.064 2.04c4.047 2.064 15.642 11.658 14.94 12.361-.29.289-8.763-1.798-13.35-3.289-4.192-1.362-5.904-2.89-6.984-6.231-.901-2.793-.95-3.924-.177-4.182.806-.27 3.848.461 5.571 1.341Zm-7.776 2.328c.28 1.882.683 2.863 2.103 5.116 1.207 1.916 5.368 3.603 13.334 5.407 1.899.43 4.902 1.295 6.674 1.922 3.51 1.242 14.167 6.612 15.649 7.885.506.435 1.852 1.382 2.991 2.106 1.14.723 3.084 2.162 4.322 3.197 3.092 2.585 14.067 13.388 16.159 15.907.941 1.133 2.983 2.979 4.538 4.103 1.554 1.124 2.938 2.209 3.074 2.411.675 1.007 6.103 1.399 21.021 1.517 9.486.075 16.95.334 18.313.635 1.266.279 3.234.687 4.373.905 2.507.48 3.759 1.113 6.359 3.214 4.273 3.454 5.456 6.81 5.883 16.683l.289 6.673-1.778 1.671c-1.801 1.693-5.362 3.27-8.696 3.852-1.005.176-4.416.386-7.58.468-3.165.081-7.618.261-9.896.399a978.55 978.55 0 0 1-10.125.539c-3.291.157-7.123.352-8.515.432-1.392.079-5.12.288-8.285.464-3.164.175-6.478.391-7.364.48-5.254.528-16.43.896-26.234.865-9.86-.032-11.495-.141-13.017-.865-1.77-.843-5.854-4.399-5.854-5.098 0-.211-1.119-2.262-2.487-4.557-1.368-2.295-2.742-4.984-3.053-5.976-.311-.992-.934-2.442-1.385-3.222-.974-1.687-2.566-6.763-2.97-9.474-.159-1.064-.464-2.396-.679-2.96-.215-.565-.513-1.803-.664-2.751-.15-.948-.454-2.071-.673-2.494-.219-.422-.965-3.15-1.657-6.061-.692-2.912-1.873-7.779-2.624-10.816-.75-3.038-1.858-8.423-2.46-11.967-.602-3.544-1.316-7.168-1.586-8.054-.27-.886-.796-3.333-1.167-5.436-.58-3.281-.584-4.035-.036-5.293.61-1.4 2.965-4.22 3.269-3.914.08.079.275 1.019.434 2.087Zm141.528 6.284c-.119.119-1.459.349-2.976.51-3.14.333-7.363 2.279-8.597 3.961-.855 1.165-1.982 8.604-2.436 16.068-.203 3.358.193 9.622.917 14.498.113.76.411 8.63.663 17.49.252 8.86.66 16.937.906 17.95.585 2.401 3.83 9.142 5.574 11.579.753 1.053 2.248 2.867 3.323 4.032 1.72 1.865 2.395 2.234 5.636 3.086 2.025.533 4.149.996 4.718 1.031.569.035 1.035.113 1.035.175 0 .061-2.47 9.071-5.49 20.021-5.579 20.226-9.726 35.504-9.888 36.428-.05.28-.33 1.235-.624 2.121-.293.886-.629 2.129-.747 2.762-.117.632-.977 4.05-1.911 7.594-2.169 8.233-2.274 9.05-1.381 10.776.649 1.255.966 1.42 2.728 1.42h1.993l2.078-5.408c1.143-2.974 2.957-8.1 4.032-11.391 1.075-3.291 2.218-6.604 2.541-7.364.588-1.382 10.497-30.591 15.888-46.831l2.864-8.629 1.898.014c1.044.008 3.348.201 5.12.431 1.772.229 7.571.754 12.887 1.165 5.316.411 10.567.89 11.669 1.065l2.003.316.143 3.912c.174 4.727.613 17.491.926 26.925.354 10.667.669 19.677.917 26.235.125 3.29.328 8.986.451 12.657.591 17.59 1.084 23.59 2.014 24.52.236.236 1.246.291 2.246.122l1.816-.307.295-5.609c1.234-23.479 1.839-36.705 2.384-52.095.134-3.797.333-8.353.443-10.125.11-1.772.329-7.157.487-11.967.158-4.81.359-9.211.448-9.78.106-.68-.158-1.207-.768-1.533-1.474-.789-1.288-2.246-1.974 15.455-.138 3.544-.36 9.654-.495 13.578-.136 3.924-.336 9.205-.447 11.736-.11 2.532-.329 9.263-.486 14.959-.158 5.695-.357 11.598-.443 13.117-.086 1.519-.173 6.865-.192 11.882l-.035 9.12-1.185-.145-1.185-.146-.163-8.054c-.216-10.645-.666-25.502-.92-30.377-.112-2.152-.32-8.365-.462-13.808-.141-5.442-.349-11.034-.461-12.426-.113-1.393-.336-7.917-.496-14.498-.238-9.855-.416-12.109-1.002-12.772-.674-.762-.426-.807 4.537-.829 6.573-.029 8.473-.262 13.073-1.601 4.435-1.29 11.912-3.609 14.827-4.599 1.165-.396 2.264-.555 2.442-.355.178.201 4.693 13.309 10.033 29.131 5.34 15.821 10.23 30.155 10.866 31.854 1.855 4.959.561 4.027-1.583-1.139-2.081-5.016-3.376-7.957-5.621-12.766-.768-1.645-2.485-5.477-3.815-8.514a494.486 494.486 0 0 0-4.253-9.435 448.306 448.306 0 0 1-4.14-9.206c-2.15-4.938-3.231-7.314-6.642-14.613-1.324-2.83-1.841-3.247-3.067-2.47-.709.449-.166 1.812 6.16 15.473.587 1.265 2.318 5.143 3.849 8.616 1.53 3.474 2.964 6.684 3.187 7.134.454.918 1.324 2.834 2.987 6.572.619 1.392 1.75 3.883 2.512 5.536.763 1.653 1.95 4.345 2.639 5.984.688 1.638 2.483 5.536 3.988 8.662 2.174 4.516 2.897 5.634 3.515 5.438 2.967-.94 2.678-1.401 3.025 4.836.174 3.121.38 6.192.458 6.824.078.633.174 2.121.214 3.306.059 1.759.252 2.212 1.05 2.466 1.455.462 1.798-.505 1.562-4.391-.115-1.898-.328-7.076-.472-11.506-.145-4.43-.35-9.504-.455-11.276a767.566 767.566 0 0 1-.449-8.975c-.143-3.165-.361-7.825-.487-10.356-.126-2.531-.433-8.952-.682-14.268a2796.74 2796.74 0 0 0-.678-13.807c-.123-2.279-.335-6.628-.471-9.666-.355-7.894-.665-14.526-.916-19.561-.119-2.404-.326-7.168-.46-10.585a734.676 734.676 0 0 0-.466-10.126c-.123-2.152-.334-6.294-.47-9.205-.136-2.911-.447-6.944-.692-8.963a257.663 257.663 0 0 1-.444-3.797c0-.07-.524-.127-1.163-.127h-1.163l.288 6.05c.255 5.367.207 6.019-.43 5.775-.91-.35-6.698 1.602-9.335 3.148-3.611 2.116-2.053 2.864 1.907.916 1.266-.623 2.638-1.139 3.049-1.147.411-.008 1.706-.549 2.876-1.204 1.171-.655 2.139-1.12 2.15-1.035.011.084.139 2.38.284 5.102.303 5.661.608 5.34-4.225 4.447-4.666-.863-8.303-2.967-12.65-7.318-4.499-4.504-3.973-3.839-12.3-15.57-2.319-3.268-8.704-10.065-10.711-11.404a198.794 198.794 0 0 1-3.661-2.524c-2.182-1.544-10.832-4.544-13.142-4.558-.76-.005-2.107-.23-2.991-.5-.884-.27-4.922-.786-8.972-1.146-4.05-.36-8.814-.873-10.586-1.139-9.439-1.42-29.738-3.462-30.165-3.035Zm265.692 1.284c.699 1.821-3.769 17.342-6.368 22.12-.375.69-.672 1.364-.66 1.498.044.505-3.35 7.039-5.195 9.999-1.057 1.696-2.807 4.112-3.888 5.369l-1.967 2.284 1.459.32c1.328.292 1.64.12 3.477-1.917 3.779-4.19 10.251-16.359 12.342-23.206a192.2 192.2 0 0 1 1.656-5.101c.49-1.428 1-3.5 1.133-4.603.134-1.103.338-2.457.455-3.009.298-1.415-.486-3.217-1.679-3.855-.829-.444-.967-.425-.765.101Zm-250.485 2.005c8.383.836 10.447 1.088 11.574 1.414 1.123.325 11.573 1.551 15.811 1.854 2.025.145 4.806.544 6.179.887 1.373.343 2.659.523 2.857.401.438-.271 6.965 1.362 9.232 2.309 2.341.978 10.371 7.591 12.717 10.473 1.094 1.344 4.1 5.26 6.679 8.702 4.029 5.375 5.922 7.597 11.023 12.935 1.42 1.485 5.621 3.96 8.354 4.921 1.622.57 4.01.957 6.239 1.011l3.611.087.256 2.582c.244 2.461.423 5.953.967 18.921.133 3.165.343 7.825.465 10.356.341 7.026.645 13.655.929 20.251.142 3.291.347 7.641.455 9.666.108 2.025.31 6.995.447 11.046.139 4.05.345 8.399.46 9.665.114 1.266.322 6.029.461 10.586l.253 8.284-1.789-5.753c-4.706-15.133-18.616-55.981-19.223-56.45-.562-.434-.244-.672 1.756-1.314 3.213-1.031 7.968-3.312 8.671-4.158.307-.37.824-.672 1.149-.672.897 0 5.739-4.099 5.739-4.858 0-.894-.111-.865-2.393.637-5.933 3.903-11.829 6.747-18.548 8.947-8.698 2.846-18.782 5.779-20.942 6.09-3.363.483-14.698.589-18.18.169l-5.062-.613c-1.862-.227-27.244-2.837-31.068-3.195-6.747-.632-8.289-.852-10.495-1.5-1.343-.393-3.036-1.216-3.762-1.827-3.472-2.921-7.976-10.881-9.732-17.198-.387-1.389-.615-6.536-.694-15.648-.065-7.468-.346-15.235-.624-17.26-.904-6.575-1.042-16.146-.326-22.483.738-6.529 1.247-7.67 4.081-9.141 1.928-1 9.119-1.689 12.578-1.205 1.265.178 5.718.664 9.895 1.081Zm258.443 7.845c-2.684 9.234-2.756 10.053-2.795 31.728-.038 22.003-.287 24.839-2.725 31.039-.64 1.63-1.165 3.267-1.165 3.637 0 .962-3.887 7.588-6.558 11.179-2.939 3.951-3.307 4.124-15.764 7.442-8.127 2.164-9.976 2.423-20.711 2.9-3.544.157-6.705.497-7.024.755-.805.652-15.133 1.606-22.742 1.515l-6.293-.076-.922 3.482c-.506 1.915-1.851 6.9-2.987 11.077-1.137 4.177-3.443 12.668-5.125 18.87-1.682 6.202-3.557 12.933-4.165 14.958-.609 2.025-1.958 6.893-2.999 10.816a2019.844 2019.844 0 0 1-2.274 8.515c-3.278 11.889-3.707 14.15-2.794 14.713.632.392 1.997-4.248 10.831-36.805 5.384-19.846 9.878-36.354 10.927-40.144l1.048-3.783 14.268-.209c7.847-.115 15.368-.422 16.713-.681 1.345-.259 3.727-.495 5.293-.522 3.304-.059 6.52-.526 14.814-2.152l8.217-1.609c1.228-.24 2.367-.303 2.531-.14.164.163.642 1.781 1.062 3.597.421 1.814 3.174 12.93 6.12 24.701 2.945 11.771 6.402 25.596 7.681 30.723 2.78 11.143 3.621 13.636 4.672 13.838.558.108.782-.156.777-.918-.008-1.014-2.136-9.846-4.806-19.94a2654.17 2654.17 0 0 1-3.983-15.418 5810.775 5810.775 0 0 0-4.559-17.72 1944.06 1944.06 0 0 1-3.236-12.657c-.794-3.164-1.739-5.985-2.099-6.269-.529-.417-.235-.71 1.539-1.53 5.14-2.379 6.432-3.485 9.947-8.513 7.179-10.269 10.47-22.793 9.744-37.077-.433-8.503-.455-21.314-.045-25.774.198-2.152.752-5.569 1.23-7.594 1.001-4.231 1.12-7.168.325-7.963-.926-.926-1.194-.652-1.968 2.009Zm-100.327 11.418c.096 3.559-.088 7.054-.493 9.32l-.648 3.626 1.189 1.059c.655.582 1.282.967 1.395.854.464-.465 1.134-6.798 1.127-10.668-.009-5.683-1.016-9.886-2.368-9.886-.196 0-.287 2.563-.202 5.695Zm-249.937-.549c2.785.037 7.946.028 11.469-.02 5.809-.079 6.741.025 10.012 1.114 3.624 1.207 7.74 3.849 10.082 6.47 1.641 1.837 3.492 6.352 3.847 9.383l.296 2.531-13.48-.017c-9.265-.011-14.056-.192-15.322-.579-2.64-.806-3.169-1.27-14.01-12.291-2.24-2.278-4.635-4.82-5.322-5.648l-1.248-1.506 4.307.248c2.369.137 6.585.279 9.369.315Zm192.937-.198c-.107.19-.145.863-.084 1.496.061.633.242 4.671.404 8.975.16 4.303.388 9.895.505 12.427.197 4.271.433 9.663.925 21.171.109 2.532.318 7.917.465 11.967.148 4.05.353 9.435.457 11.966.104 2.532.306 8.331.451 12.888.144 4.556.355 10.252.469 12.657.115 2.404.32 8.1.458 12.656.137 4.557.349 10.77.471 13.808.123 3.038.33 8.216.461 11.506.291 7.285.619 13.252.952 17.329.176 2.151.083 3.164-.313 3.409-.856.528-4.619.266-5.416-.378-.581-.47-.635-.45-.314.122 1.327 2.357 3.096 2.865 6.205 1.781l1.491-.52-.279-11.561c-.154-6.36-.368-13.53-.476-15.935-.108-2.405-.327-8.1-.486-12.657-.16-4.556-.363-9.838-.451-11.736-.089-1.899-.289-7.077-.444-11.506-.155-4.43-.373-10.023-.484-12.427-.112-2.405-.319-7.894-.461-12.197-.141-4.303-.347-10.103-.457-12.887-.11-2.785-.315-8.687-.456-13.117-.141-4.43-.348-10.333-.459-13.118a1851.69 1851.69 0 0 1-.503-15.418c-.164-5.696-.39-10.511-.502-10.701-.112-.19-.593-.345-1.069-.345s-.954.155-1.06.345Zm27.408 4.212-3.338 4.072-4.026-.229c-3.401-.195-4.742-.037-8.629 1.01-4.207 1.134-8.492 3.192-7.893 3.791.135.135 1.966-.284 4.07-.929 6.865-2.109 9.577-2.65 12.58-2.512l2.944.135-1.376 2.045c-2.215 3.292-3.562 10.033-3.971 19.87-.198 4.775-.179 4.893.844 5.16.576.151 1.103.218 1.171.15.068-.067.216-2.493.33-5.389.295-7.512 1.084-14.068 1.878-15.602.375-.726 1.98-3.013 3.567-5.081 5.309-6.919 6.817-9.321 6.267-9.984-.276-.332-.632-.598-.79-.591-.16.006-1.792 1.845-3.628 4.084Zm95.562 26.491c-.315.315-5.271 1.561-7.218 1.815-1.708.223-8.855.781-12.286.96-4.413.231-10.847 1.319-14.012 2.372-5.61 1.866-12.935 5.861-15.725 8.576-1.364 1.329-3.045 2.778-3.735 3.219-1.533.981-4.672 5.717-5.693 8.586-1.07 3.008-4.418 9.921-6.356 13.125-1.396 2.308-2.208 5.32-1.434 5.32.121 0 1.673-1.43 3.45-3.178 3.014-2.967 5.074-6.3 5.074-8.208 0-.92 4.244-9.331 5.962-11.817 2.842-4.112 8.171-7.948 15.21-10.948 7.189-3.064 9.812-3.568 24.49-4.709 6.409-.498 8.94-.896 11.846-1.864 3.943-1.314 4.328-1.583 3.888-2.728-.258-.674-2.909-1.073-3.461-.521Zm-104.037 8.304c-.293.293-8.703 1.542-11.354 1.686-1.761.096-1.899.179-1.178.707.467.341 2.066.598 3.722.598 1.985 0 2.922.182 2.963.576l.174 1.725c.064.633.257 4.983.431 9.666.174 4.683.394 9.757.489 11.276.094 1.519.292 5.765.439 9.435.521 13.019 1.053 24.168 1.407 29.456.11 1.646.326 4.959.482 7.362.163 2.52.508 4.515.817 4.711.825.525 3.434.415 3.789-.159.393-.637.506-5.555.921-40.145l.33-27.541-1.102.156-1.102.156-.064 32.799c-.064 32.607-.164 34.793-1.544 33.939-.194-.119-.393-3.793-.441-8.164-.048-4.371-.155-8.878-.239-10.017-.083-1.14-.281-5.696-.44-10.126-.303-8.419-.577-14.735-.96-22.092-.126-2.405-.348-7.79-.494-11.967-.146-4.177-.323-8.347-.393-9.267l-.127-1.674 3.335-.537c1.834-.296 3.462-.666 3.617-.821.49-.49-1.197-1.969-2.245-1.969-.551 0-1.106.104-1.233.231Zm45.872 3.503c-11.696 2.441-16.481 3.149-21.348 3.161-4.301.01-7.418.737-7.418 1.73 0 .541 1.007.618 5.869.448 5.849-.205 10.487-.823 19.215-2.562 5.348-1.065 8.27-1.556 9.927-1.67 1.509-.102 2.27-.577 2.27-1.416 0-.911-3.231-.793-8.515.309ZM135.17 323.165c-.727.145-.821.469-.609 2.083.139 1.051.367 2.418.506 3.036.14.619.673 3.208 1.185 5.753.512 2.546 1.131 5.457 1.375 6.47s.961 4.549 1.592 7.858c.632 3.309 1.255 6.312 1.384 6.674.128.361.335 1.278.46 2.037.364 2.224 2.157 10.245 3.289 14.722.752 2.971.9 4.226.526 4.457-.801.495-1.081.124-1.702-2.253a522.549 522.549 0 0 0-1.939-7.03 877.496 877.496 0 0 0-3.118-10.816c-2.25-7.667-9.672-31.67-9.847-31.845-.125-.125-.626-.101-1.113.054-.833.265-.848.423-.261 2.688.343 1.325.835 3.051 1.094 3.837.259.785.547 1.826.641 2.312.179.929 2.239 8.093 3.054 10.622.262.811.559 1.908.661 2.436.102.529.404 1.625.67 2.436.268.812 1.313 4.376 2.322 7.92 1.01 3.544 2.127 7.375 2.484 8.515l2.345 7.522 1.698 5.451 1.618-.303c3.382-.634 3.799-.96 3.383-2.637-.207-.835-.733-3.59-1.169-6.121-.435-2.532-1.172-6.26-1.636-8.285a293.625 293.625 0 0 1-1.61-7.594 260.83 260.83 0 0 0-1.131-5.523c-.202-.886-.585-2.646-.852-3.912a1430.05 1430.05 0 0 0-1.436-6.674 484.274 484.274 0 0 1-2.106-10.125c-.693-3.491-.901-3.935-1.758-3.765Zm-40.333 1.618c0 .208-3.093 7.694-5.736 13.883-1.19 2.785-2.744 6.616-3.456 8.515-.711 1.898-2.236 5.626-3.39 8.284a351.416 351.416 0 0 0-3.98 9.647c-2.8 7.15-7.986 19.348-8.154 19.179-.081-.08.148-.956.508-1.944 2.825-7.755 4.515-12.454 4.618-12.844.066-.253.243-.771.394-1.151.465-1.178 3.134-8.936 3.324-9.665.099-.38.692-2.14 1.318-3.912 4.822-13.658 6.351-18.041 6.502-18.64.095-.38.983-2.956 1.973-5.724 1.224-3.423 2.08-5.142 2.674-5.375.887-.348 3.405-.536 3.405-.253Zm9.67 4.103c.002 2.088.199 7.214.437 11.391.237 4.177.555 11.529.705 16.339.15 4.81.359 10.298.464 12.197.105 1.898.321 7.697.478 12.887.158 5.189.425 10.979.595 12.867.343 3.823.557 4.02 4.45 4.115l1.842.045.08-4.716c.043-2.594.199-12.277.345-21.516.147-9.24.377-23.468.513-31.617.241-14.562.229-14.828-.692-15.32-.515-.276-.959-.339-.986-.14-.292 2.145-.99 45.104-.998 61.46-.006 10.403-.048 10.931-.875 10.931-.478 0-.951-.259-1.052-.576-.1-.316-.407-5.339-.682-11.161-.613-12.978-.83-17.608-1.397-29.686-.243-5.19-.553-12.749-.689-16.799-.417-12.44-.655-14.498-1.67-14.498-.786 0-.872.374-.868 3.797Zm-33.414-2.119a89.746 89.746 0 0 1-.974 2.694c-.382 1.013-1.07 2.98-1.53 4.372-.459 1.393-2.002 5.846-3.43 9.896-4.114 11.677-6.025 17.237-9.714 28.266-3.485 10.42-3.582 11.055-1.688 11.079.525.006 9.323-17.369 9.323-18.411 0-.249.207-.453.46-.453s.46-.198.46-.44 1.573-3.712 3.494-7.71c12.716-26.457 13.287-27.75 12.261-27.75-.25 0-.712.311-1.027.691-.315.38-4.794 9.127-9.952 19.438-5.158 10.311-9.378 18.609-9.378 18.44 0-.169.228-.891.506-1.603.454-1.162 2.318-6.381 6.46-18.095a896.684 896.684 0 0 0 2.717-7.825c.732-2.151 1.87-5.362 2.53-7.134 1.74-4.684 2.037-5.753 1.6-5.753-.215 0-.716-.125-1.115-.278-.461-.176-.825.033-1.003.576Zm129.948 6.886c1.075.13 1.956.419 1.956.642 0 .429-2.102 6.486-2.795 8.053-1.016 2.299-21.089 62.584-22.336 67.082-.705 2.539-1.034 3.107-1.801 3.107-1.389 0-3.128-1.343-2.588-1.998.556-.675 4.291-14.289 18.075-65.89 1.014-3.797 2.153-7.985 2.531-9.307l.687-2.403 2.157.239c1.187.131 3.038.345 4.114.475Zm10.652 6.953c-.026 2.73-.126 6.103-.222 7.495-.096 1.392-.229 11.065-.297 21.495-.12 18.499-.1 18.981.798 19.662 1.014.768 3.327.937 4.31.314.357-.226.7-1.436.796-2.801.093-1.322.467-3.884.832-5.694.365-1.809 1.948-11.972 3.518-22.584 2.759-18.649 2.826-19.317 1.998-19.922-.472-.345-.906-.465-.965-.266-.18.607-5.571 37.01-5.882 39.713-.841 7.325-1.732 10.585-2.892 10.585-.184.001-.266-11.685-.183-25.968.152-25.907.15-25.97-.805-26.481-.941-.503-.958-.427-1.006 4.452Zm200.469 10.142c.168 3.227.381 6.179.474 6.558.094.38.296 3.694.449 7.364.154 3.671.37 8.02.481 9.666l.201 2.991-1.345-4.602c-.741-2.532-2.639-9.729-4.219-15.994-2.869-11.378-2.874-11.391-4.122-11.391h-1.25l1.301 4.947c3.785 14.399 9.795 38.19 9.824 38.892.025.589.423.805 1.483.805h1.448l-.126-5.105c-.07-2.808-.246-6.278-.392-7.71-.348-3.406-.554-5.842-1.672-19.818-.515-6.429-1.045-11.866-1.178-12.081-.132-.215-.56-.391-.951-.391-.618 0-.671.756-.406 5.869Zm-30.703-3.727c-.123.214-2.336 6.707-4.917 14.428-2.582 7.72-4.81 14.348-4.951 14.728-2.807 7.527-16.251 47.621-16.251 48.464 0 .368.298.917.662 1.219 1.127.936 1.288.511 10.419-27.591a9469.999 9469.999 0 0 1 11.293-34.505c4.444-13.465 5.14-15.961 4.603-16.499-.348-.348-.734-.458-.858-.244Zm46.601 3.181c0 .143.394 1.231.875 2.417a1840.646 1840.646 0 0 1 6.71 16.884c6.249 15.961 8.105 19.673 9.257 18.521.219-.219-1.195-4.972-2.087-7.015a81.891 81.891 0 0 1-1.172-2.991c-.424-1.139-1.06-2.693-1.413-3.452-.782-1.68-6.075-14.503-8.406-20.365-1.433-3.604-1.851-4.256-2.728-4.257-.569-.001-1.036.115-1.036.258ZM67.278 392.596c-.542.933-.673.634-.229-.523.157-.411.384-.651.502-.532.119.118-.004.593-.273 1.055Z",fill:"currentColor"}),f.createElement("path",{d:"M68.659 236.623c-.392.634 1.335 2.549 3.032 3.364 5.129 2.461 9.96 3.95 19.257 5.934 17.174 3.667 22.188 4.348 35.209 4.779 6.875.228 11.02.334 37.166.944 10.209.238 10.719.162 9.658-1.44-.368-.556-9.91-.906-37.159-1.362-15.334-.257-19.661-.5-28.075-1.581-3.671-.471-11.901-1.988-14.958-2.757a113.98 113.98 0 0 0-3.682-.839l-2.071-.434 2.543-.055c1.4-.031 4.195.144 6.213.387 2.019.243 6.57.662 10.114.932 3.544.268 8.1.694 10.126.945 7.297.905 21.775 1.734 28.765 1.649 3.924-.049 11.069.133 15.879.402 12.128.681 13.769.607 13.955-.631.08-.538.08-.998 0-1.023-.081-.024-3.254-.127-7.051-.228-3.797-.102-7.164-.283-7.481-.402-.317-.12-5.184-.231-10.816-.247-5.631-.016-12.931-.221-16.222-.456-3.291-.235-9.297-.65-13.347-.922-4.051-.273-8.4-.688-9.666-.921-1.265-.234-5.408-.543-9.205-.687-3.797-.143-9.182-.555-11.966-.914-2.785-.36-6.41-.687-8.055-.727-3.905-.095-6.8-.941-9.223-2.696-2.08-1.506-2.538-1.665-2.94-1.014Zm186.484 17.914c-1.438.092-2.186.349-2.186.75 0 .454 1.382.69 5.408.923 2.974.173 6.65.395 8.169.495 1.519.1 5.972.297 9.896.437 19.412.696 31.286 1.19 33.368 1.39 1.266.121 6.133.335 10.816.475 4.683.141 12.036.466 16.339.723 4.303.256 9.171.354 10.816.216l2.992-.25-2.992.704c-3.188.749-9.451.879-21.402.442a24727.77 24727.77 0 0 1-43.724-1.641c-14.681-.565-23.534-.467-23.367.258.134.589 11.67 1.414 24.978 1.786 5.696.159 12.53.39 15.188.511 2.658.121 8.561.329 13.118.462 12.828.374 21.818.71 24.947.931 5.239.371 15.995-1.416 17.856-2.965.506-.422 1.49-1.051 2.186-1.399.697-.347 1.266-.935 1.266-1.305 0-.542-.334-.594-1.726-.267-2.477.582-27.318.429-37.626-.232-4.809-.308-11.644-.642-15.188-.742-5.815-.163-9.687-.341-20.479-.938-3.058-.17-17.062-.66-23.935-.839a63.932 63.932 0 0 0-4.718.075Z",fill:"#1E1919"})))};const fe=(e,t,a)=>t?e.formatMessage({id:"STwL82",defaultMessage:"Everyone with access to “{folder_name}”"},{folder_name:t}):e.formatMessage({id:"6fi/fQ",defaultMessage:"Everyone at {team_name}"},{team_name:a}),Ee=(e,t,a)=>{const n=s.getName(a),o=s.getParentFolderName(a);return t?e.formatMessage({id:"5xCeTo",defaultMessage:"Removing members from <strong>{folderName}</strong>…"},{folderName:r.Emstring.em_snippet(n,s.SNIPPET_SIZES.FOLDER_NAME),strong:e=>f.default.createElement("strong",null,e)}):""===o?e.formatMessage({id:"90I244",defaultMessage:"Sharing <strong>{folderName}</strong> with everyone…"},{folderName:r.Emstring.em_snippet(n,s.SNIPPET_SIZES.FOLDER_NAME),strong:e=>f.default.createElement("strong",null,e)}):e.formatMessage({id:"16RnmU",defaultMessage:"Sharing <strong>{folderName}</strong> with members of <strong>{parentFolderName}</strong>…"},{folderName:r.Emstring.em_snippet(n,s.SNIPPET_SIZES.FOLDER_NAME),parentFolderName:r.Emstring.em_snippet(o,s.SNIPPET_SIZES.FOLDER_NAME),strong:e=>f.default.createElement("strong",null,e)})},he=(e,t)=>t?e.formatMessage({id:"1HgFQB",defaultMessage:"Couldn’t remove members. Try again."}):e.formatMessage({id:"ypun4U",defaultMessage:"Couldn’t share folder. Try sharing again."}),be=e=>e.formatMessage({id:"sKbWSj",defaultMessage:"Couldn’t load member list. Please try again."}),Me=(e,t,a)=>{const n=s.getName(a),o=s.getParentFolderName(a);return t?e.formatMessage({id:"7POTZF",defaultMessage:"Members removed from <strong>{folderName}</strong>."},{folderName:r.Emstring.em_snippet(n,s.SNIPPET_SIZES.FOLDER_NAME),strong:e=>f.default.createElement("strong",null,e)}):void 0===o||""===o?e.formatMessage({id:"nni9pE",defaultMessage:"<strong>{folderName}</strong> shared with everyone."},{folderName:r.Emstring.em_snippet(n,s.SNIPPET_SIZES.FOLDER_NAME),strong:e=>f.default.createElement("strong",null,e)}):e.formatMessage({id:"qvP8A+",defaultMessage:"<strong>{folderName}</strong> shared with members of <strong>{parentFolderName}</strong>."},{folderName:r.Emstring.em_snippet(n,s.SNIPPET_SIZES.FOLDER_NAME),parentFolderName:r.Emstring.em_snippet(o,s.SNIPPET_SIZES.FOLDER_NAME),strong:e=>f.default.createElement("strong",null,e)})},Se=e=>e.formatMessage({id:"6jx51W",defaultMessage:"Disabled"}),ve=e=>e.formatMessage({id:"2kS9ex",defaultMessage:"Can view"}),Ae=(e,t)=>"editor"===t[".tag"]?(e=>e.formatMessage({id:"R8tdDL",defaultMessage:"Can edit"}))(e):"owner"===t[".tag"]?(e=>e.formatMessage({id:"/epRg4",defaultMessage:"Owner"}))(e):"viewer"===t[".tag"]?ve(e):"viewer_no_comment"===t[".tag"]?(e=>e.formatMessage({id:"pI4aSB",defaultMessage:"View-only"}))(e):ve(e),ye=e=>e.formatMessage({id:"uiUfVo",defaultMessage:"People with a link might still have access."}),Ie=e=>e.formatMessage({id:"J9wEBS",defaultMessage:"Manage Links"}),Ce=e=>e.formatMessage({id:"6K7VUR",defaultMessage:"Close"}),Ne=e=>e.formatMessage({id:"Tmil/1",defaultMessage:"Couldn’t remove member. Try removing them again."}),Re=(e,t)=>e.formatMessage({id:"Ye9pDs",defaultMessage:"Removing member from <b>{currentFolder}</b>…"},{currentFolder:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.DISPLAY_NAME),b:e=>f.default.createElement("b",{style:{fontWeight:500}},e)}),Le=(e,t)=>e.formatMessage({id:"vhAme6",defaultMessage:"Member removed from <b>{currentFolder}</b>."},{currentFolder:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.DISPLAY_NAME),b:e=>f.default.createElement("b",{style:{fontWeight:500}},e)}),Te=e=>e.formatMessage({id:"/4HTAy",defaultMessage:"Updating member access…"}),we=e=>e.formatMessage({id:"OpE7PX",defaultMessage:"Member access updated."}),Pe=e=>e.formatMessage({id:"qMG/h/",defaultMessage:"Couldn’t change access."}),Fe=e=>e.formatMessage({id:"HFRl2M",defaultMessage:"Couldn’t update member’s access."}),xe=(e,t)=>e.formatMessage({id:"zzQ4WU",defaultMessage:"Changing access for <b>{currentFolder}</b>…"},{currentFolder:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.DISPLAY_NAME),b:e=>f.default.createElement("b",{style:{fontWeight:500}},e)}),De=e=>e.formatMessage({id:"ad6tQw",defaultMessage:"Couldn’t change access. Try changing access again."}),Oe=e=>e.formatMessage({id:"ZPHXCn",defaultMessage:"Couldn’t update member’s access. Try changing access again."}),ke=(e,t)=>e.formatMessage({id:"PAzrUg",defaultMessage:"Removing members from <b>{currentFolder}</b>…"},{currentFolder:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.DISPLAY_NAME),b:e=>f.default.createElement("b",{style:{fontWeight:500}},e)}),Be=e=>e.formatMessage({id:"OyDuPN",defaultMessage:"Couldn’t remove members. Try removing them again."}),je=(e,t)=>e.formatMessage({id:"yqWm25",defaultMessage:"Members removed from <b>{currentFolder}</b>."},{currentFolder:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.DISPLAY_NAME),b:e=>f.default.createElement("b",{style:{fontWeight:500}},e)}),$e=(e,t)=>e.formatMessage({id:"4h1KyA",defaultMessage:"{name} has been removed."},{name:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.DISPLAY_NAME)}),Ue=(e,t)=>e.formatMessage({id:"BNpXMo",defaultMessage:"Made {displayName} the owner."},{displayName:t}),He=e=>e.formatMessage({id:"idUNYc",defaultMessage:"Checkbox"}),Ze=(e,t,a)=>e.formatMessage({id:"/7+vx5",defaultMessage:"Because {memberName} can edit the parent folder, their access to <b>{contentName}</b> can't be changed."},{memberName:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.DISPLAY_NAME),contentName:r.Emstring.em_snippet(a,s.SNIPPET_SIZES.FILENAME),b:e=>f.default.createElement("b",{style:{fontWeight:500}},e)}),We=(e,t)=>e.formatMessage({id:"b2R7ut",defaultMessage:"Can't change access for {memberName}"},{memberName:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.DISPLAY_NAME)}),Ge=(e,t)=>e.formatMessage({id:"fP62vP",defaultMessage:"Couldn't change access for {memberName}"},{memberName:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.DISPLAY_NAME)}),Ye=(e,t,a,n)=>e.formatMessage({id:"kQXitL",defaultMessage:"{count, plural, one{To change their access to <b>{contentName}</b>, you'll need to change their access to the parent folder <b>{singleParentFolderName}</b>.} other{To change their access to <b>{contentName}</b>, you'll need to change their access to the parent folders listed.}}"},{count:t,contentName:r.Emstring.em_snippet(a,s.SNIPPET_SIZES.FILENAME),singleParentFolderName:r.Emstring.em_snippet(n,s.SNIPPET_SIZES.FILENAME),b:e=>f.default.createElement("b",{style:{fontWeight:500}},e)}),Ve=e=>e.formatMessage({id:"DzCuYI",defaultMessage:"Okay"}),ze=e=>e.formatMessage({id:"9CMIle",defaultMessage:"Cancel"}),qe=(e,t)=>e.formatMessage({id:"jc0mkL",defaultMessage:"Couldn't remove {memberName}"},{memberName:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.DISPLAY_NAME)}),Ke=(e,t,a)=>e.formatMessage({id:"1NJLE0",defaultMessage:"Because {memberName} has access to the parent folder, they can't be removed from <b>{contentName}</b>."},{memberName:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.DISPLAY_NAME),contentName:r.Emstring.em_snippet(a,s.SNIPPET_SIZES.FILENAME),b:e=>f.default.createElement("b",{style:{fontWeight:500}},e)}),Je=(e,t,a,n)=>e.formatMessage({id:"wslHDy",defaultMessage:"{count, plural, one{To remove them from <b>{contentName}</b>, you'll need to remove them from the parent folder <b>{singleParentFolderName}</b>.} other{To remove them from <b>{contentName}</b>, you'll need to remove them from the parent folders listed.}}"},{count:t,contentName:r.Emstring.em_snippet(a,s.SNIPPET_SIZES.FILENAME),singleParentFolderName:r.Emstring.em_snippet(n,s.SNIPPET_SIZES.FILENAME),b:e=>f.default.createElement("b",{style:{fontWeight:500}},e)}),Qe=(e,t)=>e.formatMessage({id:"C2045v",defaultMessage:"{count, plural, one{# member} other{# members}}"},{count:t}),Xe=(e,t,a)=>"team"===a?e.formatMessage({id:"dQzOmZ",defaultMessage:"Everyone at {team_name}"},{team_name:t.replace(/^Everyone at /,"")}):t,et=e=>e.formatMessage({id:"s2sguR",defaultMessage:"View all inherited members"}),tt=e=>e.formatMessage({id:"aSAiYo",defaultMessage:"View all members"});function at(e){return{class:"share",action:"select",object:"manage_access_action",properties:e}}const st=Symbol("ON_VIEW_MANAGE_ACCESS"),nt=Symbol("ON_VIEW_PARENT_FOLDER_REMOVE_ACCESS_MODAL"),rt=Symbol("ON_VIEW_PARENT_FOLDER_CHANGE_ACCESS_MODAL"),ot=Symbol("ON_VIEW_PARENT_FOLDER_CHANGE_INHERITANCE_MODAL"),it=Symbol("ON_VIEW_CONFIRMATION_MODAL"),lt=Symbol("ON_VIEW_REMOVE_ALL_INHERITED_MEMBERS_CONFIRMATION_MODAL"),ct=Symbol("ON_MEMBER_ACTION_START"),mt=Symbol("ON_MEMBER_ACTION_CANCEL"),dt=Symbol("ON_MEMBER_ACTION_SUCCESS"),ut=Symbol("ON_REMOVE_ALL_INHERITED_MEMBERS_START"),gt=Symbol("ON_REMOVE_ALL_INHERITED_MEMBERS_CANCEL"),_t=Symbol("ON_REMOVE_ALL_INHERITED_MEMBERS_SUCCESS"),pt=Symbol("ON_FAILURE_RENDER"),ft=Symbol("ON_CONTENT_MEMBER_LIST_DATA_LOADING"),Et=Symbol("ON_CONTENT_MEMBER_LIST_DATA_LOADED"),ht=Symbol("ON_CONTENT_MEMBER_LIST_DATA_ERROR"),{useEmitter:bt,defaultEmitter:Mt}=s.defineLogger((async({event:e,getContextValue:t})=>{const a=t(s.Context$4),n=t(s.Context$5),r=t(s.Context$6),o=t(s.Context$7),i={...s.getTags$4(a),...s.getTags$5(n),...s.getTags$6(r),...s.getTags$7(o),isSm24:"true"},l={...s.getProperties$4(a),...s.getProperties$5(n),...s.getProperties$6(r),...s.getProperties$7(o)};if(e.key!==st)if(e.key!==nt)if(e.key!==rt)if(e.key!==it)if(e.key!==lt)if(e.key!==ct)if(e.key!==mt)if(e.key!==dt)if(e.key!==ut)if(e.key!==gt)if(e.key!==_t)if(e.key!==ot)if(e.key!==pt)if(e.key!==ft)if(e.key!==Et){if(e.key!==ht)return s.exhausts(e,void 0);s.UDCL.logEnd("ops.content_member_list.load",{tags:i,eventState:"failed"})}else s.UDCL.logEnd("ops.content_member_list.load",{tags:i,eventState:"success"});else s.UDCL.logStart("ops.content_member_list.load",{tags:i});else s.UDCL.logEvent("ops.view_manage_access_failure",{tags:{...i,eventState:"failed"}});else s.UDCL.logEvent(ge({...l,manageAccessElement:"parent_folder_change_inheritance_modal"}),{tags:{...i,element:"parent_folder_change_inheritance_modal"}});else s.UDCL.logEnd(at({...l,eventState:"success",memberActionType:e.payload.memberActionType}),{tags:{...i,action:e.payload.memberActionType,eventState:"success"}});else s.UDCL.logEnd(at({...l,eventState:"canceled",memberActionType:e.payload.memberActionType}),{tags:{...i,action:e.payload.memberActionType,eventState:"canceled"}});else s.UDCL.logStart(at({...l,eventState:"start",memberActionType:e.payload.memberActionType}),{tags:{...i,action:e.payload.memberActionType,eventState:"start"}});else s.UDCL.logEnd(at({...l,eventState:"success",memberActionType:e.payload.memberActionType,newAccessLevel:e.payload.newAccessLevel?e.payload.newAccessLevel[".tag"]:void 0}),{tags:{...i,action:e.payload.memberActionType,eventState:"success"}});else s.UDCL.logEnd(at({...l,eventState:"canceled",memberActionType:e.payload.memberActionType}),{tags:{...i,action:e.payload.memberActionType,eventState:"canceled"}});else s.UDCL.logStart(at({...l,eventState:"start",memberActionType:e.payload.memberActionType,prevAccessLevel:e.payload.prevAccessLevel[".tag"]}),{tags:{...i,action:e.payload.memberActionType,eventState:"start"}});else s.UDCL.logEvent(ge({...l,manageAccessElement:"remove_all_inherited_members_confirmation_modal"}),{tags:{...i,element:"remove_all_inherited_members_confirmation_modal"}});else s.UDCL.logEvent(ge({...l,manageAccessElement:"manage_access_confirmation_modal"}),{tags:{...i,element:"manage_access_confirmation_modal"}});else s.UDCL.logEvent(ge({...l,manageAccessElement:"parent_folder_change_access_modal"}),{tags:{...i,element:"parent_folder_change_access_modal"}});else s.UDCL.logEvent(ge({...l,manageAccessElement:"parent_folder_remove_access_modal"}),{tags:{...i,element:"parent_folder_remove_access_modal"}});else s.UDCL.logEvent(ge({...l,manageAccessElement:"manage_access_screen"}),{tags:{...i,element:"manage_access_screen"}})})),St=(e,t)=>{var a;return!!(null!==(a=e.permissions)&&void 0!==a?a:[]).find((e=>e.action[".tag"]===t[".tag"]&&e.allow))},vt=(e,t)=>{var a,s;return"user"in e&&e.user?e.user.display_name:"group"in e&&e.group?t?Xe(t,e.group.group_name,null===(a=e.group.group_type)||void 0===a?void 0:a[".tag"]):e.group.group_name:"invitee"in e&&"email"===(null===(s=e.invitee)||void 0===s?void 0:s[".tag"])?e.invitee.email:""},At=(e,t)=>!!t&&("user"in e&&null!=e.user&&e.user.account_id===t.account_id),yt=e=>"user"in e&&null!=e.user?{".tag":"dropbox_id",dropbox_id:e.user.account_id}:"group"in e&&void 0!==e.group?{".tag":"dropbox_id",dropbox_id:e.group.group_id}:"invitee"in e&&void 0!==e.invitee&&"email"===e.invitee[".tag"]?{".tag":"email",email:e.invitee.email}:{".tag":"other"},It=e=>"user"in e&&e.user?`user-${e.user.account_id}`:"group"in e&&e.group?`group-${e.group.group_id}`:"invitee"in e&&e.invitee&&"email"===e.invitee[".tag"]?`invitee-${e.invitee.email}`:`unknown-${Math.random()}`;var Ct;!function(e){e[e.RemoveAccess=0]="RemoveAccess",e[e.DowngradeAccess=1]="DowngradeAccess"}(Ct||(Ct={}));const Nt=(e,t)=>e.sort(((e,a)=>{var s,n;const r=vt(e).toLowerCase(),o=vt(a).toLowerCase(),i="user"in e&&null!=e.user&&t.includes(null===(s=e.user)||void 0===s?void 0:s.account_id),l="user"in a&&null!=a.user&&t.includes(null===(n=a.user)||void 0===n?void 0:n.account_id);return i&&!l?-1:!i&&l?1:r<o?-1:r>o?1:0})),Rt=(e,t,a)=>{const s=((e,t)=>e.formatMessage({id:"b+NGsd",defaultMessage:"{time_str}"},{time_str:t}))(e,Ot(e,a));return`${t} · ${s}\n`},Lt=(e,t)=>t<=0?"":((e,t)=>e.formatMessage({id:"+8e1lg",defaultMessage:"{count, plural, one{and # other} other{and # others}}"},{count:t}))(e,t),Tt=[{action:{".tag":"make_editor"},allow:!1},{action:{".tag":"make_owner"},allow:!1},{action:{".tag":"make_viewer"},allow:!1},{action:{".tag":"make_viewer_no_comment"},allow:!1},{action:{".tag":"remove"},allow:!1}],wt=e=>e?e.map((e=>{const{seen_state_user:{user_id:t,display_name:a,email:s,sharing_access_type:n,same_team:r},when_last_seen:o}=e;let i={".tag":"viewer"};return n&&"edit_link_access"===n[".tag"]&&(i={".tag":"editor"}),{access_type:i,user:{account_id:t,display_name:a,email:s||"",same_team:r,disabled:!1},is_inherited:!1,permissions:Tt,time_last_seen:o?new Date(1e3*o).toString():void 0}})):[],Pt=6e4,Ft=36e5,xt=864e5,Dt=2592e6,Ot=(e,t,a=new Date)=>{const s=Number(a)-Number(t);if(s>=31536e6)return e.formatDate(t,{year:"numeric",month:"short",day:"numeric"});let n=0,r="minute";switch(s<Pt?(n=0,r="minute"):s<Ft?(n=Math.floor(s/Pt),r="minute"):s<xt?(n=Math.floor(s/Ft),r="hour"):s<Dt?(n=Math.floor(s/xt),r="day"):(n=Math.min(11,Math.floor(s/Dt)),r="month"),r){case"minute":return 0===n?(e=>e.formatMessage({id:"XP0b1q",defaultMessage:"just now"}))(e):((e,t)=>e.formatMessage({id:"wKaToF",defaultMessage:"{value, plural, one{# minute ago} other{# minutes ago}}"},{value:t}))(e,n);case"hour":return((e,t)=>e.formatMessage({id:"Tq1+vX",defaultMessage:"{value, plural, one{# hour ago} other{# hours ago}}"},{value:t}))(e,n);case"day":return 1===n?(e=>e.formatMessage({id:"YDw317",defaultMessage:"Yesterday"}))(e):((e,t)=>e.formatMessage({id:"jN1kbT",defaultMessage:"{value, plural, one{# day ago} other{# days ago}}"},{value:t}))(e,n);case"month":return 1===n?(e=>e.formatMessage({id:"aCaq4h",defaultMessage:"Last month"}))(e):((e,t)=>e.formatMessage({id:"RfkWNk",defaultMessage:"{value, plural, one{# month ago} other{# months ago}}"},{value:t}))(e,n)}};const kt={$props:n.atom({objectIdentifier:{".tag":"file",fileId:""},openLinkSettings:()=>{},onRequestClose:()=>{},onConfirmationModalShownChange:()=>{},onTransferFolderOwnership:()=>{},onChangeConfidentiality:()=>{},onObjectIdentifierChanged:()=>{},objectMetadataResult:{isLoading:!0},objectMembersResult:{isFirstPageLoaded:!1,isLoading:!0},listSharedLinksResult:{isLoading:!0},accountMetadataResult:{isLoading:!0},customNoOtherMembersScreen:void 0,customErrorScreen:void 0,customErrorScreenWrapper:void 0,useSimpleDowngradeBanner:!1,enableReadOnlyMode:!1,onMemberListDataLoading:()=>{},shouldUseSm26Design:!1}),$showSecurityBanner:n.atom(!1),$securityBannerType:n.atom(Ct.DowngradeAccess),$objectIdentifier:n.atom({".tag":"file",fileId:""}),$memberActionsInProgress:n.atom({}),$removeFileMemberFailureData:n.atom(null),$removeFileMemberWarningData:n.atom(null),$changeFileMemberAccessFailureData:n.atom(null),$changeFolderMemberAccessFailureData:n.atom(null),$removeFolderMemberFailureData:n.atom(null),$changeMemberAccessLevelData:n.atom(null),$removeMemberAccessLevelData:n.atom(null),$tempMemberAccessLevelData:n.atom(null),$shouldUsePresenceForSorting:n.atom(!0),$objectMetadata:n.atom(void 0),$objectMembers:n.atom(void 0),$linksMetadata:n.atom(void 0),$accountMetadata:n.atom(void 0),$presentAccountIds:n.atom([])},{StoreProvider:Bt,useStore:jt}=n.defineStoreProvider((e=>{const t=n.store(!1),a=n.store(Ct.DowngradeAccess),s=n.store({}),r=n.store(null),o=n.store(null),i=n.store(null),l=n.store(null),c=n.store(null),m=n.store(null),d=n.store(null),u=n.store(null),g=n.store(void 0),_=n.store(void 0),p=n.store(void 0),f=n.store(void 0),E=n.store(e.get().objectIdentifier);return{$props:e,$showSecurityBanner:t,$securityBannerType:a,$objectIdentifier:E,$memberActionsInProgress:s,$removeFileMemberFailureData:r,$removeFileMemberWarningData:i,$changeFileMemberAccessFailureData:o,$changeFolderMemberAccessFailureData:l,$removeFolderMemberFailureData:c,$changeMemberAccessLevelData:m,$removeMemberAccessLevelData:d,$tempMemberAccessLevelData:u,$objectMetadata:g,$objectMembers:_,$linksMetadata:p,$accountMetadata:f,$shouldUsePresenceForSorting:n.store(!0),$presentAccountIds:n.store([])}}),kt),$t=e=>{const t=r.useSharingObjectMetadata(e.objectIdentifier.fileId),a=s.useObjectMembers(e.objectIdentifier,!1),n=H(e.objectIdentifier),o=r.useSharingAccountInfo(),i=e.maxLines&&e.maxLines>0?{maxLines:Math.floor(e.maxLines),onViewAllMembers:e.onViewAllMembers}:{};return f.createElement(Bt,{objectMetadataResult:t,objectMembersResult:a,listSharedLinksResult:n,accountMetadataResult:o,...e,...i})};$t.displayName="Provider";const Ut=()=>{const e=jt(),t=a.useIntl(),o=r.useShowSharingNotification(),i=n.useAtom(e.$objectIdentifier),l=n.useAtom(e.$objectMetadata),c=n.useAtom(e.$objectMembers),d=n.useAtom(e.$linksMetadata),u=n.useAtom(e.$accountMetadata),g=s.useSeenStateInfo(i),_=!g.isLoading&&g.isError;return f.useEffect((()=>{_&&m.reportStack("Error getting seen state info for the Content Member List.",{severity:m.SEVERITY.CRITICAL,tags:["content-member-list"]})}),[_]),f.useMemo((()=>{if(!(l&&c&&d&&u))throw m.reportStack("Resolved data for the Content Member List didn't load properly.",{severity:m.SEVERITY.CRITICAL,tags:["content-member-list"]}),o({type:r.SharingNotificationType.FAILURE,message:be(t)}),new Error("Resolved data for the Content Member List is not loaded.");return{objectMetadata:l,objectMembers:c,linksMetadata:d,accountMetadata:u}}),[l,c,d,u,o,t])},Ht=()=>{const e=a.useIntl(),t=jt(),{objectMetadata:r,linksMetadata:o}=Ut(),{useSimpleDowngradeBanner:i}=n.useAtom(t.$props),l=n.useAtom(t.$showSecurityBanner),c=n.useAtom(t.$securityBannerType),{openLinkSettings:m,enableReadOnlyMode:d}=n.useAtom(t.$props),u=o&&null!==s.getEditLinkMetadata(o),g=o&&null!==s.getViewLinkMetadata(o),_=()=>{t.$showSecurityBanner.set(!1)};if(!(s.getCanInvite(r,{".tag":"editor"})||s.getCanInvite(r,{".tag":"viewer"})))return d?null:f.createElement(Zt,null);if(u&&l){let t;switch(c){case Ct.RemoveAccess:t=ye(e);break;case Ct.DowngradeAccess:default:t=(e=>e.formatMessage({id:"Sy/4UA",defaultMessage:"People who can view could still edit via link."}))(e)}return f.createElement(s.Box,{marginBottom:"Micro Small"},f.createElement(Wt,{header:t,transparentButtonLabel:Ie(e),onClickOutlineButton:_,openLinkSettings:m,isSimpleDowngradeBanner:i}))}return g&&l&&c===Ct.RemoveAccess?f.createElement(s.Box,{marginBottom:"Micro Small"},f.createElement(Wt,{header:ye(e),transparentButtonLabel:Ie(e),onClickOutlineButton:_,openLinkSettings:m,isSimpleDowngradeBanner:i})):null};Ht.displayName="ManageAccessDowngradeBanner";const Zt=()=>{const e=a.useIntl(),t=o.useOpenUrl(),{objectMetadata:n,objectMembers:i,accountMetadata:l}=Ut(),c=r.getIsTeam(l)&&l.team_id===s.getOwnerTeamId(n),m=s.getOwnerTeamName(n),d=r.getIsTeamAdmin(l),u=s.getIsTeamSharedFolder(n),g=s.getIsFolder(n),_=()=>i.groups.some((e=>"team"===(e.group.group_type||{})[".tag"]&&St(e,{".tag":"make_editor"})&&St(e,{".tag":"make_viewer"})))&&null!=m?((e,t)=>e.formatMessage({id:"ifarDl",defaultMessage:"This folder is automatically shared with all members of {team_name}."},{team_name:t}))(e,m):c?d?((e,t)=>e.formatMessage({id:"9MdxEb",defaultMessage:"You can manage access in the admin console. <adminLink>Go to admin console</adminLink>"},{adminLink:e=>f.default.createElement(s.Button,{variant:"transparent",size:"small",onClick:()=>t("/team/admin/content/home")},e)}))(e,t):((e,t)=>e.formatMessage({id:"MSVH3B",defaultMessage:"Only admins and group managers can change team folder membership. <findAdminLink>Find admin</findAdminLink>"},{findAdminLink:e=>f.default.createElement(s.Button,{variant:"transparent",size:"small",onClick:()=>t("/team?_tk=left_nav_team")},e)}))(e,t):null!=m?((e,t)=>e.formatMessage({id:"ToMYBy",defaultMessage:"This folder can only be managed by the {ownerTeamName} team."},{ownerTeamName:t}))(e,m):(e=>e.formatMessage({id:"ReqZ5Y",defaultMessage:"This folder can only be managed by the owner team."}))(e),p=()=>g?(e=>e.formatMessage({id:"qQ/mzN",defaultMessage:"You don’t have permission to manage membership of this folder."}))(e):(e=>e.formatMessage({id:"+xrZUw",defaultMessage:"You don’t have permission to manage membership of this file."}))(e);return f.createElement(s.Box,{marginBottom:"Micro Small"},f.createElement(s.Banner,null,f.createElement(s.Banner.Message,null,u?_():p())))};Zt.displayName="NoPermissionBanner";const Wt=({header:e,onClickOutlineButton:t,openLinkSettings:n,transparentButtonLabel:r,isSimpleDowngradeBanner:o})=>{const i=a.useIntl(),l=o?Ce(i):void 0,c=o?f.createElement(s.Box,{style:{display:"flex",flexDirection:"column",marginRight:"16px"}},f.createElement(s.Text,null,(e=>e.formatMessage({id:"38tA2b",defaultMessage:"People with a link might still have access. Delete the link to remove access."}))(i))):f.createElement(s.Box,{style:{display:"flex",flexDirection:"column",marginBottom:"8px"}},f.createElement(s.Text,null,e),f.createElement(s.Text,null,(e=>e.formatMessage({id:"ov3n4T",defaultMessage:"Delete the link to restrict access."}))(i)));return f.createElement(s.Banner,{style:{padding:"12px"},withCloseButton:l,onRequestClose:t},c,!o&&f.createElement(s.Box,{style:{gap:"8px",display:"flex",flexDirection:"row",alignItems:"center"}},f.createElement(s.Button,{variant:"outline",onClick:t},f.createElement(s.Text,{size:"small",isBold:!0},(e=>e.formatMessage({id:"YCTkuR",defaultMessage:"Got It"}))(i))),f.createElement(s.Button,{variant:"transparent",onClick:()=>{n&&n({initialTab:"edit_link_settings"})}},f.createElement(s.Text,{size:"small",isBold:!0},r))))};Wt.displayName="DowngradeBanner";s.injectInternalStyle("/static/metaserver/static/js/sharing/sharing-sdk/legos/content-member-list/internals/member-access-dropdown.module.out-vflUiNRUX.css",(e=>":root{--sm26-row-height:40px}._sm26Button_irbiv_5,._sm26Row_irbiv_9{height:var(--sm26-row-height)}._sm26Row_irbiv_9{min-height:var(--sm26-row-height)}._sm26Button_irbiv_5:disabled{background-color:var(--dig-color__opacity__surface)}._sm26Button_irbiv_5 svg{color:var(--dig-color__text__subtle)}._sm26MenuContent_irbiv_22>div{outline:none}._sm26MenuContent_irbiv_22 [role=menuitem],._sm26MenuContent_irbiv_22 [role=menuitemradio]{height:var(--sm26-row-height)}"));const Gt="_sm26Button_irbiv_5",Yt="_sm26Row_irbiv_9",Vt="_sm26MenuContent_irbiv_22",zt=({members:e,accountDataMap:t,onClick:n})=>{const r=a.useIntl(),o=e.length>1?Math.min(3,e.length-1):3,i=e.slice(0,o).map((e=>((e,t,a)=>{var s,n,r,o;if("user"in e&&e.user){const a=t[e.user.account_id];return(null===(s=null==a?void 0:a.name)||void 0===s?void 0:s.familiar_name)||(null===(n=null==a?void 0:a.name)||void 0===n?void 0:n.given_name)||e.user.display_name||e.user.email}return"group"in e&&e.group?Xe(a,e.group.group_name,null===(r=e.group.group_type)||void 0===r?void 0:r[".tag"]):"invitee"in e&&"email"===(null===(o=e.invitee)||void 0===o?void 0:o[".tag"])?e.invitee.email:""})(e,t,r))).filter(Boolean),l=r.formatList(i,{type:"unit"}),c=e.length-i.length>0?((e,t)=>e.formatMessage({id:"qI71km",defaultMessage:"{names} and others"},{names:t}))(r,l):l,m=f.useMemo((()=>((e,t,a)=>e.slice(0,2).map(((e,n)=>{if("user"in e&&null!=e.user&&!("invitee"in e)){const s=t[e.user.account_id];return s?ee(n,s,a):te(n,e,a)}return"group"in e&&null!=e.group?se(n,e,a):"invitee"in e&&null!=e.invitee?ae(n,e,a):f.createElement(s.Facepile.Item,{key:n},"")})))(e,t,r.locale)),[e,t,r.locale]);return f.createElement(s.StylelessButton,{onClick:n,style:{width:"100%",cursor:"pointer"},"data-testid":"collapsed-member-summary","aria-label":tt(r)},f.createElement(s.Box,{display:"flex",alignItems:"center",width:"100%",maxWidth:"100%",className:Yt},f.createElement(s.Box,{display:"flex",alignItems:"center",flexGrow:1,minWidth:"0",columnGap:"12"},f.createElement(s.Facepile,{size:"small",isInteractive:!1,interactivity:"Avatar"},m),f.createElement(s.Box,{minWidth:"0",textAlign:"left",whiteSpace:"normal"},f.createElement(s.Text,{size:"medium",variant:"label"},f.createElement(s.Truncate,{lines:2,tooltipControlProps:{auto:!0,placement:"top"}},c)))),f.createElement(s.Box,{display:"flex",alignItems:"center",justifyContent:"center",padding:"10",color:"Text Subtle"},f.createElement(s.UIIcon,{src:s.ChevronRightLine,size:"small"}))))};zt.displayName="CollapsedMemberSummary";const qt=({inheritedMemberCount:e,parentFolderName:t,ownerTeamName:n,onClick:r})=>{const o=a.useIntl(),i=fe(o,null!=t?t:"",null!=n?n:""),l=Qe(o,e);return f.createElement(s.StylelessButton,{onClick:r,style:{width:"100%",cursor:"pointer"},"data-testid":"inherited-summary-row","aria-label":et(o)},f.createElement(s.Box,{display:"flex",alignItems:"center",width:"100%",className:Yt},f.createElement(s.Box,{display:"flex",flexGrow:1,minWidth:"0",columnGap:"12",alignItems:"center"},f.createElement(s.Box,{display:"flex",flexShrink:0,alignItems:"center",justifyContent:"center",backgroundColor:"Background Subtle",borderRadius:"Circular",style:{height:"24px",width:"24px"}},f.createElement(u.FolderSharedDefaultSmall,{height:24,width:24})),f.createElement(s.Box,{display:"flex",flexDirection:"column",alignItems:"flex-start",minWidth:"0",width:"100%"},f.createElement(s.Text,{size:"small",variant:"label",style:{lineHeight:"16px",width:"100%"}},f.createElement(s.Truncate,{lines:1,observeParent:!0,tooltipControlProps:{auto:!0,placement:"top"}},i)),f.createElement(s.Text,{size:"small",color:"subtle",style:{width:"100%"}},f.createElement(s.Truncate,{lines:1,observeParent:!0,tooltipControlProps:{auto:!0,placement:"top"}},l)))),f.createElement(s.Box,{display:"flex",alignItems:"center",justifyContent:"center",padding:"10",color:"Text Subtle"},f.createElement(s.UIIcon,{src:s.ChevronRightLine,size:"small"}))))};qt.displayName="InheritedSummaryRow";const Kt=o.define({name:"sharing.relinquishFolderMembership"},(e=>t=>o.handler(e.sharingRelinquishFolderMembership(t)))),Jt=o.define({name:"sharing.sharingCheckJobStatus"},(e=>t=>o.handler(e.sharingCheckJobStatus(t)))),Qt=r.create({name:"CheckRelinquishFolderMembershipJobStatus"},(()=>{const e=o.useEndpoint(Jt);return f.useCallback((async({asyncJobId:t})=>{const a=await e({async_job_id:t});return"FATAL"===a.status?r.failure("NetworkFailure",{response:a}):"ERROR"===a.status?r.failure("ApiError",{response:a}):"in_progress"===a.output[".tag"]?r.success("InProgress",{response:{...a,output:a.output}}):"failed"===a.output[".tag"]?r.failure("Failed",{response:{...a,output:a.output}}):"complete"===a.output[".tag"]?r.success("Complete",{response:{...a,output:a.output}}):r.failureExhaustsAllTypes(a.output)}),[e])})),Xt=r.create({name:"PollCheckRelinquishFolderMembershipJobStatus"},(()=>{const e=r.useAction(Qt);return f.useCallback((async({asyncJobId:t,timeout:a,interval:s})=>{const n=await r.poll((async()=>{const a=await e({asyncJobId:t});return"InProgress"===a.type?{status:"RETRY"}:{status:"COMPLETE",output:a}}),{timeout:a,interval:s});return"TIMEOUT"===n.status?r.failure("Timeout",null):"ERROR"===n.status?r.failureUncaughtException(n.error):n.output.success?r.success("Complete",n.output.value):n.output}),[e])})),ea=r.create({name:"RelinquishFolderMembership"},(()=>{const e=o.useEndpoint(Kt),t=r.useAction(Xt);return f.useCallback((async({relinquishFolderMembershipArg:a,timeout:s,interval:n})=>{const o=await e(a);if("ERROR"===o.status)return r.failure("ApiError",{response:o});if("FATAL"===o.status)return r.failure("NetworkFailure",{response:o});if("complete"===o.output[".tag"])return r.success("Complete",{response:{...o,output:o.output}});if("async_job_id"!==o.output[".tag"])return r.failureExhaustsAllTypes(o.output);const i=await t({asyncJobId:o.output.async_job_id,timeout:s,interval:n});return i.success?r.success("PollingComplete",i.value):"ApiError"===i.type?r.failure("PollingApiError",i.value):"NetworkFailure"===i.type?r.failure("PollingNetworkFailure",i.value):"Failed"===i.type?r.failure("PollingFailed",i.value):"Timeout"===i.type?r.failure("PollingTimeout",i.value):i}),[e,t])})),ta=o.define({name:"sharing.removeFolderMember"},(e=>t=>o.handler(e.sharingRemoveFolderMemberV2(t)))),aa=o.define({name:"sharing.checkRemoveMemberJobStatus"},(e=>t=>o.handler(e.sharingCheckRemoveMemberJobStatus(t)))),sa=r.create({name:"CheckRemoveFolderMemberJobStatus"},(()=>{const e=o.useEndpoint(aa);return f.useCallback((async({asyncJobId:t})=>{const a=await e({async_job_id:t});return"FATAL"===a.status?r.failure("NetworkFailure",{response:a}):"ERROR"===a.status?r.failure("ApiError",{response:a}):"in_progress"===a.output[".tag"]?r.success("InProgress",{response:{...a,output:a.output}}):"failed"===a.output[".tag"]?r.failure("Failed",{response:{...a,output:a.output}}):"complete"===a.output[".tag"]?r.success("Complete",{response:{...a,output:a.output}}):r.failureExhaustsAllTypes(a.output)}),[e])})),na=r.create({name:"PollCheckRemoveFolderMemberJobStatus"},(()=>{const e=r.useAction(sa);return f.useCallback((async({asyncJobId:t,timeout:a,interval:s})=>{const n=await r.poll((async()=>{const a=await e({asyncJobId:t});return"InProgress"===a.type?{status:"RETRY"}:{status:"COMPLETE",output:a}}),{timeout:a,interval:s});return"TIMEOUT"===n.status?r.failure("Timeout",null):"ERROR"===n.status?r.failureUncaughtException(n.error):n.output.success?r.success("Complete",n.output.value):n.output}),[e])})),ra=r.create({name:"RemoveFolderMember"},(()=>{const e=o.useEndpoint(ta),t=r.useAction(na);return f.useCallback((async({removeFolderMemberArg:a,timeout:s,interval:n})=>{const o=await e(a);if("ERROR"===o.status)return r.failure("ApiError",{response:o});if("FATAL"===o.status)return r.failure("NetworkFailure",{response:o});const i=await t({asyncJobId:o.output.async_job_id,timeout:s,interval:n});return i.success?r.success("PollingComplete",i.value):"ApiError"===i.type?r.failure("PollingApiError",i.value):"NetworkFailure"===i.type?r.failure("PollingNetworkFailure",i.value):"Failed"===i.type?r.failure("PollingFailed",i.value):"Timeout"===i.type?r.failure("PollingTimeout",i.value):i}),[e,t])})),oa=o.define({name:"sharing.getParentFolderAccess"},(e=>t=>o.handler(e.sharingGetParentFolderAccess(t)))),ia=o.define({name:"sharing.relinquishFileMembership"},(e=>t=>o.handler(e.sharingRelinquishFileMembership(t)))),la=o.define({name:"sharing.removeFileMember2"},(e=>t=>o.handler(e.sharingRemoveFileMember2(t)))),ca=o.define({name:"sharing.transferFolder"},(e=>t=>o.handler(e.sharingTransferFolderV2(t)))),ma=o.define({name:"sharing.updateFileMember"},(e=>t=>o.handler(e.sharingUpdateFileMember(t)))),da=o.define({name:"sharing.updateFolderMember"},(e=>t=>o.handler(e.sharingUpdateFolderMemberV2(t)))),ua=e=>{const t=jt(),a=bt();return f.useCallback((s=>{a.select(ct).emit({memberActionType:e,prevAccessLevel:s.access_type});const n=yt(s),o=t.$memberActionsInProgress.get();t.$memberActionsInProgress.set({...o,[r.getUniqueId(n)]:!0})}),[a,e,t.$memberActionsInProgress])},ga=e=>{const t=jt(),a=bt();return f.useCallback((async(n,o)=>{a.select(mt).emit({memberActionType:e});const i=t.$memberActionsInProgress.get(),l=yt(n),c={...i};delete c[r.getUniqueId(l)],await s.invalidateObjectMembers(o),window.requestAnimationFrame((()=>{t.$memberActionsInProgress.set({...c})}))}),[a,e,t.$memberActionsInProgress])},_a=e=>e.formatMessage({id:"xn+a8/",defaultMessage:"An unexpected error has occurred."}),pa=()=>{const e=a.useIntl(),t=r.useShowSharingNotification();return f.useCallback((()=>{t({type:r.SharingNotificationType.FAILURE,message:_a(e)})}),[e,t])},fa=()=>{const e=jt();return f.useCallback((t=>{e.$props.get().onConfirmationModalShownChange(t)}),[e])},Ea=async(e,t=6,a=1e4)=>{let s=0,n={};for(;!(null==n?void 0:n.success)&&s<t;){if(n=await e(),n.success)return n;s++,s<t&&await new Promise((e=>setTimeout(e,a)))}return n},ha=()=>{const e=o.useLogger(),t=r.useShowSharingNotification(),a=r.useAction(r.action$1);return f.useCallback((async({sharedFolderId:s,inProgressMessage:n,setToConfidential:o,keepInheritedMembers:i=!1})=>{t({type:r.SharingNotificationType.IN_PROGRESS,message:n}),e("SHARE_MODAL_MANAGE_ACCESS__SET_ACCESS_INHERITANCE__API_START",null);const l=await a({setAccessInheritanceArg:{shared_folder_id:s,access_inheritance:o?{".tag":"no_inherit"}:{".tag":"inherit"},keep_inherited_members:o?i:void 0},timeout:12e4,interval:1e3});return l.success?e("SHARE_MODAL_MANAGE_ACCESS__SET_ACCESS_INHERITANCE__API_SUCCESS",null):e("SHARE_MODAL_MANAGE_ACCESS__SET_ACCESS_INHERITANCE__API_FAILURE",{output:l}),l}),[t,e,a])},ba=()=>{const e=jt(),t=o.useLogger(),a=n.useAtom(e.$objectIdentifier),s=r.useAction(r.action);return f.useCallback((async({onStart:e,onInProgress:n,onCancel:r,onSuccess:o,onError:i,setToConfidential:l})=>{if(t("SHARE_MODAL_MANAGE_ACCESS__SHARE_FILE_FOLDER__API_START",null),e(),"file_folder"!==a[".tag"])return i(),null;n();const c=void 0!==l?l?{".tag":"confidential"}:{".tag":"not_confidential"}:void 0,m=await s({path:a.path,timeout:12e4,interval:1e3,confidentiality:c});if(!m.success)return"ApiError"===m.type&&"bad_path"===m.value.response.error[".tag"]&&"already_shared"===m.value.response.error.bad_path[".tag"]&&m.value.response.error.bad_path.shared_folder_id?(t("SHARE_MODAL_MANAGE_ACCESS__SHARE_FILE_FOLDER__API_FAILURE",{output:m}),m.value.response.error.bad_path.shared_folder_id):(t("SHARE_MODAL_MANAGE_ACCESS__SHARE_FILE_FOLDER__API_FAILURE",{output:m}),r(),i(),null);t("SHARE_MODAL_MANAGE_ACCESS__SHARE_FILE_FOLDER__API_SUCCESS",null);const d=m.value.response.output.shared_folder_id;return o(d),d}),[t,a,s])},Ma=()=>{const e=jt(),t=n.useAtom(e.$objectIdentifier),a=pa(),s=ba(),o=r.useShowSharingNotification(),i=ua("share_folder"),l=ga("share_folder"),c=(()=>{const e=bt();return f.useCallback((()=>{e.select(dt).emit({memberActionType:"share_folder"})}),[e])})();return f.useCallback((async(e,n)=>await s({onStart:()=>{i(e)},onInProgress:()=>{o({type:r.SharingNotificationType.IN_PROGRESS,message:n})},onCancel:()=>{l(e,t)},onSuccess:()=>{c()},onError:()=>{a()}})),[s,i,o,l,t,c,a])},Sa=()=>{const e=jt(),{objectMetadata:t}=Ut(),i=o.useLogger(),l=a.useIntl(),c=r.useShowSharingNotification(),d=n.useAtom(e.$objectIdentifier),{onObjectIdentifierChanged:u}=n.useAtom(e.$props),g=pa(),_=Ma(),p=ha(),E=o.useEndpoint(ma),h=o.useEndpoint(da),b=o.useEndpoint(oa),M=ga("change_member_access"),S=(()=>{const e=jt(),t=bt();return f.useCallback((async(a,o,i)=>{t.select(dt).emit({memberActionType:"change_member_access",newAccessLevel:i});const l=e.$memberActionsInProgress.get(),c=yt(a),m={...l};delete m[r.getUniqueId(c)],n.batch((()=>{e.$tempMemberAccessLevelData.set({accessLevel:i,member:c}),e.$memberActionsInProgress.set(m)})),await s.invalidateObjectMembers(o)}),[t,e.$memberActionsInProgress,e.$tempMemberAccessLevelData])})(),v=ua("change_member_access");return f.useCallback((async(a,n,o)=>{var f,A;const y=o.is_inherited&&"viewer"===a[".tag"]&&"viewer"!==(null===(f=o.inherited_access_type)||void 0===f?void 0:f[".tag"]);if(v(o),t&&s.getIsFile(t)){const n=yt(o),m={file:s.isNewApiMetadata(t)?(null===(A=t.common_metadata)||void 0===A?void 0:A.file_id)||"":t.id,member:n,access_level:a};i("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FILE_MEMBER_ACCESS__API_START",null),y||c({type:r.SharingNotificationType.IN_PROGRESS,message:Te(l)});const u=await E(m);"SUCCESS"===u.status?(i("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FILE_MEMBER_ACCESS__API_SUCCESS",{response:u}),u.output.access_level&&u.output.access_level!==a?(M(o,d),e.$changeFileMemberAccessFailureData.set({error:u.output,member:n})):(S(o,d,a),c({type:r.SharingNotificationType.COMPLETED,message:we(l)}))):("ERROR"===u.status?(c({type:r.SharingNotificationType.FAILURE,message:Pe(l)},{message:Fe(l)}),i("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FILE_MEMBER_ACCESS__API_ERROR",{response:u})):i("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FILE_MEMBER_ACCESS__API_FATAL",{response:u}),M(o,d),g())}else if(t&&(s.getIsSharedFolder(t)||s.getIsNonSharedFolder(t)&&n)){const f=s.getName(t);let E=s.getIsNonSharedFolder(t)?null:s.getSharedFolderId(t);if(s.getIsNonSharedFolder(t)&&(E=await _(o,xe(l,f))),!E)return r.invalidateSharingObjectMetadata(d),r.invalidateNewApiObjectMetadata(d),void m.reportException({err:new Error("Failed to update member access level. Shared folder ID is null."),tags:["sharing","content-member-list","update-member-action"],severity:m.SEVERITY.CRITICAL});const b={".tag":"shared_folder",sharedFolderId:E,fileId:d.fileId};if(n){const t=await Ea((()=>p({sharedFolderId:E,inProgressMessage:xe(l,f),setToConfidential:!0,keepInheritedMembers:!0})));if(e.$props.get().onChangeConfidentiality(),!t.success)return c({type:r.SharingNotificationType.FAILURE,message:De(l)},{message:Oe(l)}),m.reportException({err:new Error("Failed to update member access level. Access inheritance response is not successful."),tags:["sharing","content-member-list","update-member-action"],severity:m.SEVERITY.CRITICAL}),void u(b);r.invalidateSharingObjectMetadata(b),r.invalidateNewApiObjectMetadata(b)}i("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_START",null),y||c({type:r.SharingNotificationType.IN_PROGRESS,message:Te(l)});const v=yt(o),A=await h({shared_folder_id:E,member:v,access_level:a});"SUCCESS"===A.status?(i("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_SUCCESS",{response:A}),A.output.access_level&&A.output.access_level!==a?(s.invalidateObjectMembers(b),M(o,b),e.$changeMemberAccessLevelData.set({data:A.output||[],member:v})):(S(o,b,a),c({type:r.SharingNotificationType.COMPLETED,message:we(l)}))):"ERROR"===A.status?(i("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_ERROR",{response:A}),c({type:r.SharingNotificationType.FAILURE,message:Pe(l)},{message:Fe(l)}),e.$changeFolderMemberAccessFailureData.set({error:A.error,member:v}),M(o,b)):(i("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_FATAL",{response:A}),M(o,b),g(),c({type:r.SharingNotificationType.FAILURE,message:De(l)},{message:Oe(l)})),u(b)}else if(t&&s.getIsNonSharedFolder(t)){if("viewer"===a[".tag"]){i("SHARE_MODAL_MANAGE_ACCESS__GET_PARENT_FOLDER_ACCESS__API_START",null);const n=yt(o),r=await b({shared_folder_id:s.getParentSharedFolderId(t)||"",member:n,access_level:a});return void("SUCCESS"===r.status?(i("SHARE_MODAL_MANAGE_ACCESS__GET_PARENT_FOLDER_ACCESS__API_SUCCESS",{response:r}),e.$changeMemberAccessLevelData.set({member:n,data:r.output})):("ERROR"===r.status?i("SHARE_MODAL_MANAGE_ACCESS__GET_PARENT_FOLDER_ACCESS__API_ERROR",{response:r}):i("SHARE_MODAL_MANAGE_ACCESS__GET_PARENT_FOLDER_ACCESS__API_FATAL",{response:r}),g()))}const n=await _(o,Te(l));if(!n)return r.invalidateSharingObjectMetadata(d),r.invalidateNewApiObjectMetadata(d),void m.reportException({err:new Error("Failed to update member access level. Shared folder ID is null."),tags:["sharing","content-member-list","update-member-action"],severity:m.SEVERITY.CRITICAL});const p={".tag":"shared_folder",sharedFolderId:n};u(p),i("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_START",null);const f=yt(o),E=await h({shared_folder_id:n||"",member:f,access_level:a});"SUCCESS"===E.status?(i("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_SUCCESS",{response:E}),E.output.access_level&&E.output.access_level!==a?(M(o,p),e.$changeMemberAccessLevelData.set({data:E.output||[],member:f})):(S(o,p,a),c({type:r.SharingNotificationType.COMPLETED,message:we(l)}))):("ERROR"===E.status?i("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_ERROR",{response:E}):i("SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_FATAL",{response:E}),M(o,p),g(),c({type:r.SharingNotificationType.FAILURE,message:De(l)},{message:Oe(l)}))}}),[v,t,i,E,c,l,M,d,e,S,g,u,h,_,p,b])},va=()=>{const e=jt(),{objectMetadata:t}=Ut(),i=o.useLogger(),l=a.useIntl(),c=r.useShowSharingNotification(),d=o.useEndpoint(ia),u=r.useAction(ea),g=n.useAtom(e.$objectIdentifier),{onObjectIdentifierChanged:_,onChangeConfidentiality:p}=n.useAtom(e.$props),E=Ma(),h=ha(),b=pa(),M=ua("relinquish_folder_membership"),S=ga("relinquish_folder_membership"),v=(()=>{const e=jt(),t=bt();return f.useCallback((async()=>{t.select(dt).emit({memberActionType:"relinquish_folder_membership"}),e.$props.get().onRequestClose(!0)}),[t,e.$props])})();return f.useCallback((async(e,a,n)=>{var o;if(t&&s.getIsFile(t)){M(e),i("SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FILE_MEMBERSHIP__API_START",null);const a=await d({file:s.isNewApiMetadata(t)?(null===(o=t.common_metadata)||void 0===o?void 0:o.file_id)||"":t.id});S(e,g),"SUCCESS"===a.status?(i("SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FILE_MEMBERSHIP__API_SUCCESS",{response:a}),v()):("ERROR"===a.status?i("SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FILE_MEMBERSHIP__API_ERROR",{response:a}):i("SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FILE_MEMBERSHIP__API_FATAL",{response:a}),b())}if(t&&(s.getIsSharedFolder(t)||s.getIsNonSharedFolder(t)&&a)){const o=s.getName(t);let d=s.getIsNonSharedFolder(t)?null:s.getSharedFolderId(t);if(s.getIsNonSharedFolder(t)&&(d=await E(e,Re(l,o))),!d)return void m.reportException({err:new Error("Failed to remove member. Shared folder ID is null."),tags:["sharing","content-member-list","remove-member-action"],severity:m.SEVERITY.CRITICAL});const f={".tag":"shared_folder",sharedFolderId:d,fileId:g.fileId};if(_(f),a){const t=await h({sharedFolderId:d,inProgressMessage:Re(l,o),setToConfidential:!0,keepInheritedMembers:!0});if(p(),!t.success)return S(e,f),b(),c({type:r.SharingNotificationType.FAILURE,message:Ne(l)}),void m.reportException({err:new Error("Failed to update member access level. Access inheritance response is not successful."),tags:["sharing","content-member-list","update-member-action"],severity:m.SEVERITY.CRITICAL});r.invalidateSharingObjectMetadata(f),r.invalidateNewApiObjectMetadata(f)}if(null!==d&&void 0!==n){M(e),i("SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FOLDER_MEMBERSHIP__API_START",null);const t=await u({relinquishFolderMembershipArg:{shared_folder_id:d,leave_a_copy:n},timeout:12e4,interval:1e3});S(e,f),t.success?(i("SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FOLDER_MEMBERSHIP__API_SUCCESS",null),v(),c({type:r.SharingNotificationType.COMPLETED,message:Le(l,o)})):(i("SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FOLDER_MEMBERSHIP__API_FAILURE",{output:t}),b(),c({type:r.SharingNotificationType.FAILURE,message:Ne(l)}))}}}),[t,M,i,d,S,g,v,b,_,E,l,h,p,c,u])},Aa=()=>{const e=jt(),{objectMetadata:t}=Ut(),i=o.useLogger(),l=a.useIntl(),c=r.useShowSharingNotification(),d=o.useEndpoint(la),u=o.useEndpoint(oa),g=r.useAction(ra),_=n.useAtom(e.$objectIdentifier),{onObjectIdentifierChanged:p}=n.useAtom(e.$props),E=Ma(),h=ha(),b=pa(),M=ga("remove_member"),S=ua("remove_member"),v=(()=>{const e=jt(),t=bt();return f.useCallback((async(a,n)=>{t.select(dt).emit({memberActionType:"remove_member"});const o=yt(a),i={...e.$memberActionsInProgress.get()};delete i[r.getUniqueId(o)],await s.invalidateObjectMembers(n),window.requestAnimationFrame((()=>{e.$memberActionsInProgress.set(i)}))}),[t,e.$memberActionsInProgress])})();return f.useCallback((async(a,n,o,f)=>{var A;const y=yt(a);if(t&&s.getIsFile(t)){S(a),i("SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_START",null);const n=await d({file:s.isNewApiMetadata(t)?(null===(A=t.common_metadata)||void 0===A?void 0:A.file_id)||"":t.id,member:y});"SUCCESS"===n.status?i("SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_SUCCESS",{response:n}):"ERROR"===n.status?i("SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_ERROR",{response:n}):i("SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_FATAL",{response:n}),"SUCCESS"===n.status?"success"===n.output[".tag"]&&n.output.access_level?(M(a,_),e.$removeFileMemberWarningData.set({error:n.output,member:y})):v(a,_):"ERROR"===n.status&&"no_explicit_access"===n.error[".tag"]?(M(a,_),e.$removeFileMemberFailureData.set({error:n.error,member:y})):(M(a,_),b())}if(t&&(s.getIsSharedFolder(t)||s.getIsNonSharedFolder(t)&&n)){let d=s.getIsNonSharedFolder(t)?null:s.getSharedFolderId(t);const u=s.getName(t);if(s.getIsNonSharedFolder(t)&&(d=await E(a,o?ke(l,u):Re(l,u))),!d)return void m.reportException({err:new Error("Failed to remove member. Shared folder ID is null."),tags:["sharing","content-member-list","remove-member-action"],severity:m.SEVERITY.CRITICAL});const A={".tag":"shared_folder",sharedFolderId:d,fileId:_.fileId};if(n){const t=await Ea((()=>h({sharedFolderId:d,inProgressMessage:o?ke(l,u):Re(l,u),setToConfidential:!0,keepInheritedMembers:!0})));if(e.$props.get().onChangeConfidentiality(),!t.success)return M(a,A),b(),c({type:r.SharingNotificationType.FAILURE,message:o?Be(l):Ne(l)}),m.reportException({err:new Error("Failed to update member access level. Access inheritance response is not successful."),tags:["sharing","content-member-list","update-member-action"],severity:m.SEVERITY.CRITICAL}),p(A),void M(a,A)}if(r.invalidateSharingObjectMetadata(A),r.invalidateNewApiObjectMetadata(A),null!==d&&void 0!==f){S(a),i("SHARE_MODAL_MANAGE_ACCESS__REMOVE_FOLDER_MEMBER__API_START",null);const t=await g({removeFolderMemberArg:{shared_folder_id:d,member:y,leave_a_copy:f},timeout:12e4,interval:1e3});if(t.success){if(i("SHARE_MODAL_MANAGE_ACCESS__REMOVE_FOLDER_MEMBER__API_SUCCESS",null),"complete"===t.value.response.output[".tag"]&&t.value.response.output.access_level)return M(a,A),void e.$removeMemberAccessLevelData.set({member:y,data:t.value.response.output});v(a,A),c({type:r.SharingNotificationType.COMPLETED,message:o?je(l,u):Le(l,u)},{message:$e(l,vt(a,l))})}else"ApiError"===t.type?(i("SHARE_MODAL_MANAGE_ACCESS__REMOVE_FOLDER_MEMBER__API_FAILURE",{output:t}),e.$removeFolderMemberFailureData.set({error:t.value.response.error,member:y}),M(a,A)):(i("SHARE_MODAL_MANAGE_ACCESS__REMOVE_FOLDER_MEMBER__API_FAILURE",{output:t}),M(a,A),b(),c({type:r.SharingNotificationType.FAILURE,message:o?Be(l):Ne(l)}))}p(A)}else if(t&&s.getIsNonSharedFolder(t)){i("SHARE_MODAL_MANAGE_ACCESS__GET_PARENT_FOLDER_ACCESS__API_START",null);const a=await u({shared_folder_id:s.getParentSharedFolderId(t)||"",member:y});"SUCCESS"===a.status?(i("SHARE_MODAL_MANAGE_ACCESS__GET_PARENT_FOLDER_ACCESS__API_SUCCESS",{response:a}),e.$removeMemberAccessLevelData.set({member:y,data:a.output})):("ERROR"===a.status?i("SHARE_MODAL_MANAGE_ACCESS__GET_PARENT_FOLDER_ACCESS__API_ERROR",{response:a}):i("SHARE_MODAL_MANAGE_ACCESS__GET_PARENT_FOLDER_ACCESS__API_FATAL",{response:a}),b())}}),[t,S,i,d,M,_,e,v,b,p,E,l,c,h,g,u])},ya=()=>{const e=jt(),{objectMetadata:t}=Ut(),i=o.useLogger(),l=o.useEndpoint(ca),c=pa(),m=a.useIntl(),d=r.useShowSharingNotification(),u=n.useAtom(e.$objectIdentifier),g=ua("transfer_folder_ownership"),_=ga("transfer_folder_ownership"),p=(()=>{const e=jt(),t=bt();return f.useCallback((async()=>{t.select(dt).emit({memberActionType:"transfer_folder_ownership"}),await e.$props.get().onTransferFolderOwnership()}),[t,e.$props])})();return f.useCallback((async(e,a,n)=>{if(!t||t&&!s.getIsSharedFolder(t))throw new Error("Unsupported file type.");g(a),i("SHARE_MODAL_MANAGE_ACCESS__TRANSFER_FOLDER__API_START",null);const o=await l({shared_folder_id:s.getSharedFolderId(t),to_dropbox_id:e});"SUCCESS"===o.status?(i("SHARE_MODAL_MANAGE_ACCESS__TRANSFER_FOLDER__API_SUCCESS",null),await p(),d({type:r.SharingNotificationType.COMPLETED,message:Ue(m,n)})):(_(a,u),"ERROR"===o.status?i("SHARE_MODAL_MANAGE_ACCESS__TRANSFER_FOLDER__API_ERROR",{response:o}):"FATAL"===o.status&&i("SHARE_MODAL_MANAGE_ACCESS__TRANSFER_FOLDER__API_FATAL",{response:o}),c())}),[t,g,i,l,_,u,p,m,d,c])},Ia=()=>{const e=jt(),{objectMetadata:t}=Ut(),o=a.useIntl(),i=r.useShowSharingNotification(),l=n.useAtom(e.$objectIdentifier),{onObjectIdentifierChanged:c,onChangeConfidentiality:d}=n.useAtom(e.$props),u=pa(),g=(()=>{const e=bt();return f.useCallback((()=>{e.select(ut).emit({memberActionType:"remove_all_inherited_members"})}),[e])})(),_=(()=>{const e=bt();return f.useCallback((()=>{e.select(gt).emit({memberActionType:"remove_all_inherited_members"})}),[e])})(),p=(()=>{const e=jt(),t=bt();return f.useCallback((async(a,n=!1)=>{n||t.select(_t).emit({memberActionType:"remove_all_inherited_members"}),await s.invalidateObjectMembers(a),e.$props.get().onChangeConfidentiality()}),[t,e.$props])})(),E=ba(),h=ha();return f.useCallback((async a=>{if(!t)return u(),null;const n=async()=>{const a=e.$objectIdentifier.get();if("shared_folder"!==a[".tag"])return void m.reportException({err:new Error("Failed to remove all inherited members. Object identifier is not a shared folder."),tags:["sharing","content-member-list","remove-all-inherited-members-action"],severity:m.SEVERITY.CRITICAL});const s=await h({sharedFolderId:a.sharedFolderId,inProgressMessage:Ee(o,!1,t),setToConfidential:!1});d(),s.success?(i({type:r.SharingNotificationType.COMPLETED,message:Me(o,!1,t)}),p(a,!0)):i({type:r.SharingNotificationType.FAILURE,message:he(o,!1)})};if("shared_folder"===l[".tag"]){g();const e=await h({sharedFolderId:l.sharedFolderId,inProgressMessage:Ee(o,a,t),setToConfidential:!0,keepInheritedMembers:!1});return d(),e.success?(i({type:r.SharingNotificationType.COMPLETED_WITH_UNDO,message:Me(o,a,t),undoOnClick:n}),await s.invalidateObjectMembers(l),p(l)):(i({type:r.SharingNotificationType.FAILURE,message:he(o,!0)}),_()),l.sharedFolderId}{const a=a=>{i({type:r.SharingNotificationType.COMPLETED_WITH_UNDO,message:Me(o,!0,t),undoOnClick:n});const s={".tag":"shared_folder",sharedFolderId:a,fileId:l.fileId};r.invalidateSharingObjectMetadata(l),r.invalidateNewApiObjectMetadata(l),e.$objectIdentifier.set(s),p(s),c(s)},s=()=>{i({type:r.SharingNotificationType.IN_PROGRESS,message:Ee(o,!0,t)})},m=()=>{i({type:r.SharingNotificationType.FAILURE,message:he(o,!0)})};return await E({onStart:()=>{g()},onInProgress:s,onCancel:()=>{_()},onSuccess:a,onError:m,setToConfidential:!0})}}),[t,l,u,e.$objectIdentifier,h,o,i,d,p,g,_,E,c])},Ca=({isOpen:e,onClose:t})=>{const{objectMetadata:n}=Ut(),i=bt(),l=a.useIntl(),c=o.usePlatform()!==o.Platforms.DESKTOP,m=fa(),d=Ia();if(f.useEffect((()=>{m(e)}),[e,m]),f.useEffect((()=>{e&&i.select(lt).emit(null)}),[e,i]),!e)return null;const u=s.getName(n),g=s.getParentFolderName(n);return f.createElement(f.Fragment,null,f.createElement(s.Modal,{open:e,isCentered:!0,withCloseButton:c?Ce(l):void 0,onRequestClose:()=>{t()}},f.createElement(s.Modal.Header,{hasBottomSpacing:"title-standard"},f.createElement(s.Modal.Title,null,((e,t)=>e.formatMessage({id:"V8posb",defaultMessage:"Remove members of “{parentFolderName}” folder?"},{parentFolderName:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.FOLDER_NAME)}))(l,g))),f.createElement(s.Modal.Body,null,((e,t,a)=>e.formatMessage({id:"YMtvO3",defaultMessage:"Members of <b>{parentFolderName}</b> folder won’t be able to access <b>{folderName}</b>."},{parentFolderName:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.FOLDER_NAME),folderName:r.Emstring.em_snippet(a,s.SNIPPET_SIZES.FOLDER_NAME),b:e=>f.default.createElement("b",{style:{fontWeight:500}},e)}))(l,g,u)),f.createElement(s.Modal.Footer,null,f.createElement(s.Button,{variant:"opacity",onClick:()=>{t()}},(e=>e.formatMessage({id:"JJWPQC",defaultMessage:"Cancel"}))(l)),f.createElement(s.Button,{variant:"primary",onClick:()=>{t(),d(!0)}},(e=>e.formatMessage({id:"0BoZ69",defaultMessage:"Remove"}))(l)))))};Ca.displayName="RemoveAllInheritedMembersConfirmationModal";const Na=["children","className","size","withDividers"],Ra=["children","className","withDividers"],La=["className"],Ta=["className"],wa=["className","src"],Pa=["children","className","as","tooltipControlProps","onOverflow"];var Fa=f.createContext({withDividers:"bullet",size:"small"}),xa=s.atoms({outline:"none",color:{active:"Text Base"}}),Da=Object.assign((e=>{let{children:t,className:a,size:n,withDividers:r}=e,o=l._objectWithoutProperties(e,Na);const i=f.useContext(Fa),c=null!=n?n:i.size,m=null!=r?r:i.withDividers;return f.createElement(Fa.Provider,{value:{withDividers:m,size:c}},f.createElement("span",l._objectSpread2({role:"list",className:s.classNames2("dig-1gvg1ar2_23-4-0",a,{"dig-1gvg1ar3_23-4-0":"bullet"===m,"dig-1gvg1ar4_23-4-0":"small"===c,"dig-1gvg1ar5_23-4-0":"medium"===c})},o),t))}),{Item:e=>{let{children:t,className:a,withDividers:n}=e,r=l._objectWithoutProperties(e,Ra);const{withDividers:o,size:i}=f.useContext(Fa),c=n||o;return f.createElement("span",l._objectSpread2({role:"listitem",className:s.classNames2("dig-1chkwpz3_23-4-0","dig-1chkwpz4_23-4-0",a,{"dig-1chkwpz5_23-4-0":"bullet"===c,"dig-1chkwpz6_23-4-0":"small"===i,"dig-1chkwpz7_23-4-0":"medium"===i})},r),t)},Avatar:e=>{let{className:t}=e,a=l._objectWithoutProperties(e,La);const{size:n}=f.useContext(Fa),r=s.classNames2(t,"dig-s81hzm0_23-4-0",{"dig-s81hzm1_23-4-0":"medium"===n});return f.createElement(s.Avatar,l._objectSpread2(l._objectSpread2({},a),{},{className:r,size:"small"===n?"xsmall":"small"}))},UIIcon:e=>{let{className:t}=e,a=l._objectWithoutProperties(e,Ta);const{size:n}=f.useContext(Fa),r=s.classNames2(t,"dig-1j0056m0_23-4-0",{"dig-1j0056m1_23-4-0":"medium"===n});return f.createElement(s.UIIcon,l._objectSpread2(l._objectSpread2({},a),{},{className:r,size:"small"}))},ArbitraryIcon:e=>{let{className:t,src:a}=e,n=l._objectWithoutProperties(e,wa);const{size:r}=f.useContext(Fa),o=s.classNames2(t,"dig-unay0n0_23-4-0",{"dig-unay0n1_23-4-0":"small"===r,"dig-unay0n2_23-4-0":"medium"===r});return f.createElement("span",l._objectSpread2(l._objectSpread2({},n),{},{className:o}),a)},Label:e=>{let{children:t,className:a,as:n,tooltipControlProps:r,onOverflow:o}=e,i=l._objectWithoutProperties(e,Pa);const c=f.useRef(null),[m,d]=f.useState(!1),[u,g]=f.useState(!1);s.useResizeObserver(c,(e=>{const{target:t}=e;if(t instanceof HTMLElement){const e=t.offsetWidth<t.scrollWidth;d(e),o&&o({target:t,isOverflowing:e})}}));const _=()=>{m&&g(!0)},p=()=>{m&&g(!1)},E=n||"span",h="a"===n||"button"===n;return f.createElement(f.Fragment,null,m&&f.createElement(s.Tooltip.Control,l._objectSpread2({triggerRef:c,placement:"top",isPortaled:!0,open:u,auto:!0,shouldReturnFocus:!1,openDelay:250,variant:"basic"},r),t),f.createElement(E,l._objectSpread2(l._objectSpread2({},i),{},{onPointerEnter:()=>{_(),i.onPointerEnter&&i.onPointerEnter()},onPointerLeave:()=>{p(),i.onPointerLeave&&i.onPointerLeave()},onFocus:()=>{_(),i.onFocus&&i.onFocus()},onBlur:()=>{p(),i.onBlur&&i.onBlur()},className:s.classNames2("dig-mrhnna0_23-4-0",a,{"dig-mrhnna2_23-4-0":h,[xa]:h})}),f.createElement("span",{ref:c,className:"dig-mrhnna1_23-4-0"},t)))}});const Oa=e=>{if("member_error"===e[".tag"]){const t=e.member_error;if("no_explicit_access"===t[".tag"]){return t.access_details||[]}}return[]},ka=e=>e.formatMessage({id:"R8tdDL",defaultMessage:"Can edit"}),Ba=e=>e.formatMessage({id:"2kS9ex",defaultMessage:"Can view"}),ja=e=>e.formatMessage({id:"pI4aSB",defaultMessage:"View-only"}),$a=e=>e.formatMessage({id:"UznKXK",defaultMessage:"People can edit, delete, comment, and add the files to their Dropbox"}),Ua=e=>e.formatMessage({id:"ScDA/0",defaultMessage:"People can edit, delete, comment, and add the file to their Dropbox"}),Ha=e=>e.formatMessage({id:"WlnggN",defaultMessage:"People can edit, delete, and add items to this collection"}),Za=e=>e.formatMessage({id:"jSEExB",defaultMessage:"People can view, download, and comment"}),Wa=e=>e.formatMessage({id:"svq/mv",defaultMessage:"People can view and download items in this collection"}),Ga=e=>e.formatMessage({id:"5AmS1v",defaultMessage:"People can only view and download the file"}),Ya=e=>{const{intl:t,folderName:a,folderPath:n,role:r,isPaired:o,onManageAccessClicked:i}=e,l=((e,t)=>e?`/${t}`:"/home")(o,r),c=`${l}${n}?share_manage_access=true`;return f.createElement(s.Menu.Row,{preferComposition:!0,style:{height:"57px",alignItems:"center"}},f.createElement(s.Menu.RowAccessory,null,f.createElement(u.FolderSharedDefaultSmall,null)),f.createElement(s.Menu.RowContent,null,f.createElement(s.Truncate,{location:.5},f.createElement(s.Menu.RowTitle,null,a))),f.createElement(s.Menu.RowAccessory,null,f.createElement(s.Button,{variant:"transparent",onClick:()=>{i(c)},size:"small"},(e=>e.formatMessage({id:"Ca+R4I",defaultMessage:"Manage Access"}))(t))))},Va=e=>{const t=jt(),a=fa(),s=ga("change_member_access"),r=n.useAtom(t.$props).objectIdentifier;return f.useCallback((()=>{t.$changeFileMemberAccessFailureData.set(null),t.$changeFolderMemberAccessFailureData.set(null),t.$changeMemberAccessLevelData.set(null),a(!1),s(e,r)}),[e,r,a,s,t])},za=({member:e})=>{var t;const r=jt(),i=bt(),l=a.useIntl(),{objectMetadata:c}=Ut(),m=n.useAtom(r.$changeFileMemberAccessFailureData),d=vt(e,l),u=o.usePlatform()!==o.Platforms.DESKTOP,g=f.useRef(!1),_=m&&m.error.access_details;f.useEffect((()=>{g.current||_&&(g.current=!0,i.select(rt).emit(null))}),[_,i]);const p=Va(e),E=fa();if(!_)return null;const h=m.error.access_details,b=h?h[0]:void 0;return E(!0),b?f.createElement(s.Modal,{open:!0,isCentered:!0,withCloseButton:u?Ce(l):void 0,onRequestClose:p},f.createElement(s.Modal.Header,{hasBottomSpacing:"title-standard"},f.createElement(s.Modal.Title,null,Ge(l,d))),f.createElement(s.Modal.Body,null,Ye(l,null!==(t=null==h?void 0:h.length)&&void 0!==t?t:0,s.getName(c),b.folder_name)),f.createElement(s.Modal.Footer,null,f.createElement(s.Button,{variant:"primary",onClick:p},Ve(l)))):f.createElement(s.Modal,{open:!0,isCentered:!0,withCloseButton:u?Ce(l):void 0,onRequestClose:p},f.createElement(s.Modal.Header,{hasBottomSpacing:"title-standard"},f.createElement(s.Modal.Title,null,We(l,d))),f.createElement(s.Modal.Body,null,Ze(l,d,s.getName(c))),f.createElement(s.Modal.Footer,null))};za.displayName="NoExplicitAccessOnAccessChangeModal";const qa=({member:e})=>{const t=jt(),i=a.useIntl(),l=bt(),{objectMetadata:c,accountMetadata:m}=Ut(),d=n.useAtom(t.$changeFolderMemberAccessFailureData),u=n.useAtom(t.$changeMemberAccessLevelData),g=(()=>{const e=o.useOpenUrl();return f.useCallback((t=>e(t)),[e])})(),_=Va(e),p=vt(e,i),E=o.usePlatform()!==o.Platforms.DESKTOP,h=f.useRef(!1),b=d||u,M=yt(e),S=(null==u?void 0:u.member)||(null==d?void 0:d.member),v=r.getAreMemberSelectorsEqual(S,M);if(f.useEffect((()=>{const e=b&&v;h.current||e&&(h.current=!0,l.select(rt).emit(null))}),[b,v,l]),!b)return null;if(!v)return null;const A=d?Oa(d.error):(null==u?void 0:u.data.access_details)||[];if(!(0!==A.length))return f.createElement(s.Modal,{open:!0,isCentered:!0,withCloseButton:E?Ce(i):void 0,onRequestClose:_},f.createElement(s.Modal.Header,{hasBottomSpacing:"title-standard"},f.createElement(s.Modal.Title,null,We(i,p))),f.createElement(s.Modal.Body,null,Ze(i,p,s.getName(c))),f.createElement(s.Modal.Footer,null,f.createElement(s.Button,{variant:"opacity",onClick:_},ze(i))));const y=Ye(i,A.length,s.getName(c),A[0].folder_name);return f.createElement(s.Modal,{open:!0,isCentered:!0,withCloseButton:E?Ce(i):void 0,onRequestClose:_},f.createElement(s.Modal.Header,{hasBottomSpacing:"title-standard"},f.createElement(s.Modal.Title,null,Ge(i,p))),f.createElement(s.Modal.Body,null,y,f.createElement(s.Box,{style:{height:"100%",maxHeight:"150px",border:"1px solid #DFDCD8",borderRadius:"5px",overflow:"auto",marginTop:"var(--spacing__unit--3)"}},A.slice(0,15).map(((e,t)=>f.createElement(Ya,{key:t,intl:i,folderName:e.folder_name,folderPath:e.path,onManageAccessClicked:g,role:m.role,isPaired:m.is_paired}))))),f.createElement(s.Modal.Footer,null,f.createElement(s.Button,{variant:"opacity",onClick:_},ze(i))))};qa.displayName="ParentFolderAccessModal";const Ka=e=>{const t=jt(),a=fa(),s=ga("remove_member"),r=n.useAtom(t.$objectIdentifier);return f.useCallback((()=>{t.$removeFileMemberFailureData.set(null),t.$removeFileMemberWarningData.set(null),t.$removeFolderMemberFailureData.set(null),t.$removeMemberAccessLevelData.set(null),a(!1),s(e,r)}),[e,r,a,s,t])},Ja=({member:e})=>{var t,r,i,l;const c=jt(),{objectMetadata:m}=Ut(),d=a.useIntl(),u=bt(),g=n.useAtom(c.$removeFileMemberFailureData),_=n.useAtom(c.$removeFileMemberWarningData),p=Ka(e),E=vt(e,d),h=fa(),b=o.usePlatform()!==o.Platforms.DESKTOP,M=f.useRef(!1),S=g||_,v="no_explicit_access"===(null===(t=null==g?void 0:g.error)||void 0===t?void 0:t[".tag"])&&("success"!==(null===(r=null==_?void 0:_.error)||void 0===r?void 0:r[".tag"])||null!=(null===(i=null==_?void 0:_.error)||void 0===i?void 0:i.access_details));let A=null;"success"===(null==_?void 0:_.error[".tag"])?A=_.error.access_details||[]:g&&"no_explicit_access"===g.error[".tag"]&&(A=g.error.access_details||[]);const y=null!=A;if(f.useEffect((()=>{const e=S&&v&&y;M.current||e&&(M.current=!0,u.select(nt).emit(null))}),[u,M,S,v,y]),!S)return null;if(!v)return null;if(!y)return null;const I=A?A[0]:null;return h(!0),I?f.createElement(s.Modal,{open:!0,isCentered:!0,withCloseButton:b?Ce(d):void 0,onRequestClose:p},f.createElement(s.Modal.Header,{hasBottomSpacing:"title-standard"},f.createElement(s.Modal.Title,null,qe(d,E))),f.createElement(s.Modal.Body,null,Je(d,null!==(l=null==A?void 0:A.length)&&void 0!==l?l:0,s.getName(m),I.folder_name)),f.createElement(s.Modal.Footer,null,f.createElement(s.Button,{variant:"primary",onClick:p},Ve(d)))):f.createElement(s.Modal,{open:!0,isCentered:!0,withCloseButton:b?Ce(d):void 0,onRequestClose:p},f.createElement(s.Modal.Header,{hasBottomSpacing:"title-standard"},f.createElement(s.Modal.Title,null,qe(d,E))),f.createElement(s.Modal.Body,null,Ke(d,E,s.getName(m))),f.createElement(s.Modal.Footer,null,f.createElement(s.Button,{variant:"primary",onClick:p},Ve(d))))};Ja.displayName="NoExplicitAccessOnRemoveModal";const Qa=({member:e})=>{const t=jt(),{objectMetadata:r,accountMetadata:i}=Ut(),l=a.useIntl(),c=bt(),m=n.useAtom(t.$removeMemberAccessLevelData),d=n.useAtom(t.$removeFolderMemberFailureData),u=(()=>{const e=o.useOpenUrl();return f.useCallback((t=>e(t)),[e])})(),g=Ka(e),_=vt(e,l),p=o.usePlatform()!==o.Platforms.DESKTOP,E=f.useRef(!1),h=d||m;if(f.useEffect((()=>{if(!E.current){h&&(E.current=!0,c.select(nt).emit(null))}}),[c,h]),!h)return null;const b=d?Oa(d.error):(null==m?void 0:m.data.access_details)||[];if(!(0!==b.length))return f.createElement(s.Modal,{open:!0,isCentered:!0,withCloseButton:p?Ce(l):void 0,onRequestClose:g},f.createElement(s.Modal.Header,{hasBottomSpacing:"title-standard"},f.createElement(s.Modal.Title,null,qe(l,_))),f.createElement(s.Modal.Body,null,Ke(l,_,s.getName(r))),f.createElement(s.Modal.Footer,null,f.createElement(s.Button,{variant:"opacity",onClick:g},ze(l))));const M=Je(l,b.length,s.getName(r),b[0].folder_name);return f.createElement(s.Modal,{open:!0,isCentered:!0,withCloseButton:p?Ce(l):void 0,onRequestClose:g},f.createElement(s.Modal.Header,{hasBottomSpacing:"title-standard"},f.createElement(s.Modal.Title,null,qe(l,_))),f.createElement(s.Modal.Body,null,M,f.createElement("div",{style:{height:"100%",maxHeight:"150px",border:"1px solid #DFDCD8",borderRadius:"5px",overflow:"auto",marginTop:"var(--spacing__unit--3)"}},b.slice(0,15).map(((e,t)=>f.createElement(Ya,{key:t,intl:l,folderName:e.folder_name,folderPath:e.path,onManageAccessClicked:u,role:i.role,isPaired:i.is_paired}))))),f.createElement(s.Modal.Footer,null,f.createElement(s.Button,{variant:"opacity",onClick:g},ze(l))))};function Xa(e){const t=[];return e.isDisabled&&t.push(e.disabledText.toLocaleLowerCase(e.locale)),e.isExternal&&t.push(e.externalMemberText.toLocaleLowerCase(e.locale)),e.isViewingNow?t.push(e.viewingNowText.toLocaleLowerCase(e.locale)):e.lastSeenText&&t.push(e.lastSeenText.toLocaleLowerCase(e.locale)),t}Qa.displayName="ParentFolderAccessModal";const es=({photoUrl:e,initials:t,name:a,email:n,memberStatusProps:r})=>{const{isDisabled:o,isExternal:i}=r,l=function({name:e,email:t,...a}){const n=Xa(a);return f.createElement(s.Box,{display:"flex",flexDirection:"column",alignItems:"center",style:{textAlign:"center"}},e&&f.createElement(s.Tooltip.Text,{size:"small",isBold:!0,withMargin:!1},e),t&&f.createElement(s.Tooltip.Text,{size:"small",isBold:!e,withMargin:!1},t),n.length>0&&f.createElement(Da,{size:"small",withDividers:"bullet"},n.map(((e,t)=>f.createElement(Da.Item,{key:t},f.createElement(Da.Label,null,e))))))}({name:a,email:n,...r}),c=function({name:e,email:t,...a}){const s=[];return e&&s.push(e),t&&s.push(t),s.push(...Xa(a)),s.join(", ")}({name:a,email:n,...r}),m=f.createElement(s.Avatar,{size:"small",hasNoOutline:!0,src:e,isInactive:o,isInteractive:!0,alt:c},t),d=i?f.createElement(j,{division:f.createElement(x,{grid:"quadrants"},f.createElement(j.Sticker,{cell:"bottom-right",cellAlignX:"end",cellAlignY:"end",stickerAnchorX:"center",stickerAnchorY:"center"},f.createElement(s.Box,{backgroundColor:"Background Base",borderRadius:"Circular",display:"flex",alignItems:"center",justifyContent:"center"},f.createElement(s.UIIcon,{src:_.ExternalMemberLine,size:"small",color:"Warning Base"}))))},m):m;return f.createElement(s.Tooltip,{title:l,placement:"top"},f.createElement(s.Box,null,d))};es.displayName="SM26MemberAvatar";var ts;!function(e){e[e.RemoveAccess=0]="RemoveAccess",e[e.DowngradeAccess=1]="DowngradeAccess"}(ts||(ts={}));var as;!function(e){function t(e){return e.startsWith("dbafvid:")}e.isAnonymousUserId=t,e.isAnonymousSeenState=e=>t(e.seen_state_user.user_id)}(as||(as={}));const ss=({isOpen:e,member:t,selectedAccessLevel:n,onClose:r})=>{const i=bt(),l=a.useIntl(),c=o.usePlatform()!==o.Platforms.DESKTOP,{user:m}=s.useActiveUser(),d=fa(),u=Sa(),g=va(),_=Aa(),{objectMetadata:p}=Ut();f.useEffect((()=>{d(e)}),[e,d]);const E=f.useRef(!1);if(f.useEffect((()=>{E.current||e&&(E.current=!0,i.select(ot).emit(null))}),[e,i]),!e)return null;const h=At(t,m),b=s.getName(p),M=s.getParentFolderName(p),S=s.getOwnerTeamName(p),v=""===M,A=h,y="remove"!==n,I=(e=>{let t="";return"user"in e&&void 0!==e.user&&(t=e.user.display_name),"group"in e&&void 0!==e.group&&(t=e.group.group_name),"invitee"in e&&void 0!==e.invitee&&"email"==e.invitee[".tag"]&&(t=e.invitee.email),t})(t),C=ns(l,y,v),N=rs(l,S,b,M,A,y,v),R=os(l,S,b,M,I,A,y,v);return f.createElement(f.Fragment,null,f.createElement(s.Modal,{open:e,isCentered:!0,withCloseButton:c?Ce(l):void 0,onRequestClose:()=>{r()}},f.createElement(s.Modal.Header,{hasBottomSpacing:"title-standard"},f.createElement(s.Modal.Title,null,N)),f.createElement(s.Modal.Body,null,R),f.createElement(s.Modal.Footer,null,f.createElement(s.Button,{variant:"opacity",onClick:()=>{r()}},(e=>e.formatMessage({id:"TnNYmK",defaultMessage:"Cancel"}))(l)),f.createElement(s.Button,{variant:"primary",onClick:()=>{r();const e="group"in t&&void 0!==t.group;if(y){u({".tag":n},!0,t)}else A?g(t,!0,!1):_(t,!0,e,!1)}},C))))};ss.displayName="ChangeInheritanceConfirmationModal";const ns=(e,t,a)=>t?(e=>e.formatMessage({id:"Mq03yj",defaultMessage:"Change access"}))(e):a?(e=>e.formatMessage({id:"PjD4Vl",defaultMessage:"Remove everyone"}))(e):(e=>e.formatMessage({id:"poGJG/",defaultMessage:"Remove"}))(e),rs=(e,t,a,n,o,i,l)=>o?((e,t)=>e.formatMessage({id:"gODx5K",defaultMessage:"Remove yourself from <b>{parentFolderName}</b>?"},{parentFolderName:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.FOLDER_NAME),b:e=>f.default.createElement("b",{style:{fontWeight:500}},e)}))(e,n):i?((e,t)=>e.formatMessage({id:"gBVsYr",defaultMessage:"Change how members can access “{currentFolder}”?"},{currentFolder:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.DISPLAY_NAME)}))(e,a):l?t?((e,t)=>e.formatMessage({id:"n/U4N5",defaultMessage:"Remove everyone at “{teamName}”?"},{teamName:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.DISPLAY_NAME)}))(e,t):(e=>e.formatMessage({id:"u5fnTi",defaultMessage:"Remove everyone on your team?"}))(e):((e,t)=>e.formatMessage({id:"Ca5nCo",defaultMessage:"Remove a member of “{parentFolderName}”?"},{parentFolderName:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.DISPLAY_NAME)}))(e,n),os=(e,t,a,n,o,i,l,c)=>i?((e,t)=>e.formatMessage({id:"cowZmX",defaultMessage:"You won’t be able to see future changes to this shared folder, and new members of <b>{parentFolderName}</b> won’t have access to this folder automatically."},{parentFolderName:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.DISPLAY_NAME),b:e=>f.default.createElement("b",{style:{fontWeight:500}},e)}))(e,n):l?c?((e,t,a)=>e.formatMessage({id:"a6N9uo",defaultMessage:"{memberName} will only be able to view this folder, and new {teamName} members won’t be able to access it automatically.{br}{br}To add more people to this folder in the future, you’ll need to invite them directly."},{memberName:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.DISPLAY_NAME),teamName:r.Emstring.em_snippet(a||"team",s.SNIPPET_SIZES.DISPLAY_NAME),br:f.default.createElement("br",null)}))(e,o,t):((e,t,a)=>e.formatMessage({id:"39gzeK",defaultMessage:"{memberName} will only be able to view this folder, and new members of <b>{parentFolderName}</b> won’t be able to access it automatically.{br}{br}To add more people to this folder in the future, you’ll need to invite them directly."},{memberName:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.DISPLAY_NAME),parentFolderName:r.Emstring.em_snippet(a,s.SNIPPET_SIZES.DISPLAY_NAME),b:e=>f.default.createElement("b",{style:{fontWeight:500}},e),br:f.default.createElement("br",null)}))(e,o,n):c?((e,t,a)=>e.formatMessage({id:"4qLIy8",defaultMessage:"{teamName} members won’t be able to see future changes to <b>{currentFolderName}</b> automatically.{br}{br}To give people access to this folder in the future, you’ll need to invite them directly."},{teamName:r.Emstring.em_snippet(t||"Team",s.SNIPPET_SIZES.DISPLAY_NAME),currentFolderName:r.Emstring.em_snippet(a,s.SNIPPET_SIZES.DISPLAY_NAME),b:e=>f.default.createElement("b",{style:{fontWeight:500}},e),br:f.default.createElement("br",null)}))(e,t,a):((e,t,a)=>e.formatMessage({id:"5HeI0Z",defaultMessage:"{memberName} and new members of the <b>{parentFolderName}</b> folder won’t be able to see future changes to this shared folder.{br}{br}To add more people to this folder in the future, you’ll need to invite them directly."},{memberName:r.Emstring.em_snippet(t,s.SNIPPET_SIZES.DISPLAY_NAME),parentFolderName:r.Emstring.em_snippet(a,s.SNIPPET_SIZES.DISPLAY_NAME),b:e=>f.default.createElement("b",{style:{fontWeight:500}},e),br:f.default.createElement("br",null)}))(e,o,n),is=(e,t,a,n,r,o,i,l)=>{const c=s.getIsFolder(t),m=s.getParentSharedFolderId(t),d=s.getParentFolderName(t),u=s.getIsSharedFolder(t)&&!s.getIsConfidentialFolder(t)&&m,g=St(e,{".tag":"leave_a_copy"})&&!i,_=l.formatMessage({id:"YRtFe9",defaultMessage:"Cancel"});let p=null,E=null,h=null,b=null,M=!1,S=null,v="";const A=()=>{v="https://help.dropbox.com/files-folders/share/remove-link",S=l.formatMessage({id:"SwVT41",defaultMessage:"More about links"}),M=!0};return"remove"===n&&(o?(h=(e=>e.formatMessage({id:"4xmHQa",defaultMessage:"Remove my access"}))(l),c?(p=(e=>e.formatMessage({id:"bsRTH6",defaultMessage:"Remove your access to this folder?"}))(l),E=u?(e=>e.formatMessage({id:"1aWCsg",defaultMessage:"You may still have access to this folder through a company group or parent folder."}))(l):(e=>e.formatMessage({id:"fchbsZ",defaultMessage:"If you continue, you won’t be able to access this folder anymore."}))(l),g&&(b=(e=>e.formatMessage({id:"lLVlO2",defaultMessage:"Keep a copy of this folder"}))(l))):(p=(e=>e.formatMessage({id:"FCMIIX",defaultMessage:"Remove your access to this file?"}))(l),E=(e=>e.formatMessage({id:"6NPSkt",defaultMessage:"If you continue, you won’t be able to access this file anymore."}))(l))):(h=(e=>e.formatMessage({id:"VVzPdA",defaultMessage:"Remove"}))(l),p=((e,t)=>e.formatMessage({id:"WJ0lPe",defaultMessage:"Remove {name}?"},{name:t}))(l,a),c?(u?d?(A(),E=((e,t,a)=>e.formatMessage({id:"pnMbuO",defaultMessage:"If you remove <strong>{name}</strong>, they won’t be able to see future changes to this shared folder. Keep in mind that anyone who can access <strong>{parentname}</strong> will still be able to access this folder."},{strong:e=>f.default.createElement("strong",null,e),name:t,parentname:a}))(l,a,d)):(A(),E=((e,t)=>e.formatMessage({id:"eBf70w",defaultMessage:"If you remove <strong>{name}</strong>, they won’t be able to see future changes to this shared folder. Keep in mind that anyone who can access the parent folder will still be able to access this folder."},{strong:e=>f.default.createElement("strong",null,e),name:t}))(l,a)):E=((e,t)=>e.formatMessage({id:"RL/0uv",defaultMessage:"If you remove <strong>{name}</strong>, they won’t be able to see future changes to this shared folder."},{strong:e=>f.default.createElement("strong",null,e),name:t}))(l,a),g&&(b=((e,t)=>e.formatMessage({id:"82sluj",defaultMessage:"Let {name} keep a copy of this shared folder"},{name:t}))(l,a))):r?(A(),E=(e=>e.formatMessage({id:"oax1/b",defaultMessage:"Keep in mind, if group members have a shared link to this file, they might still be able to view or edit it."}))(l)):(A(),E=(e=>e.formatMessage({id:"WhoBZ9",defaultMessage:"Keep in mind, if they have a shared link to this file, they might still be able to view or edit it."}))(l)))),"owner"===n&&(p=((e,t)=>e.formatMessage({id:"hWdhIJ",defaultMessage:"Make {name} the owner of this folder?"},{name:t}))(l,a),E=((e,t)=>e.formatMessage({id:"6cevm4",defaultMessage:"{name} will become the owner of all items in this folder. Only they will be able to unshare or change folder settings."},{name:t}))(l,a),h=(e=>e.formatMessage({id:"3Do/LR",defaultMessage:"Make owner"}))(l)),{title:p,body:E,confirmText:h,cancelText:_,optionLabel:b,shouldShowLink:M,linkText:S,linkHref:v}},ls=({member:e,selectedAccessLevel:t,isConfirmationModalOpen:n,setIsConfirmationModalOpen:r})=>{const i=a.useIntl(),l=bt(),c=o.useOpenUrl(),{user:m}=s.useActiveUser(),d=fa(),[u,g]=f.useState(!1),_=va(),p=Aa(),E=ya(),{objectMetadata:h}=Ut(),b=vt(e,i),M=(e=>"group"in e&&void 0!==e.group)(e),S=At(e,m),v=(e=>"user"in e&&void 0!==e.user&&e.user.disabled)(e),A=o.usePlatform()!==o.Platforms.DESKTOP,y=f.useRef(!1);f.useEffect((()=>{y.current||n&&(y.current=!0,l.select(it).emit(null))}),[n,l]);const{title:I,body:C,confirmText:N,cancelText:R,optionLabel:L,shouldShowLink:T,linkHref:w,linkText:P}=is(e,h,b,t,M,S,v,i);if(void 0===I)return null;const F=e=>St(e,{".tag":"leave_a_copy"});return f.createElement(s.Modal,{open:n,isCentered:!0,withCloseButton:A?Ce(i):void 0,onRequestClose:()=>r(!1)},f.createElement(s.Modal.Header,{hasBottomSpacing:"title-standard"},f.createElement(s.Modal.Title,null,I)),f.createElement(s.Modal.Body,{hasVerticalSpacing:!1},C,L?f.createElement("p",{style:{display:"flex",marginTop:"8px"}},f.createElement(s.Checkbox,{"aria-label":He(i),checked:u,onClick:()=>{g(!u)},style:{marginRight:"var(--spacing__base_unit)"}}),L):null),f.createElement(s.Modal.Footer,null,T&&f.createElement(s.Link,{onClick:e=>{e.preventDefault(),c(o.formatUrl(w))},href:w,display:"inline"},P),f.createElement("div",{style:{flex:1}}),f.createElement(s.Button,{variant:"opacity",onClick:()=>r(!1)},R),f.createElement(s.Button,{variant:"primary",onClick:()=>{const a=yt(e),s="dropbox_id"===a[".tag"]?a.dropbox_id:"";r(!1),d(!1),"remove"===t&&(S?_(e,!1,F(e)&&u):p(e,!1,!1,F(e)&&u)),"owner"===t&&s&&E(s,e,b)}},N)))};ls.displayName="ManageAccessModalConfirmationModal";const cs=({isOpen:e,children:t})=>e?f.createElement(f.Fragment,null,t({canvasStyle:{},overlayStyle:{}})):null;cs.displayName="NoMotion";const ms=({member:e})=>{var t;const o=jt(),i=a.useIntl(),{objectMetadata:l,linksMetadata:c}=Ut(),m=n.useAtom(o.$objectIdentifier),d=s.useSeenStateInfo(m),u=d.isLoading||d.isError?void 0:d.output,{user:g}=s.useActiveUser(),{openLinkSettings:p,enableReadOnlyMode:E,shouldUseSm26Design:h}=n.useAtom(o.$props),b=n.useAtom(o.$tempMemberAccessLevelData),M=n.useAtom(o.$memberActionsInProgress),S=yt(e),v=h&&!!M[r.getUniqueId(S)],[A,y]=f.useState(),[I,C]=f.useState(!1),[N,R]=f.useState(!1),L=Sa(),T=Aa(),w=fa(),P=(e=>{if(!e)return{};const t={};return e.forEach((e=>{const{seen_state_user:{user_id:a,display_name:s,email:n,photo_circle_url:r,same_team:o}}=e,i={account_id:a,name:{given_name:"",surname:"",familiar_name:"",display_name:s,abbreviated_name:""},email:n||"",email_verified:!0,profile_photo_url:r,is_teammate:o,disabled:!1};t[a]=i})),t})(s.getLinkSeenStateInfo(u,c)),F=new Set(Object.keys(P));f.useEffect((()=>{w(I)}),[I,w]);const x=r.getAreMemberSelectorsEqual(null==b?void 0:b.member,yt(e)),D=ds(e),O=x&&(null==b?void 0:b.accessLevel)?b.accessLevel:e.access_type,k="user"in e&&(null===(t=e.user)||void 0===t?void 0:t.disabled)||!1,B=O[".tag"],j=D===(null==g?void 0:g.account_id),$=e.is_inherited,U=s.getCanDoAction(l,{".tag":"update_confidentiality"})&&$,H=U||!s.getIsNonSharedFolder(l)&&s.getCanDoAction(l,{".tag":"relinquish_membership"}),Z=us(e,D,l,B,j&&H,F,i,k),W=h?Z.filter((e=>"remove"!==e.apiId)):Z,G=h?Z.find((e=>"remove"===e.apiId)):void 0,Y=h?W.findIndex((e=>e.apiId===B)):Z.findIndex((e=>e.apiId===B)),V=h&&Y>=0?-(8+40*(Y+1)):void 0,z=(t,a)=>{const n={".tag":a},i=((e,t)=>{const a=Object.keys(r.AccessLevelWeight);return e!==t&&-1!==a.indexOf(e)&&-1!==a.indexOf(t)&&r.AccessLevelWeight[t]<r.AccessLevelWeight[e]})(B,a),c=a===s.MEMBER_ACTION.REMOVE,m=!c&&i;if(c||m){(e=>{o.$showSecurityBanner.set(!0),o.$securityBannerType.set(e)})(c?Ct.RemoveAccess:Ct.DowngradeAccess)}const d=s.getIsSharedFolder(l)?e.inherited_access_type:e.access_type,u=c||m&&d&&i,g=c&&$;var _;B!==a&&(y(a),U&&u?R(!0):g&&s.getIsFolder(l)&&!s.getIsInsideTeamFolderTree(l)?T(e,!1,!1,!1):"remove"===a||"owner"===a?C(!0):"manage_link_access"===a?(_="editor"===B?"edit_link_settings":"view_link_settings",t.preventDefault(),p({initialTab:_})):L(n,!1,e))},q=s.getIsFile(l)&&e.is_inherited;return 0===Z.length?null:1===Z.length&&Z[0].apiId===B||q||E?f.createElement(s.Button,{size:h?"large":"small",variant:"transparent",style:{cursor:"default"},hasUnderline:!1,"aria-disabled":!0,className:h?Gt:void 0},f.createElement(s.Text,{color:h?"subtle":"faint",size:h?"medium":"small"},h?Ae(i,O).toLocaleLowerCase(i.locale):Ae(i,O))):f.createElement(f.Fragment,null,f.createElement(s.Menu.Wrapper,null,(({getContentProps:t,getTriggerProps:a})=>f.createElement(f.Fragment,null,f.createElement(s.Button,{...a(),size:h?"large":"small",variant:h?"borderless":"transparent",withDropdownIcon:!v,isLoading:v,disabled:v,"aria-label":i.formatMessage({id:"O+fOwG",defaultMessage:"Change access for {memberName}"},{memberName:vt(e)}),"data-uxa-log":"manage_access_dropdown_button","data-testid":"manage-access-dropdown-button",hasUnderline:!1,className:h?Gt:void 0},f.createElement(s.Text,{size:h?"medium":"small",color:h?"subtle":void 0},h?Ae(i,O).toLocaleLowerCase(i.locale):Ae(i,O))),f.createElement(s.Menu.Content,{...t(),placement:"bottom-end",triggerOffset:void 0!==V?{mainAxis:V,crossAxis:0}:void 0,motionProvider:h?cs:void 0,className:h?Vt:void 0,style:h?void 0:{width:300}},f.createElement(s.Menu.Segment,null,W.map((e=>f.createElement(s.Menu.SelectItem,{key:e.label,value:e.apiId,selected:B===e.apiId,disabled:e.disabled,onClick:t=>z(t,e.apiId),onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||z(t,e.apiId)},"data-testid":"manage-access-dropdown-button-select-item"},h?f.createElement(s.Menu.Row,{preferComposition:!0,style:e.variant&&"red"===e.variant?{color:"var(--color__alert__text)"}:void 0},f.createElement(s.Menu.RowTitle,null,e.label.toLocaleLowerCase(i.locale))):f.createElement(s.Menu.Row,{withTitle:e.label,withSubtitle:e.tooltip,style:e.variant&&"red"===e.variant?{color:"var(--color__alert__text)"}:void 0}))))),G&&f.createElement(s.Menu.Segment,null,f.createElement(s.Menu.ActionItem,{onClick:e=>z(e,"remove"),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||z(e,"remove")},"data-testid":"manage-access-dropdown-button-remove-item"},f.createElement(s.Menu.Row,{preferComposition:!0},f.createElement(s.Menu.RowAccessory,{style:{marginLeft:0}},f.createElement(s.UIIcon,{src:_.NoFillLine,isOpticallyAligned:!0})),f.createElement(s.Menu.RowTitle,null,G.label.toLocaleLowerCase(i.locale))))))))),f.createElement(ls,{member:e,selectedAccessLevel:A,isConfirmationModalOpen:I,setIsConfirmationModalOpen:C}),f.createElement(ss,{isOpen:N,member:e,selectedAccessLevel:A,onClose:()=>R(!1)}))};ms.displayName="ManageAccessMemberAccessDropdown";const ds=e=>"user"in e&&null!=e.user?e.user.account_id:"group"in e&&null!=e.group?e.group.group_id:"invitee"in e&&null!=e.invitee&&"email"===e.invitee[".tag"]?e.invitee.email:"",us=(e,t,a,n,r,o,i,l)=>{const c=o.has(t),m=s.getIsFolder(a),d=function(e,t){return[["make_editor",{value:"editor",title:ka(t),folder_description:$a(t),file_description:Ua(t),collection_description:Ha(t)}],["make_viewer",{value:"viewer",title:Ba(t),folder_description:Za(t),file_description:Za(t),collection_description:Wa(t)}],["make_viewer_no_comment",{value:"viewer_no_comment",title:ja(t),folder_description:Ga(t),file_description:Ga(t),collection_description:Wa(t)}],["make_owner",{value:"owner",title:t.formatMessage({id:"UBvfnM",defaultMessage:"Make owner"}),file_description:"",folder_description:"",collection_description:""}],["remove",{value:"remove",title:e?t.formatMessage({id:"xv0D2w",defaultMessage:"Remove my access"}):t.formatMessage({id:"HRdOei",defaultMessage:"Remove"}),file_description:"",folder_description:"",collection_description:""}],["manage_link_access",{value:"manage_link_access",title:t.formatMessage({id:"EQzfeF",defaultMessage:"Manage access"}),file_description:"",folder_description:"",collection_description:""}]]}(r,i),u={};if(e.permissions)for(const t of e.permissions)u[t.action[".tag"]]=t.allow;let g=[];for(const[e,t]of d){const a=gs(i,u,c,n,e,t,m,r,l);a&&g.push(a)}const _=g.find((e=>"manage_link_access"===e.apiId));return _&&(g=[_]),g},gs=(e,t,a,s,n,r,o,i,l)=>{if("manage_link_access"===r.value&&a)return{apiId:r.value,label:r.title,tooltip:e.formatMessage({id:"qze8JT",defaultMessage:"Change or remove their access in link settings"}),disabled:!1};if(((e,t,a,s,n,r)=>t===a||r&&e in r&&r[e]&&(!n||"remove"===t)||"remove"===t&&s)(n,r.value,s,i,l,t)){const e=o?r.folder_description:r.file_description,t="remove"===r.value?"red":"default";return{apiId:r.value,label:r.title,tooltip:e||"",variant:t}}},_s=({member:e,accountDataMap:t})=>{var i;const l=jt(),c=n.useAtom(l.$objectIdentifier),m=s.useSeenStateInfo(c),d=m.isLoading||m.isError?void 0:m.output,u=a.useIntl(),{user:g}=s.useActiveUser(),{isNonUserRelativeContext:_}=s.useSharingApiContext(),p=(null==g?void 0:g.is_team_admin)||!1,E=o.usePlatform()===o.Platforms.DESKTOP,{shouldUseSm26Design:h}=n.useAtom(l.$props),b=n.useAtom(l.$memberActionsInProgress),M=n.useAtom(l.$presentAccountIds),S="user"in e&&null!=e.user?t[e.user.account_id]:void 0,v=s.getGroupSeenStateInfo(d),A=Es(e,S),y=hs(e,u),I=vt(e,u),C=Ss(u,e,S),N=Ms(u,e,v),R=bs(e,g),L=yt(e),T="group"in e&&null!=e.group,w=T&&((null==e?void 0:e.group.is_member)||_||p)?`/team#groups/${e.group.group_id}`:void 0,P="user"in e&&null!=e.user&&M.includes(e.user.account_id),F=(e=>e.formatMessage({id:"Xlgz9n",defaultMessage:"External member"}))(u),x=(e=>e.formatMessage({id:"VR2RJV",defaultMessage:"Viewing now"}))(u),D=null==S?void 0:S.disabled,O=!T&&!P&&N.length>0,k={isDisabled:null!=D&&D,isExternal:R,isViewingNow:P,lastSeenText:null!==(i=N[0])&&void 0!==i?i:null,externalMemberText:F,viewingNowText:x,disabledText:Se(u),locale:u.locale};let B=!1;return!h&&b[r.getUniqueId(L)]&&(B=!0),f.createElement(f.Fragment,null,f.createElement(s.Box,{style:{display:"flex",alignItems:"center",height:"52px",padding:"0 8px 0 0"},"data-testid":"manage-access-member-list-item",role:"listitem"},f.createElement(s.Box,{display:"flex",flexShrink:0,style:{width:h?"24px":"36px",padding:"0px"}},h?f.createElement(es,{photoUrl:A,initials:y,name:I,email:C,memberStatusProps:k}):f.createElement(s.Avatar,{hasNoOutline:!0,size:"standard",src:A},y)),f.createElement(s.Box,{style:{display:"flex",flexDirection:"column",minWidth:0},marginX:"Micro Small",marginLeft:h?"Micro Medium":void 0},f.createElement(Da,{size:"small",withDividers:"bullet"},f.createElement(Da.Item,null,f.createElement(Da.Label,{as:s.Text,color:"standard",tooltipControlProps:E?{auto:!0,maxWidth:300,contentBreak:"word"}:void 0},I)),!h&&D&&f.createElement(Da.Item,null,f.createElement(Da.Label,{as:s.Text,color:"error"},Se(u))),!h&&O&&f.createElement(Da.Item,null,f.createElement(fs,{lastSeenTimestamp:N,member:e},f.createElement(s.Box,{color:"Text Subtle",display:"flex",alignItems:"center"},f.createElement(s.UIIcon,{src:s.ShowLine,height:18,width:18})))),!h&&P&&f.createElement(Da.Item,null,f.createElement(Da.Label,{as:s.Text,color:"subtle"},x)),!h&&!C&&R&&f.createElement(Da.Item,null,f.createElement(ps,{externalMemberText:F}))),C&&f.createElement(Da,{size:"small",withDividers:"bullet"},f.createElement(Da.Item,null,w?f.createElement(Da.Label,{as:s.Link,href:w,target:"_blank",rel:"noopener noreferrer",variant:"monochromatic","data-uxa-log":"member_list_item_group_link","data-uxa-interactions":"click",hasNoUnderline:!0,display:"inline"},C):f.createElement(Da.Label,{tooltipControlProps:{placement:"bottom",maxWidth:275}},C)),!h&&R&&f.createElement(Da.Item,null,f.createElement(ps,{externalMemberText:F})))),f.createElement(s.Box,{style:{marginLeft:"auto"}},B?f.createElement(s.Spinner,{style:{marginRight:"8px"},"aria-valuetext":"Loading xsmall",size:"xsmall"}):f.createElement(ms,{member:e}))),f.createElement(Ja,{member:e}),f.createElement(za,{member:e}),f.createElement(Qa,{member:e}),f.createElement(qa,{member:e}))};_s.displayName="ManageAccessMemberListItem";const ps=({externalMemberText:e})=>f.createElement(s.Tooltip,{title:e,placement:"bottom"},f.createElement(s.Box,{display:"flex",alignItems:"center",color:"Warning Base",tabIndex:0},f.createElement(s.UIIcon,{src:_.ExternalMemberLine,height:18,width:18,"aria-label":e}))),fs=({member:e,lastSeenTimestamp:t,children:a})=>{const n="group"in e&&void 0!==e.group;return f.createElement(s.Tooltip,{title:f.createElement(s.Box,{display:"flex",flexDirection:"column",alignItems:"center"},t.map(((e,t)=>n?f.createElement(s.Tooltip.Text,{key:t,size:"small",color:"standard",withMargin:!1},e):f.createElement(s.Tooltip.Text,{key:t,size:"small",color:0!==t||n?"subtle":"standard",withMargin:!1},e))))},a)},Es=(e,t)=>{if("user"in e&&null!=e.user)return null==t?void 0:t.profile_photo_url},hs=(e,t)=>"user"in e&&null!=e.user?r.getUserInitials(e.user.display_name,t.locale):"group"in e&&void 0!==e.group?r.getGroupInitials(e.group.group_name):"invitee"in e&&void 0!==e.invitee&&"email"===e.invitee[".tag"]?r.getUserInitials(e.invitee.email,t.locale):"",bs=(e,t)=>{if("owner"===e.access_type[".tag"])return!1;const a=null==t?void 0:t.is_team;return"user"in e&&null!=e.user&&null!=e.user.email?!!a&&!e.user.same_team:"group"in e&&void 0!==e.group?!e.group.same_team:!("invitee"in e)||void 0===e.invitee||(!e.user||!e.user.same_team)},Ms=(e,t,a)=>{const s=[];if("user"in t&&null!=t.user&&"time_last_seen"in t&&null!=t.time_last_seen){const a=t.time_last_seen;s.push(((e,t)=>{let a="";t&&(a=((e,t)=>e.formatMessage({id:"yobnDT",defaultMessage:"Viewed {time_str}"},{time_str:t}))(e,Ot(e,t)));return a})(e,new Date(a))),s.push(((e,t)=>e.formatDate(t,{day:"numeric",month:"short",year:"numeric"})+" "+e.formatTime(t,{hour:"numeric",minute:"numeric"}))(e,new Date(a)))}if("group"in t&&void 0!==t.group&&a){const n=t.group.group_id;if(n in a){const t=((e,t)=>{const a=[];let s=0,n=0,r=0;const o=[];t.forEach((e=>{const t=e.seen_state_user.display_name,n=e.when_last_seen;n&&(a.push([t,new Date(1e3*n)]),s+=1)})),n=s<=10?s:9,r=s-n;for(let t=0;t<n;t++){const[s,n]=a[t];o.push(Rt(e,s,n))}return r>0&&o.push(Lt(e,r)),o})(e,a[n]);s.push(...t)}}return s},Ss=(e,t,a)=>{if("user"in t&&null!=t.user)return a?a.email_verified?t.user.email:null:t.user.email.endsWith("#")?null:t.user.email;if("group"in t&&null!=t.group){const a=t.group.member_count;return a?((e,t)=>t<=0?"":e.formatMessage({id:"XMHn5C",defaultMessage:"{count, plural, one{# member} other{# members}}"},{count:t}))(e,a):null}return"invitee"in t&&null!=t.invitee&&t.invitee[".tag"],null};s.injectInternalStyle("/static/metaserver/static/js/sharing/features/access-management/internals/access-management-modal/modal.module.out-vflgv6YrL.css",(e=>"._modalContent_nutfs_1{height:100%}._header-section_nutfs_5{align-items:center;display:flex;margin-bottom:-6px;padding:18px 12px 0 18px}._header-section-text-container_nutfs_12{line-height:18px;width:100%}._header-section-primary-text_nutfs_17{font-family:var(--dig-type__family__title)}._header-section-button-container_nutfs_21{align-items:center;display:flex;margin-left:auto}._access-management-people-list_nutfs_30{animation:_fade-in_nutfs_1 var(--duration__surface) var(--easing__transition) forwards;max-height:234px;overflow-y:auto;scrollbar-width:thin}._access-management-people-list-dropdown-default_nutfs_37{display:none;max-height:0}._access-management-people-list-dropdown-expand_nutfs_42{animation:_expand-member-list_nutfs_1 var(--duration__surface) var(--easing__transition) forwards;display:block}._access-management-people-list-dropdown-collapse_nutfs_47{animation:_collapse-member-list_nutfs_1 var(--duration__surface) var(--easing__transition) forwards;display:block}._access-management-people-list-dropdown-inherited-expand_nutfs_52{animation:_expand-member-list-inherited_nutfs_1 var(--duration__surface) var(--easing__transition) forwards}._access-management-people-list-dropdown-inherited-collapse_nutfs_57{animation:_collapse-member-list-inherited_nutfs_1 var(--duration__surface) var(--easing__transition) forwards}@media (prefers-reduced-motion:reduce){._access-management-people-list-dropdown-collapse_nutfs_47,._access-management-people-list-dropdown-expand_nutfs_42,._access-management-people-list-dropdown-inherited-collapse_nutfs_57,._access-management-people-list-dropdown-inherited-expand_nutfs_52{animation-timing-function:var(--easing__linear)}}._inherited-members-list-title-button_nutfs_73>span{display:flex;min-width:0}@keyframes _expand-member-list_nutfs_1{0%{max-height:0}to{max-height:300px;overflow-y:auto}}@keyframes _collapse-member-list_nutfs_1{0%{max-height:300px}to{max-height:0;visibility:hidden}}@keyframes _expand-member-list-inherited_nutfs_1{0%{max-height:0}to{max-height:352px;overflow-y:auto}}@keyframes _collapse-member-list-inherited_nutfs_1{0%{max-height:352px}to{max-height:0}}"));const vs={modalContent:"_modalContent_nutfs_1",headerSection:"_header-section_nutfs_5",headerSectionTextContainer:"_header-section-text-container_nutfs_12",headerSectionPrimaryText:"_header-section-primary-text_nutfs_17",headerSectionButtonContainer:"_header-section-button-container_nutfs_21",accessManagementPeopleList:"_access-management-people-list_nutfs_30",fadeIn:"_fade-in_nutfs_1",accessManagementPeopleListDropdownDefault:"_access-management-people-list-dropdown-default_nutfs_37",accessManagementPeopleListDropdownExpand:"_access-management-people-list-dropdown-expand_nutfs_42",expandMemberList:"_expand-member-list_nutfs_1",accessManagementPeopleListDropdownCollapse:"_access-management-people-list-dropdown-collapse_nutfs_47",collapseMemberList:"_collapse-member-list_nutfs_1",accessManagementPeopleListDropdownInheritedExpand:"_access-management-people-list-dropdown-inherited-expand_nutfs_52",expandMemberListInherited:"_expand-member-list-inherited_nutfs_1",accessManagementPeopleListDropdownInheritedCollapse:"_access-management-people-list-dropdown-inherited-collapse_nutfs_57",collapseMemberListInherited:"_collapse-member-list-inherited_nutfs_1",inheritedMembersListTitleButton:"_inherited-members-list-title-button_nutfs_73"},As=({inheritedMembers:e,accountDataMap:t,enableReadOnlyMode:r,initialExpanded:o})=>{const{objectMetadata:i}=Ut(),l=jt(),{shouldUseSm26Design:c}=n.useAtom(l.$props),m=a.useIntl(),[d,g]=f.useState(null!=o&&o),[_,p]=f.useState(!1),[E,h]=f.useState(!1),[b,M]=f.useState(!1);f.useEffect((()=>{o&&g(!0)}),[o]);const S=s.getParentFolderName(i),v=s.getOwnerTeamName(i)||"",A=s.getCanDoAction(i,s.UPDATE_CONFIDENTIALITY_TAG),y=[...e.filter((e=>e.is_inherited&&"group"in e)),...e.filter((e=>e.is_inherited&&!("group"in e)))],I=E?y:y.slice(0,5);f.useEffect((()=>{d||h(!1)}),[d]);const C=f.useCallback((()=>{g(!d),d&&p(!0)}),[d]);if(0===e.length)return null;const N=fe(m,S,v)||"";return f.createElement(f.Fragment,null,f.createElement(s.Box,null,f.createElement(s.Box,{display:"flex",alignItems:"center",width:"100%",cursor:"pointer",paddingY:"Micro Small",paddingRight:"Micro Small"},f.createElement(s.Box,{display:"flex",flexShrink:0,alignItems:"center",justifyContent:"center",backgroundColor:"Background Subtle",borderRadius:"Circular",style:{height:c?"24px":"36px",width:c?"24px":"36px"},onClick:C,"data-testid":"inherited-member-list-toggle"},f.createElement(u.FolderSharedDefaultSmall,{height:c?24:32,width:c?24:32})),f.createElement(s.StylelessButton,{className:vs.inheritedMembersListTitleButton,style:{display:"flex",cursor:"pointer",minWidth:0},onClick:C,"data-uxa-log":"inherited_member_list_toggle","aria-controls":"sm24-access-management-inherited-member-list","aria-expanded":d},f.createElement(s.Box,{display:"flex",flexDirection:"column",style:{marginLeft:"8px",minWidth:0}},f.createElement(s.Text,{size:"small",variant:"label",style:{lineHeight:"16px"}},f.createElement(s.Truncate,{lines:1,tooltipControlProps:{placement:"top"},observeParent:!0},N)),f.createElement(s.Box,{display:"flex",alignItems:"center",flexShrink:0},f.createElement(s.Text,{size:"small",color:"subtle",style:{marginRight:"4px"}},Qe(m,e.length)),e.length>0?f.createElement(s.UIIcon,{src:d?s.ChevronUpLine:s.ChevronDownLine,size:"small"}):null)))),f.createElement(s.Box,{id:"sm24-access-management-inherited-member-list",display:d||_?"flex":"none",overflowY:"hidden",className:s.cx({[vs.accessManagementPeopleListDropdownInheritedExpand]:!E&&!_,[vs.accessManagementPeopleListDropdownInheritedCollapse]:_}),onAnimationEnd:()=>{p(!1)}},f.createElement(s.Box,{style:{width:"36px",display:"flex",justifyContent:"center",flexShrink:0}},f.createElement(s.Box,{backgroundColor:"Border Subtle - On Base",height:"100%",style:{width:"1px"}})),f.createElement(s.Box,{style:{display:"flex",flexDirection:"column",width:"100%",minWidth:"0"}},I.map(((e,a)=>f.createElement(s.Box,{key:a},f.createElement(_s,{member:e,accountDataMap:t})))),e.length>5&&!E&&f.createElement(s.Box,null,f.createElement(s.Button,{variant:"outline",size:"small",onClick:()=>{h(!E)},style:{margin:"8px 12px 16px 4px"}},((e,t)=>e.formatMessage({id:"GHErP8",defaultMessage:"Show all {num_members} members"},{num_members:t}))(m,e.length))),A&&!r&&f.createElement(s.Box,{display:"flex",paddingX:"Micro Medium",paddingY:"Micro Small",justifyContent:"center"},f.createElement(s.Button,{variant:"transparent",size:"small",tone:"destructive",onClick:()=>M(!0)},(e=>e.formatMessage({id:"pO5Yj6",defaultMessage:"Remove inherited members"}))(m)))))),f.createElement(Ca,{isOpen:b,onClose:()=>M(!1)}))};As.displayName="ManageAccessMemberInheritedList";const ys=()=>{const e=jt(),t=n.useAtom(e.$objectIdentifier),{objectMetadata:a,objectMembers:r,linksMetadata:o}=Ut(),i=s.useSeenStateInfo(t),l=i.isLoading||i.isError?void 0:i.output,{enableReadOnlyMode:c,maxLines:m,onViewAllMembers:d,expandInheritedOnLoad:u}=n.useAtom(e.$props),{viewer:g}=s.useViewer(),_=s.getLinkSeenStateInfo(l,o),p=wt(_),E=r?[...r.groups,...r.invitees,...r.users,...p]:[],h=(r?[...r.users,...p]:[]).map((e=>e.user.account_id)),b=$(h),M=!b.isLoading&&!b.isError?b.output:{},S=n.useAtom(e.$shouldUsePresenceForSorting),v=n.useAtom(e.$presentAccountIds),A=S?v:[],y=((e,t)=>{if(!t)return!1;const a=!!s.getParentSharedFolderId(e);return null!=t.team_id&&!!s.getOwnerTeam(e)&&s.getOwnerTeamId(e)===t.team_dbtid&&a})(a,g),I=y?E.filter((e=>e.is_inherited&&null!=e.access_type&&"traverse"!==e.access_type[".tag"])):[],C=y?E.filter((e=>!e.is_inherited&&null!=e.access_type)):E,N=Nt(I,A),R=Nt(C,A),L=N.length>0&&y,T=null!=m,{visibleMembers:w,collapsedMembers:P}=function(e,t,a){if(null==t)return{visibleMembers:e,collapsedMembers:[]};const s=a?1:0,n=Math.max(0,t-s);if(e.length<=n)return{visibleMembers:e,collapsedMembers:[]};if(n<1)return{visibleMembers:[],collapsedMembers:e};const r=n-1;return{visibleMembers:e.slice(0,r),collapsedMembers:e.slice(r)}}(R,m,L);return f.createElement(s.Box,{style:{height:"100%",width:"100%",overflowY:T?"visible":"auto",scrollbarWidth:"thin"}},T&&L&&f.createElement(qt,{inheritedMemberCount:N.length,parentFolderName:s.getParentFolderName(a),ownerTeamName:s.getOwnerTeamName(a)||"",onClick:()=>{null==d||d({expandInherited:!0})}}),!T&&f.createElement(As,{inheritedMembers:N,accountDataMap:M,enableReadOnlyMode:!!c,initialExpanded:u}),w.map((e=>f.createElement(_s,{key:It(e),member:e,accountDataMap:M}))),T&&P.length>0&&f.createElement(zt,{members:P,accountDataMap:M,onClick:()=>{null==d||d()}}))};ys.displayName="ManageAccessMemberList";const Is=()=>{const e=jt(),{objectMembers:t,linksMetadata:r}=Ut(),{customNoOtherMembersScreen:o}=n.useAtom(e.$props),i=a.useIntl(),l=bt(),c=n.useAtom(e.$objectIdentifier),m=s.useSeenStateInfo(c),d=m.isLoading||m.isError?void 0:m.output,u=f.useRef(!1);f.useEffect((()=>{u.current||(u.current=!0,l.select(st).emit(null))}),[l]);const g=s.getLinkSeenStateInfo(d,r),_=wt(g);return t.groups.length>0||t.invitees.length>0||t.users.length>0||_.length>0?f.createElement(s.Box,{display:"flex",flexDirection:"column"},f.createElement(Ht,null),f.createElement(ys,null)):o||f.createElement(s.Box,{display:"flex",alignItems:"center",flexDirection:"column"},f.createElement(pe,{style:{width:"200px",height:"200px"}}),f.createElement(s.Text,{style:{width:"260px",textAlign:"center"}},((e,t)=>e.formatMessage({id:"PDTyQ+",defaultMessage:"When specific people are invited to this {isFile, select, true {file} other {folder}}, they’ll be listed here."},{isFile:t}))(i,"file"===c[".tag"])))};Is.displayName="ContentMemberListInner";const Cs=()=>{const e=jt(),t=bt(),{objectMetadataResult:a,objectMembersResult:r,listSharedLinksResult:o,accountMetadataResult:i,onMemberListDataLoading:l,onObjectIdentifierChanged:c}=n.useAtom(e.$props),[d,u]=f.useState(!1),g=n.useAtom(e.$objectIdentifier),_=a.isLoading,p=!_&&a.isError,E=!_&&!p,h=r.isLoading&&!r.isFirstPageLoaded,b=!r.isLoading&&!r.isFirstPageLoaded&&r.isError,M=r.isFirstPageLoaded&&!r.isFirstPageOnly,S=!o.isLoading&&o.isError,v=!o.isLoading&&!o.isError,A=o.isLoading,y=!i.isLoading&&i.isError,I=!i.isLoading&&!y,C=i.isLoading,N=_||h||A||C,R=E&&M&&v&&I,L=p||b||S||y,T=f.useRef(!1),w=f.useRef(!1),P=f.useRef(!1);f.useEffect((()=>{N&&!T.current?(T.current=!0,t.select(ft).emit(null)):R?(w.current=!0,t.select(Et).emit(null)):L&&!P.current&&(P.current=!0,t.select(ht).emit(null))}),[N,R,L,t,T,w,P]),f.useEffect((()=>{l&&l(N)}),[N,l]),f.useEffect((()=>{R&&(n.batch((()=>{e.$objectMetadata.set(a.output),e.$objectMembers.set(r.allMembers),e.$linksMetadata.set(o.output),e.$accountMetadata.set(i.output)})),u(!0))}),[R,a,r,o,i]);const F=(e=>{var t;const{user:a}=s.useActiveUser(),{viewer:n,isLoading:r}=s.useViewer(),o=s.useGetContextValue(),i=e.fileId;if(f.useEffect((()=>{if(i&&n&&"file"===e[".tag"]&&s.passStore.passFetchingStatus(i)===s.PassFetchingStatus.NOT_YET_KNOWN){const e={file:{file_id:i}};s.PassHelpers.setup({viewer:n,user:a||null,fileData:e,prevFileData:null,shouldWritePresence:!1,skipListMembers:!0})}}),[i,n,a,e]),"file"!==e[".tag"]||!i)return{isLoading:!1,isError:!0,error:{".tag":"no_file"}};if(r)return{isLoading:!0};const l=s.passStore.passFetchingStatus(i),c=s.passStore.getPassPermissions(i),m=null===(t=o(s.Context$4))||void 0===t?void 0:t.actionSurface;if(l===s.PassFetchingStatus.FETCHING)return{isLoading:!0};if(l===s.PassFetchingStatus.NOT_YET_KNOWN)return{isLoading:!0};if(l===s.PassFetchingStatus.ERROR)return null!=c&&c.canReadPresence?{isLoading:!1,isError:!0,error:{".tag":"other"}}:{isLoading:!1,isError:!0,error:{".tag":"no_permission"}};const d=[...s.passStore.presence(i)||[]];if(a){const e=d.indexOf(a.account_id),t=e>=0,s="seen_state_facepile"===m||"previews"===m;s&&!t?d.push(a.account_id):!s&&t&&d.splice(e,1)}return{isLoading:!1,isError:!1,output:{presentAccountIds:d}}})(g),x=!F.isLoading&&!F.isError;if(f.useEffect((()=>{if(x){const t=F.output.presentAccountIds;e.$presentAccountIds.set(t)}}),[x,F,e.$presentAccountIds]),f.useEffect((()=>{if(E){const t=a.output.metadata_response;if("file_folder"===g[".tag"]&&t&&"folder_metadata"===t[".tag"]&&t.shared_folder_id){const a={".tag":"shared_folder",sharedFolderId:t.shared_folder_id,fileId:g.fileId};e.$objectIdentifier.set(a),"function"==typeof c&&c(a)}}}),[E,g,a,e.$objectIdentifier]),f.useEffect((()=>{setTimeout((()=>{(F.isLoading||F.isError)&&e.$shouldUsePresenceForSorting.set(!1)}),3e3)}),[F,e.$shouldUsePresenceForSorting]),N)return f.createElement(s.Box,{style:{display:"flex",alignItems:"center",justifyContent:"center"},"data-testid":"content-member-list-loading-indicator"},f.createElement(s.Spinner,null));if(d)return f.createElement(Is,null);if(L){t.select(pt).emit(null);let e={".tag":"other"};return p&&a.error?e=a.error:b&&r.error?e=r.error:S&&o.error&&(e=o.error),m.reportStack("Error fetching data for Content Member List",{severity:m.SEVERITY.CRITICAL,tags:["content-member-list"],silent:!0,exc_extra:{file_id:g.fileId,error:e}}),f.createElement(Ns,{errorReason:null==e?void 0:e[".tag"]})}return null};Cs.displayName="ContentMemberListWithStore";const Ns=({errorReason:e})=>{const t=a.useIntl(),r=jt(),{customErrorScreenWrapper:o}=n.useAtom(r.$props),i=((e,t)=>{switch(t){case"email_unverified":return e.formatMessage({id:"YQ+xBi",defaultMessage:"Verify your email to share this content."});case"invalid_oid":return e.formatMessage({id:"hBQISs",defaultMessage:"This content doesn’t exist."});case"no_access":return e.formatMessage({id:"S0dPqX",defaultMessage:"You don’t have access to this content."});default:return e.formatMessage({id:"0FW7bf",defaultMessage:"We ran into a problem loading the list of people who have access."})}})(t,e);return o?f.createElement(o,{errorMessage:i}):f.createElement(s.Box,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",paddingY:"Macro Small"},f.createElement(c.BowlEmptySpot,{style:{width:"180px",height:"180px"}}),f.createElement(s.Text,{style:{width:"260px",textAlign:"center",marginTop:"16px"}},be(t)))};Ns.displayName="ErrorFallback";const Rs=e=>f.createElement($t,{...e},f.createElement(s.ErrorBoundary$2,{FallbackComponent:({error:e})=>f.createElement(Ns,null),onError:e=>{m.reportException({err:e,severity:m.SEVERITY.CRITICAL,tags:["content-member-list"],exc_extra:{message:"Error loading Content Member List"}})}},f.createElement(Cs,null)));Rs.displayName="ContentMemberList",e.ContentMemberFacepileButton=de,e.ContentMemberList=Rs,e.Metadata2=Da,e.PAP_View_ManageAccess=ge,e.classes=vs,e.formatSubtitleNoPermissions=e=>e.formatMessage({id:"ji4c03",defaultMessage:"This folder contains subfolders that you don’t own."}),e.formatSubtitleWithPermissionsFile=e=>e.formatMessage({id:"7453qx",defaultMessage:"When specific people are invited to this file, they’ll be listed here."}),e.formatSubtitleWithPermissionsFolder=e=>e.formatMessage({id:"rgZZgG",defaultMessage:"When specific people are invited to this folder, they’ll be listed here."}),e.formatTitleNoPermissions=e=>e.formatMessage({id:"66T/EA",defaultMessage:"Can’t manage people with access"}),e.formatTitleWithPermissions=e=>e.formatMessage({id:"f7F1sF",defaultMessage:"Keep track of people and permissions"}),e.getAccountBatch=async function(e){if(0===e.length)return{status:ue.SUCCESS,output:[]};const t=await s.getSharingApiv2ResponseWithErrors(s.getAccountBatchPackage.fetchQuery(i.queryClient,{apiArg:{account_ids:e}},{staleTime:3e5}));return"SUCCESS"===t.status?{status:ue.SUCCESS,output:{...t.output}}:"ERROR"===t.status?t:{status:ue.FATAL,error:{".tag":"api_error"}}},e.invalidateListSharedLinks=async function(e){const t=s.getContentIdOrPathFromObjectIdentifier(e);return s.sharingListSharedLinksPackage.invalidateQueries(i.queryClient,{path:t,direct_only:!0})},e.prefetchListSharedLinks=async function(e){const t=s.getContentIdOrPathFromObjectIdentifier(e);return s.sharingListSharedLinksPackage.prefetchQuery(i.queryClient,{apiArg:{path:t,direct_only:!0}})},e.sharingCheckJobStatus=Jt,e.useAccountDataBatch=$,e.useListSharedLinks=H}));
//# sourceMappingURL=c_content-member-list_internals_content-member-list.js-vflEGYfZV.map

//# debugId=3f62b72a-8ce8-3209-abf3-d018e3a3914e