!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="d6e7c71e-9404-3f3c-8289-3f925b56aec0")}catch(e){}}();
define(["exports","react","./e_file_viewer_static_scl_page_file","./c_core_notify","./c_core_i18n","./c_dig-components_card_index","./c_dig-foundations_disclosure_index","./c_spectrum_util_raf_throttle","./e_edison","./c_bem","./c_api_v2_routes_plan_configuration_provider","./c_init_data_edison","./c_dotlottie_common_chunk-B7OIQIGJ","./e_core_exception","./c_src_sink_index","./c_lodash-es_lodash","./c_react-use_misc_util","./c_api_v2_routes_restorations_provider","./e_data_modules_stormcrow","./c_api_v2_routes_team_insights_provider","./c_api_v2_unauthed_client","./c_hive_schemas_sharing-request_access_user_events","react-dom","./c_security_csrf_hmac","./c_react-use_useEffectOnce","./c_pap-events_navigation_select_create_folder_action","react/jsx-runtime","metaserver/static/js/langpack","./c_dig-foundations__global_slot"],(function(e,t,a,n,i,o,l,r,s,d,c,u,m,g,f,p,E,_,C,y,v,h,k,T,b,I,x,P,S){"use strict";function N(e){return e&&e.__esModule?e:{default:e}}var M,A=N(t);!function(e){e.NotEnrolled="NOT_ENROLLED",e.EnrollmentPendingEmailConfirmation="ENROLLMENT_PENDING_EMAIL_CONFIRMATION",e.EnrollmentPendingAccountConfirmation="ENROLLMENT_PENDING_ACCOUNT_CONFIRMATION",e.EnrolledEmail="ENROLLED_EMAIL",e.EnrolledAccount="ENROLLED_ACCOUNT",e.CrossOriginEnrolled="CROSS_ORIGIN_ENROLLED",e.EnrolledViaCookie="ENROLLED_VIA_COOKIES",e.UnenrollmentPendingEmailUIConfirmation="UNENROLLMENT_PENDING_EMAIL_UI_CONFIRMATION",e.UnenrollmentPendingAccountUIConfirmation="UNENROLLMENT_PENDING_ACCOUNT_UI_CONFIRMATION",e.EnrollmentPendingEmailUIConfirmation="ENROLLMENT_PENDING_EMAIL_UI_CONFIRMATION",e.EnrollmentPendingAccountUIConfirmation="ENROLLMENT_PENDING_ACCOUNT_UI_CONFIRMATION",e.EnrollmentPendingEmailVerificationSent="ENROLLMENT_PENDING_EMAIL_VERIFICATION_SENT",e.EnrollmentPendingAccountVerificationSent="ENROLLMENT_PENDING_ACCOUNT_VERIFICATION_SENT"}(M||(M={}));const O=e=>e===a.UserDNSInitState.LOGGED_IN_ENROLLED?M.EnrolledAccount:e===a.UserDNSInitState.LOGGED_IN_EMAIL_PENDING?M.EnrollmentPendingAccountConfirmation:e===a.UserDNSInitState.LOGGED_OUT_ENROLLED?M.EnrolledEmail:e===a.UserDNSInitState.LOGGED_OUT_EMAIL_PENDING?M.EnrollmentPendingEmailConfirmation:e===a.UserDNSInitState.LOGGED_OUT_GPC_ENABLED?M.EnrollmentPendingEmailUIConfirmation:e===a.UserDNSInitState.CROSS_ORIGIN_ENROLLED?M.CrossOriginEnrolled:e===a.UserDNSInitState.ENROLLED_VIA_COOKIES?M.EnrolledViaCookie:M.NotEnrolled,w=e=>e===M.EnrollmentPendingEmailVerificationSent||e===M.EnrollmentPendingAccountVerificationSent||e===M.EnrollmentPendingEmailUIConfirmation||e===M.EnrollmentPendingAccountUIConfirmation||e===M.EnrollmentPendingEmailConfirmation||e===M.EnrollmentPendingAccountConfirmation||e===M.EnrolledEmail||e===M.EnrolledAccount||e===M.CrossOriginEnrolled||e===M.EnrolledViaCookie,D=e=>e===M.EnrollmentPendingEmailUIConfirmation||e===M.EnrollmentPendingAccountUIConfirmation,L=(e,t)=>({privacy:t=>A.default.createElement(a.Link,{id:"privacy-page-link",href:"#privacy-page","data-testid":"privacy-page-link",onClick:e,"data-uxa-log":"privacy_consent_banner_privacy_page_link",display:"inline"},t),faq:e=>A.default.createElement(a.Link,{id:"privacy-policy-faq-link",href:"#privacy-policy-faq","data-testid":"privacy-policy-faq-link",onClick:t,"data-uxa-log":"privacy_consent_banner_privacy_policy_faq_link",display:"inline"},e)}),B="ccpa_consent_banner",U="customize_cookies_button",F="accept_all_cookies_button",R="decline_cookies_button",G=e=>{const t=e.width>600,n=e.width<486,o={customizeCookiesText:(l=i.intl).formatMessage({id:"5vOzB7",defaultMessage:"Customize cookies"}),declineButtonText:l.formatMessage({id:"TrrEUN",defaultMessage:"Decline"}),acceptAllButtonText:l.formatMessage({id:"OyAa/t",defaultMessage:"Accept All"}),bodyText:(e,t)=>l.formatMessage({id:"n/7wux",defaultMessage:"We use cookies to provide, improve, protect and promote our services. Visit our <privacy>Privacy Policy</privacy> and <faq>Privacy Policy FAQs</faq> to learn more. You can manage your personal preferences, including your â€˜Do not sell or share my personal data to third partiesâ€™ setting using the â€œCustomize cookiesâ€ button below."},{...L(e,t)}),niraBodyText:(e,t)=>l.formatMessage({id:"sJIhwW",defaultMessage:"We use cookies to provide, improve, protect and promote our services. Visit our <privacy>Privacy Policy</privacy> and <faq>Cookie Policy</faq> to learn more. You can manage your personal preferences, including your â€˜Do not sell or share my personal data to third partiesâ€™ setting using the â€œCustomize cookiesâ€ button below."},{...L(e,t)})};var l;let r="medium",s=12;return t?(r="large",s=24):n&&(r="small",s=8),A.default.createElement(a.Box,{id:B,"data-testid":B,"data-uxa-hierarchy-group":e.uriForLogging,"data-uxa-log":"privacy_consent_banner","data-uxa-interactions":"shown click",role:"dialog","aria-modal":"true","aria-label":"Privacy Consent Banner",tabIndex:0,backgroundColor:"Background Base",borderRadius:"Medium",overflow:"hidden"},A.default.createElement(a.Box,null,A.default.createElement(a.Box,{display:"flex",paddingX:"Micro Medium",style:{paddingTop:t?8:12}},t&&A.default.createElement("div",{"data-uxa-log":"privacy_consent_banner_close_button",style:{marginLeft:"auto"}},A.default.createElement(a.IconButton,{variant:"transparent",className:"dig-Modal-close-btn","aria-label":"Close",onClick:()=>e.setBannerVisible(!1)},A.default.createElement(a.UIIcon,{src:a.CloseLine})))),A.default.createElement(a.Box,{style:{paddingInline:t?24:12}},A.default.createElement(a.Text,{size:t?"medium":"small",style:{lineHeight:n?"12px":""}},e.origin.includes("nira.com")?o.niraBodyText(e.onPrivacyPageLinkClick,e.onPrivacyPolicyFaqLinkClick):o.bodyText(e.onPrivacyPageLinkClick,e.onPrivacyPolicyFaqLinkClick))),A.default.createElement(a.Box,{style:{padding:t?24:12,paddingTop:s}},A.default.createElement(a.Split,{isFlexGap:!1,gap:"Micro Small",alignY:"center",direction:n?"vertical":"horizontal"},A.default.createElement(a.Split.Item,{marginRight:n?"0":"auto"},A.default.createElement(a.Button,{id:U,"data-testid":U,"data-uxa-log":"privacy_consent_banner_detailed_view_link",variant:"transparent",size:r,onClick:t=>{e.onCustomizeCookiesClick(t),e.setBannerVisible(!1)},style:{width:"100%"}},o.customizeCookiesText)),A.default.createElement(a.Box,{display:"flex"},A.default.createElement(a.Split.Item,{style:{flex:1}},A.default.createElement(a.Button,{id:R,"data-testid":R,"data-uxa-log":"privacy_consent_banner_decline_all_button",variant:"outline",size:r,onClick:t=>{e.onClick(t,R),e.setBannerVisible(!1)},style:{margin:n?"0":void 0,width:"100%"}},o.declineButtonText)),A.default.createElement(a.Split.Item,{style:{flex:1}},A.default.createElement(a.Button,{id:F,"data-testid":F,"data-uxa-log":"privacy_consent_banner_accept_all_button",variant:"primary",size:r,onClick:t=>{e.onClick(t,F),e.setBannerVisible(!1)},style:{margin:n?"0":void 0,width:"100%"}},o.acceptAllButtonText)))))))},V="ccpa-reentry-popout-container",q="ccpa-reentry-popout-button",z=e=>A.default.createElement(a.Box,{id:V,"data-testid":V,"data-uxa-log":"privacy_consent_reentry_button","data-uxa-interactions":"shown click","data-uxa-hierarchy-group":e.uriForLogging},A.default.createElement("div",{"data-uxa-log":"privacy_consent_reentry_button_into_detailed_view"},A.default.createElement(a.IconButton,{id:q,variant:"filled",onClick:()=>e.onClick(q),style:{borderTopLeftRadius:0,borderBottomLeftRadius:0}},"ðŸª"))),Q="dns-email",H=e=>{e?n.Notify.success(i.intl.formatMessage({id:"GxeB5y",defaultMessage:"Success! Email will be sent shortly."})):n.Notify.error(i.intl.formatMessage({id:"ma1TT4",defaultMessage:"Something went wrong! Try again later."}))},$=e=>{const t={getLoggedInDNSSettingsText:e=>{const t=n.formatMessage({id:"oUqEwX",defaultMessage:"Settings are saved for the following accounts"}),a=n.formatMessage({id:"6ydDvV",defaultMessage:"Settings will be saved for the following accounts"});return e?t:a},confirmEmailText:(n=i.intl).formatMessage({id:"s5D/gW",defaultMessage:"Please confirm email"}),resendEmailButtonText:n.formatMessage({id:"DKSsPd",defaultMessage:"Resend verification email"}),emailLabel:n.formatMessage({id:"T5sr0i",defaultMessage:"Settings are saved for"}),emailVerificationText:n.formatMessage({id:"TMKkTU",defaultMessage:"You must confirm your email address to save your preferences. We will send you an email from no-reply@dropbox.com. Open the email and click Confirm Email Address to complete your preference submission."}),optedInBannerText:n.formatMessage({id:"QLRtXw",defaultMessage:"Do not sell or share my personal information is active."}),optedOutBannerText:n.formatMessage({id:"5UKyvi",defaultMessage:'You have successfully unenrolled in CCPA\'s "Do not sell or share my personal information".'})};var n;const o=!((l=e.enrollmentState)!==M.EnrollmentPendingAccountUIConfirmation&&l!==M.EnrollmentPendingEmailUIConfirmation&&l!==M.UnenrollmentPendingAccountUIConfirmation&&l!==M.UnenrollmentPendingEmailUIConfirmation&&l!==M.EnrollmentPendingEmailVerificationSent&&l!==M.EnrollmentPendingAccountVerificationSent);var l;const r=e.gpcEnabled,s=e.enrollmentState===M.EnrollmentPendingEmailVerificationSent||e.enrollmentState===M.EnrollmentPendingAccountVerificationSent,d=new Set([...e.userEmails,...e.verifiedEmails,...e.unverifiedEmails]),c=Array.from(d).join(", "),u=o?"":e.unverifiedEmails.join(", "),m=()=>{var t;a.resendEmail(e.viewer,e.unverifiedEmails,H,e.appAuthToken,e.loggingContext,null!==(t=e.csrfToken)&&void 0!==t?t:void 0)};let g=null;return e.enrollmentState===M.EnrolledAccount||e.enrollmentState===M.EnrolledEmail||e.enrollmentState===M.EnrollmentPendingAccountVerificationSent||e.enrollmentState===M.EnrollmentPendingAccountConfirmation||e.enrollmentState===M.EnrollmentPendingAccountUIConfirmation||e.enrollmentState===M.UnenrollmentPendingAccountUIConfirmation||e.enrollmentState===M.UnenrollmentPendingEmailUIConfirmation?g=A.default.createElement(a.Stack,{gap:"12"},c&&A.default.createElement(a.Box,null,A.default.createElement(a.Text,null,`${t.getLoggedInDNSSettingsText(!o)}: `),A.default.createElement(a.Text,{isBold:!0},c)),!!u&&!r&&A.default.createElement(A.default.Fragment,null,A.default.createElement(a.Banner,{type:"warning"},A.default.createElement(a.Banner.Message,null,A.default.createElement(a.Text,null,`${t.confirmEmailText}: `),A.default.createElement(a.Text,{isBold:!0},u))),A.default.createElement(a.Button,{variant:"transparent",onClick:m},t.resendEmailButtonText)),D(e.enrollmentState)&&A.default.createElement(a.FormHelperText,null,t.emailVerificationText)):e.enrollmentState===M.EnrollmentPendingEmailVerificationSent||e.enrollmentState===M.EnrollmentPendingEmailUIConfirmation?g=A.default.createElement(a.Stack,{gap:"16"},A.default.createElement(a.Box,null,A.default.createElement(a.FormRow,null,A.default.createElement(a.FormLabel,{htmlFor:"dns-email"},t.emailLabel),A.default.createElement(a.TextInput,{id:Q,"data-testid":Q,name:Q,placeholder:"example@dropbox.com",value:e.email,onChange:t=>e.onEmailChange(t.target.value)})),o&&A.default.createElement(a.FormHelperText,null,t.emailVerificationText))):e.enrollmentState!==M.EnrollmentPendingEmailConfirmation||r||(g=A.default.createElement(a.Stack,{gap:"12"},A.default.createElement(a.Box,null,A.default.createElement(a.Text,null,`${t.confirmEmailText}: `),A.default.createElement(a.Text,{isBold:!0},u)),A.default.createElement(a.Button,{variant:"transparent",onClick:m},t.resendEmailButtonText))),A.default.createElement(A.default.Fragment,null,g,e.isFlowComplete&&A.default.createElement(a.Banner,{type:"attention"},A.default.createElement(a.Banner.Message,null,s?t.optedInBannerText:t.optedOutBannerText)))};a.injectInternalStyle("/static/metaserver/static/js/ccpa_iframe/ccpa_iframe.module.out-vfl5Mnlyj.css",(e=>"._ccpa-iframe_xv1f5_1{background-color:transparent;border:none;bottom:0;left:0;overflow:hidden;position:fixed;z-index:999999}._ccpa-iframe_xv1f5_1._banner-visible_xv1f5_11{bottom:24px;box-shadow:var(--dig-utilities__boxshadow__floating);left:24px;max-width:600px;width:100%}@media (max-width:648px){._ccpa-iframe_xv1f5_1._banner-visible_xv1f5_11{bottom:12px;left:12px;width:calc(100% - 24px)}}._ccpa-iframe_xv1f5_1:not(._banner-visible_xv1f5_11):not(._floating-button_xv1f5_28){display:none;left:-1px}._ccpa-iframe_xv1f5_1._floating-button_xv1f5_28{bottom:24px;left:0}@media (max-width:648px){._ccpa-iframe_xv1f5_1._floating-button_xv1f5_28{bottom:12px}}#_ccpa-toggle_xv1f5_1:focus-within{outline:3px solid var(--dig-color__utility__focus-ring);outline-offset:1px}"));const j="_ccpa-iframe_xv1f5_1",K="_banner-visible_xv1f5_11",W="_floating-button_xv1f5_28",Y="_ccpa-toggle_xv1f5_1",J="do_not_sell",X="consent-detailed-view",Z="consent-detailed-view-mobile",ee="strictly-necessary-only-button",te="detailed-view-cancel-button",ae="save-preferences-button",ne=e=>{const t=t=>{t.target.classList.contains("dig-Toggle-input")||e.onClick()};return A.default.createElement(l.Accordion.Item,{id:`${e.id}-item`,"data-testid":`${e.id}-item`,itemId:e.id,title:e.title,tabIndex:0,style:{cursor:"pointer"},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||t(e)}},A.default.createElement(a.Box,{onClick:t,style:{padding:"12px 16px"}},A.default.createElement(a.Box,{display:"flex",justifyContent:"space-between"},A.default.createElement(a.Box,{display:"flex",alignItems:"center"},A.default.createElement(a.UIIcon,{src:a.ChevronDownLine,size:"small",style:{transform:e.isOpen?"rotate(180deg)":""}}),A.default.createElement(a.Text,{isBold:!!e.boldTitle,style:{marginLeft:8}},e.title)),A.default.createElement(a.Toggle,{id:`${e.id}-toggle`,"data-testid":`${e.id}-toggle`,disabled:e.disabled,isToggled:e.isToggled,"aria-checked":e.isToggled,onChange:t=>e.onChange(t.target.checked),wrapperProps:{htmlFor:`${e.id}-toggle`,id:Y,"aria-label":`${e.title} toggle`},onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||e.onChange(!t.target.checked)}}))),A.default.createElement(l.Accordion.Panel,{style:{paddingTop:8}},e.children))};ne.displayName="AccordionItem",a.Modal.setAppElement(document.getElementById("root"));const ie=e=>{const n=e.width<601,r=e.width<486,s={title:(d=i.intl).formatMessage({id:"rmoSqA",defaultMessage:"Update Cookie Preferences"}),dnsTitle:d.formatMessage({id:"B/scGc",defaultMessage:"Do not sell or share my information"}),cookiePreferencesTitle:d.formatMessage({id:"nBH+Cn",defaultMessage:"Cookie Preferences"}),strictlyNecessaryOnlyButtonText:d.formatMessage({id:"lM4asI",defaultMessage:"Strictly necessary only"}),savePreferencesButtonText:d.formatMessage({id:"3lwNvc",defaultMessage:"Save preferences"}),sendVerificationButtonText:d.formatMessage({id:"6cpDJr",defaultMessage:"Send verification"}),descriptionText:(e,t)=>d.formatMessage({id:"OAZ8D0",defaultMessage:"Dropbox uses different categories of cookies to provide, protect, improve, and promote our website and services. Information on these categories and their purposes are described below. For more information please see our <privacy>Privacy Policy</privacy> and <faq>Cookie FAQ page</faq>."},{privacy:t=>A.default.createElement(a.Link,{id:"privacy-page-link",href:"#privacy-page","data-testid":"privacy-page-link","data-uxa-log":"privacy_consent_detailed_view_privacy_page_link",onClick:e,display:"inline"},t),faq:e=>A.default.createElement(a.Link,{id:"cookie-faq-link",href:"#cookie-faq-link","data-testid":"cookie-faq-link","data-uxa-log":"privacy_consent_detailed_view_ccpa_cookie_faq_link",onClick:t,display:"inline"},e)}),dnsDescription:e=>d.formatMessage({id:"brKQ8K",defaultMessage:'Do not sell or share my personal data to third-parties when I visit this website. Enabling this option will disable all cookies except for those classified as "strictly necessary". Visit our <button>Cookie FAQ page</button> for more information.'},{button:t=>A.default.createElement(a.Link,{id:"cookie-faq-link",href:"#cookie-faq-link","data-testid":"cookie-faq-link",onClick:e,"data-uxa-log":"privacy_consent_detailed_view_ccpa_cookie_faq_link",display:"inline"},t)}),gpcSignalText:(e=!1)=>e?d.formatMessage({id:"FbECDH",defaultMessage:"Global Privacy Control enabled."}):d.formatMessage({id:"F0UTLm",defaultMessage:"Global Privacy Control enabled. Disable to modify cookies."})};var d;const c=(e=>({[a.CookieCategory.StrictlyNecessary]:{title:e.formatMessage({id:"586NPL",defaultMessage:"Strictly Necessary"}),text:e.formatMessage({id:"QNuy/o",defaultMessage:"Cookies that are used to operate the website and services, such as to log you in and keep your account secure."})},[a.CookieCategory.MarketingAdvertising]:{title:e.formatMessage({id:"/ECljr",defaultMessage:"General Marketing and Advertising"}),text:e.formatMessage({id:"0YwibY",defaultMessage:"Cookies that are used by Dropbox and our partners to better understand the types of individuals who are interested in our products and services and how we can promote those services based on that information."})},[a.CookieCategory.SocialMediaAdvertising]:{title:e.formatMessage({id:"adix6u",defaultMessage:"Social Media Advertising"}),text:e.formatMessage({id:"kW6BLx",defaultMessage:"Cookies that are used by Dropbox and our partners to understand the effectiveness of our advertisements on social media services. These cookies also help them understand your advertising preferences so they can more effectively show you our advertisements which are relevant to your interests."})},[a.CookieCategory.Analytics]:{title:e.formatMessage({id:"LhEjYu",defaultMessage:"Analytics"}),text:e.formatMessage({id:"c/zwvz",defaultMessage:"Cookies that help us and our partners understand how our websites are engaged with, such as usage statistics or to reconstruct viewed UI elements, in order to improve and customize our services."})},[a.CookieCategory.PerformanceFunctionality]:{title:e.formatMessage({id:"Avfva4",defaultMessage:"Performance and Functionality"}),text:e.formatMessage({id:"h2qu6c",defaultMessage:"Cookies which help us remember your preferences and settings in order to improve your experience when interacting with our sites and services."})}}))(i.intl),u=w(e.enrollmentState),[m,g]=t.useState(u?J:""),[f,p]=t.useState(""),[E,_]=t.useState(s.savePreferencesButtonText);let C;C=n?"calc(100vh - 125px)":r?"calc(100vh - 169px)":"calc(100vh - 165px)";const y=t=>{e.onButtonClick(t)},v=t=>{e.onDNSChange(t),t?(g(J),p(""),e.initEnrollmentState!==M.NotEnrolled||e.loggedIn||_(s.sendVerificationButtonText)):_(s.savePreferencesButtonText)};return e.hideGdpr?A.default.createElement(a.Modal,{id:Z,open:!0,fullScreen:!0,"data-testid":Z,"data-uxa-hierarchy-group":e.uriForLogging,"data-uxa-log":"privacy_consent_detailed_view","data-uxa-interactions":"shown click"},A.default.createElement(a.Modal.Header,{style:{padding:24}},A.default.createElement(a.Modal.Title,{tagName:"h1"},s.dnsTitle)),A.default.createElement(a.Modal.Body,null,A.default.createElement(a.Stack,{gap:"16"},A.default.createElement(a.Box,{display:"flex",flexDirection:"row",style:{gap:32}},A.default.createElement(a.Text,null,s.dnsDescription(e.onCookiesFaqLinkClick)),A.default.createElement(a.Toggle,{id:`${J}-toggle`,"data-testid":`${J}-toggle`,"aria-checked":e.gpcEnabled||u,isToggled:e.gpcEnabled||u,wrapperProps:{htmlFor:`${J}-toggle`,id:Y,"aria-label":`${s.dnsTitle} toggle`},onChange:e=>v(e.target.checked),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||v(!e.target.checked)}})),e.gpcEnabled&&A.default.createElement(a.Banner,{type:"attention"},A.default.createElement(a.Banner.Message,null,s.gpcSignalText(!0))),A.default.createElement($,{viewer:e.viewer,enrollmentState:e.enrollmentState,isFlowComplete:e.isFlowComplete,email:e.email,gpcEnabled:e.gpcEnabled,userEmails:e.userEmails,verifiedEmails:e.verifiedEmails,unverifiedEmails:e.unverifiedEmails,appAuthToken:e.appAuthToken,csrfToken:e.csrfToken,loggingContext:e.loggingContext,onEmailChange:e.handleEmailChange}))),A.default.createElement(a.Modal.Footer,null,A.default.createElement(a.Button,{id:ae,"data-testid":ae,"data-uxa-log":"privacy_consent_detailed_view_save_button",disabled:e.buttonsDisabled,variant:"primary",size:"large",onClick:()=>y(ae)},E))):A.default.createElement(a.Modal,{id:X,open:!0,isCentered:!0,shouldCloseOnOverlayClick:!0,onRequestClose:e.onClose,"data-testid":X,contentStyles:{boxShadow:"var(--dig-utilities__boxshadow__floating)"},overlayStyles:{backgroundColor:"rgba(0, 0, 0, 0)"}},A.default.createElement("div",{"data-uxa-hierarchy-group":e.uriForLogging,"data-uxa-log":"privacy_consent_detailed_view","data-uxa-interactions":"shown click"},A.default.createElement("div",{"data-uxa-log":"privacy_consent_detailed_view_cancel_button"},A.default.createElement(a.IconButton,{id:te,"data-testid":te,className:"close-btn",variant:"transparent","aria-label":"Close",onClick:()=>y(te),style:{position:"absolute",top:"8px",right:"8px"}},A.default.createElement(a.UIIcon,{src:a.CloseLine}))),A.default.createElement(a.Modal.Header,{style:{paddingTop:r?12:"",paddingInline:r?16:""}},A.default.createElement(a.Modal.Title,{tagName:"h1"},s.title)),A.default.createElement(a.Modal.Body,{style:{maxHeight:C,paddingInline:r?16:"",overflow:"auto"}},A.default.createElement(a.Stack,{paddingTop:"12",paddingBottom:"24",gap:"24"},A.default.createElement(a.Text,null,s.descriptionText(e.onPrivacyPageLinkClick,e.onCookiesFaqLinkClick)),e.gpcEnabled&&A.default.createElement(a.Banner,{type:"attention"},A.default.createElement(a.Banner.Message,null,s.gpcSignalText())),A.default.createElement(o.CardNamespace,{style:{borderRadius:"var(--dig-radius__medium)"}},A.default.createElement(l.Accordion,{variant:"blades",expandedPanel:m},A.default.createElement(ne,{id:J,title:s.dnsTitle,boldTitle:!0,onClick:()=>{g((e=>e?"":J)),p("")},isOpen:!!m,isToggled:e.gpcEnabled||u,disabled:e.gpcEnabled,onChange:v},A.default.createElement(a.Stack,{gap:"20"},A.default.createElement(a.Text,null,s.dnsDescription(e.onCookiesFaqLinkClick)),u&&A.default.createElement($,{viewer:e.viewer,enrollmentState:e.enrollmentState,isFlowComplete:e.isFlowComplete,email:e.email,gpcEnabled:e.gpcEnabled,userEmails:e.userEmails,verifiedEmails:e.verifiedEmails,unverifiedEmails:e.unverifiedEmails,appAuthToken:e.appAuthToken,csrfToken:e.csrfToken,loggingContext:e.loggingContext,onEmailChange:e.handleEmailChange}))))),A.default.createElement(a.Box,null,A.default.createElement(a.Title,{isBold:!0,size:"small"},s.cookiePreferencesTitle),A.default.createElement(o.CardNamespace,{style:{marginTop:12,borderRadius:"var(--dig-radius__medium)"}},A.default.createElement(l.Accordion,{variant:"blades",expandedPanel:f},Object.entries(e.categoryToggles).map((([t,n])=>{const i=t,o=(e=>e.replace(/\s/g,"_"))(i),{title:l,text:r}=c[i];return A.default.createElement(ne,{key:o,id:o,title:l,isOpen:f===o,isToggled:i===a.CookieCategory.StrictlyNecessary||!e.togglesDisabled&&n,disabled:i===a.CookieCategory.StrictlyNecessary||e.togglesDisabled,onClick:()=>(e=>{g(""),p((t=>t===e?"":e))})(o),onChange:t=>e.onCategoryChange(t,i)},A.default.createElement(a.Text,null,r))}))))))),A.default.createElement(a.Modal.Footer,{hasTopBorder:!0,style:{padding:r?16:""}},A.default.createElement(a.Split,{isFlexGap:!1,gap:"Micro Small",alignY:"center"},A.default.createElement(a.Split.Item,null,A.default.createElement(a.Button,{id:ee,"data-testid":ee,"data-uxa-log":"privacy_consent_detailed_strictly_necessary_button",disabled:e.buttonsDisabled||u,variant:"opacity",size:r?"medium":"large",onClick:()=>y(ee)},s.strictlyNecessaryOnlyButtonText)),A.default.createElement(a.Split.Item,null,A.default.createElement(a.Button,{id:ae,"data-testid":ae,"data-uxa-log":"privacy_consent_detailed_view_save_button",disabled:e.buttonsDisabled,variant:"primary",size:r?"medium":"large",onClick:()=>y(ae)},E))))))},oe={optInSuccess:(le=i.intl).formatMessage({id:"MURQNI",defaultMessage:"Success! Do not sell or share my personal information is now active."}),optOutSuccess:le.formatMessage({id:"T6SVre",defaultMessage:"Success! Settings are saved."}),updateFailed:le.formatMessage({id:"6w278K",defaultMessage:"Something went wrong! Try again later."})};var le;const re=new URLSearchParams(window.location.search),se=e=>{var i,o,l,s,d;const{viewer:c,dnsState:u,userEmails:m,verifiedEmails:g,unverifiedEmails:f,loggingContext:p,ccpaToken:E,isGpcEnabled:_,csrfToken:C,defaultNonCcpaToggleState:y,appAuthToken:v,openDetailedView:h=!1,platform:k,isInIframe:T=!0,backendPreferences:b}=e,I=t.useRef(null),x=(e=>e===a.UserDNSInitState.LOGGED_IN_ENROLLED||e===a.UserDNSInitState.LOGGED_IN_NOT_ENROLLED||e===a.UserDNSInitState.LOGGED_IN_EMAIL_PENDING)(u),P="true"===re.get(a.QueryParam.Gpc)||_||!!navigator.globalPrivacyControl,S="true"===re.get(a.QueryParam.HideGdpr),N=T?"true"===re.get(a.QueryParam.ShouldAutoOpenOptions):window.location.hash===a.MANAGE_COOKIES_LINK_TAG,L=re.get(a.QueryParam.ThirdPartyUserId),U=re.get(a.QueryParam.ThirdPartySessionId),V=re.get(a.QueryParam.ParentDomainConsentCookie),q=re.get(a.QueryParam.ParentDomainDnsCookie),Q=!!q&&"null"!==q,H=(null===(i=null==k?void 0:k.config)||void 0===i?void 0:i.isDefaultNonCcpaEnabled)||"true"===re.get(a.QueryParam.DefaultNonCcpa),$=T?null!==(o=re.get(a.QueryParam.UriForLogging))&&void 0!==o?o:"":a.getUriForLogging(),Y=(null==k?void 0:k.floatingButtonVisible)||"true"===re.get(a.QueryParam.ShouldShowFloatingButton),J=(null==k?void 0:k.bannerDisabled)||"true"===re.get(a.QueryParam.ShouldDisableBanner)||P||u!==a.UserDNSInitState.UNKNOWN&&u!==a.UserDNSInitState.LOGGED_IN_NOT_ENROLLED&&u!==a.UserDNSInitState.LOGGED_OUT_NOT_ENROLLED,X=T?parseInt(null!==(l=re.get(a.QueryParam.Width))&&void 0!==l?l:"0",10):window.innerWidth,Z=T?decodeURIComponent(null!==(s=re.get(a.QueryParam.Origin))&&void 0!==s?s:window.location.origin):window.location.origin,ne=V?JSON.parse(decodeURIComponent(V)):void 0;let le=Number(null!==(d=re.get(a.QueryParam.LocalCookieExpiredTs))&&void 0!==d?d:0);const se=(null==k?void 0:k.cookieStore)||new a.ConsentCookieStore({}),de=w(O(u));let ce=P||de||T?!!(null==ne?void 0:ne.userInteracted):se.hasUserInteracted();const ue=H&&!ce&&!S&&y&&!de,me=a.getActiveUserApiV2Properties(),ge=!a.isCrossOrigin(re)&&me&&me.id?me.id.toString():L||"",fe=a.isCrossOrigin(re)?U||"":r.getBrowserId(),[pe,Ee]=t.useState(!1);t.useEffect((()=>{const e=(e=>e===M.EnrolledAccount||e===M.EnrollmentPendingAccountConfirmation)(Ne)||(e=>e===M.NotEnrolled)(Ne);let t;return w(Ne)&&e&&We({messageType:a.CCPAOutboundMessageType.dnsEnabled,data:{optInToDNS:!0}}),null!=C&&""!==C&&We({messageType:a.CCPAOutboundMessageType.csrfHandshakeStart,data:{token:C}}),et(Pe,Ce,ce)?(tt(),qe(!1)):ce||ge||dt(),t=H&&y?a.DefaultNonCcpaTogglesOn.GateOnDefaultsEnabled:H&&!y?a.DefaultNonCcpaTogglesOn.GateOnDefaultsDisabled:!H&&y?a.DefaultNonCcpaTogglesOn.GateOffDefaultsEnabled:a.DefaultNonCcpaTogglesOn.GateOffDefaultsDisabled,We({messageType:a.CCPAOutboundMessageType.logConsentValues,data:{defaultNonCcpaTogglesOn:t,categories:Ce,userInteracted:ce}}),P&&!de&&x&&(Me(M.EnrolledAccount),Ye()),a.isCrossOrigin(re)?vt():a.fetchQueryExperiment("privacy_2025_10_22_unified_consent_gate").then((e=>{var t;e&&"true"===(null===(t=e.apiData)||void 0===t?void 0:t.variant)&&(ge||fe)?vt():(kt(),yt())})).catch((e=>{kt(),yt()})),window.addEventListener("resize",(()=>Ze())),()=>{window.removeEventListener("resize",(()=>Ze()))}}),[]);let _e=se.initializeCategoriesMap({defaultNonCcpa:H&&ue,hasUserInteracted:ce,categories:T?null==ne?void 0:ne.categories:se.getAllowedCategoriesMap(),isDNSEnrolled:w(O(u))});const Ce={..._e},[ye,ve]=t.useState({...Ce}),[he,ke]=t.useState(P||O(u)!==M.NotEnrolled),[Te,be]=t.useState(""),[Ie,xe]=t.useState(!1),[Pe,Se]=t.useState(O(u)),[Ne,Me]=t.useState(Pe),[Ae,Oe]=t.useState(!1),[we,De]=t.useState({}),[Le,Be]=t.useState(!1),[Ue,Fe]=t.useState(X),[Re,Ge]=t.useState(!1),[Ve,qe]=t.useState(!(J||ce||N||P||w(Ne)||ge)),[ze,Qe]=t.useState(N||S||h),[He,$e]=t.useState(Y),[je,Ke]=t.useState(P),We=t.useCallback((e=>{try{window.parent.postMessage({messageType:e.messageType,...e.data||{}},Z)}catch(e){a.reportException({error:e,extra:{isInIframe:T,parentOrigin:Z}})}}),[Z]),Ye=()=>{const e=w(Ne),t=Ct(),n=Le?C:void 0;a.submitDNSSettings(c,e,e?mt:gt,v,Te,p,E,n,t)},Je=e=>{var t;if(e.origin===Z)switch(e.data.messageType){case a.CCPAInboundMessageType.dnsSettingsConfirmed:Ye();break;case a.CCPAInboundMessageType.dnsSettingsCancelled:Ke(!1),Me(Pe);break;case a.CCPAInboundMessageType.privacyConsentPageInfo:(e=>{const t={};e.hostname&&(t.hostname=e.hostname),e.foreignSessionId&&(t.foreignSessionId=e.foreignSessionId),e.clientInfo&&(t.clientInfo=e.clientInfo),De(t)})(e.data);break;case a.CCPAInboundMessageType.csrfHandshakeEnd:e.data.token===C&&Be(!0);break;case a.CCPAInboundMessageType.openDetailedView:Qe(!0);break;case a.CCPAInboundMessageType.enableAndShowFloatingButton:$e(!0);break;case a.CCPAInboundMessageType.iframeResize:Fe(e.data.width);break;case a.CCPAInboundMessageType.bannerCheck:if(!Re){const a=e.data.iframeHeight,n=null===(t=document.getElementById(B))||void 0===t?void 0:t.offsetHeight;Ge(!(!n||n!==a))}}};t.useEffect((()=>{T&&(Ve&&!J&&!ze)?setTimeout((()=>{var e;const t=null===(e=document.getElementById(B))||void 0===e?void 0:e.offsetHeight;t&&!Re&&(Ge(!0),We({messageType:a.CCPAOutboundMessageType.iframeBannerCheck,data:{height:t}}))}),100):Ge(!1)}),[Re,Ve,J,ze]),t.useEffect((()=>(window.addEventListener("message",Je),()=>{window.removeEventListener("message",Je)})),[Ne,Te,we,Le]),t.useEffect((()=>{(Ae||P)&&(D(Ne)?We({messageType:a.CCPAOutboundMessageType.dnsPendingEnabled,data:{loggedIn:x}}):(e=>e===M.UnenrollmentPendingEmailUIConfirmation||e===M.UnenrollmentPendingAccountUIConfirmation)(Ne)&&We({messageType:a.CCPAOutboundMessageType.dnsPendingDisabled}))}),[Ne]),t.useEffect((()=>{(Ae||P)&&(Ie?(Ke(!1),We({messageType:a.CCPAOutboundMessageType.dnsEmailValid})):(Ke(!0),We({messageType:a.CCPAOutboundMessageType.dnsEmailInvalid})))}),[Ie]);const Xe=e=>{e===te?(ve({..._e}),Me(Pe),Ke(P),ke(P||O(u)!==M.NotEnrolled),be(""),xe(!1)):e===ee?(rt(),ct()):e===ae&&(ce=!0,Pe!==Ne?Ye():(st(),ct())),Qe(S)},Ze=(e=window.innerWidth)=>{var t;if(T){const e=null===(t=document.getElementById(B))||void 0===t?void 0:t.offsetHeight;Ve&&!J&&!ze&&e&&We({messageType:a.CCPAOutboundMessageType.ccpaIframeResize,data:{height:e}})}else Fe(e)},et=(e,t,a)=>w(e)&&(!se.onlyStrictlyNecessaryConsent(t)||!a),tt=()=>{rt(),ct(!0)},at=(e,t)=>{Oe(!0),ve((a=>({...a,[t]:e})))},nt=(e,t)=>{t===F?(lt(),ct(!0)):t===R&&(rt(),ct(!0)),qe(!1),e.preventDefault(),e.stopPropagation()},it=e=>{e.preventDefault(),e.stopPropagation(),Qe(!0),qe(!1)},ot=t.useCallback((e=>{We({messageType:a.CCPAOutboundMessageType.bodyContentChange,data:{displayState:e}})}),[We]);t.useEffect((()=>{var e,t,n,i,o;const l=Ve&&!J&&!ze,r=He&&(!Ve||J)&&!ze;T?ze?(ot(a.DisplayState.DetailedView),qe(!1),null===(e=I.current)||void 0===e||e.focus()):ot(l?a.DisplayState.Banner:r?a.DisplayState.FloatingButton:a.DisplayState.Nothing):(null===(t=I.current)||void 0===t||t.classList.toggle(W,r),null===(n=I.current)||void 0===n||n.classList.toggle(K,l),We({messageType:a.CCPAOutboundMessageType.displayStateChange,data:{isBannerVisible:l,height:null!==(o=null===(i=I.current)||void 0===i?void 0:i.offsetHeight)&&void 0!==o?o:0}}))}),[ze,Ve,He,J,ot,T,We]);const lt=()=>{ce=!0,Object.values(a.CookieCategory).forEach((e=>{Ce[e]=!0})),ve({...Ce})},rt=()=>{ce=!0,Object.values(a.CookieCategory).forEach((e=>{Ce[e]=e===a.CookieCategory.StrictlyNecessary})),ve({...Ce})},st=()=>{Object.values(a.CookieCategory).forEach((e=>{Ce[e]=ye[e]}))},dt=()=>{if(!de&&!Q&&!se.getDNSCookie()){const e=new Date;le=se.getExpiredDateFromConsentDate(e).getTime(),We({messageType:a.CCPAOutboundMessageType.updateDefaultNonCcpa,data:{categories:Ce,consentDate:e,expiredTs:le}})}},ct=(e=!1,t)=>{const n=new Date;le=t||se.getExpiredDateFromConsentDate(n).getTime(),!t&&pe&&a.collectUserPrivacyPreferences(Ce,le,ce,Z,{appAuthToken:v,productUserId:ge,sessionId:fe,platform:""}),We({messageType:a.CCPAOutboundMessageType.consentChanged,data:{categories:Ce,shouldAvoidReload:e,userInteracted:ce,consentDate:n,expiredTs:le}})},ut=e=>{Oe(!0),ce=!0,e?(rt(),Pe===M.NotEnrolled?x?Me(M.EnrollmentPendingAccountUIConfirmation):(Me(M.EnrollmentPendingEmailUIConfirmation),Ke(!Ie)):Pe===M.EnrolledEmail||Pe===M.EnrollmentPendingEmailConfirmation||Pe===M.CrossOriginEnrolled||Pe===M.EnrolledViaCookie?Me(Pe):Pe!==M.EnrolledAccount&&Pe!==M.EnrollmentPendingAccountConfirmation||Me(Pe)):(Object.values(a.CookieCategory).forEach((e=>{Ce[e]=_e[e]})),ve({..._e}),Pe===M.EnrolledEmail||Pe===M.EnrollmentPendingEmailConfirmation||Pe===M.CrossOriginEnrolled||Pe===M.EnrolledViaCookie?Me(M.UnenrollmentPendingEmailUIConfirmation):Pe===M.EnrolledAccount||Pe===M.EnrollmentPendingAccountConfirmation?Me(M.UnenrollmentPendingAccountUIConfirmation):Pe===M.NotEnrolled&&Me(M.NotEnrolled),Ke(!1)),ke(e)},mt=e=>{e?n.Notify.success(oe.optInSuccess):n.Notify.error(oe.updateFailed),x?(Me(M.EnrollmentPendingAccountVerificationSent),Se(M.EnrollmentPendingAccountConfirmation)):a.isCrossOrigin(re)?(Me(M.CrossOriginEnrolled),Se(M.CrossOriginEnrolled)):(Me(M.EnrollmentPendingEmailConfirmation),Se(M.EnrollmentPendingEmailConfirmation),f.push(Te)),rt(),st(),We({messageType:a.CCPAOutboundMessageType.dnsEnabled,data:{loggedIn:x,optInToDNS:!0}}),S||ct()},gt=e=>{e?n.Notify.success(oe.optOutSuccess):n.Notify.error(oe.updateFailed),Me(M.NotEnrolled),Se(M.NotEnrolled),We({messageType:a.CCPAOutboundMessageType.dnsDisabled}),f.slice(f.indexOf(Te),1),S||(st(),ct())},ft=e=>{be(e),null!==e.match(/^.+@.+\..+$/)?xe(!0):xe(!1)},pt=e=>{e.preventDefault(),We({messageType:a.CCPAOutboundMessageType.ccpaPrivacyPolicyFaqClick})},Et=e=>{e.preventDefault(),We({messageType:a.CCPAOutboundMessageType.ccpaPrivacyPageClick})},_t=e=>{e.preventDefault(),We({messageType:a.CCPAOutboundMessageType.ccpaCookieFaqClick})},Ct=()=>({opt_in_source:P?a.CCPA_ACTION_SOURCE.GPC_UI:a.CCPA_ACTION_SOURCE.USER_INPUT,opt_in_domain:we.hostname,opt_in_client:we.clientInfo,foreign_session_id:we.foreignSessionId}),yt=()=>{We({messageType:a.CCPAOutboundMessageType.initCallback,data:{categories:Ce,userInteracted:ce,cookieStore:se}})},vt=()=>{Ee(!0),Tt()&&yt(),b&&b.apiCallSuccess?ht(b.found,b.categories,b.expiredTs,b.userInteracted,b.apiCallSuccess):a.getUserPrivacyPreferences(ht,Z,{appAuthToken:v,productUserId:ge,sessionId:fe,platform:""})},ht=(e,t,n,i,o=!0)=>{(ge||fe)&&a.shouldPushToBackend(le,n,e,de||P,t,Ce,ce,i,o)?(a.collectUserPrivacyPreferences(Ce,le,ce||i,Z,{appAuthToken:v,productUserId:ge,sessionId:fe,platform:""}),yt(),kt()):ge&&a.shouldSyncFromBackend(le,n,e,de||P,ce,i,o)?(ce=i||ce,Object.values(a.CookieCategory).forEach((e=>{Ce[e]=t[e]})),_e={...Ce},ve({...Ce}),yt(),ct(!0,n)):(Tt()||yt(),ce||(dt(),kt()))},kt=()=>{qe(!(J||ce||N||P||w(Ne)))},Tt=()=>!ge||P||de;return A.default.createElement(a.ThemeProvider,{theme:"vis2023",mode:a.useTheme$1(Z)},(({getThemeProps:e})=>{return A.default.createElement("div",{id:a.CCPA_IFRAME_THEME_PROVIDER_ID,"data-testid":a.CCPA_IFRAME_THEME_PROVIDER_ID,...e()},A.default.createElement("div",{ref:I,id:a.CCPA_IFRAME_ID$1,"data-testid":a.CCPA_IFRAME_ID$1,className:T?"":j},!ze&&Ve&&!J&&A.default.createElement(G,{width:Ue,origin:Z,setBannerVisible:qe,onClick:nt,onCustomizeCookiesClick:it,onPrivacyPageLinkClick:Et,onPrivacyPolicyFaqLinkClick:pt,uriForLogging:$}),!ze&&!Ve&&He&&A.default.createElement(z,{uriForLogging:$,onClick:()=>Qe(!0)}),ze&&A.default.createElement(ie,{viewer:c,width:Ue,gpcEnabled:P,hideGdpr:S,uriForLogging:$,loggedIn:x,initEnrollmentState:Pe,enrollmentState:Ne,userEmails:m,verifiedEmails:g,unverifiedEmails:f,email:Te,handleEmailChange:ft,isFlowComplete:(t=Pe,n=Ne,t!==M.NotEnrolled&&n===M.NotEnrolled||n===M.EnrollmentPendingEmailVerificationSent||n===M.EnrollmentPendingAccountVerificationSent),buttonsDisabled:je,categoryToggles:ye,appAuthToken:v,onClose:()=>Qe(!1),onButtonClick:Xe,onPrivacyPageLinkClick:Et,onCookiesFaqLinkClick:_t,togglesDisabled:he,onCategoryChange:at,onDNSChange:ut})));var t,n}))};se.displayName="CCPAIFrameInner";const de=e=>{var t;const{viewer:n,isLoading:i}=a.useViewer();return i?null:A.default.createElement(a.CCPAIframeErrorBoundary,{extra:{isInIframe:null===(t=e.isInIframe)||void 0===t||t}},A.default.createElement(se,{...e,viewer:n}))};de.displayName="CCPAIFrameWithoutStyles";const ce=a.requireCssWithComponent(de,["/static/metaserver/static/css/dig-components/index.web-vflumqaCO.css","/static/metaserver/static/css/dig-components/tokens-vflEprss9.css"]);e.CCPAIFrame=ce}));
//# sourceMappingURL=c_ccpa_iframe.js-vfl5BKSjX.map

//# debugId=d6e7c71e-9404-3f3c-8289-3f925b56aec0