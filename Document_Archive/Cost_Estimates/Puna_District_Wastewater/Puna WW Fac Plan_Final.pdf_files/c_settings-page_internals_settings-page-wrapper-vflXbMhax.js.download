!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="0c3b799e-59d0-36e5-baf0-d85fd32e757a")}catch(e){}}();
define(["exports","react","./e_file_viewer_static_scl_page_file","./c_core_i18n","./c_src_bindings_provider","./c_src_utils_initials","./c_inband-screen_internals_share-modal-share","./c_common_components_buttons","./c_dig-icons_assets_ui-icon_line_share","./c_dig-components_chip_index","./c_content-member-list_internals_content-member-list","./c_dig-components_tabs_index","./c_utils_dsx_dsx-react","./c_api_v2_routes_plan_configuration_provider","./c_dig-components_card_index","./c_components_icons_icon_dropdown_selected","./c_api_v2_routes_team_insights_provider","./c_date-fns__lib_requiredArgs_index","./c_dig-components_combinations_index","./c_dig-icons_assets_ui-icon_line_settings","./c_over-quota_over-quota-sweep-blocking-modal_show_over_quota_modal_or_continue","./c_dig-icons_assets_ui-icon_line_upsell"],(function(e,t,a,n,r,i,o,s,l,c,d,u,m,g,f,p,h,y,v,b,w,_){"use strict";function k(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var E=k(t);function M(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var S={};function T(){return S}function D(e,t){y.requiredArgs(2,arguments);var a=y.startOfDay(e),n=y.startOfDay(t);return a.getTime()===n.getTime()}function C(e){return y.requiredArgs(1,arguments),e instanceof Date||"object"===y._typeof(e)&&"[object Date]"===Object.prototype.toString.call(e)}function P(e){if(y.requiredArgs(1,arguments),!C(e)&&"number"!=typeof e)return!1;var t=y.toDate(e);return!isNaN(Number(t))}function L(e,t){return y.requiredArgs(2,arguments),function(e,t){y.requiredArgs(2,arguments);var a=y.toDate(e).getTime(),n=M(t);return new Date(a+n)}(e,-M(t))}function x(e){y.requiredArgs(1,arguments);var t=y.toDate(e),a=t.getUTCDay(),n=(a<1?7:0)+a-1;return t.setUTCDate(t.getUTCDate()-n),t.setUTCHours(0,0,0,0),t}function I(e){y.requiredArgs(1,arguments);var t=y.toDate(e),a=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(a+1,0,4),n.setUTCHours(0,0,0,0);var r=x(n),i=new Date(0);i.setUTCFullYear(a,0,4),i.setUTCHours(0,0,0,0);var o=x(i);return t.getTime()>=r.getTime()?a+1:t.getTime()>=o.getTime()?a:a-1}var N=6048e5;function A(e){y.requiredArgs(1,arguments);var t=y.toDate(e),a=x(t).getTime()-function(e){y.requiredArgs(1,arguments);var t=I(e),a=new Date(0);return a.setUTCFullYear(t,0,4),a.setUTCHours(0,0,0,0),x(a)}(t).getTime();return Math.round(a/N)+1}function O(e,t){var a,n,r,i,o,s,l,c;y.requiredArgs(1,arguments);var d=T(),u=M(null!==(a=null!==(n=null!==(r=null!==(i=null==t?void 0:t.weekStartsOn)&&void 0!==i?i:null==t||null===(o=t.locale)||void 0===o||null===(s=o.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==r?r:d.weekStartsOn)&&void 0!==n?n:null===(l=d.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==a?a:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=y.toDate(e),g=m.getUTCDay(),f=(g<u?7:0)+g-u;return m.setUTCDate(m.getUTCDate()-f),m.setUTCHours(0,0,0,0),m}function U(e,t){var a,n,r,i,o,s,l,c;y.requiredArgs(1,arguments);var d=y.toDate(e),u=d.getUTCFullYear(),m=T(),g=M(null!==(a=null!==(n=null!==(r=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(o=t.locale)||void 0===o||null===(s=o.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==r?r:m.firstWeekContainsDate)&&void 0!==n?n:null===(l=m.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==a?a:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(u+1,0,g),f.setUTCHours(0,0,0,0);var p=O(f,t),h=new Date(0);h.setUTCFullYear(u,0,g),h.setUTCHours(0,0,0,0);var v=O(h,t);return d.getTime()>=p.getTime()?u+1:d.getTime()>=v.getTime()?u:u-1}var R=6048e5;function $(e,t){y.requiredArgs(1,arguments);var a=y.toDate(e),n=O(a,t).getTime()-function(e,t){var a,n,r,i,o,s,l,c;y.requiredArgs(1,arguments);var d=T(),u=M(null!==(a=null!==(n=null!==(r=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(o=t.locale)||void 0===o||null===(s=o.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==r?r:d.firstWeekContainsDate)&&void 0!==n?n:null===(l=d.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==a?a:1),m=U(e,t),g=new Date(0);return g.setUTCFullYear(m,0,u),g.setUTCHours(0,0,0,0),O(g,t)}(a,t).getTime();return Math.round(n/R)+1}function F(e,t){for(var a=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return a+n}var B={y:function(e,t){var a=e.getUTCFullYear(),n=a>0?a:1-a;return F("yy"===t?n%100:n,t.length)},M:function(e,t){var a=e.getUTCMonth();return"M"===t?String(a+1):F(a+1,2)},d:function(e,t){return F(e.getUTCDate(),t.length)},a:function(e,t){var a=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];default:return"am"===a?"a.m.":"p.m."}},h:function(e,t){return F(e.getUTCHours()%12||12,t.length)},H:function(e,t){return F(e.getUTCHours(),t.length)},m:function(e,t){return F(e.getUTCMinutes(),t.length)},s:function(e,t){return F(e.getUTCSeconds(),t.length)},S:function(e,t){var a=t.length,n=e.getUTCMilliseconds();return F(Math.floor(n*Math.pow(10,a-3)),t.length)}},j="midnight",H="noon",W="morning",Y="afternoon",q="evening",G="night",V={G:function(e,t,a){var n=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});default:return a.era(n,{width:"wide"})}},y:function(e,t,a){if("yo"===t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return a.ordinalNumber(r,{unit:"year"})}return B.y(e,t)},Y:function(e,t,a,n){var r=U(e,n),i=r>0?r:1-r;return"YY"===t?F(i%100,2):"Yo"===t?a.ordinalNumber(i,{unit:"year"}):F(i,t.length)},R:function(e,t){return F(I(e),t.length)},u:function(e,t){return F(e.getUTCFullYear(),t.length)},Q:function(e,t,a){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return F(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,a){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return F(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,a){var n=e.getUTCMonth();switch(t){case"M":case"MM":return B.M(e,t);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,a){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return F(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,a,n){var r=$(e,n);return"wo"===t?a.ordinalNumber(r,{unit:"week"}):F(r,t.length)},I:function(e,t,a){var n=A(e);return"Io"===t?a.ordinalNumber(n,{unit:"week"}):F(n,t.length)},d:function(e,t,a){return"do"===t?a.ordinalNumber(e.getUTCDate(),{unit:"date"}):B.d(e,t)},D:function(e,t,a){var n=function(e){y.requiredArgs(1,arguments);var t=y.toDate(e),a=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=a-t.getTime();return Math.floor(n/864e5)+1}(e);return"Do"===t?a.ordinalNumber(n,{unit:"dayOfYear"}):F(n,t.length)},E:function(e,t,a){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,a,n){var r=e.getUTCDay(),i=(r-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return F(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"});default:return a.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,a,n){var r=e.getUTCDay(),i=(r-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return F(i,t.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"});default:return a.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,a){var n=e.getUTCDay(),r=0===n?7:n;switch(t){case"i":return String(r);case"ii":return F(r,t.length);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,a){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,a){var n,r=e.getUTCHours();switch(n=12===r?H:0===r?j:r/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,a){var n,r=e.getUTCHours();switch(n=r>=17?q:r>=12?Y:r>=4?W:G,t){case"B":case"BB":case"BBB":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,a){if("ho"===t){var n=e.getUTCHours()%12;return 0===n&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return B.h(e,t)},H:function(e,t,a){return"Ho"===t?a.ordinalNumber(e.getUTCHours(),{unit:"hour"}):B.H(e,t)},K:function(e,t,a){var n=e.getUTCHours()%12;return"Ko"===t?a.ordinalNumber(n,{unit:"hour"}):F(n,t.length)},k:function(e,t,a){var n=e.getUTCHours();return 0===n&&(n=24),"ko"===t?a.ordinalNumber(n,{unit:"hour"}):F(n,t.length)},m:function(e,t,a){return"mo"===t?a.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):B.m(e,t)},s:function(e,t,a){return"so"===t?a.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):B.s(e,t)},S:function(e,t){return B.S(e,t)},X:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return Q(r);case"XXXX":case"XX":return K(r);default:return K(r,":")}},x:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"x":return Q(r);case"xxxx":case"xx":return K(r);default:return K(r,":")}},O:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+z(r,":");default:return"GMT"+K(r,":")}},z:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+z(r,":");default:return"GMT"+K(r,":")}},t:function(e,t,a,n){var r=n._originalDate||e;return F(Math.floor(r.getTime()/1e3),t.length)},T:function(e,t,a,n){return F((n._originalDate||e).getTime(),t.length)}};function z(e,t){var a=e>0?"-":"+",n=Math.abs(e),r=Math.floor(n/60),i=n%60;if(0===i)return a+String(r);var o=t||"";return a+String(r)+o+F(i,2)}function Q(e,t){return e%60==0?(e>0?"-":"+")+F(Math.abs(e)/60,2):K(e,t)}function K(e,t){var a=t||"",n=e>0?"-":"+",r=Math.abs(e);return n+F(Math.floor(r/60),2)+a+F(r%60,2)}var X=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},J=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Z={p:J,P:function(e,t){var a,n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return X(e,t);switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",X(r,t)).replace("{{time}}",J(i,t))}},ee=["D","DD"],te=["YY","YYYY"];function ae(e){return-1!==ee.indexOf(e)}function ne(e){return-1!==te.indexOf(e)}function re(e,t,a){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var ie={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},oe=function(e,t,a){var n,r=ie[e];return n="string"==typeof r?r:1===t?r.one:r.other.replace("{{count}}",t.toString()),null!=a&&a.addSuffix?a.comparison&&a.comparison>0?"in "+n:n+" ago":n};function se(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.width?String(t.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}var le={date:se({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:se({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:se({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ce={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},de=function(e,t,a,n){return ce[e]};function ue(e){return function(t,a){var n;if("formatting"===(null!=a&&a.context?String(a.context):"standalone")&&e.formattingValues){var r=e.defaultFormattingWidth||e.defaultWidth,i=null!=a&&a.width?String(a.width):r;n=e.formattingValues[i]||e.formattingValues[r]}else{var o=e.defaultWidth,s=null!=a&&a.width?String(a.width):e.defaultWidth;n=e.values[s]||e.values[o]}return n[e.argumentCallback?e.argumentCallback(t):t]}}var me={ordinalNumber:function(e,t){var a=Number(e),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},era:ue({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:ue({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:ue({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:ue({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:ue({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function ge(e){return function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.width,r=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(r);if(!i)return null;var o,s=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var a=0;a<e.length;a++)if(t(e[a]))return a;return}(l,(function(e){return e.test(s)})):function(e,t){for(var a in e)if(e.hasOwnProperty(a)&&t(e[a]))return a;return}(l,(function(e){return e.test(s)}));return o=e.valueCallback?e.valueCallback(c):c,{value:o=a.valueCallback?a.valueCallback(o):o,rest:t.slice(s.length)}}}var fe,pe={ordinalNumber:(fe={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.match(fe.matchPattern);if(!a)return null;var n=a[0],r=e.match(fe.parsePattern);if(!r)return null;var i=fe.valueCallback?fe.valueCallback(r[0]):r[0];return{value:i=t.valueCallback?t.valueCallback(i):i,rest:e.slice(n.length)}}),era:ge({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:ge({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:ge({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:ge({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:ge({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},he={code:"en-US",formatDistance:oe,formatLong:le,formatRelative:de,localize:me,match:pe,options:{weekStartsOn:0,firstWeekContainsDate:1}},ye=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ve=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,be=/^'([^]*?)'?$/,we=/''/g,_e=/[a-zA-Z]/;function ke(e,t,a){var n,r,i,o,s,l,c,d,u,m,g,f,p,h,v,b,w,_;y.requiredArgs(2,arguments);var k=String(t),E=T(),S=null!==(n=null!==(r=null==a?void 0:a.locale)&&void 0!==r?r:E.locale)&&void 0!==n?n:he,D=M(null!==(i=null!==(o=null!==(s=null!==(l=null==a?void 0:a.firstWeekContainsDate)&&void 0!==l?l:null==a||null===(c=a.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==s?s:E.firstWeekContainsDate)&&void 0!==o?o:null===(u=E.locale)||void 0===u||null===(m=u.options)||void 0===m?void 0:m.firstWeekContainsDate)&&void 0!==i?i:1);if(!(D>=1&&D<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var C=M(null!==(g=null!==(f=null!==(p=null!==(h=null==a?void 0:a.weekStartsOn)&&void 0!==h?h:null==a||null===(v=a.locale)||void 0===v||null===(b=v.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==p?p:E.weekStartsOn)&&void 0!==f?f:null===(w=E.locale)||void 0===w||null===(_=w.options)||void 0===_?void 0:_.weekStartsOn)&&void 0!==g?g:0);if(!(C>=0&&C<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!S.localize)throw new RangeError("locale must contain localize property");if(!S.formatLong)throw new RangeError("locale must contain formatLong property");var x=y.toDate(e);if(!P(x))throw new RangeError("Invalid time value");var I=L(x,y.getTimezoneOffsetInMilliseconds(x)),N={firstWeekContainsDate:D,weekStartsOn:C,locale:S,_originalDate:x};return k.match(ve).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,Z[t])(e,S.formatLong):e})).join("").match(ye).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return function(e){var t=e.match(be);if(!t)return e;return t[1].replace(we,"'")}(n);var i=V[r];if(i)return null!=a&&a.useAdditionalWeekYearTokens||!ne(n)||re(n,t,String(e)),null!=a&&a.useAdditionalDayOfYearTokens||!ae(n)||re(n,t,String(e)),i(I,n,S.localize,N);if(r.match(_e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("")}function Ee(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Se(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return Me(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Me(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw i}}}}function Te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e,t){return De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},De(e,t)}function Ce(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&De(e,t)}function Pe(e){return Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pe(e)}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Pe(e);if(t){var r=Pe(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return function(e,t){if(t&&("object"===y._typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Te(e)}(this,a)}}function xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ie(e){var t=function(e,t){if("object"!==y._typeof(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==y._typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===y._typeof(t)?t:String(t)}function Ne(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ie(n.key),n)}}function Ae(e,t,a){return t&&Ne(e.prototype,t),a&&Ne(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Oe(e,t,a){return(t=Ie(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ue=function(){function e(){xe(this,e),Oe(this,"priority",void 0),Oe(this,"subPriority",0)}return Ae(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),Re=function(e){Ce(a,e);var t=Le(a);function a(e,n,r,i,o){var s;return xe(this,a),(s=t.call(this)).value=e,s.validateValue=n,s.setValue=r,s.priority=i,o&&(s.subPriority=o),s}return Ae(a,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,a){return this.setValue(e,t,this.value,a)}}]),a}(Ue),$e=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",10),Oe(Te(e),"subPriority",-1),e}return Ae(a,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var a=new Date(0);return a.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),a.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),a}}]),a}(Ue),Fe=function(){function e(){xe(this,e),Oe(this,"incompatibleTokens",void 0),Oe(this,"priority",void 0),Oe(this,"subPriority",void 0)}return Ae(e,[{key:"run",value:function(e,t,a,n){var r=this.parse(e,t,a,n);return r?{setter:new Re(r.value,this.validate,this.set,this.priority,this.subPriority),rest:r.rest}:null}},{key:"validate",value:function(e,t,a){return!0}}]),e}(),Be=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",140),Oe(Te(e),"incompatibleTokens",["R","u","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){switch(t){case"G":case"GG":case"GGG":return a.era(e,{width:"abbreviated"})||a.era(e,{width:"narrow"});case"GGGGG":return a.era(e,{width:"narrow"});default:return a.era(e,{width:"wide"})||a.era(e,{width:"abbreviated"})||a.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,a){return t.era=a,e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e}}]),a}(Fe),je=/^(1[0-2]|0?\d)/,He=/^(3[0-1]|[0-2]?\d)/,We=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Ye=/^(5[0-3]|[0-4]?\d)/,qe=/^(2[0-3]|[0-1]?\d)/,Ge=/^(2[0-4]|[0-1]?\d)/,Ve=/^(1[0-1]|0?\d)/,ze=/^(1[0-2]|0?\d)/,Qe=/^[0-5]?\d/,Ke=/^[0-5]?\d/,Xe=/^\d/,Je=/^\d{1,2}/,Ze=/^\d{1,3}/,et=/^\d{1,4}/,tt=/^-?\d+/,at=/^-?\d/,nt=/^-?\d{1,2}/,rt=/^-?\d{1,3}/,it=/^-?\d{1,4}/,ot=/^([+-])(\d{2})(\d{2})?|Z/,st=/^([+-])(\d{2})(\d{2})|Z/,lt=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,ct=/^([+-])(\d{2}):(\d{2})|Z/,dt=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function ut(e,t){return e?{value:t(e.value),rest:e.rest}:e}function mt(e,t){var a=t.match(e);return a?{value:parseInt(a[0],10),rest:t.slice(a[0].length)}:null}function gt(e,t){var a=t.match(e);return a?"Z"===a[0]?{value:0,rest:t.slice(1)}:{value:("+"===a[1]?1:-1)*(36e5*(a[2]?parseInt(a[2],10):0)+6e4*(a[3]?parseInt(a[3],10):0)+1e3*(a[5]?parseInt(a[5],10):0)),rest:t.slice(a[0].length)}:null}function ft(e){return mt(tt,e)}function pt(e,t){switch(e){case 1:return mt(Xe,t);case 2:return mt(Je,t);case 3:return mt(Ze,t);case 4:return mt(et,t);default:return mt(new RegExp("^\\d{1,"+e+"}"),t)}}function ht(e,t){switch(e){case 1:return mt(at,t);case 2:return mt(nt,t);case 3:return mt(rt,t);case 4:return mt(it,t);default:return mt(new RegExp("^-?\\d{1,"+e+"}"),t)}}function yt(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function vt(e,t){var a,n=t>0,r=n?t:1-t;if(r<=50)a=e||100;else{var i=r+50;a=e+100*Math.floor(i/100)-(e>=i%100?100:0)}return n?a:1-a}function bt(e){return e%400==0||e%4==0&&e%100!=0}var wt=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",130),Oe(Te(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){var n=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return ut(pt(4,e),n);case"yo":return ut(a.ordinalNumber(e,{unit:"year"}),n);default:return ut(pt(t.length,e),n)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,a){var n=e.getUTCFullYear();if(a.isTwoDigitYear){var r=vt(a.year,n);return e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}var i="era"in t&&1!==t.era?1-a.year:a.year;return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}}]),a}(Fe),_t=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",130),Oe(Te(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){var n=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return ut(pt(4,e),n);case"Yo":return ut(a.ordinalNumber(e,{unit:"year"}),n);default:return ut(pt(t.length,e),n)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,a,n){var r=U(e,n);if(a.isTwoDigitYear){var i=vt(a.year,r);return e.setUTCFullYear(i,0,n.firstWeekContainsDate),e.setUTCHours(0,0,0,0),O(e,n)}var o="era"in t&&1!==t.era?1-a.year:a.year;return e.setUTCFullYear(o,0,n.firstWeekContainsDate),e.setUTCHours(0,0,0,0),O(e,n)}}]),a}(Fe),kt=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",130),Oe(Te(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t){return ht("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,a){var n=new Date(0);return n.setUTCFullYear(a,0,4),n.setUTCHours(0,0,0,0),x(n)}}]),a}(Fe),Et=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",130),Oe(Te(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t){return ht("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,a){return e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e}}]),a}(Fe),Mt=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",120),Oe(Te(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){switch(t){case"Q":case"QQ":return pt(t.length,e);case"Qo":return a.ordinalNumber(e,{unit:"quarter"});case"QQQ":return a.quarter(e,{width:"abbreviated",context:"formatting"})||a.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(e,{width:"narrow",context:"formatting"});default:return a.quarter(e,{width:"wide",context:"formatting"})||a.quarter(e,{width:"abbreviated",context:"formatting"})||a.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,a){return e.setUTCMonth(3*(a-1),1),e.setUTCHours(0,0,0,0),e}}]),a}(Fe),St=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",120),Oe(Te(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){switch(t){case"q":case"qq":return pt(t.length,e);case"qo":return a.ordinalNumber(e,{unit:"quarter"});case"qqq":return a.quarter(e,{width:"abbreviated",context:"standalone"})||a.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(e,{width:"narrow",context:"standalone"});default:return a.quarter(e,{width:"wide",context:"standalone"})||a.quarter(e,{width:"abbreviated",context:"standalone"})||a.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,a){return e.setUTCMonth(3*(a-1),1),e.setUTCHours(0,0,0,0),e}}]),a}(Fe),Tt=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),Oe(Te(e),"priority",110),e}return Ae(a,[{key:"parse",value:function(e,t,a){var n=function(e){return e-1};switch(t){case"M":return ut(mt(je,e),n);case"MM":return ut(pt(2,e),n);case"Mo":return ut(a.ordinalNumber(e,{unit:"month"}),n);case"MMM":return a.month(e,{width:"abbreviated",context:"formatting"})||a.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(e,{width:"narrow",context:"formatting"});default:return a.month(e,{width:"wide",context:"formatting"})||a.month(e,{width:"abbreviated",context:"formatting"})||a.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,a){return e.setUTCMonth(a,1),e.setUTCHours(0,0,0,0),e}}]),a}(Fe),Dt=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",110),Oe(Te(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){var n=function(e){return e-1};switch(t){case"L":return ut(mt(je,e),n);case"LL":return ut(pt(2,e),n);case"Lo":return ut(a.ordinalNumber(e,{unit:"month"}),n);case"LLL":return a.month(e,{width:"abbreviated",context:"standalone"})||a.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(e,{width:"narrow",context:"standalone"});default:return a.month(e,{width:"wide",context:"standalone"})||a.month(e,{width:"abbreviated",context:"standalone"})||a.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,a){return e.setUTCMonth(a,1),e.setUTCHours(0,0,0,0),e}}]),a}(Fe);var Ct=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",100),Oe(Te(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){switch(t){case"w":return mt(Ye,e);case"wo":return a.ordinalNumber(e,{unit:"week"});default:return pt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,a,n){return O(function(e,t,a){y.requiredArgs(2,arguments);var n=y.toDate(e),r=M(t),i=$(n,a)-r;return n.setUTCDate(n.getUTCDate()-7*i),n}(e,a,n),n)}}]),a}(Fe);var Pt=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",100),Oe(Te(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){switch(t){case"I":return mt(Ye,e);case"Io":return a.ordinalNumber(e,{unit:"week"});default:return pt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,a){return x(function(e,t){y.requiredArgs(2,arguments);var a=y.toDate(e),n=M(t),r=A(a)-n;return a.setUTCDate(a.getUTCDate()-7*r),a}(e,a))}}]),a}(Fe),Lt=[31,28,31,30,31,30,31,31,30,31,30,31],xt=[31,29,31,30,31,30,31,31,30,31,30,31],It=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",90),Oe(Te(e),"subPriority",1),Oe(Te(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){switch(t){case"d":return mt(He,e);case"do":return a.ordinalNumber(e,{unit:"date"});default:return pt(t.length,e)}}},{key:"validate",value:function(e,t){var a=bt(e.getUTCFullYear()),n=e.getUTCMonth();return a?t>=1&&t<=xt[n]:t>=1&&t<=Lt[n]}},{key:"set",value:function(e,t,a){return e.setUTCDate(a),e.setUTCHours(0,0,0,0),e}}]),a}(Fe),Nt=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",90),Oe(Te(e),"subpriority",1),Oe(Te(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){switch(t){case"D":case"DD":return mt(We,e);case"Do":return a.ordinalNumber(e,{unit:"date"});default:return pt(t.length,e)}}},{key:"validate",value:function(e,t){return bt(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,a){return e.setUTCMonth(0,a),e.setUTCHours(0,0,0,0),e}}]),a}(Fe);function At(e,t,a){var n,r,i,o,s,l,c,d;y.requiredArgs(2,arguments);var u=T(),m=M(null!==(n=null!==(r=null!==(i=null!==(o=null==a?void 0:a.weekStartsOn)&&void 0!==o?o:null==a||null===(s=a.locale)||void 0===s||null===(l=s.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(c=u.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==n?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=y.toDate(e),f=M(t),p=((f%7+7)%7<m?7:0)+f-g.getUTCDay();return g.setUTCDate(g.getUTCDate()+p),g}var Ot=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",90),Oe(Te(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){switch(t){case"E":case"EE":case"EEE":return a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});default:return a.day(e,{width:"wide",context:"formatting"})||a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,a,n){return(e=At(e,a,n)).setUTCHours(0,0,0,0),e}}]),a}(Fe),Ut=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",90),Oe(Te(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a,n){var r=function(e){var t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return ut(pt(t.length,e),r);case"eo":return ut(a.ordinalNumber(e,{unit:"day"}),r);case"eee":return a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"eeeee":return a.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});default:return a.day(e,{width:"wide",context:"formatting"})||a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,a,n){return(e=At(e,a,n)).setUTCHours(0,0,0,0),e}}]),a}(Fe),Rt=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",90),Oe(Te(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a,n){var r=function(e){var t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return ut(pt(t.length,e),r);case"co":return ut(a.ordinalNumber(e,{unit:"day"}),r);case"ccc":return a.day(e,{width:"abbreviated",context:"standalone"})||a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"});case"ccccc":return a.day(e,{width:"narrow",context:"standalone"});case"cccccc":return a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"});default:return a.day(e,{width:"wide",context:"standalone"})||a.day(e,{width:"abbreviated",context:"standalone"})||a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,a,n){return(e=At(e,a,n)).setUTCHours(0,0,0,0),e}}]),a}(Fe);var $t=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",90),Oe(Te(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){var n=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return pt(t.length,e);case"io":return a.ordinalNumber(e,{unit:"day"});case"iii":return ut(a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return ut(a.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return ut(a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"}),n);default:return ut(a.day(e,{width:"wide",context:"formatting"})||a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"}),n)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,a){return e=function(e,t){y.requiredArgs(2,arguments);var a=M(t);a%7==0&&(a-=7);var n=y.toDate(e),r=((a%7+7)%7<1?7:0)+a-n.getUTCDay();return n.setUTCDate(n.getUTCDate()+r),n}(e,a),e.setUTCHours(0,0,0,0),e}}]),a}(Fe),Ft=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",80),Oe(Te(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){switch(t){case"a":case"aa":case"aaa":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(e,{width:"narrow",context:"formatting"});default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,a){return e.setUTCHours(yt(a),0,0,0),e}}]),a}(Fe),Bt=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",80),Oe(Te(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){switch(t){case"b":case"bb":case"bbb":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(e,{width:"narrow",context:"formatting"});default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,a){return e.setUTCHours(yt(a),0,0,0),e}}]),a}(Fe),jt=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",80),Oe(Te(e),"incompatibleTokens",["a","b","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){switch(t){case"B":case"BB":case"BBB":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(e,{width:"narrow",context:"formatting"});default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,a){return e.setUTCHours(yt(a),0,0,0),e}}]),a}(Fe),Ht=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",70),Oe(Te(e),"incompatibleTokens",["H","K","k","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){switch(t){case"h":return mt(ze,e);case"ho":return a.ordinalNumber(e,{unit:"hour"});default:return pt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,a){var n=e.getUTCHours()>=12;return n&&a<12?e.setUTCHours(a+12,0,0,0):n||12!==a?e.setUTCHours(a,0,0,0):e.setUTCHours(0,0,0,0),e}}]),a}(Fe),Wt=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",70),Oe(Te(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){switch(t){case"H":return mt(qe,e);case"Ho":return a.ordinalNumber(e,{unit:"hour"});default:return pt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,a){return e.setUTCHours(a,0,0,0),e}}]),a}(Fe),Yt=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",70),Oe(Te(e),"incompatibleTokens",["h","H","k","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){switch(t){case"K":return mt(Ve,e);case"Ko":return a.ordinalNumber(e,{unit:"hour"});default:return pt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,a){return e.getUTCHours()>=12&&a<12?e.setUTCHours(a+12,0,0,0):e.setUTCHours(a,0,0,0),e}}]),a}(Fe),qt=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",70),Oe(Te(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){switch(t){case"k":return mt(Ge,e);case"ko":return a.ordinalNumber(e,{unit:"hour"});default:return pt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,a){var n=a<=24?a%24:a;return e.setUTCHours(n,0,0,0),e}}]),a}(Fe),Gt=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",60),Oe(Te(e),"incompatibleTokens",["t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){switch(t){case"m":return mt(Qe,e);case"mo":return a.ordinalNumber(e,{unit:"minute"});default:return pt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,a){return e.setUTCMinutes(a,0,0),e}}]),a}(Fe),Vt=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",50),Oe(Te(e),"incompatibleTokens",["t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t,a){switch(t){case"s":return mt(Ke,e);case"so":return a.ordinalNumber(e,{unit:"second"});default:return pt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,a){return e.setUTCSeconds(a,0),e}}]),a}(Fe),zt=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",30),Oe(Te(e),"incompatibleTokens",["t","T"]),e}return Ae(a,[{key:"parse",value:function(e,t){return ut(pt(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,a){return e.setUTCMilliseconds(a),e}}]),a}(Fe),Qt=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",10),Oe(Te(e),"incompatibleTokens",["t","T","x"]),e}return Ae(a,[{key:"parse",value:function(e,t){switch(t){case"X":return gt(ot,e);case"XX":return gt(st,e);case"XXXX":return gt(lt,e);case"XXXXX":return gt(dt,e);default:return gt(ct,e)}}},{key:"set",value:function(e,t,a){return t.timestampIsSet?e:new Date(e.getTime()-a)}}]),a}(Fe),Kt=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",10),Oe(Te(e),"incompatibleTokens",["t","T","X"]),e}return Ae(a,[{key:"parse",value:function(e,t){switch(t){case"x":return gt(ot,e);case"xx":return gt(st,e);case"xxxx":return gt(lt,e);case"xxxxx":return gt(dt,e);default:return gt(ct,e)}}},{key:"set",value:function(e,t,a){return t.timestampIsSet?e:new Date(e.getTime()-a)}}]),a}(Fe),Xt=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",40),Oe(Te(e),"incompatibleTokens","*"),e}return Ae(a,[{key:"parse",value:function(e){return ft(e)}},{key:"set",value:function(e,t,a){return[new Date(1e3*a),{timestampIsSet:!0}]}}]),a}(Fe),Jt=function(e){Ce(a,e);var t=Le(a);function a(){var e;xe(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Te(e=t.call.apply(t,[this].concat(r))),"priority",20),Oe(Te(e),"incompatibleTokens","*"),e}return Ae(a,[{key:"parse",value:function(e){return ft(e)}},{key:"set",value:function(e,t,a){return[new Date(a),{timestampIsSet:!0}]}}]),a}(Fe),Zt={G:new Be,y:new wt,Y:new _t,R:new kt,u:new Et,Q:new Mt,q:new St,M:new Tt,L:new Dt,w:new Ct,I:new Pt,d:new It,D:new Nt,E:new Ot,e:new Ut,c:new Rt,i:new $t,a:new Ft,b:new Bt,B:new jt,h:new Ht,H:new Wt,K:new Yt,k:new qt,m:new Gt,s:new Vt,S:new zt,X:new Qt,x:new Kt,t:new Xt,T:new Jt},ea=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ta=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,aa=/^'([^]*?)'?$/,na=/''/g,ra=/\S/,ia=/[a-zA-Z]/;function oa(e,t,a,n){var r,i,o,s,l,c,d,u,m,g,f,p,h,v,b,w,_,k;y.requiredArgs(3,arguments);var E=String(e),S=String(t),D=T(),C=null!==(r=null!==(i=null==n?void 0:n.locale)&&void 0!==i?i:D.locale)&&void 0!==r?r:he;if(!C.match)throw new RangeError("locale must contain match property");var P=M(null!==(o=null!==(s=null!==(l=null!==(c=null==n?void 0:n.firstWeekContainsDate)&&void 0!==c?c:null==n||null===(d=n.locale)||void 0===d||null===(u=d.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==l?l:D.firstWeekContainsDate)&&void 0!==s?s:null===(m=D.locale)||void 0===m||null===(g=m.options)||void 0===g?void 0:g.firstWeekContainsDate)&&void 0!==o?o:1);if(!(P>=1&&P<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var x=M(null!==(f=null!==(p=null!==(h=null!==(v=null==n?void 0:n.weekStartsOn)&&void 0!==v?v:null==n||null===(b=n.locale)||void 0===b||null===(w=b.options)||void 0===w?void 0:w.weekStartsOn)&&void 0!==h?h:D.weekStartsOn)&&void 0!==p?p:null===(_=D.locale)||void 0===_||null===(k=_.options)||void 0===k?void 0:k.weekStartsOn)&&void 0!==f?f:0);if(!(x>=0&&x<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===S)return""===E?y.toDate(a):new Date(NaN);var I,N={firstWeekContainsDate:P,weekStartsOn:x,locale:C},A=[new $e],O=S.match(ta).map((function(e){var t=e[0];return t in Z?(0,Z[t])(e,C.formatLong):e})).join("").match(ea),U=[],R=Se(O);try{var $=function(){var t=I.value;null!=n&&n.useAdditionalWeekYearTokens||!ne(t)||re(t,S,e),null!=n&&n.useAdditionalDayOfYearTokens||!ae(t)||re(t,S,e);var a=t[0],r=Zt[a];if(r){var i=r.incompatibleTokens;if(Array.isArray(i)){var o=U.find((function(e){return i.includes(e.token)||e.token===a}));if(o)throw new RangeError("The format string mustn't contain `".concat(o.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===r.incompatibleTokens&&U.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));U.push({token:a,fullToken:t});var s=r.run(E,t,C.match,N);if(!s)return{v:new Date(NaN)};A.push(s.setter),E=s.rest}else{if(a.match(ia))throw new RangeError("Format string contains an unescaped latin alphabet character `"+a+"`");if("''"===t?t="'":"'"===a&&(t=t.match(aa)[1].replace(na,"'")),0!==E.indexOf(t))return{v:new Date(NaN)};E=E.slice(t.length)}};for(R.s();!(I=R.n()).done;){var F=$();if("object"===y._typeof(F))return F.v}}catch(e){R.e(e)}finally{R.f()}if(E.length>0&&ra.test(E))return new Date(NaN);var B=A.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,a){return a.indexOf(e)===t})).map((function(e){return A.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),j=y.toDate(a);if(isNaN(j.getTime()))return new Date(NaN);var H,W=L(j,y.getTimezoneOffsetInMilliseconds(j)),Y={},q=Se(B);try{for(q.s();!(H=q.n()).done;){var G=H.value;if(!G.validate(W,N))return new Date(NaN);var V=G.set(W,Y,N);Array.isArray(V)?(W=V[0],Ee(Y,V[1])):W=V}}catch(e){q.e(e)}finally{q.f()}return W}const sa="require_password";function la(e){return{class:"sharing_sender",action:"hover",object:"flexible_sharing_entrypoint_action",properties:e}}function ca(e){return{class:"sharing_sender",action:"log",object:"flexible_sharing_entrypoint_action_dwell_time",properties:e}}const da=e=>e.formatMessage({id:"b0sjjf",defaultMessage:"Learn more"}),ua=e=>e.formatMessage({id:"O1FxvA",defaultMessage:"This folder can only be shared as a link."}),ma=e=>e.formatMessage({id:"QpEuIr",defaultMessage:"You can view this folder, but youll need to ask the folder owner to give you permission to share it."}),ga=e=>e.formatMessage({id:"/8sefF",defaultMessage:"You can view this folder, but only the folder owner can share it."}),fa=e=>e.formatMessage({id:"DuQ3Qu",defaultMessage:"Add people by name or email"}),pa=Symbol("ON_CLICK_PROGRESSIVE"),ha=Symbol("ON_MOUSE_ENTER_PROGRESSIVE"),ya=Symbol("ON_MOUSE_LEAVE_PROGRESSIVE"),{useEmitter:va,defaultEmitter:ba}=a.defineLogger((async({event:e,getContextValue:t})=>{const n=t(a.Context$4),r=t(a.Context$5),i=t(a.Context$6),s=t(a.Context$7),l={...a.getTags$4(n),...a.getTags$5(r),...a.getTags$6(i),...a.getTags$7(s)},c={...a.getProperties$4(n),...a.getProperties$5(r),...a.getProperties$6(i),...a.getProperties$7(s)};if(e.key===pa)return a.UDCL.logEvent(o.PAP_Select_FlexibleSharingEntrypointAction({...c,flexibleSharingEntryPointAction:"inband_progressive",flexibleSharingEntryPointTimeToAction:e.payload.timeSinceView}),{tags:{...l,action:"inband_progressive"}}),void a.UDCL.logEvent(ca({...c,flexibleSharingEntryPointAction:"inband_progressive",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!0}),{tags:{...l,action:"inband_progressive"}});if(e.key!==ha){if(e.key!==ya)return a.exhausts(e,void 0);a.UDCL.logEvent(ca({...c,flexibleSharingEntryPointAction:"inband_progressive",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!1}),{tags:{...l,action:"inband_progressive"}})}else a.UDCL.logEvent(la({...c,flexibleSharingEntryPointAction:"inband_progressive"}),{tags:{...l,action:"inband_progressive"}})})),wa=({accountMetadata:e})=>{const t=n.useIntl(),o=r.useOpenUrl(),s=i.getIsTeamAdmin(e),l=s?(e=>e.formatMessage({id:"QV0fMP",defaultMessage:"To share this folder, manage access in the admin console."}))(t):(e=>e.formatMessage({id:"C87Oa/",defaultMessage:"Only admins can directly share this content. Reach out and ask them to share it."}))(t),c=s?(e=>e.formatMessage({id:"S839MU",defaultMessage:"Go to admin console"}))(t):(e=>e.formatMessage({id:"0KHhX0",defaultMessage:"Find admin"}))(t);return E.createElement(a.Box,null,E.createElement(a.Text,{size:"medium","data-testid":"tmr-team-folder-subtitle"},l),E.createElement(a.Box,{marginTop:"Micro Large"},E.createElement(a.Button,{variant:"transparent",onClick:()=>{o(s?"/team/admin/content/home":"/team?_tk=left_nav_team")}},c)))};wa.displayName="TmrTeamFolder";const _a=e=>{var t;const{objectMetadata:c,accountMetadata:d,onInbandButtonClicked:u,componentViewTime:m}=e,g=a.isNewApiMetadata(c),[f,p]=E.useState(!1),[h,y]=E.useState(!1),[v,b]=E.useState(0),w=E.useRef(null),_=va(),k=a.getCanInvite(c,o.VIEWER),M=a.getCanInvite(c,o.EDITOR)||k,S=a.getIsLinkOnlyMode(c),T=a.getIsNSLinkOnlyMode(c),D=a.getIsFolder(c),C=i.isUserOnSameTeamAsObject(d,c),P=i.isUserOnSameTeamAsTmrTeamFolder(d,c),L=!!a.getOwnerTeam(c),x=null!==(t=a.getOwnerTeamName(c))&&void 0!==t?t:"",I=a.getIsTeamSharedFolder(c),N="https://help.dropbox.com/files-folders/share/shared-folder-faq#cantcreate",A=r.useOpenUrl(),O=E.useCallback((e=>{A(e)}),[A]),U=()=>{switch(a.getInviteDeniedReason(c)){case"mount_exceeded":return E.createElement(a.Text,null,((e,t)=>{if(!t.metadata_response||!a.getIsFolder(t))return;const n=t.metadata_response;if(n.invite_viewer_folder_perm.invite_viewer_folder_denied_reason&&"mount_exceeded"===n.invite_viewer_folder_perm.invite_viewer_folder_denied_reason[".tag"]){const t=n.invite_viewer_folder_perm.invite_viewer_folder_denied_reason,a=t.limit,r=t.new_count-a;return e.formatMessage({id:"f3Mx9B",defaultMessage:"This folder can only be shared as a link because your Dropbox folder is {number, plural, one{1 shared folder} other {{number} shared folders}} over limit."},{number:r})}})(n.intl,c),E.createElement(a.Link,{style:{marginLeft:3},hasNoUnderline:!0,onClick:()=>O(N),href:"",isBold:!0,display:"inline"},da(n.intl)));case"contains_app_folder":case"inside_app_folder":case"is_app_folder":case"is_family_folder":return E.createElement(a.Text,null,ua(n.intl));default:return E.createElement(a.Text,null,C?ma(n.intl):ga(n.intl))}},R=E.useCallback((()=>{const e=h?Date.now()-v:void 0,t=Date.now()-m;_.select(pa).emit({dwellTime:e,timeSinceView:t}),u()}),[m,_,h,u,v]),$=E.useCallback((()=>{b(Date.now()),y(!0),_.select(ha).emit(null),p(!0)}),[_]),F=E.useCallback((()=>{const e=h?Date.now()-v:void 0;y(!1),_.select(ya).emit({dwellTime:e}),p(!1)}),[_,h,v]),B=g?!M:S||!M;return E.createElement(E.Fragment,null,E.createElement(s.ButtonWrapper,{ref:w,onMouseEnter:$,onMouseLeave:F,"data-uxa-log":"sm24-inband-button."+(B?"disabled":"loaded"),"data-uxa-interactions":"shown click"},E.createElement(s.HorizontalButton,{onClick:R,disabled:B,"data-testid":"inband-sharing-entry-button"},E.createElement(s.ButtonIconContainer,null,E.createElement(a.UIIcon,{src:l.ShareLine,size:"medium"})),E.createElement(s.ButtonInnerColumn,null,E.createElement(s.ButtonTitle,{content:(j=n.intl,j.formatMessage({id:"SC4EWs",defaultMessage:"Add people"}))})))),(()=>{let e=null;return g?P&&!M?e=E.createElement(wa,{accountMetadata:d}):M||(e=U()):S?e=(()=>{switch(S?T?"isNSLinkOnlyMode":"isFamily":"isLimitedPermissions"){case"isNSLinkOnlyMode":return E.createElement(a.Text,null,((e,t)=>{if(t.tooManyMountsError&&("total_mounts_exceeded"===t.tooManyMountsError[".tag"]||"home_mounts_exceeded"===t.tooManyMountsError[".tag"]||"tree_size_exceeded"===t.tooManyMountsError[".tag"])){const a=t.tooManyMountsError.limits_info;if(a){const t=a.limit,n=a.new_count-t;return e.formatMessage({id:"f3Mx9B",defaultMessage:"This folder can only be shared as a link because your Dropbox folder is {number, plural, one{1 shared folder} other {{number} shared folders}} over limit."},{number:n})}}})(n.intl,c),E.createElement(a.Link,{style:{marginLeft:3},hasNoUnderline:!0,onClick:()=>O(N),href:"",isBold:!0,display:"inline"},da(n.intl)));case"isLimitedPermissions":return L&&!C?I?E.createElement(a.Text,null,(e=n.intl,void 0!==(t=x)?e.formatMessage({id:"ToMYBy",defaultMessage:"This folder can only be managed by the {ownerTeamName} team."},{ownerTeamName:t}):e.formatMessage({id:"ReqZ5Y",defaultMessage:"This folder can only be managed by the owner team."}))):D?E.createElement(a.Text,null,(e=>e.formatMessage({id:"5iJXBE",defaultMessage:"You dont have permission to manage membership of this folder"}))(n.intl)):E.createElement(a.Text,null,(e=>e.formatMessage({id:"WVaUHn",defaultMessage:"You dont have permission to manage membership of this file"}))(n.intl)):E.createElement(a.Text,null,(e=>e.formatMessage({id:"TnTBTY",defaultMessage:"This can only be shared with the link."}))(n.intl));case"isFamily":return E.createElement(a.Text,null,ua(n.intl))}var e,t})():P&&!M?e=E.createElement(wa,{accountMetadata:d}):M||(e=E.createElement(a.Text,null,C?ma(n.intl):ga(n.intl))),e?E.createElement(a.Tooltip.Control,{open:f,placement:"top",auto:!0,triggerRef:w,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1)},e):null})());var j};_a.displayName="InbandEntryButtonInner";const ka=e=>{const{oid:t,onInbandButtonClicked:n,componentViewTime:r}=e,o=i.useSharingObjectMetadata(t.fileId),l=i.useSharingAccountInfo(),c=o.isLoading,d=!o.isLoading&&o.isError,u=c||d?void 0:o.output,m=l.isLoading,g=!l.isLoading&&l.isError,f=m||g?void 0:l.output;return c||m?E.createElement(s.ButtonWrapper,{"data-uxa-log":"sm24-inband-button.loading","data-uxa-interactions":"shown click"},E.createElement(s.HorizontalButton,{disabled:!0},E.createElement(a.Skeleton.Avatar,{size:"medium",style:{marginRight:"var(--dig-spacing__dimension__12)"}}),E.createElement(a.Skeleton.Text,{size:"large",width:200}))):u&&f?E.createElement(_a,{accountMetadata:f,objectMetadata:u,onInbandButtonClicked:n,componentViewTime:r}):null};ka.displayName="InbandEntryButton";a.injectInternalStyle("/static/metaserver/static/js/sharing/sharing-sdk/legos/inband-entry-button/internals/restricted-chip.module.out-vflqEmUBH.css",(e=>"._restricted-chip_1nil8_1{background-color:hsla(45,91%,83%,.2);border:1px solid var(--dig-color__warning__surface--state-2)!important}._restricted-chip_1nil8_1 *{color:var(--dig-color__text__subtle)}"));const Ea=({text:e,"data-testid":t})=>E.createElement(c.Chip,{size:"small",className:"_restricted-chip_1nil8_1","data-testid":t},E.createElement(c.Chip.IconAccessory,null,E.createElement(a.UIIcon,{src:a.WarningLine,size:"small"})),E.createElement(c.Chip.Content,null,e));Ea.displayName="RestrictedChip";const Ma=({objectMetadata:e,accountMetadata:t,canInvite:r,handleButtonClick:o,handleKeyDown:c,componentViewTime:d,shareModalVersion:u})=>{const[m,g]=E.useState(!1),[f,p]=E.useState(0),[h,y]=E.useState(!1),v=E.useRef(null),b=va(),w=i.isUserOnSameTeamAsTmrTeamFolder(t,e),_=E.useCallback((()=>{const e=m?Date.now()-f:void 0,t=Date.now()-d;b.select(pa).emit({dwellTime:e,timeSinceView:t}),o()}),[d,b,o,m,f]),k=E.useCallback((()=>{p(Date.now()),g(!0),b.select(ha).emit(null),y(!0)}),[b]),M=E.useCallback((()=>{const e=m?Date.now()-f:void 0;g(!1),b.select(ya).emit({dwellTime:e}),y(!1)}),[b,m,f]),S=()=>{let o=null;if(w&&!r)o=E.createElement(wa,{accountMetadata:t});else if(!r){const r=i.isUserOnSameTeamAsObject(t,e);o=E.createElement(a.Text,null,r?ma(n.intl):ga(n.intl))}return o?E.createElement(a.Tooltip.Control,{open:h,placement:"top",auto:!0,triggerRef:v,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1)},o):null},T="inband-sharing-entry-button",D=i.getIsTeam(t),C=!r;if("sm26"===u){const e=C?E.createElement(Ea,{text:(P=n.intl,P.formatMessage({id:"6x1P/s",defaultMessage:"Restricted"})),"data-testid":"inband-restricted-chip"}):void 0;return E.createElement(E.Fragment,null,E.createElement("div",{ref:v,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),onFocus:()=>y(!0),onBlur:()=>y(!1)},E.createElement(s.HorizontalInputButton,{placeholder:fa(n.intl),disabled:C,onChange:_,onClick:_,onKeyDown:c,autoFocus:!0,"data-testid":T,withRightAccessory:e,"aria-label":fa(n.intl),id:"targets-tokenizer-input",autoComplete:"off","data-1p-ignore":!0,"data-lpignore":!0,"data-protonpass-ignore":!0,"data-bwignore":1}),S()))}var P;return E.createElement(E.Fragment,null,E.createElement(s.ButtonWrapper,{ref:v,onMouseEnter:k,onMouseLeave:M},E.createElement(s.HorizontalFlatButton,{onClick:_,disabled:!r,"data-testid":T,autoFocus:!0},E.createElement(s.ButtonIconContainer,null,E.createElement(a.UIIcon,{src:l.ShareLine,size:"small"})),E.createElement(s.ButtonInnerColumn,null,E.createElement(a.Text,{color:"subtle",style:{marginLeft:-3,marginTop:4}},E.createElement(a.Truncate,{lines:2},D?(e=>e.formatMessage({id:"I1N8uC",defaultMessage:"Add an email, name, or group"}))(n.intl):(e=>e.formatMessage({id:"RynZbM",defaultMessage:"Add an email or name"}))(n.intl)))))),S())};Ma.displayName="Inner";const Sa=e=>{const t=i.useSharingObjectMetadata(e.oid.fileId),r=i.useSharingAccountInfo(),l=t.isLoading,c=!t.isLoading&&t.isError,d=l||c?void 0:t.output,u=r.isLoading,m=!r.isLoading&&r.isError,g=u||m?void 0:r.output,f=l||u,p=!f&&d&&g;if(f)return"sm26"===e.shareModalVersion?E.createElement(s.ButtonWrapper,null,E.createElement(s.HorizontalInputButton,{disabled:!0,placeholder:fa(n.intl),"data-testid":"inband-sharing-entry-button-loading"})):E.createElement(s.ButtonWrapper,null,E.createElement(s.HorizontalButton,{disabled:!0},E.createElement(a.Skeleton.Avatar,{size:"medium",style:{marginRight:"var(--dig-spacing__dimension__12)"}}),E.createElement(a.Skeleton.Text,{size:"large",width:200})));if(p){const t=a.getCanInvite(d,o.VIEWER)||a.getCanInvite(d,o.EDITOR);return"sm26"===e.shareModalVersion?E.createElement(Ma,{accountMetadata:g,objectMetadata:d,canInvite:t,handleButtonClick:e.onTokenizerButtonClick,handleKeyDown:e.onTokenizerKeyDown,componentViewTime:0,shareModalVersion:e.shareModalVersion}):E.createElement(Ma,{accountMetadata:g,objectMetadata:d,canInvite:t,handleButtonClick:e.onTokenizerButtonClick,handleKeyDown:()=>{},componentViewTime:e.componentViewTime,shareModalVersion:e.shareModalVersion})}return null};Sa.displayName="TokenizerButton";const Ta=r.define({name:"sharing.modifySharedLinksettings"},(e=>t=>r.handler(e.sharingAlphaModifySharedLinkSettings(t)))),Da=e=>{switch(e){case"public":return a.PUBLIC;case"team":return a.TEAM;case"password":return a.PASSWORD;case"no_one":return a.NO_ONE;default:return a.OTHER$1}},Ca=(e,t,a,n)=>{const r=o.SharingSettingsUtil(e).getModifiedSettings(t,n,a);return void 0===r?null:r},Pa=e=>{var t,a,n,r,i,o,s,l;const c=null===(t=e.link_permissions.link_access_level)||void 0===t?void 0:t[".tag"],d=null===(a=e.link_permissions.resolved_visibility)||void 0===a?void 0:a[".tag"],u=null===(n=e.link_permissions.effective_audience)||void 0===n?void 0:n[".tag"];return{allow_comments:e.link_permissions.allow_comments,can_revoke:e.link_permissions.can_revoke,allow_download:e.link_permissions.allow_download,can_allow_download:e.link_permissions.can_allow_download,can_disallow_download:e.link_permissions.can_disallow_download,can_set_expiry:e.link_permissions.can_set_expiry,can_remove_expiry:e.link_permissions.can_remove_expiry,can_set_password:Boolean(e.link_permissions.can_set_password),can_remove_password:Boolean(e.link_permissions.can_remove_password),require_password:Boolean(e.link_permissions.require_password),link_access_level:"other"===c||void 0===c?"viewer":c,team_restricts_comments:e.link_permissions.team_restricts_comments,can_use_extended_sharing_controls:e.link_permissions.can_use_extended_sharing_controls,resolved_visibility:"other"===d||void 0===d?"no_one":d,effective_audience:"other"===u||"members"===u?void 0:u,requested_visibility:(null===(r=e.link_permissions.requested_visibility)||void 0===r?void 0:r[".tag"])||"public",revoke_failure_reason:null===(i=e.link_permissions.revoke_failure_reason)||void 0===i?void 0:i[".tag"],restricting_shared_folder_path:e.link_permissions.restricting_shared_folder_path,audience_options:(e.link_permissions.audience_options||[]).filter((e=>"other"!==e.audience[".tag"])).map((e=>{var t;return{audience:e.audience[".tag"],allowed:e.allowed,disallowed_reason:null===(t=e.disallowed_reason)||void 0===t?void 0:t[".tag"]}})),visibility_policies:e.link_permissions.visibility_policies.map((e=>({policy:e.policy[".tag"],resolved_policy:e.resolved_policy[".tag"],allowed:e.allowed,disallowed_reason:e.disallowed_reason}))),days_to_expire_policy:null===(o=e.link_permissions.days_to_expire_policy)||void 0===o?void 0:o[".tag"],change_shared_link_expiration_policy:null===(s=e.link_permissions.change_shared_link_expiration_policy)||void 0===s?void 0:s[".tag"],enforce_shared_link_password_policy:null===(l=e.link_permissions.enforce_shared_link_password_policy)||void 0===l?void 0:l[".tag"]}},La=(e,t)=>null===t?null:{url:t.url,content_owner_team_info:t.content_owner_team_info,expires:t.expires?new Date(t.expires):void 0,require_password:t.link_permissions.require_password,file_type:a.getIsFile(e)?"file":a.getIsCollection(e)?"collection":"folder",id:t.id,link_permissions:Pa(t),name:t.name,path_lower:t.path_lower,rev:void 0,server_modified:void 0,team_member_info:t.team_member_info?{...t.team_member_info,member_id:t.team_member_info.member_id||""}:void 0,preview_type:t.preview_type},xa=(e,t)=>null===t?null:o.SharingSettingsUtil(e).getLinkPolicy(t),Ia=(e,t)=>"edit_link_settings"===e?a.SettingsTabName.EditLinkSettingsTab:"view_link_settings"===e?a.SettingsTabName.ViewLinkSettingsTab:t?a.SettingsTabName.FileSettingsTab:a.SettingsTabName.FolderSettingsTab,Na=e=>e.formatMessage({id:"pTINM6",defaultMessage:"Cancel"}),Aa=e=>e.formatMessage({id:"qIDtpl",defaultMessage:"Saving..."}),Oa=e=>e.formatMessage({id:"rQzKcA",defaultMessage:"Save"}),Ua=e=>e.formatMessage({id:"9P9QP9",defaultMessage:"Delete link"}),Ra=e=>e.formatMessage({id:"98ues2",defaultMessage:"Create link"}),$a=e=>e.formatMessage({id:"5c/Fw9",defaultMessage:"There was a problem completing this request."}),Fa=e=>e.formatMessage({id:"thZih0",defaultMessage:"File settings updated."}),Ba=e=>e.formatMessage({id:"y/SwCN",defaultMessage:"Updating folder settings"}),ja=e=>e.formatMessage({id:"9KbrAJ",defaultMessage:"You don`t have permission to perform this action."}),Ha=e=>e.formatMessage({id:"/KMAtq",defaultMessage:"Folder settings updated."}),Wa=e=>e.formatMessage({id:"xbSGM1",defaultMessage:"This setting is turned off for all files in this folder."}),Ya=e=>e.formatMessage({id:"BUD+SU",defaultMessage:"Your admin has disabled this setting."}),qa=e=>e.formatMessage({id:"hIM/KB",defaultMessage:"You dont have permission to change the settings on this file."}),Ga=e=>e.formatMessage({id:"PLkx47",defaultMessage:"Anyone with edit access can change these settings."}),Va=(e,t,n)=>e.formatMessage({id:"7Lpr6B",defaultMessage:"Deleting link to <st>{name}</st>..."},{st:e=>E.createElement("strong",null,e),name:i.Emstring.em_snippet(t,n?a.SNIPPET_SIZES.DESKTOP_FILENAME:a.SNIPPET_SIZES.FILENAME)}),za=(e,t,n)=>e.formatMessage({id:"fghTgF",defaultMessage:"Deleted link to <st>{name}</st>."},{st:e=>E.createElement("strong",null,e),name:i.Emstring.em_snippet(t,n?a.SNIPPET_SIZES.DESKTOP_FILENAME:a.SNIPPET_SIZES.FILENAME)}),Qa=e=>e.formatMessage({id:"oW3nlu",defaultMessage:"Link deletion failed. Please retry."}),Ka=e=>e.formatMessage({id:"eqpbc5",defaultMessage:"Who still has access?"}),Xa=(e,t)=>"editor"===t[".tag"]?e.formatMessage({id:"OvEApa",defaultMessage:"Creating edit link..."}):e.formatMessage({id:"8PPImn",defaultMessage:"Creating view link..."}),Ja=(e,t)=>t?e.formatMessage({id:"p1EB+W",defaultMessage:"You dont have permission to create a link to this file"}):e.formatMessage({id:"/ivxG2",defaultMessage:"You dont have permission to create a link to this folder"}),Za=e=>e.formatMessage({id:"+iNJRS",defaultMessage:"There was a problem completing this request."}),en=(e,t)=>"editor"===t[".tag"]?e.formatMessage({id:"1+z1aQ",defaultMessage:"Edit link created"}):e.formatMessage({id:"IalA6p",defaultMessage:"View link created"}),tn=e=>e.formatMessage({id:"V2Zurn",defaultMessage:"People who have used this link might still have access"}),an=e=>e.formatMessage({id:"rqdCog",defaultMessage:"You can check the list of people with access and remove them."}),nn=e=>e.formatMessage({id:"YCTkuR",defaultMessage:"Got It"}),rn=e=>e.formatMessage({id:"UBFEXr",defaultMessage:"Who still has access?"}),on=e=>e.formatMessage({id:"OMkgF4",defaultMessage:"Settings saved."}),sn=e=>e.formatMessage({id:"k+OG4a",defaultMessage:"Link settings saved."}),ln=(e,t)=>e.formatMessage({id:"SuyTXe",defaultMessage:"Unsharing <st>{name}</st>..."},{st:e=>E.createElement("strong",null,e),name:i.Emstring.em_snippet(t,a.SNIPPET_SIZES.FILENAME)}),cn=(e,t)=>e.formatMessage({id:"K7TiCS",defaultMessage:"Unshared <st>{name}</st>."},{st:e=>E.createElement("strong",null,e),name:i.Emstring.em_snippet(t,a.SNIPPET_SIZES.FILENAME)}),dn=e=>e.formatMessage({id:"sL/c0K",defaultMessage:"Unshare failed. Please retry."}),un=(e,t)=>a.getIsFile(t)?(e=>e.formatMessage({id:"px+mde",defaultMessage:"Unshare file"}))(e):a.getIsInsideTeamFolderTree(t)?(e=>e.formatMessage({id:"11dNm1",defaultMessage:"Reset membership"}))(e):(e=>e.formatMessage({id:"qyAR1S",defaultMessage:"Unshare folder"}))(e),mn=(e,t)=>e.formatMessage({id:"AvoJhZ",defaultMessage:"These settings will apply to all folders inside <st>{folder_name}.</st>"},{folder_name:t,st:e=>E.createElement("strong",null,e)}),gn=(e,t)=>e.formatMessage({id:"W4bv7f",defaultMessage:"These settings will apply to all folders inside <st>{folder_name}.</st> You can change these settings or manage access in the Admin Console."},{folder_name:t,st:e=>E.createElement("strong",null,e)}),fn=(e,t)=>e.formatMessage({id:"M+bKji",defaultMessage:"<adminLink>Go to admin console</adminLink>"},{adminLink:e=>E.createElement(a.Button,{variant:"transparent",size:"small",onClick:()=>t("/team/admin/content/home")},e)}),pn=(e,t)=>e.formatMessage({id:"kBmOrE",defaultMessage:"These settings will apply to all folders inside <st>{folder_name}.</st> To edit, ask your admin."},{folder_name:t,st:e=>E.createElement("strong",null,e)}),hn=(e,t)=>e.formatMessage({id:"FAe8j7",defaultMessage:"<findAdminLink>Find admin</findAdminLink>"},{findAdminLink:e=>E.createElement(a.Button,{variant:"transparent",size:"small",onClick:()=>t("/team?_tk=left_nav_team")},e)}),yn=e=>e.formatMessage({id:"CKlNWd",defaultMessage:"Well let the owner know whenever you change these settings"}),vn=(e,t)=>e.formatMessage({id:"5Aqtnn",defaultMessage:"Only the owner (you) can change these settings. Settings apply to all folders in <st>{folder_name}.</st>"},{folder_name:i.Emstring.em_snippet(t,a.SNIPPET_SIZES.FILENAME),st:e=>E.createElement("strong",null,e)}),bn=(e,t)=>e.formatMessage({id:"o9IXBs",defaultMessage:"Only the owner can change these settings. Settings apply to all folders in <st>{folder_name}.</st>"},{folder_name:i.Emstring.em_snippet(t,a.SNIPPET_SIZES.FILENAME),st:e=>E.createElement("strong",null,e)}),wn=e=>e.formatMessage({id:"iQBMyq",defaultMessage:"Only team admins can change these settings."}),_n=e=>e.formatMessage({id:"6K7VUR",defaultMessage:"Close"}),kn=e=>e.formatMessage({id:"RCQdy7",defaultMessage:"This file hasnt been shared yet"}),En=e=>e.formatMessage({id:"+hXlVB",defaultMessage:"Cant unshare a folder that is within multiple shared folders."}),Mn="member_policy",Sn="viewer_info_policy",Tn="shared_link_policy",Dn="expires",Cn="allow_download",Pn="audience",Ln="require_password",xn="acl_update_policy",In="dropdown",Nn="toggle";class An extends E.Component{render(){const e=this.props.optionsDict[this.props.currentValue].label;return E.createElement(a.Menu.Wrapper,{className:"sharing-settings-dropdown",onSelection:e=>{e!==this.props.currentValue&&this.props.onValueSelected(e)}},(({getContentProps:t,getTriggerProps:n})=>E.createElement(E.Fragment,null,E.createElement(a.Button,{...n(),withDropdownIcon:!0,variant:"opacity",disabled:this.props.disabled,"aria-label":`${e}, ${this.props.ariaLabel}`,"data-testid":"sharing-settings-dropdown"},E.createElement(a.Truncate,{maxWidth:180},e)),E.createElement(a.Menu.Content,{"data-sharing-sdk":"1",...t()},E.createElement(a.Menu.Segment,null,this.props.valuesList.map((e=>E.createElement(a.Menu.ActionItem,{key:e,value:e,"aria-label":this.props.optionsDict[e].label,className:e===this.props.currentValue?"selected":""},E.createElement("div",{style:{width:"250px",marginBottom:"8px"}},E.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},e===this.props.currentValue?E.createElement(p.IconDropdownSelected,{className:"scl-sharing-dropdown-menu-item-dig__path-color"}):null,E.createElement(a.Text,{isBold:!0,className:e===this.props.currentValue?"scl-sharing-dropdown-menu-item-dig__selected-color":"",style:{marginLeft:e===this.props.currentValue?"12px":"24px"}},this.props.optionsDict[e].label)),E.createElement("div",{style:{marginLeft:"24px",marginTop:"4px"}},E.createElement(a.Text,{color:"faint",size:"small",tagName:"div",style:{lineHeight:"18px"}},this.props.optionsDict[e].description)))))))))))}}An.displayName="SettingDropdown";const On=e=>{const{policyFieldName:t,rightSideElement:n,bottomElement:r}=e;return E.createElement("div",{"data-testid":t,style:{marginTop:"20px"}},E.createElement("div",{style:{display:"flex",paddingLeft:"8px",paddingRight:"8px",paddingTop:"4px",paddingBottom:"4px"}},E.createElement("div",{style:{marginRight:"16px"}},E.createElement("div",null,E.createElement("span",{title:e.displayNameTitle},E.createElement(a.Text,{size:"medium",isBold:!0},e.displayName))),E.createElement("div",null,E.createElement("span",{title:e.description},E.createElement(a.Text,{size:"small",color:"subtle"},e.description),e.descriptionLinkUrl&&e.descriptionLinkText&&E.createElement("span",null," ",E.createElement(a.Button,{variant:"transparent",onClick:t=>{t.preventDefault(),e.descriptionLinkOnClicked&&e.descriptionLinkUrl&&e.descriptionLinkOnClicked(e.descriptionLinkUrl)},size:"small",hasUnderline:!1},e.descriptionLinkText))))),n&&E.createElement("div",{style:{display:"flex",alignItems:"center",marginLeft:"auto"}},n)),r&&E.createElement("div",null,r))},Un=e=>{const{policyName:t,policyDict:a,selector:n,onLinkClicked:r,extra:i,className:o}=e;return E.createElement(On,{policyFieldName:t,key:a.title,displayName:a.title,displayNameTitle:a.title,description:a.description,descriptionLinkUrl:a.descriptionLinkUrl,descriptionLinkText:a.descriptionLinkText,descriptionLinkOnClicked:r,rightSideElement:n,bottomElement:i,className:o})};let Rn=0;const $n=e=>{const t=E.useMemo((()=>(Rn++,`settings-toggle-id-${Rn}`)),[]),{currentValue:n,optionsDict:r,disabled:i,ariaLabel:o}=e,s=r[n].label;return E.createElement(E.Fragment,null,E.createElement("p",{style:{display:"flex",justifyContent:"flex-end"}},E.createElement(a.Text,{tagName:"label",color:"faint",style:{marginRight:"8px"},htmlFor:t},s),E.createElement(a.Toggle,{id:t,"aria-label":o,className:"sharing-settings-modal__toggle",isToggled:r[n].value,disabled:i,onChange:t=>{i||e.onOptionChange(!r[n].value,t)}})))};class Fn extends E.PureComponent{constructor(){super(...arguments),this.handleLinkClicked=e=>{e.preventDefault(),this.props.descriptionLinkOnClicked&&this.props.descriptionLinkUrl&&this.props.descriptionLinkOnClicked(this.props.descriptionLinkUrl)}}render(){const{policyFieldName:e,className:t,rightSideElement:n,bottomElement:r}=this.props,i=a.cx("scl-sharing-modal-settings-row",t);return E.createElement("div",{className:i,"data-testid":e},E.createElement("div",{className:"scl-sharing-modal-settings-row-outer"},E.createElement("div",{className:"scl-sharing-modal-settings-row-info"},E.createElement("div",{className:"scl-sharing-modal-settings-row-display-name"},E.createElement("span",{className:"scl-sharing-modal-settings-row-info-display-name-title",title:this.props.displayNameTitle},this.props.displayName)),E.createElement("div",{className:"scl-sharing-modal-settings-row-details"},E.createElement("span",{className:"scl-sharing-modal-settings-row-details-span",title:this.props.description},this.props.description,this.props.descriptionLinkUrl&&this.props.descriptionLinkText&&E.createElement("span",null," ",E.createElement("a",{className:"scl-sharing-modal-settings-row-description-link",href:"#",onClick:this.handleLinkClicked},this.props.descriptionLinkText))))),n&&E.createElement("div",{className:"scl-sharing-modal-settings-right-element"},n)),r&&E.createElement("div",{className:"scl-sharing-modal-settings-bottom-element"},r))}}Fn.displayName="SharingModalSettingsRow";const Bn=e=>{const{policyName:t,policyDict:a,selector:n,onLinkClicked:r,extra:i,className:o}=e;return E.createElement(Fn,{policyFieldName:t,key:a.title,displayName:a.title,displayNameTitle:a.title,description:a.description,descriptionLinkUrl:a.descriptionLinkUrl,descriptionLinkText:a.descriptionLinkText,descriptionLinkOnClicked:r,rightSideElement:n,bottomElement:i,className:o})};let jn=0;const Hn=e=>{const t=E.useMemo((()=>(jn++,`settings-toggle-id-${jn}`)),[]),{currentValue:n,optionsDict:r,disabled:i,ariaLabel:o}=e,s=r[n].label;return E.createElement(E.Fragment,null,E.createElement("p",{style:{display:"flex",justifyContent:"flex-end"}},E.createElement(a.Text,{tagName:"label",color:"faint",style:{marginRight:"8px"},htmlFor:t},s),E.createElement(a.Toggle,{id:t,"aria-label":o,className:"sharing-settings-modal__toggle",isToggled:r[n].value,disabled:i,onChange:t=>{i||e.onOptionChange(!r[n].value,t)}})))},Wn=(e,t)=>o.isPasswordPolicyEnforcedByAdmin(e)&&o.isExternalAudience(t);function Yn(e,t){return t.link_password||""===t.link_password?t.link_password:o.hasLinkPassword(e)?"123456":""}const qn=e=>{const{intl:t,linkPolicy:n,linkPermissions:r,onPolicyUpdate:i}=e;return E.createElement("div",{className:"sharing-settings-modal__input_spacing"},E.createElement(a.TextInput,{role:"textbox",className:"password-input__input",disabled:!o.canModifyPassword(r)||e.readOnlyPolicy,placeholder:t.formatMessage({id:"um5odk",defaultMessage:"Set password"}),name:"link_password",onChange:e=>{i({[e.target.name]:e.target.value})},type:"password",isInvalid:""===n.link_password,value:Yn(r,n)}))},Gn="scl-sharing-modal-banner";class Vn extends E.PureComponent{typeClassName(){return`${Gn}--${this.props.type}`}render(){const{borderHidden:e,className:t,message:n,descriptionLinkUrl:r,descriptionLinkText:i}=this.props,o=a.cx(Gn,this.typeClassName(),t,{[`${Gn}--bottom-border`]:!e}),s=r&&i?E.createElement("div",null,E.createElement(a.Link,{href:r,hasNoUnderline:!0,display:"inline"},i)):void 0;return E.createElement("div",{className:o,"data-testid":"sharing-modal-banner",role:"status"},n,s)}}Vn.defaultProps={type:"default"},Vn.displayName="SharingModalBanner";class zn extends E.Component{render(){const e=this.props.linkPermissions.resolved_visibility,t=this.props.linkPermissions.audience_options[0].disallowed_reason;return t!==a.LinkAudienceDisallowedReason$1.RestrictedBySharedFolder&&t!==a.LinkAudienceDisallowedReason$1.DeleteAndRecreate?null:E.createElement(Vn,{className:"sharing-settings-modal__banner",type:"default",message:E.createElement("span",null,E.createElement("span",{className:"shared-link-settings-modal__audience-disallowed-text"},this.audienceDisallowedText(e))," ",E.createElement("span",{className:"shared-link-settings-modal__audience-disallowed-advice u-font-meta"},this.audienceDisallowedAdviceText(t)))})}audienceDisallowedText(e){if(e===a.ResolvedVisibilityPolicy.shared_folder_only){let e=this.props.linkPermissions.restricting_shared_folder_path;return void 0!==e?(e=i.Emstring.em_snippet(e,a.SNIPPET_SIZES.FILENAME),this.props.intl.formatMessage({id:"Wzk4tW",defaultMessage:"Only members of the shared folder {shared_folder_name} can view this link."},{shared_folder_name:e})):void 0}return e===a.ResolvedVisibilityPolicy.only_you?this.props.intl.formatMessage({id:"kp9e20",defaultMessage:"Only you can view this link."}):void 0}audienceDisallowedAdviceText(e){return e===a.LinkAudienceDisallowedReason$1.RestrictedBySharedFolder?this.props.intl.formatMessage({id:"D2VN2I",defaultMessage:"To change who can access the link, go to the shared folder options."}):e===a.LinkAudienceDisallowedReason$1.DeleteAndRecreate?this.props.intl.formatMessage({id:"HbDkss",defaultMessage:"To change who can access the link, delete this link and create a new one."}):void 0}}zn.displayName="RestrictedVisibilityBanner";function Qn({intl:e,linkPermissions:t,linkPolicy:n,getPolicyDict:r,onPolicyUpdate:i,readOnlyPolicy:s}){const l=t.audience_options.filter((e=>!((e,t)=>"public"===e&&o.isPasswordPolicyEnforcedByAdmin(t)&&!a.isRighteousLink(t))(e.audience,t)&&e.allowed)).map((e=>e.audience)),c=r(Pn),d=n.audience||"",u=l.length>0,m="password"===n.audience;let g;u||(g=E.createElement(zn,{intl:e,linkPermissions:t}));const f=E.createElement("div",null,E.createElement(An,{currentValue:d,valuesList:l,optionsDict:c.optionsDict,onValueSelected:e=>{const a={audience:e};!function(e,t,a,n){if(o.isExternalAudience(e)){if(o.isExpirationPolicySetByAdmin(t)){const e=new Date,r=new Date(e.getFullYear(),e.getMonth(),e.getDate()+o.daysExpirationPolicyToNumber[t.days_to_expire_policy]);(!a.expires||a.expires>r)&&(n.expires=r,n.display_expiration_warning=!0)}o.isPasswordPolicyEnforcedByAdmin(t)&&!a.require_password&&(n.require_password=!0,"public"===e&&(n.display_password_warning=!0))}else n.display_expiration_warning=!1,n.display_password_warning=!1}(e,t,n,a),i(a)},disabled:!u||s,ariaLabel:c.title}),m&&E.createElement(qn,{intl:e,linkPermissions:t,linkPolicy:n,getPolicyDict:r,onPolicyUpdate:i,readOnlyPolicy:s}));return E.createElement(Un,{policyName:Pn,policyDict:c,selector:f,extra:g})}var Kn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Xn(e){return function(t){var a=t||{},n=a.width?String(a.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var Jn={date:Xn({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Xn({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Xn({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Zn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function er(e){return function(t,a){var n,r=a||{};if("formatting"===(r.context?String(r.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=r.width?String(r.width):i;n=e.formattingValues[o]||e.formattingValues[i]}else{var s=e.defaultWidth,l=r.width?String(r.width):e.defaultWidth;n=e.values[l]||e.values[s]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function tr(e){return function(t,a){var n=String(t),r=a||{},i=r.width,o=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],s=n.match(o);if(!s)return null;var l,c=s[0],d=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth];return l="[object Array]"===Object.prototype.toString.call(d)?function(e,t){for(var a=0;a<e.length;a++)if(t(e[a]))return a}(d,(function(e){return e.test(c)})):function(e,t){for(var a in e)if(e.hasOwnProperty(a)&&t(e[a]))return a}(d,(function(e){return e.test(c)})),l=e.valueCallback?e.valueCallback(l):l,{value:l=r.valueCallback?r.valueCallback(l):l,rest:n.slice(c.length)}}}var ar,nr={code:"en-US",formatDistance:function(e,t,a){var n;return a=a||{},n="string"==typeof Kn[e]?Kn[e]:1===t?Kn[e].one:Kn[e].other.replace("{{count}}",t),a.addSuffix?a.comparison>0?"in "+n:n+" ago":n},formatLong:Jn,formatRelative:function(e,t,a,n){return Zn[e]},localize:{ordinalNumber:function(e,t){var a=Number(e),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},era:er({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:er({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:er({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:er({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:er({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(ar={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e,t){var a=String(e),n=t||{},r=a.match(ar.matchPattern);if(!r)return null;var i=r[0],o=a.match(ar.parsePattern);if(!o)return null;var s=ar.valueCallback?ar.valueCallback(o[0]):o[0];return{value:s=n.valueCallback?n.valueCallback(s):s,rest:a.slice(i.length)}}),era:tr({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:tr({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:tr({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:tr({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:tr({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function rr(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function ir(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function or(e){ir(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function sr(e,t){return ir(2,arguments),function(e,t){ir(2,arguments);var a=or(e).getTime(),n=rr(t);return new Date(a+n)}(e,-rr(t))}function lr(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function cr(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}var dr={p:cr,P:function(e,t){var a,n=e.match(/(P+)(p+)?/),r=n[1],i=n[2];if(!i)return lr(e,t);switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",lr(r,t)).replace("{{time}}",cr(i,t))}};function ur(e){return e.getTime()%6e4}function mr(e){var t=new Date(e.getTime()),a=Math.ceil(t.getTimezoneOffset());return t.setSeconds(0,0),6e4*a+(a>0?(6e4+ur(t))%6e4:ur(t))}var gr=["D","DD"],fr=["YY","YYYY"];function pr(e){return-1!==gr.indexOf(e)}function hr(e){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` for formatting years; see: https://git.io/fxCyr");if("YY"===e)throw new RangeError("Use `yy` instead of `YY` for formatting years; see: https://git.io/fxCyr");if("D"===e)throw new RangeError("Use `d` instead of `D` for formatting days of the month; see: https://git.io/fxCyr");if("DD"===e)throw new RangeError("Use `dd` instead of `DD` for formatting days of the month; see: https://git.io/fxCyr")}function yr(e,t){ir(1,arguments);var a=t||{},n=a.locale,r=n&&n.options&&n.options.weekStartsOn,i=null==r?0:rr(r),o=null==a.weekStartsOn?i:rr(a.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=or(e),l=s.getUTCDay(),c=(l<o?7:0)+l-o;return s.setUTCDate(s.getUTCDate()-c),s.setUTCHours(0,0,0,0),s}function vr(e,t){ir(1,arguments);var a=or(e,t),n=a.getUTCFullYear(),r=t||{},i=r.locale,o=i&&i.options&&i.options.firstWeekContainsDate,s=null==o?1:rr(o),l=null==r.firstWeekContainsDate?s:rr(r.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(n+1,0,l),c.setUTCHours(0,0,0,0);var d=yr(c,t),u=new Date(0);u.setUTCFullYear(n,0,l),u.setUTCHours(0,0,0,0);var m=yr(u,t);return a.getTime()>=d.getTime()?n+1:a.getTime()>=m.getTime()?n:n-1}function br(e){ir(1,arguments);var t=or(e),a=t.getUTCDay(),n=(a<1?7:0)+a-1;return t.setUTCDate(t.getUTCDate()-n),t.setUTCHours(0,0,0,0),t}function wr(e){ir(1,arguments);var t=or(e),a=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(a+1,0,4),n.setUTCHours(0,0,0,0);var r=br(n),i=new Date(0);i.setUTCFullYear(a,0,4),i.setUTCHours(0,0,0,0);var o=br(i);return t.getTime()>=r.getTime()?a+1:t.getTime()>=o.getTime()?a:a-1}function _r(e){ir(1,arguments);var t=or(e),a=br(t).getTime()-function(e){ir(1,arguments);var t=wr(e),a=new Date(0);return a.setUTCFullYear(t,0,4),a.setUTCHours(0,0,0,0),br(a)}(t).getTime();return Math.round(a/6048e5)+1}function kr(e,t){ir(1,arguments);var a=or(e),n=yr(a,t).getTime()-function(e,t){ir(1,arguments);var a=t||{},n=a.locale,r=n&&n.options&&n.options.firstWeekContainsDate,i=null==r?1:rr(r),o=null==a.firstWeekContainsDate?i:rr(a.firstWeekContainsDate),s=vr(e,t),l=new Date(0);return l.setUTCFullYear(s,0,o),l.setUTCHours(0,0,0,0),yr(l,t)}(a,t).getTime();return Math.round(n/6048e5)+1}function Er(e,t){for(var a=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return a+n}var Mr={G:function(e,t,a){var n=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});default:return a.era(n,{width:"wide"})}},y:function(e,t,a){if("yo"===t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return a.ordinalNumber(r,{unit:"year"})}return function(e,t){var a=e.getUTCFullYear(),n=a>0?a:1-a;return Er("yy"===t?n%100:n,t.length)}(e,t)},Y:function(e,t,a,n){var r=vr(e,n),i=r>0?r:1-r;return"YY"===t?Er(i%100,2):"Yo"===t?a.ordinalNumber(i,{unit:"year"}):Er(i,t.length)},R:function(e,t){return Er(wr(e),t.length)},u:function(e,t){return Er(e.getUTCFullYear(),t.length)},Q:function(e,t,a){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Er(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,a){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Er(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,a){var n=e.getUTCMonth();switch(t){case"M":case"MM":return function(e,t){var a=e.getUTCMonth();return"M"===t?String(a+1):Er(a+1,2)}(e,t);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,a){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return Er(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,a,n){var r=kr(e,n);return"wo"===t?a.ordinalNumber(r,{unit:"week"}):Er(r,t.length)},I:function(e,t,a){var n=_r(e);return"Io"===t?a.ordinalNumber(n,{unit:"week"}):Er(n,t.length)},d:function(e,t,a){return"do"===t?a.ordinalNumber(e.getUTCDate(),{unit:"date"}):function(e,t){return Er(e.getUTCDate(),t.length)}(e,t)},D:function(e,t,a){var n=function(e){ir(1,arguments);var t=or(e),a=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=a-t.getTime();return Math.floor(n/864e5)+1}(e);return"Do"===t?a.ordinalNumber(n,{unit:"dayOfYear"}):Er(n,t.length)},E:function(e,t,a){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,a,n){var r=e.getUTCDay(),i=(r-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Er(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"});default:return a.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,a,n){var r=e.getUTCDay(),i=(r-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Er(i,t.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"});default:return a.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,a){var n=e.getUTCDay(),r=0===n?7:n;switch(t){case"i":return String(r);case"ii":return Er(r,t.length);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,a){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,a){var n,r=e.getUTCHours();switch(n=12===r?"noon":0===r?"midnight":r/12>=1?"pm":"am",t){case"b":case"bb":case"bbb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbbbb":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,a){var n,r=e.getUTCHours();switch(n=r>=17?"evening":r>=12?"afternoon":r>=4?"morning":"night",t){case"B":case"BB":case"BBB":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,a){if("ho"===t){var n=e.getUTCHours()%12;return 0===n&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return function(e,t){return Er(e.getUTCHours()%12||12,t.length)}(e,t)},H:function(e,t,a){return"Ho"===t?a.ordinalNumber(e.getUTCHours(),{unit:"hour"}):function(e,t){return Er(e.getUTCHours(),t.length)}(e,t)},K:function(e,t,a){var n=e.getUTCHours()%12;return"Ko"===t?a.ordinalNumber(n,{unit:"hour"}):Er(n,t.length)},k:function(e,t,a){var n=e.getUTCHours();return 0===n&&(n=24),"ko"===t?a.ordinalNumber(n,{unit:"hour"}):Er(n,t.length)},m:function(e,t,a){return"mo"===t?a.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):function(e,t){return Er(e.getUTCMinutes(),t.length)}(e,t)},s:function(e,t,a){return"so"===t?a.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):function(e,t){return Er(e.getUTCSeconds(),t.length)}(e,t)},S:function(e,t){return function(e,t){var a=t.length,n=e.getUTCMilliseconds();return Er(Math.floor(n*Math.pow(10,a-3)),t.length)}(e,t)},X:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return Tr(r);case"XXXX":case"XX":return Dr(r);default:return Dr(r,":")}},x:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"x":return Tr(r);case"xxxx":case"xx":return Dr(r);default:return Dr(r,":")}},O:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Sr(r,":");default:return"GMT"+Dr(r,":")}},z:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Sr(r,":");default:return"GMT"+Dr(r,":")}},t:function(e,t,a,n){var r=n._originalDate||e;return Er(Math.floor(r.getTime()/1e3),t.length)},T:function(e,t,a,n){return Er((n._originalDate||e).getTime(),t.length)}};function Sr(e,t){var a=e>0?"-":"+",n=Math.abs(e),r=Math.floor(n/60),i=n%60;if(0===i)return a+String(r);var o=t||"";return a+String(r)+o+Er(i,2)}function Tr(e,t){return e%60==0?(e>0?"-":"+")+Er(Math.abs(e)/60,2):Dr(e,t)}function Dr(e,t){var a=t||"",n=e>0?"-":"+",r=Math.abs(e);return n+Er(Math.floor(r/60),2)+a+Er(r%60,2)}var Cr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Pr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lr=/^'([^]*?)'?$/,xr=/''/g,Ir=/[a-zA-Z]/;function Nr(e,t,a){ir(2,arguments);var n=String(t),r=a||{},i=r.locale||nr,o=i.options&&i.options.firstWeekContainsDate,s=null==o?1:rr(o),l=null==r.firstWeekContainsDate?s:rr(r.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=i.options&&i.options.weekStartsOn,d=null==c?0:rr(c),u=null==r.weekStartsOn?d:rr(r.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!i.localize)throw new RangeError("locale must contain localize property");if(!i.formatLong)throw new RangeError("locale must contain formatLong property");var m=or(e);if(!function(e){ir(1,arguments);var t=or(e);return!isNaN(t)}(m))throw new RangeError("Invalid time value");var g=sr(m,mr(m)),f={firstWeekContainsDate:l,weekStartsOn:u,locale:i,_originalDate:m},p=n.match(Pr).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,dr[t])(e,i.formatLong,f):e})).join("").match(Cr).map((function(e){if("''"===e)return"'";var t=e[0];if("'"===t)return function(e){return e.match(Lr)[1].replace(xr,"'")}(e);var a=Mr[t];if(a)return!r.useAdditionalWeekYearTokens&&function(e){return-1!==fr.indexOf(e)}(e)&&hr(e),!r.useAdditionalDayOfYearTokens&&pr(e)&&hr(e),a(g,e,i.localize,f);if(t.match(Ir))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return e})).join("");return p}function Ar(e,t){ir(2,arguments);var a=or(e),n=rr(t);return isNaN(n)?new Date(NaN):n?(a.setDate(a.getDate()+n),a):a}function Or(e,t){ir(1,arguments);var a=e||{},n=or(a.start),r=or(a.end).getTime();if(!(n.getTime()<=r))throw new RangeError("Invalid interval");var i=[],o=n;o.setHours(0,0,0,0);var s=t&&"step"in t?Number(t.step):1;if(s<1||isNaN(s))throw new RangeError("`options.step` must be a number greater than 1");for(;o.getTime()<=r;)i.push(or(o)),o.setDate(o.getDate()+s),o.setHours(0,0,0,0);return i}function Ur(e,t){ir(1,arguments);var a=t||{},n=a.locale,r=n&&n.options&&n.options.weekStartsOn,i=null==r?0:rr(r),o=null==a.weekStartsOn?i:rr(a.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=or(e),l=s.getDay(),c=6+(l<o?-7:0)-(l-o);return s.setDate(s.getDate()+c),s.setHours(23,59,59,999),s}function Rr(e){ir(1,arguments);var t=or(e);return t.setDate(1),t.setHours(0,0,0,0),t}function $r(e,t){ir(1,arguments);var a=t||{},n=a.locale,r=n&&n.options&&n.options.weekStartsOn,i=null==r?0:rr(r),o=null==a.weekStartsOn?i:rr(a.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=or(e),l=s.getDay(),c=(l<o?7:0)+l-o;return s.setDate(s.getDate()-c),s.setHours(0,0,0,0),s}var Fr=function(e){return Nr(e,"dd")},Br=function(e){return Nr(e,"eeeeee")},jr=function(e){return Nr(e,"MMMM yyyy")};function Hr(e){var a=e.year,n=e.month,r=e.firstDayOfWeek,i=void 0===r?1:r,o=e.dayLabelFormat,s=void 0===o?Fr:o,l=e.weekdayLabelFormat,c=void 0===l?Br:l,d=e.monthLabelFormat,u=void 0===d?jr:d;return{days:t.useMemo((function(){return function(e){var t=e.year,a=e.month,n=e.firstDayOfWeek,r=void 0===n?1:n,i=e.dayLabelFormat,o=void 0===i?function(e){return Nr(e,"dd")}:i,s=new Date(t,a),l=Rr(s),c=function(e){return ir(1,arguments),or(e).getDay()}(l),d=function(e){ir(1,arguments);var t=or(e),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(23,59,59,999),t}(s);return function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<a;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,r++)n[r]=i[o];return n}(Array.from(Array(c>=r?c-r:6-r+c+1).keys()).fill(0),Or({start:l,end:d}).map((function(e){return{date:e,dayLabel:o(e)}})))}({year:a,month:n,firstDayOfWeek:i,dayLabelFormat:s})}),[a,n,i,s]),weekdayLabels:t.useMemo((function(){return function(e){var t=void 0===e?{}:e,a=t.firstDayOfWeek,n=void 0===a?1:a,r=t.weekdayLabelFormat,i=void 0===r?function(e){return Nr(e,"iiiiii")}:r,o=new Date;return Or({start:Ar($r(o),n),end:Ar(Ur(o),n)}).reduce((function(e,t){return e.push(i(t)),e}),[])}({firstDayOfWeek:i,weekdayLabelFormat:c})}),[i,c]),monthLabel:u(new Date(a,n))}}function Wr(e,t){ir(2,arguments);var a=or(e),n=or(t);return a.getTime()<n.getTime()}function Yr(e,t){ir(2,arguments);var a=or(e),n=or(t);return a.getTime()>n.getTime()}function qr(e,t){ir(2,arguments);var a=t||{},n=or(e).getTime(),r=or(a.start).getTime(),i=or(a.end).getTime();if(!(r<=i))throw new RangeError("Invalid interval");return n>=r&&n<=i}function Gr(e){ir(1,arguments);var t=or(e);return t.setHours(0,0,0,0),t}function Vr(e,t){ir(2,arguments);var a=Gr(e),n=Gr(t);return a.getTime()===n.getTime()}function zr(e,t){ir(2,arguments);var a=or(e),n=rr(t);if(isNaN(n))return new Date(NaN);if(!n)return a;var r=a.getDate(),i=new Date(a.getTime());return i.setMonth(a.getMonth()+n+1,0),r>=i.getDate()?i:(a.setFullYear(i.getFullYear(),i.getMonth(),r),a)}var Qr=function(e,t){return void 0===e&&(e=[]),e.some((function(e){return Vr(t,e)}))};function Kr(e){var t=Rr(e);return{year:function(e){return ir(1,arguments),or(e).getFullYear()}(t),month:function(e){return ir(1,arguments),or(e).getMonth()}(t),date:t}}function Xr(e,t){var a=Kr(t||Gr(Date.now())),n=a.date,r=[a];return e>1&&(r=Array.from(Array(e-1).keys()).reduce((function(e){return n=zr(e[e.length-1].date,1),e.concat([Kr(n)])}),r)),r}function Jr(e,t,a,n){var r=e[n?a>0?0:e.length-n:a>0?e.length-1:0].date;return Array.from(Array(t).keys()).reduce((function(e){return r=0===e.length?zr(r,a):zr(r,a>=0?1:-1),a>0?e.concat([Kr(r)]):[Kr(r)].concat(e)}),[])}function Zr(e){var t=e.startDate,a=e.endDate,n=e.isDateBlocked,r=e.minBookingDays,i=e.exactMinBookingDays,o=e.minBookingDate,s=e.maxBookingDate,l=!o||!Wr(t,Ar(o,-1)),c=!s||!Yr(Ar(t,r-1),s);return!((!t||1!==r||a||n(t))&&(t&&r>1&&!a&&!i||t&&r>0&&i&&l&&c||t&&r>0&&i&&!o&&!s?Or({start:t,end:Ar(t,r-1)}).some((function(e){return n(e)})):!t||!a||i||Wr(a,Ar(t,r-1))||Or({start:t,end:a}).some((function(e){return n(e)}))))}function ei(e){var a=e.startDate,n=e.endDate,r=e.focusedInput,i=e.minBookingDate,o=e.maxBookingDate,s=e.onDatesChange,l=e.initialVisibleMonth,c=e.exactMinBookingDays,d=void 0!==c&&c,u=e.minBookingDays,m=void 0===u?1:u,g=e.numberOfMonths,f=void 0===g?2:g,p=e.firstDayOfWeek,h=void 0===p?1:p,y=e.isDateBlocked,v=void 0===y?function(){return!1}:y,b=e.unavailableDates,w=void 0===b?[]:b,_=e.changeActiveMonthOnSelect,k=void 0===_||_,E=t.useState((function(){return Xr(f,a||l||null)})),M=E[0],S=E[1],T=t.useState(null),D=T[0],C=T[1],P=t.useState(a),L=P[0],x=P[1];t.useEffect((function(){return"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("keydown",O),function(){window.removeEventListener&&window.removeEventListener("keydown",O)}}));var I=function(e){return Qr(w,e)||v(e)},N=function(e){x(e),(!L||L&&!Vr(e,L))&&S(Xr(f,e))},A=function(e){return function(e){var t=e.date,a=e.minBookingDate,n=e.maxBookingDate,r=e.isDateBlockedFn,i=e.startDate,o=e.endDate,s=e.minBookingDays,l=void 0===s?1:s,c=e.unavailableDates,d=void 0===c?[]:c,u=a?new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0):a,m=n?new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0):n;return!!(Qr(d,t)||u&&Wr(t,u)||m&&Yr(t,m)||i&&!o&&l>1&&qr(t,{start:i,end:Ar(i,l-2)})||r&&r(t))}({date:e,minBookingDate:i,maxBookingDate:o,startDate:a,endDate:n,minBookingDays:m,isDateBlockedFn:I})};function O(e){if(("ArrowRight"===e.key||"ArrowLeft"===e.key||"ArrowDown"===e.key||"ArrowUp"===e.key)&&!L){var t=M[0];N(t.date),S(Xr(f,t.date))}}var U=t.useCallback((function(){S(Jr(M,f,-1)),x(null)}),[M,f]),R=t.useCallback((function(){S(Jr(M,f,-1,1)),x(null)}),[M,f]),$=t.useCallback((function(){S(Jr(M,f,1)),x(null)}),[M,f]),F=t.useCallback((function(){S(Jr(M,f,1,1)),x(null)}),[M,f]),B=t.useCallback((function(e){S(Xr(f,e)),x(null)}),[f]),j=t.useCallback((function(e){void 0===e&&(e=1),S(Jr(M,f,-(12*e-f+1))),x(null)}),[M,f]),H=t.useCallback((function(e){void 0===e&&(e=1),S(Jr(M,f,12*e-f+1)),x(null)}),[M,f]);return{firstDayOfWeek:h,activeMonths:M,isDateSelected:function(e){return function(e,t,a){return!(!t||!a)&&qr(e,{start:t,end:a})}(e,a,n)},isDateHovered:function(e){return function(e){var t=e.date,a=e.startDate,n=e.endDate,r=e.isDateBlocked,i=e.hoveredDate,o=e.minBookingDays;return i&&o>1&&e.exactMinBookingDays&&qr(t,{start:i,end:Ar(i,o-1)})?!Or({start:i,end:Ar(i,o-1)}).some((function(e){return r(e)})):a&&!n&&i&&qr(t,{start:a,end:Ar(a,o-1)})&&Vr(a,i)&&o>1?!Or({start:a,end:Ar(a,o-1)}).some((function(e){return r(e)})):!(!a||n||!i||Wr(i,a)||!qr(t,{start:a,end:i})||Or({start:a,end:i}).some((function(e){return r(e)})))}({date:e,hoveredDate:D,startDate:a,endDate:n,minBookingDays:m,exactMinBookingDays:d,isDateBlocked:I})},isFirstOrLastSelectedDate:function(e){return function(e,t,a){return!!(t&&Vr(e,t)||a&&Vr(e,a))}(e,a,n)},isStartDate:function(e){return function(e,t){return!(!t||!Vr(e,t))}(e,a)},isEndDate:function(e){return function(e,t){return!(!t||!Vr(e,t))}(e,n)},isDateBlocked:A,numberOfMonths:f,isDateFocused:function(e){return!!L&&Vr(e,L)},focusedDate:L,hoveredDate:D,onResetDates:function(){s({startDate:null,endDate:null,focusedInput:"startDate"})},onDateHover:function(e){if(e){if(e){var t=!A(e)||a&&Vr(e,a),r=!i||!Wr(e,Ar(i,-1)),s=!o||!Yr(e,o),l=Ar(e,m-1),c=!i||!Wr(l,i),u=!o||!Yr(l,o),g=d&&m>1&&r&&s&&c&&u,f=a&&!n&&!d&&r&&s,p=!(m>1&&a)||qr(e,{start:a,end:Ar(a,m-2)}),h=a&&Vr(e,a)&&p;t&&(g||f||h)?C(e):null!==D&&C(null)}}else C(null)},onDateSelect:function(e){("endDate"===r||"startDate"===r)&&m>0&&d&&Zr({minBookingDays:m,exactMinBookingDays:d,minBookingDate:i,maxBookingDate:o,isDateBlocked:I,startDate:e,endDate:null})?s({startDate:e,endDate:Ar(e,m-1),focusedInput:null}):("endDate"===r&&a&&Wr(e,a)||"startDate"===r&&n&&Yr(e,n))&&!d&&Zr({minBookingDays:m,isDateBlocked:I,startDate:e,endDate:null})?s({endDate:null,startDate:e,focusedInput:"endDate"}):"startDate"===r&&!d&&Zr({minBookingDays:m,isDateBlocked:I,endDate:n,startDate:e})?s({endDate:n,startDate:e,focusedInput:"endDate"}):"startDate"===r&&!d&&Zr({minBookingDays:m,isDateBlocked:I,endDate:null,startDate:e})?s({endDate:null,startDate:e,focusedInput:"endDate"}):"endDate"===r&&a&&!Wr(e,a)&&!d&&Zr({minBookingDays:m,isDateBlocked:I,startDate:a,endDate:e})&&s({startDate:a,endDate:e,focusedInput:null}),"endDate"!==r&&(!L||L&&!Vr(e,L))&&k&&S(Xr(f,e))},onDateFocus:N,goToPreviousMonths:U,goToPreviousMonthsByOneMonth:R,goToNextMonths:$,goToNextMonthsByOneMonth:F,goToDate:B,goToPreviousYear:j,goToNextYear:H}}const ti=["onClick"],ai=["id","value","onChange","onSelection","format","disabled","inverse","isInvalid","isTransparent","size","data-testid","aria-label","aria-labelledby","isDateBlocked","autocomplete","autoFocus","placeholder","readonly"];var ni={previous:"Previous",next:"Next"},ri=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"]),ii="L/d/y",oi={datePickerId:"",triggerRef:void 0,close:()=>!1,open:()=>!1,toggle:()=>!1,closeOnSelection:!0,withPreviousLabel:ni.previous,withNextLabel:ni.next,focusedDate:null,isDateFocused:()=>!1,isDateSelected:()=>!1,isDateHovered:()=>!1,isDateBlocked:()=>!1,isFirstOrLastSelectedDate:()=>!1,onDateFocus:()=>!1,onDateHover:()=>!1,onDateSelect:()=>!1,goToPreviousMonths:()=>!1,goToNextMonths:()=>!1,goToDate:()=>!1,isStartDate:()=>!1,isEndDate:()=>!1},si=E.createContext(oi);var li=(e,t)=>C(e)&&C(t)?D(e,t):e===t,ci=()=>new Date;var di=(e,t)=>e.focusedInput!==t.focusedInput?{focusedInput:e.focusedInput}:li(t.startDate,e.startDate)&&li(t.endDate,e.endDate)?void 0:e,ui=" ",mi=e=>{let{date:a}=e;const{close:n,triggerRef:r,closeOnSelection:i,focusedDate:o,isDateFocused:s,isDateSelected:l,isDateHovered:c,isDateBlocked:d,isFirstOrLastSelectedDate:u,onDateFocus:m,onDateSelect:g,onDateHover:f}=E.useContext(si),[p,h]=E.useState(!1),{onClick:y,onKeyDown:v,onMouseEnter:b,disabledDate:w,isSelected:_,isSelectedStartOrEnd:k,tabIndex:M}=function(e){var a=e.date,n=e.focusedDate,r=e.isDateSelected,i=e.isDateFocused,o=e.isFirstOrLastSelectedDate,s=e.isDateHovered,l=e.isDateBlocked,c=e.onDateSelect,d=e.onDateFocus,u=e.onDateHover,m=t.useCallback((function(){return c(a)}),[a,c]),g=t.useCallback((function(){return u(a)}),[a,u]),f=l(a)&&!s(a);return{tabIndex:null===n||i(a)?0:-1,isSelected:r(a),isSelectedStartOrEnd:o(a),isWithinHoverRange:s(a),disabledDate:f,onKeyDown:function(e){"ArrowRight"===e.key?d(Ar(a,1)):"ArrowLeft"===e.key?d(Ar(a,-1)):"ArrowUp"===e.key?d(Ar(a,-7)):"ArrowDown"===e.key&&d(Ar(a,7))},onClick:f?function(){}:m,onMouseEnter:g}}({date:a,focusedDate:o,isDateFocused:s,isDateSelected:l,isDateHovered:c,isDateBlocked:d,isFirstOrLastSelectedDate:u,onDateFocus:m,onDateSelect:g,onDateHover:f}),S=E.useCallback((e=>{p&&"Tab"===e.key?e.preventDefault():e.key===ui?h(!0):p||v&&v(e)}),[v,p]),T=E.useCallback((e=>{e.key===ui&&h(!1)}),[]),D=E.useCallback((e=>!_&&d(e)),[d,_]),C=E.useCallback((()=>{a&&D(a)||(y&&y(),i&&n({autoFocusRef:r}))}),[r,i,a,D,y,n]);return{getDayProps:E.useCallback((()=>({tabIndex:M,onClick:C,onKeyDown:S,onKeyUp:T,onMouseEnter:b})),[b,M,C,S,T]),isSelected:_,isSelectedStartOrEnd:k,isBlocked:D(a)||w,isFocused:s(a)}},gi=e=>new Intl.DateTimeFormat("en-US",{month:"long",year:"numeric"}).format(e),fi=e=>new Intl.DateTimeFormat("en-US",{weekday:"narrow"}).format(e),pi=e=>new Intl.DateTimeFormat("en-US",{day:"numeric"}).format(e),hi=e=>{let{date:t,children:n}=e;const r=E.useRef(null),{getDayProps:i,isFocused:o,isBlocked:s,isSelected:l,isSelectedStartOrEnd:c}=mi({date:t}),{isStartDate:d,isEndDate:u}=E.useContext(si);E.useEffect((()=>{r&&r.current&&o&&"focus"in r.current&&r.current.focus({preventScroll:!0})}),[r,o]);const m=D(t,ci()),g=d(t),f=u(t),p=a.classNames2("dig-DatePicker-day dig-10x86n2b_23-4-0",{"dig-DatePicker-day--selected":l||c,"dig-10x86n2d_23-4-0":l||c,"dig-DatePicker-day--selectedEdge":c,"dig-10x86n2e_23-4-0":c,"dig-DatePicker-day--blocked":s,"dig-10x86n2f_23-4-0":s,"dig-DatePicker-day--today":m,"dig-10x86n2c_23-4-0":m,"dig-DatePicker-day--start":g,"dig-10x86n2g_23-4-0":g,"dig-DatePicker-day--end":f,"dig-10x86n2h_23-4-0":f});return E.createElement("button",h._objectSpread2({ref:r,className:p,type:"button",disabled:s,"aria-pressed":l},i()),n)};hi.displayName="Day";var yi=e=>{let{datePickerId:t,year:n,yearOptions:r,onYearChange:i,yearDropdownAriaLabel:o}=e;const s=E.useCallback((e=>{const t=e.target.value,a=parseInt(t,10);isNaN(a)||i(a)}),[i]);return 0===r.length?null:E.createElement("span",h._objectSpread2({},a.withShade({direction:"up",className:a.classNames2("dig-10x86n24_23-4-0")})),E.createElement("span",{className:"dig-10x86n26_23-4-0"},E.createElement(a.UIIcon,{size:"small",src:a.ChevronDownLine})),E.createElement("select",{id:`${t}-year-select`,value:n.toString(),onChange:s,"aria-label":o,"data-testid":"digDatePickerYearDropdown",className:"dig-10x86n25_23-4-0"},r.map((e=>E.createElement("option",{key:e,value:e.toString()},e.toString())))))},vi=e=>{let{year:t,month:n,firstDayOfWeek:r,format:i,weekdayLabelFormat:o,dayLabelFormat:s,hasYearDropdown:l=!1,yearOptions:c=[],yearDropdownAriaLabel:d}=e;const u=E.useContext(si),{datePickerId:m,withPreviousLabel:g,withNextLabel:f,monthLabel:p,weekdayLabels:y,days:b,getPreviousMonthProps:w,getNextMonthProps:_}=(e=>{let{year:t,month:a,firstDayOfWeek:n,format:r=gi,weekdayLabelFormat:i=fi,dayLabelFormat:o=pi}=e;const{days:s,weekdayLabels:l,monthLabel:c}=Hr({year:t,month:a,firstDayOfWeek:n,monthLabelFormat:r,weekdayLabelFormat:i,dayLabelFormat:o}),{datePickerId:d,withPreviousLabel:u,withNextLabel:m,goToPreviousMonths:g,goToNextMonths:f}=E.useContext(si);return{datePickerId:d,withPreviousLabel:u,withNextLabel:m,days:s,weekdayLabels:l,monthLabel:c,getPreviousMonthProps:E.useCallback((()=>({onClick:g})),[g]),getNextMonthProps:E.useCallback((()=>({onClick:f})),[f])}})({year:t,month:n,firstDayOfWeek:r,format:i,weekdayLabelFormat:o,dayLabelFormat:s}),k=E.useCallback((e=>{u.goToDate(new Date(e,n,1))}),[u,n]);return E.createElement(E.Fragment,null,E.createElement("div",{className:"dig-DatePicker-header dig-10x86n27_23-4-0"},E.createElement(a.Text,{className:"dig-DatePicker-title",size:"large",variant:"label",color:"standard"},p),l&&d&&E.createElement(yi,{datePickerId:m,year:t,yearOptions:c,onYearChange:k,yearDropdownAriaLabel:d}),E.createElement(v.IconButtonGroup,{size:"small",className:"dig-10x86n23_23-4-0"},(e=>{let{getButtonProps:t}=e;return E.createElement(E.Fragment,null,E.createElement(a.Tooltip,{id:`${m}-previous`,title:g},E.createElement(a.IconButton,h._objectSpread2(h._objectSpread2({variant:"transparent",type:"button","data-testid":"digDatePickerPreviousMonth"},t()),w()),E.createElement(a.UIIcon,{size:"small",src:a.ChevronLeftLine}))),E.createElement(a.Tooltip,{id:`${m}-next`,title:f},E.createElement(a.IconButton,h._objectSpread2(h._objectSpread2({variant:"transparent",type:"button","data-testid":"digDatePickerNextMonth"},t()),_()),E.createElement(a.UIIcon,{size:"small",src:a.ChevronRightLine}))))}))),E.createElement("div",{className:"dig-DatePicker-weekdays dig-10x86n28_23-4-0"},y.map(((e,t)=>E.createElement(a.Text,{key:t,className:"dig-DatePicker-weekday dig-10x86n29_23-4-0",size:"xsmall",variant:"label",isBold:!0},e)))),E.createElement("div",{className:"dig-DatePicker-calendar-grid dig-10x86n2a_23-4-0"},b.map(((e,t)=>"object"==typeof e?E.createElement(hi,{key:e.date.toString(),date:e.date},e.dayLabel):E.createElement("div",{key:t})))))};vi.displayName="Month";var bi=E.createContext(void 0);var wi=e=>{let{id:t,selectedDate:n,disabledDays:r=[],focusedInput:i="startDate",isDateBlocked:o,onSelection:s,onDateFocus:l,withPreviousLabel:c=ni.previous,withNextLabel:d=ni.next,monthLabelFormat:u,weekdayLabelFormat:m,dayLabelFormat:g,auto:f=!0,placement:p="bottom-start",positioningStrategy:y="absolute",closeOnBlur:v=!0,closeOnSelection:b=!0,shouldPropagateClickOutsideMouseEvents:w=!1,shouldHideDropShadow:_=!1,isBlock:k=!1,isPortaled:M=!0,onToggle:S,firstDayOfWeek:T=0,hasYearDropdown:D=!1,yearOptions:C,yearDropdownAriaLabel:P,children:L}=e;const x=E.useMemo((()=>void 0===n?ci():n),[n]),I=E.useRef(null),N=E.useRef(null),A=E.useRef(null),[O,U]=E.useState(!1),R=a.useUniqueId({prefix:"dig-DatePicker-",idOverride:t}),$=E.useContext(bi),[F,B]=E.useState(p),[j,H]=E.useState(p);j!==p&&(B(p),H(p));const W=e=>{f&&B(e)};D&&function(e,t){if(!e)throw new Error(`dig-components - Invariant: ${t}`)}(P,"When hasYearDropdown is true, yearDropdownAriaLabel must be provided for accessibility.");const[Y,q]=E.useState((()=>x));((e,t)=>{const a=E.useRef(!1);E.useEffect((()=>{a.current?e():a.current=!0}),t)})((()=>{"function"==typeof S&&S({isOpen:O})}),[O]),E.useEffect((()=>{q(x)}),[x]);const G=$?$.selectedRange[0]:Y,V=$?$.selectedRange[1]:Y,z=!!$,Q=E.useMemo((()=>z?((e,t,a)=>({type:1,focusedInput:a,createInitialState:()=>({startDate:e,endDate:t,focusedInput:a||"startDate"}),applyUpdates:di}))(G,V,i):(e=>({type:0,focusedInput:"startDate",createInitialState:()=>({startDate:e,endDate:e,focusedInput:"startDate"}),applyUpdates:di}))(G)),[z,G,V,i]),K=function(e){const[t,a]=E.useState(e.createInitialState()),n=E.useCallback((n=>{const r=e.applyUpdates(n,t);r&&a((e=>h._objectSpread2(h._objectSpread2({},e),r)))}),[t,e]),r=E.useCallback((e=>{let{startDate:t,endDate:a,focusedInput:r}=e;n({startDate:t,endDate:a,focusedInput:r||"startDate"})}),[n]),i=E.useCallback((t=>{let{startDate:a,endDate:r}=t;n({startDate:a,endDate:r,focusedInput:e.focusedInput})}),[n,e.focusedInput]);return{type:e.type,startDate:t.startDate,endDate:t.endDate,focusedInput:t.focusedInput,onDatesChange:r,sync:i}}(Q);E.useEffect((()=>{K.sync({startDate:G,endDate:V})}),[G,V,K]);const X=E.useCallback((e=>{s&&s(e),q(e.selectedDate)}),[s]),{activeMonths:J,goToPreviousMonths:Z,goToNextMonths:ee,focusedDate:te,isDateFocused:ae,isDateSelected:ne,isDateHovered:re,isDateBlocked:ie,isFirstOrLastSelectedDate:oe,onDateFocus:se,onDateSelect:le,onDateHover:ce,goToDate:de,isStartDate:ue,isEndDate:me}=function(e){let{picker:t,disabledDays:a,isDateBlocked:n,onSelection:r,onDateFocus:i}=e;const o=E.useCallback((e=>{if(t.onDatesChange(e),r){const{startDate:t,focusedInput:a}=e;let{endDate:n}=e;const i="endDate"===a;i&&!n&&(n=t),r({startDate:t,endDate:n,selectedDate:i?t:n})}}),[t,r]),{activeMonths:s,goToPreviousMonths:l,goToNextMonths:c,focusedDate:d,isDateFocused:u,isDateSelected:m,isDateHovered:g,isDateBlocked:f,isFirstOrLastSelectedDate:p,onDateFocus:h,onDateSelect:y,onDateHover:v,goToDate:b,isStartDate:w,isEndDate:_}=ei({startDate:t.startDate,endDate:t.endDate,minBookingDays:0===t.type?1:void 0,exactMinBookingDays:0===t.type,minBookingDate:1===t.type&&"endDate"===t.focusedInput&&t.startDate||void 0,maxBookingDate:1===t.type&&"startDate"===t.focusedInput&&t.endDate||void 0,unavailableDates:a,isDateBlocked:n,focusedInput:t.focusedInput,onDatesChange:o,numberOfMonths:1}),k=E.useCallback((e=>{h&&h(e),i&&i(e)}),[i,h]),M=E.useCallback((e=>{1!==t.type||"endDate"!==t.focusedInput||null!==t.startDate||f(e)?y(e):o({focusedInput:"endDate",startDate:null,endDate:e})}),[f,o,y,t.type,t.focusedInput,t.startDate]);return{activeMonths:s,goToPreviousMonths:l,goToNextMonths:c,focusedDate:d,isDateFocused:u,isDateSelected:m,isDateHovered:g,isDateBlocked:f,isFirstOrLastSelectedDate:p,onDateFocus:k,onDateSelect:M,onDateHover:v,goToDate:b,isStartDate:w,isEndDate:_}}({picker:K,disabledDays:r,isDateBlocked:o,onSelection:X,onDateFocus:l});E.useEffect((()=>{z&&!x&&(G&&!V&&de(G),V&&!G&&de(V),V||G||de(ci()))}),[G,V]);const ge=1===J.length&&J[0],fe="object"==typeof ge&&ge.year,pe=E.useMemo((()=>{if(C)return C;if(!D||!fe)return[];const e=fe,t=[];for(let a=e-10;a<=e+10;a++)t.push(a);return t}),[C,D,fe]),he=E.useCallback((e=>{le(e),se(e)}),[le,se]),ye=E.useCallback((e=>{const t=e&&e.autoFocusRef;U(!1),t&&t.current&&"focus"in t.current&&t.current.focus()}),[]),ve=E.useCallback((e=>{const t=e&&e.autoFocusDate;U(!0);const a=t||("startDate"===K.focusedInput?K.startDate:K.endDate);a&&he(a)}),[K,he]),be=E.useCallback((e=>{const t=e&&e.autoFocusDate||("startDate"===K.focusedInput?K.startDate:K.endDate);t&&he(t)}),[K,he]),we=E.useCallback((()=>{U((e=>!e));const e="startDate"===K.focusedInput?K.startDate:K.endDate;e&&he(e)}),[K,he]),_e={datePickerId:R,triggerRef:N,closeOnSelection:b,close:ye,open:ve,toggle:we,withPreviousLabel:c,withNextLabel:d,monthLabelFormat:u,focusedDate:te,isDateFocused:ae,isDateSelected:ne,isDateHovered:re,isDateBlocked:ie,isFirstOrLastSelectedDate:oe,onDateFocus:se,onDateSelect:le,onDateHover:ce,goToPreviousMonths:Z,goToNextMonths:ee,goToDate:de,isStartDate:ue,isEndDate:me},ke=E.useCallback((()=>{v&&ye()}),[v,ye]),Ee=E.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onClick:t}=e,a=h._objectWithoutProperties(e,ti);return h._objectSpread2({onClick:e=>{U((e=>!e));const a="startDate"===K.focusedInput?K.startDate:K.endDate;a&&se(a),t&&t(e)},ref:N},a)}),[N,K,se]),Me=E.useCallback((e=>{ri.has(e.key)?e.preventDefault():O&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),ye({autoFocusRef:N}))}),[ye,O,N]),Se=E.createElement(si.Provider,{value:_e},E.createElement("div",{className:a.classNames2("dig-DatePicker","dig-10x86n21_23-4-0",{"dig-DatePicker--shouldHideDropShadow":_,"dig-10x86n22_23-4-0":_}),onKeyDown:Me,"data-testid":"digDatePicker"},ge&&E.createElement(vi,{key:`${ge.year}-${ge.month}`,year:ge.year,month:ge.month,firstDayOfWeek:T,format:u,weekdayLabelFormat:m,dayLabelFormat:g,hasYearDropdown:D,yearOptions:pe,yearDropdownAriaLabel:P}))),Te=(e=>{switch(e){case"top":case"top-start":case"top-end":default:return"up";case"bottom":case"bottom-start":case"bottom-end":return"down"}})(F),De=E.useMemo((()=>(e=>{const{direction:t}=e;return new Map([["open",{keyFrames:{transform:"up"===t?"translate(0, -4px)":"translate(0, 4px)",opacity:1},options:{duration:a.toSeconds(a.values.Motion.Duration.XXFast),ease:a.values.Motion.Easing.Enter}}],["close",{keyFrames:{opacity:0},options:{duration:a.toSeconds(a.values.Motion.Duration.XXFast),ease:a.values.Motion.Easing.Exit}}]])})({direction:Te})),[Te]),{isMotionRunning:Ce}=a.useMotion({states:De,currentState:O?"open":"close",elementRef:I});if("function"==typeof L){const e=L({getTriggerProps:Ee,triggerRef:N,close:ye,open:ve,toggle:we,forceUpdate:be});return E.createElement(a.ClickOutside,{className:"dig-DatePicker-backdrop dig-10x86n20_23-4-0",isBlock:k,onClickOutside:ke,shouldPropagateMouseEvents:w,isClickThroughPortaled:M,isActive:O},e,O||Ce?E.createElement(a.Overlay,{className:`pleskac-${Te}`,auto:f,onChangePlacement:W,isPortaled:M,placement:F,positioningStrategy:y,ref:A,anchorRef:N,"data-testid":"digDatePickerOverlay"},E.createElement("div",{ref:I},Se)):null)}return Se};wi.displayName="DatePicker";var _i=(e,t)=>P(e)?"object"==typeof t?t.dateToString(e):ke(e,t||""):"",ki=e=>{let{id:t,value:n,onChange:r,onSelection:i,format:o=ii,disabled:s,inverse:l,isInvalid:c,isTransparent:d,size:u,"data-testid":m,"aria-label":g,"aria-labelledby":f,isDateBlocked:p,autocomplete:y,autoFocus:v,placeholder:w,readonly:_}=e,k=h._objectWithoutProperties(e,ai);const[M,S]=E.useState(_i(n,o)),T=E.useCallback((()=>{let e=null;return M.length&&(e=((e,t)=>"object"==typeof t?t.stringToDate(e):oa(e,t,new Date))(M,o),!P(e)||p&&p(e))?(S(_i(n,o)),n):(r&&!li(e,n)&&r(e),e)}),[M,r,n,o,p]),D=e=>()=>{const t=T();e({autoFocusDate:t})},C=E.useCallback((e=>{S(e.target.value)}),[]),L=E.useCallback((e=>{r&&!li(e.selectedDate,n)&&r(e.selectedDate),i&&i(e)}),[r,i,n]),x=E.useCallback((e=>t=>{switch(t.key){case ui:return void t.preventDefault();case"Enter":if(t.preventDefault(),_)return;const a=T();return void e({autoFocusDate:a})}}),[T,_]),I=E.useCallback((e=>t=>{if(!_&&t.key===ui){const t=T();e({autoFocusDate:t})}}),[T,_]),N=E.useCallback((e=>()=>{s||_||(T(),e())}),[s,T,_]);return E.useEffect((()=>{S(null===n?"":_i(n,o))}),[o,n]),E.createElement(wi,h._objectSpread2({selectedDate:n,onSelection:L,isDateBlocked:p},k),(e=>{let{getTriggerProps:n,open:r,forceUpdate:i}=e;const o=n({onChange:C,onKeyDown:x(r),onKeyUp:I(r),onBlur:D(i)});return _&&(o.onClick=void 0),E.createElement(a.TextInput,h._objectSpread2(h._objectSpread2({id:t,value:M,disabled:s,inverse:l,isInvalid:c,isTransparent:d,size:u,"aria-label":g,"aria-labelledby":f,"data-testid":m},o),{},{withLeftAccessory:E.createElement(a.UIIcon,{src:b.CalendarLine,onClick:N(r)}),autoComplete:y,autoFocus:v,placeholder:w,readonly:_}))}))};const Ei=({intl:e,getPolicyDict:t,linkMetadata:a,linkPolicy:n,onPolicyUpdate:r,readOnlyPolicy:i})=>{const s=t(Dn),l=e=>{e&&e.expires instanceof Date&&e.expires.setHours(23,59,59),r(e)},c=(e=>{const{linkMetadata:t,linkPolicy:a}=e,n=new Date;let r;if(o.isExternalAudience(a.audience)){const{days_to_expire_policy:e}=t.link_permissions;o.isExpirationPolicyEnforcedByAdmin(t.link_permissions)&&(r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+o.daysExpirationPolicyToNumber[e]))}return{before:new Date(n.getFullYear(),n.getMonth(),n.getDate()+1),after:r}})({intl:e,getPolicyDict:t,linkMetadata:a,linkPolicy:n,onPolicyUpdate:r,readOnlyPolicy:i}),d=null!=n.expires,u=E.useCallback((t=>e.formatDate(t,{day:"2-digit"})),[e]),m=E.createElement("div",null,E.createElement($n,{currentValue:null!=n.expires?"enabled":"disabled",optionsDict:s.optionsDict,onOptionChange:e=>{let t=null;e&&(t=n.expires||o.daysAfterToday(o.isExternalAudience(n.audience)&&o.isExpirationPolicySetByAdmin(a.link_permissions)?o.daysExpirationPolicyToNumber[a.link_permissions.days_to_expire_policy]:30)),l({expires:t||void 0,display_expiration_warning:!1})},disabled:!(o.isExternalAudience(n.audience)&&o.isExpirationPolicyEnforcedByAdmin(a.link_permissions))&&!o.canModifyExpire(a)||i,ariaLabel:s.title}),d&&E.createElement("div",{className:"sharing-settings-modal__input_spacing"},E.createElement(ki,{value:n.expires||new Date,disabled:!o.canModifyExpire(a)||i,isDateBlocked:e=>e<c.before||!!(c.after&&e>c.after),onChange:e=>e&&l({expires:e,display_expiration_warning:!1}),dayLabelFormat:u,monthLabelFormat:t=>e.formatDate(t,{month:"long",year:"numeric"}),weekdayLabelFormat:t=>e.formatDate(t,{weekday:"narrow"}),placement:"left"})));return E.createElement(Un,{policyName:Dn,policyDict:s,selector:m})};Ei.displayName="SettingsExpire";const Mi=(e,t)=>o.isPasswordPolicyEnforcedByAdmin(e)&&o.isExternalAudience(t),Si=({linkPolicy:e,linkPermissions:t,getPolicyDict:a,onPolicyUpdate:n,readOnlyPolicy:r})=>{const i=a(Ln),s=e.require_password?"enabled":"disabled";return E.createElement($n,{currentValue:s,optionsDict:i.optionsDict,onOptionChange:e=>{n({require_password:e})},disabled:!o.canTogglePassword(t)||Mi(t,e.audience)||r,ariaLabel:i.title})};Si.displayName="PasswordToggle";function Ti(e,t){return t.link_password||""===t.link_password?t.link_password:o.hasLinkPassword(e)?"123456":""}const Di=e=>{const{intl:t,linkPolicy:n,linkPermissions:r,onPolicyUpdate:i}=e;return E.createElement("div",{className:"sharing-settings-modal__input_spacing"},E.createElement(a.TextInput,{role:"textbox",className:"password-input__input",disabled:!o.canModifyPassword(r)||e.readOnlyPolicy,placeholder:t.formatMessage({id:"um5odk",defaultMessage:"Set password"}),name:"link_password",onChange:e=>{i({[e.target.name]:e.target.value})},type:"password",isInvalid:""===n.link_password,value:Ti(r,n)}))},Ci=e=>{const{getPolicyDict:t,linkPolicy:a,linkPermissions:n,readOnlyPolicy:r}=e,i=t(Ln),o=a.require_password||Mi(n,a.audience)&&!r,s=E.createElement("div",null,E.createElement(Si,{...e}),o&&E.createElement(Di,{...e}));return E.createElement(Un,{policyName:Ln,policyDict:i,selector:s})};Ci.displayName="SettingsPassword";a.injectInternalStyle("/static/metaserver/static/js/sharing/sharing-sdk/legos/settings-page/internals/settings-row/settings-download.module.out-vflCxuipZ.css",(e=>"._banner_1ih4z_4{align-items:center;background-color:var(--dig-color__opacity__surface);gap:var(--dig-spacing__micro__medium)}"));function Pi(e){return Boolean(e&&e.allow_download?e.can_disallow_download:e.can_allow_download)}const Li=e=>{const{intl:t,linkPolicy:n,linkPermissions:r}=e;return!n.allow_download&&r.can_disallow_download?E.createElement(a.Banner,{className:"_banner_1ih4z_4","data-testid":"sharing-settings-modal__banner",withLeftIcon:E.createElement(a.UIIcon,{src:a.InfoLine})},E.createElement(a.Banner.Message,null,E.createElement(a.Text,{size:"small",isBold:!0},(e=>e.formatMessage({id:"QdaCYw",defaultMessage:"This applies only within Dropbox."}))(t)))):null},xi=({linkPermissions:e,linkPolicy:t,getPolicyDict:a,onPolicyUpdate:n,onLinkClicked:r,banner:i,readOnlyPolicy:o,isEditFolderLink:s,isPaperDoc:l})=>{const c=a(Cn),d=t.allow_download?"enabled":"disabled",u=s||l?void 0:E.createElement($n,{currentValue:d,optionsDict:c.optionsDict,onOptionChange:e=>{n(Cn,e)},disabled:!Pi(e)||o,ariaLabel:c.title}),m=s||l?"setting-disabled":"";return E.createElement(Un,{policyName:Cn,policyDict:c,selector:u,onLinkClicked:r,extra:i,className:m})};xi.displayName="SettingsDownload";class Ii extends E.Component{constructor(e){super(e),this.handleMultiplePolicyUpdate=e=>{const t={...this.props.linkPolicy,...e};this.props.onPolicyUpdate(this.props.linkMetadata,t)},this.handlePolicyUpdate=(e,t)=>{const a={...this.props.linkPolicy,[e]:t};this.props.onPolicyUpdate(this.props.linkMetadata,a)};const{getRLPolicyDict:t}=(a=this.props.intl,{getRLPolicyDict(e,t,n,r=!1){const i="editor"===t;switch(e){case Pn:return{title:i?a.formatMessage({id:"nct28+",defaultMessage:"Who has access to edit"}):a.formatMessage({id:"UPYB+9",defaultMessage:"Who has access to view"}),optionsDict:{public:{label:a.formatMessage({id:"/zG9EQ",defaultMessage:"Anyone with link"}),description:i?n?a.formatMessage({id:"Zu3WQt",defaultMessage:"Anyone with this link can edit the folder."}):r?a.formatMessage({id:"w90q8W",defaultMessage:"Anyone with this link can edit the collection."}):a.formatMessage({id:"mFcDVj",defaultMessage:"Anyone with this link can edit the file."}):n?a.formatMessage({id:"ezaRwK",defaultMessage:"Anyone with this link can view the folder."}):r?a.formatMessage({id:"uINLfI",defaultMessage:"Anyone with this link can view the collection."}):a.formatMessage({id:"plWhaX",defaultMessage:"Anyone with this link can view the file."})},team:{label:a.formatMessage({id:"Abe4xf",defaultMessage:"Team members"}),description:i?n?a.formatMessage({id:"Mug0JF",defaultMessage:"Team members with this link can edit the folder."}):r?a.formatMessage({id:"6NeGPn",defaultMessage:"Team members with this link can edit the collection."}):a.formatMessage({id:"d0xPAZ",defaultMessage:"Team members with this link can edit the file."}):n?a.formatMessage({id:"XG/OYV",defaultMessage:"Team members with this link can view the folder."}):r?a.formatMessage({id:"+fXeLg",defaultMessage:"Team members with this link can view the collection."}):a.formatMessage({id:"ErXPpA",defaultMessage:"Team members with this link can view the file."})},no_one:{label:a.formatMessage({id:"70iNCa",defaultMessage:"Only people invited"}),description:a.formatMessage({id:"CyXDsT",defaultMessage:"The link is off and does not grant additional access to anyone."})}},type:In};case Ln:return{title:a.formatMessage({id:"LqPx8N",defaultMessage:"Require password"}),optionsDict:{enabled:{label:a.formatMessage({id:"oUP+qL",defaultMessage:"On"}),value:!0},disabled:{label:a.formatMessage({id:"h58mvf",defaultMessage:"Off"}),value:!1}},type:Nn};case Cn:return{title:a.formatMessage({id:"7V5NRy",defaultMessage:"Allow downloads on dropbox.com"}),optionsDict:{enabled:{label:a.formatMessage({id:"EeYSnq",defaultMessage:"On"}),value:!0},disabled:{label:a.formatMessage({id:"5pmKhs",defaultMessage:"Off"}),value:!1}},type:Nn};case Dn:return{title:a.formatMessage({id:"hnzZgk",defaultMessage:"Set expiration"}),optionsDict:{enabled:{label:a.formatMessage({id:"J8zY2i",defaultMessage:"On"}),value:!0},disabled:{label:a.formatMessage({id:"w6dVgn",defaultMessage:"Off"}),value:!1}},type:Nn};case"default":return{title:a.formatMessage({id:"LtXXzz",defaultMessage:"Default sharing settings"}),description:a.formatMessage({id:"dVXrDR",defaultMessage:"Go to account settings to set a default sharing permission"}),optionsDict:{},type:"button"};default:throw new Error("Policy name not found")}}});var a;const{link_permissions:n}=e.linkMetadata,r="folder"===e.linkMetadata.file_type,i="collection"===e.linkMetadata.file_type;this.getPolicyDict=e=>t(e,n.link_access_level,r,i)}render(){const{linkMetadata:e,linkPolicy:t,onPolicyUpdate:a,intl:n,readOnlyPolicy:r,onLinkClicked:i,...o}=this.props;return E.createElement("div",{...o},E.createElement(Qn,{intl:this.props.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:r}),E.createElement(Ei,{intl:this.props.intl,linkMetadata:this.props.linkMetadata,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:r}),E.createElement(Ci,{intl:this.props.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:r}),E.createElement(xi,{linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handlePolicyUpdate,onLinkClicked:this.props.onLinkClicked,readOnlyPolicy:r,isPaperDoc:this.props.isPaperDoc,banner:E.createElement(Li,{intl:this.props.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy})}))}}Ii.displayName="SettingsRighteousLinkPolicyView";const Ni=({className:e,...t})=>E.createElement("div",{className:a.cx("scl-scooter-loader",e),...t},E.createElement("div",{className:"scl-scooter-loader-animation"}));Ni.displayName="ScooterLoader",Ni.displayName="ScooterLoader";const Ai="scl-sharing-modal-downgrade-banner",Oi=e=>{const{subheader:t,header:r,onClickCloseButton:i,onClickOutlineButton:o,onClickTransparentButton:s,outlineButtonLabel:l,transparentButtonLabel:c,showCloseButton:d}=e,u=n.useIntl();return E.createElement("div",{className:`${Ai} dig-Theme---VIS`,"data-testid":"sharing-modal-downgrade-banner"},E.createElement("div",{className:`${Ai}__header`},E.createElement(a.Text,{isBold:!0,size:"large"},r),d&&E.createElement(a.IconButton,{variant:"transparent","aria-label":u.formatMessage({id:"hhAj2K",defaultMessage:"Close"}),className:`${Ai}__close`,onClick:i,size:"standard"},E.createElement(a.UIIcon,{src:a.CloseLine}))),E.createElement("div",{className:`${Ai}__subheader`},E.createElement(a.Text,null,t)),E.createElement("div",{className:`${Ai}__buttons`},E.createElement(a.Button,{variant:"outline",onClick:o},l),E.createElement(a.Button,{variant:"transparent",onClick:s},c)))};Oi.displayName="SharingModalDowngradeBanner";const Ui=r.define({name:"sharing.create_shared_link_with_settings"},(e=>t=>r.handler(e.sharingAlphaCreateSharedLinkWithSettings(t)))),Ri=r.define({name:"sharing.revokeSharedLink"},(e=>t=>r.handler(e.sharingRevokeSharedLink(t))));a.injectInternalStyle("/static/metaserver/static/js/sharing/sharing-sdk/legos/settings-page/internals/link-settings/link-settings.module.out-vflNvoD_1.css",(e=>"._bannerWithRightActions_9s35h_4{align-items:center;display:flex;gap:var(--dig-spacing__micro__medium)}._bannerWithRightActions_9s35h_4>span:last-child{align-items:center;display:flex!important;justify-content:space-between;width:100%}._bannerUpsell_9s35h_17{align-items:center;border:1px solid var(--dig-color__identity__green);gap:var(--dig-spacing__micro__medium);text-align:center}._bannerMessage_9s35h_24{flex:1;margin-right:auto}._bannerActions_9s35h_29{align-items:center;display:flex!important;margin-left:auto;padding-top:0}._bannerForWarning_9s35h_36{align-items:center;background-color:var(--dig-color__warning__surface);border-radius:8px;padding:8px 12px}"));const $i=Symbol("ON_COPY_SHARED_LINK_START"),Fi=Symbol("ON_COPY_SHARED_LINK_SUCCESS"),Bi=Symbol("ON_COPY_SHARED_LINK_ERROR"),ji=Symbol("ON_VIEW_SETTINGS_PAGE"),{useEmitter:Hi,defaultEmitter:Wi}=a.defineLogger((async({event:e,getContextValue:t})=>{var n,r,i,o,s;const l=t(a.Context$4),c=t(a.Context$5),d=t(a.Context$6),u=a.getProperties$4(l),m=a.getProperties$5(c),g=a.getProperties$6(d),f=null!==(n=u.actionSurface)&&void 0!==n?n:"share_modal_settings",p=null!==(r=u.actionElement)&&void 0!==r?r:"copy_link_button",h=null!==(i=u.contentAction)&&void 0!==i?i:"copy_link",y="settings_screen",v={isDir:null!==(o=m.isDir)&&void 0!==o&&o,type:m.fileType,fileId:g.contentIdentifier,ext:m.fileExtension},b=null!==(s=g.contentIdentifier)&&void 0!==s?s:"unknown";if(e.key!==$i)if(e.key!==Fi)if(e.key!==Bi)if(e.key!==ji);else a.UDCL.logEvent({class:"share",action:"view",object:"share_modal_settings",properties:{actionSurface:f,actionElement:p}},{tags:{actionSurface:f,actionElement:p}});else await a.logPAPCopySharedLinkEvent({eventState:"failed",screen:y,actionSurface:f,actionElement:p,contentAction:h,requestedAccessLevel:e.payload.requestedAccessLevel,fileIdOrPath:b,content:v,hasCachedLink:e.payload.hasCachedLink,metadata:e.payload.linkMetadata,httpCode:e.payload.httpCode,exception:e.payload.exception});else await a.logPAPCopySharedLinkEvent({eventState:"success",screen:y,actionSurface:f,actionElement:p,contentAction:h,requestedAccessLevel:e.payload.requestedAccessLevel,fileIdOrPath:b,content:v,hasCachedLink:e.payload.hasCachedLink,metadata:e.payload.linkMetadata,httpCode:e.payload.httpCode});else await a.logPAPCopySharedLinkEvent({eventState:"start",screen:y,actionSurface:f,actionElement:p,contentAction:h,requestedAccessLevel:e.payload.requestedAccessLevel,fileIdOrPath:b,content:v,hasCachedLink:e.payload.hasCachedLink,metadata:e.payload.linkMetadata})})),Yi=r.define({name:"sharing.unshareFile"},(e=>t=>r.handler(e.sharingUnshareFile(t)))),qi=r.define({name:"sharing.unshareFolder"},(e=>t=>r.handler(e.sharingUnshareFolder(t)))),Gi=({objectMetadata:e,objectIdentifier:t,contentName:o,open:s,onCancel:l,onConfirm:c,onClose:u,onObjectIdentifierChanged:m,onConfirmationModalShownChange:g,onUnshareCompleted:f})=>{const p=n.useIntl(),h=r.useEndpoint(qi),y=r.useEndpoint(Yi),v=r.useEndpoint(d.sharingCheckJobStatus),b=r.useLogger(),[w,_]=E.useState(!1),k=r.usePlatform(),M=k!==r.Platforms.DESKTOP,S=i.useShowSharingNotification(),T=a.getIsFile(e)?(e=>e.formatMessage({id:"+HG1Rr",defaultMessage:"Everyone will be removed from this file. Youll still keep a copy of this file in your Dropbox."}))(p):(e=>e.formatMessage({id:"SO6vAJ",defaultMessage:"Everyone will be removed from this folder. Youll still keep a copy of this folder in your Dropbox."}))(p),D=E.useCallback((async n=>{var o,s;if(c(n),k!==r.Platforms.DESKTOP&&u(),S({type:i.SharingNotificationType.IN_PROGRESS,message:ln(p,a.getName(e))}),"file"===t[".tag"]){b("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_START",null);const n=await y({file:t.fileId});"SUCCESS"===n.status?(b("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_SUCCESS",{response:n}),S({type:i.SharingNotificationType.COMPLETED,message:cn(p,a.getName(e))})):("ERROR"===n.status?b("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_ERROR",{response:n}):b("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_FATAL",{response:n}),S({type:i.SharingNotificationType.FAILURE,message:dn(p)}))}else if("shared_folder"===t[".tag"]){b("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_START",null);const r=await h({shared_folder_id:t.sharedFolderId,leave_a_copy:n});if("SUCCESS"===r.status){if("complete"===r.output[".tag"])S({type:i.SharingNotificationType.COMPLETED,message:cn(p,a.getName(e))}),b("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_SUCCESS",{response:r}),await m({".tag":"file_folder",path:a.isNewApiMetadata(e)?"":null!==(o=e.path_lower)&&void 0!==o?o:"",name:a.getName(e)});else if("async_job_id"===r.output[".tag"]){const t=r.output.async_job_id;"COMPLETE"===(await i.poll((async()=>{const n={async_job_id:t},r=await v(n);return"SUCCESS"===r.status&&"in_progress"===r.output[".tag"]?{status:"RETRY"}:(S({type:i.SharingNotificationType.COMPLETED,message:cn(p,a.getName(e))}),{status:"COMPLETE",output:r})}),{interval:1e3,timeout:18e4})).status&&(S({type:i.SharingNotificationType.COMPLETED,message:cn(p,a.getName(e))}),b("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_SUCCESS",{response:r}),await m({".tag":"file_folder",path:a.isNewApiMetadata(e)?"":null!==(s=e.path_lower)&&void 0!==s?s:"",name:a.getName(e)}))}}else"ERROR"===r.status?b("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_ERROR",{response:r}):(S({type:i.SharingNotificationType.FAILURE,message:dn(p)}),b("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_FATAL",{response:r}))}f(),await Promise.all([d.invalidateListSharedLinks(t),a.invalidateObjectMembers(t),i.invalidateSharingObjectMetadata(t),i.invalidateNewApiObjectMetadata(t)])}),[c,k,S,p,e,t,u,b,y,h,m,v,f]);return E.useEffect((()=>{g(s)}),[s,g]),E.createElement(a.Modal,{open:s,isCentered:!0,withCloseButton:M?_n(p):void 0,onRequestClose:l,overlayStyles:k===r.Platforms.DESKTOP?{maxHeight:"331px"}:void 0},E.createElement(a.Modal.Header,{"data-sharing-sdk":"1",hasBottomSpacing:"title-standard"},E.createElement(a.Modal.Title,null,((e,t)=>e.formatMessage({id:"C6YnHl",defaultMessage:"Unshare {content_name}?"},{content_name:i.Emstring.em_snippet(t,a.SNIPPET_SIZES.FILENAME)}))(p,o))),E.createElement(a.Modal.Body,{"data-sharing-sdk":"1",hasVerticalSpacing:!1},T,a.getIsSharedFolder(e)&&E.createElement("div",{style:{display:"flex",alignItems:"center",marginTop:"24px"}},E.createElement(a.Checkbox,{checked:w,onChange:()=>_(!w),style:{marginRight:"8px"}}),(e=>e.formatMessage({id:"N3y1Hr",defaultMessage:"Let removed members keep a copy of this shared folder."}))(p))),E.createElement(a.Modal.Footer,{"data-sharing-sdk":"1"},E.createElement(a.Button,{variant:"opacity",onClick:l,autoFocus:!0},p.formatMessage({id:"nSbXzb",defaultMessage:"Cancel"})),E.createElement(a.Button,{variant:"primary",onClick:()=>D(w)},p.formatMessage({id:"obuuKH",defaultMessage:"Unshare"}))))};Gi.displayName="UnshareConfirmationModal";const Vi=e=>m.useInitStore(e,(e=>{const t=m.proxy((()=>e.get().accessLevel)),n=m.proxy((()=>e.get().accountMetadata)),r=m.proxy((()=>e.get().compatLinkMetadata)),s=m.proxy((()=>e.get().compatLinkPolicy)),l=m.proxy((()=>e.get().linkMetadata)),c=m.proxy((()=>e.get().objectIdentifier)),d=m.proxy((()=>e.get().objectMetadata)),u=m.proxy((()=>e.get().originalCompatLinkPolicy)),g=m.proxy((()=>e.get().sharingPrefs)),f=m.proxy((()=>e.get().isSavable)),p=m.proxy((()=>e.get().isSaving)),h=m.proxy((()=>{const e=d.get(),r=t.get();return a.getCanCreateLink(e,r,n.get().is_tmr_member)})),y=m.proxy((()=>a.getCanDeleteLink(l.get()))),v=m.proxy((()=>{const e=r.get(),t=u.get();return null!==e&&null!==t&&((e,t)=>o.isReadOnlyPolicy(t,e.link_permissions))(e,t)})),b=m.proxy((()=>{const e=r.get();return null===e?null:(t=e,a.isRighteousLink(t.link_permissions));var t})),w=m.proxy((()=>n.get().is_family_user||!1)),_=m.proxy((()=>i.getIsTeam(n.get()))),k=m.proxy((()=>{var e;return null!==(e=n.get().is_freemium_team_member)&&void 0!==e&&e})),E=m.store(!1),M=m.store(!1),S=m.store(!1),T=m.store(!1),D=m.store(!1),C=m.proxy((()=>{const e=d.get(),t=l.get(),n=a.getIsFolder(e),r=a.getIsSharedFolder(e),i=a.getIsCollection(e);return a.getCanUnshareObject(e)&&(!n||r)&&null!==t&&!i}));return{$accessLevel:t,$accountMetadata:n,$compatLinkPolicy:s,$compatLinkMetadata:r,$linkMetadata:l,$objectIdentifier:c,$objectMetadata:d,$originalCompatLinkPolicy:u,$sharingPrefs:g,$isSavable:f,$isSaving:p,$canCreateLink:h,$canDeleteLink:y,$isFamilyUser:w,$isReadOnlyPolicy:v,$isRighteousLink:b,$isTeamUser:_,$isFreemiumTeamMember:k,$isConfirmationModalOpen:E,$isCreatingLink:M,$isDeletingLink:S,$isDowngradeBannerVisible:T,$shouldShowUnshare:C,$isUnshareConfirmationModalOpen:D,$props:e}})),zi=({store:e})=>{const t=n.useIntl(),r=m.useStore(e.$isSavable),i=m.useStore(e.$isSaving),o=m.useStore(e.$isReadOnlyPolicy),s=m.useStore(e.$shouldShowUnshare),l=m.useStore(e.$objectMetadata),c=(e=>E.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!0)}),[e]))(e),d=(e=>E.useCallback((()=>{e.$props.get().onSave()}),[e]))(e),u=(e=>E.useCallback((()=>{e.$props.get().onCancel()}),[e]))(e);return E.createElement(E.Fragment,null,s?E.createElement(E.Fragment,null,E.createElement(a.Button,{variant:"transparent",onClick:c,"data-uxa-log":"sm24_link_settings_unshare_button"},un(t,l)),E.createElement("div",{style:{flex:1}})):null,E.createElement(a.Button,{variant:"opacity",onClick:u,"data-uxa-log":"sm24_link_settings_cancel_button"},Na(t)),E.createElement(a.Button,{variant:"primary",onClick:d,disabled:i||!r||o,"data-uxa-log":"sm24_link_settings_save_button"},i?Aa(t):Oa(t)))};zi.displayName="LinkSettingsActions";const Qi=({store:e})=>{const t=m.useStore(e.$objectMetadata),n=m.useStore(e.$objectIdentifier),r=m.useStore(e.$isUnshareConfirmationModalOpen),i=(e=>E.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!1)}),[e]))(e),o=(e=>E.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!1)}),[e]))(e),s=(e=>E.useCallback((()=>{e.$props.get().onUnshareCompleted()}),[e]))(e),l=(e=>E.useCallback((()=>{e.$props.get().onClose()}),[e]))(e),c=(e=>E.useCallback((async t=>{await e.$props.get().onObjectIdentifierChanged(t)}),[e]))(e),d=(e=>E.useCallback((t=>{e.$props.get().onConfirmationModalShownChange(t)}),[e]))(e);return E.createElement(Gi,{objectMetadata:t,objectIdentifier:n,contentName:a.getName(t),onConfirm:o,onCancel:i,open:r,onUnshareCompleted:s,onClose:l,onObjectIdentifierChanged:c,onConfirmationModalShownChange:d})};Qi.displayName="UnshareConfirmationModalWrapper";const Ki=({store:e})=>{const t=n.useIntl(),o="editor"===m.useStore(e.$accessLevel)[".tag"]?(e=>e.formatMessage({id:"0daJiL",defaultMessage:"There isnt a link for editing."}))(t):(e=>e.formatMessage({id:"TEAu9g",defaultMessage:"There isnt a link for viewing."}))(t),s=m.useStore(e.$canCreateLink),l=(e=>{const t=r.useEndpoint(Ui),o=r.useLogger(),s=n.useIntl(),l=r.usePlatform()===r.Platforms.METASERVER,c=i.useShowSharingNotification();return E.useCallback((async()=>{const n=e.$accessLevel.get(),r=e.$linkMetadata.get(),d=e.$isCreatingLink.get(),u=e.$isDeletingLink.get();if(null!==r||d||u)return;o("SHARE_MODAL_SETTINGS__CREATE_LINK__CLICK",null);const m=async()=>{e.$isCreatingLink.set(!0),c({type:i.SharingNotificationType.IN_PROGRESS,message:Xa(s,n)}),o("SHARE_MODAL_SETTINGS__CREATE_LINK_API_START",null);const r=e.$objectIdentifier.get(),l=a.getContentIdOrPathFromObjectIdentifier(r),d=await t({path:l,settings:{access:n}});return await e.$props.get().onRefreshLinksMetadata(),"ERROR"===d.status?(e.$isCreatingLink.set(!1),o("SHARE_MODAL_SETTINGS__CREATE_LINK_API_ERROR",{response:d}),"shared_link_already_exists"===d.error[".tag"]?void a.close():"access_denied"===d.error[".tag"]?void c({type:i.SharingNotificationType.FAILURE,message:Ja(s,"file"===r[".tag"])}):void c({type:i.SharingNotificationType.FAILURE,message:Za(s)})):"FATAL"===d.status?(e.$isCreatingLink.set(!1),o("SHARE_MODAL_SETTINGS__CREATE_LINK_API_FATAL",{response:d}),void c({type:i.SharingNotificationType.FAILURE,message:Za(s)})):(o("SHARE_MODAL_SETTINGS__CREATE_LINK_API_SUCCESS",{response:d}),c({type:i.SharingNotificationType.COMPLETED,message:en(s,n)}),void e.$isCreatingLink.set(!1))};l?w.showOQModalOrContinue({action:"share_link",continueCallback:m,abortCallback:()=>{e.$props.get().onClose()}}):await m()}),[e,t,s,o,l])})(e);return s?E.createElement("span",null,o," ",E.createElement(a.Link,{href:"#",onClick:l,"aria-label":Ra(t),display:"inline"},Ra(t))):E.createElement("span",null,(e=>e.formatMessage({id:"ZMB2hv",defaultMessage:"Link not available."}))(t))};Ki.displayName="CreateLinkSection";const Xi=({store:e})=>{const t=n.useIntl();return m.useStore(e.$isCreatingLink)?E.createElement("div",{style:{fontSize:"12px",textAlign:"center"}},(e=>e.formatMessage({id:"6WeHGE",defaultMessage:"Creating link"}))(t)," ",E.createElement("span",{style:{display:"inline-block"}},E.createElement(Ni,null))):E.createElement("div",{style:{fontSize:"12px",paddingTop:"20px",paddingBottom:"20px",lineHeight:"22px",textAlign:"center"}},E.createElement(Ki,{store:e}))};Xi.displayName="EmptyLinkPolicy";const Ji=({store:e})=>{const t=n.useIntl(),o=m.useStore(e.$isConfirmationModalOpen),s=(e=>E.useCallback((()=>{e.$isConfirmationModalOpen.set(!1)}),[e]))(e),l=m.useStore(e.$objectMetadata),c=(e=>{const t=n.useIntl(),o=r.useEndpoint(Ri),s=r.useLogger(),l=r.usePlatform(),c=i.useShowSharingNotification(),d=E.useCallback((()=>{e.$props.get().onOpenManageAccess()}),[e]);return E.useCallback((async()=>{const n=e.$linkMetadata.get(),u=e.$objectMetadata.get(),g=e.$isDeletingLink.get(),f=l===r.Platforms.DESKTOP;if(g||null===n)return;m.batch((()=>{e.$isConfirmationModalOpen.set(!1),e.$isDeletingLink.set(!0)})),c({type:i.SharingNotificationType.IN_PROGRESS,message:Va(t,a.getName(u),f)}),s("SHARE_MODAL_SETTINGS__DELETE_LINK_API_START",null);const p=await o({url:n.url});await e.$props.get().onRefreshLinksMetadata(),"SUCCESS"===p.status?(s("SHARE_MODAL_SETTINGS__DELETE_LINK_API_SUCCESS",{response:p}),c({type:i.SharingNotificationType.COMPLETED_WITH_ACTION,message:za(t,a.getName(u),f),actionMessage:Ka(t),actionOnClick:d})):("ERROR"===p.status?s("SHARE_MODAL_SETTINGS__DELETE_LINK_API_ERROR",{response:p}):s("SHARE_MODAL_SETTINGS__DELETE_LINK_API_FATAL",{response:p}),c({type:i.SharingNotificationType.FAILURE,message:Qa(t)})),e.$isDeletingLink.set(!1)}),[e,o,s,t,l,d,c])})(e),d=r.usePlatform(),u=d!==r.Platforms.DESKTOP;return E.useEffect((()=>{e.$props.get().onConfirmationModalShownChange(o)}),[o,e.$props]),E.createElement(a.Modal,{open:o,isCentered:!0,withCloseButton:u?_n(t):void 0,onRequestClose:s,"data-testid":"delete-confirmation-modal",overlayStyles:d===r.Platforms.DESKTOP?{maxHeight:"331px"}:void 0},E.createElement(a.Modal.Header,{"data-sharing-sdk":"1",hasBottomSpacing:"title-standard"},E.createElement(a.Modal.Title,null,t.formatMessage({id:"hAG2ph",defaultMessage:"Delete link to {object_name}?"},{object_name:i.Emstring.em_snippet(a.getName(l),a.SNIPPET_SIZES.FILENAME)}))),E.createElement(a.Modal.Body,{"data-sharing-sdk":"1",hasVerticalSpacing:!1},(e=>e.formatMessage({id:"poEviS",defaultMessage:"If you want to further restrict access, check the list of people who still have access."}))(t)),E.createElement(a.Modal.Footer,{"data-sharing-sdk":"1"},E.createElement(a.Button,{variant:"opacity",onClick:s,autoFocus:!0},Na(t)),E.createElement(a.Button,{variant:"primary",onClick:c},(e=>e.formatMessage({id:"2xr+8c",defaultMessage:"Delete"}))(t))))};Ji.displayName="DeleteLinkConfirmationModal";const Zi=({store:e})=>{const t=n.useIntl(),i=(e=>{const t=m.useStore(e.$accountMetadata),a=m.useStore(e.$isFamilyUser),n=m.useStore(e.$isTeamUser);return t.can_use_extended_sharing_controls||a?null:n?"/team/upgrade":t.is_paid?"/buy/professional?_tk=sg_pro_bundle_header":"/pro/try?_tk=sg_pro_bundle_header"})(e),o=((e,t)=>{const a=r.useLogger(),n=r.useOpenUrl();return E.useCallback((()=>{null!==t&&(n(t),a("SHARE_MODAL_SETTINGS__UPSELL_LINK__CLICKED",{href:t}))}),[t,a,n])})(0,i),s=m.useStore(e.$isTeamUser),l=m.useStore(e.$sharingPrefs),c=m.useStore(e.$isFreemiumTeamMember),d=m.useStore(e.$compatLinkMetadata),u=m.useStore(e.$compatLinkPolicy),g=m.useStore(e.$isRighteousLink);if(((e,t)=>{const a=r.useLogger();E.useEffect((()=>{null!==t&&a("SHARE_MODAL_SETTINGS__UPSELL_LINK__EXPOSED",{href:t})}),[t,a])})(0,i),r.usePlatform()===r.Platforms.MS_TEAMS_MOBILE)return null;if(null===i&&!c)return null;if(null===d||null===u||null===g)return null;const f=c?(e=>e.formatMessage({id:"Ujf2E1",defaultMessage:"These settings arent available in your current plan."}))(t):E.createElement(a.Link,{onClick:o,href:i,target:"_blank",rel:"noopener noreferrer",display:"inline"},((e,t,a)=>{const r=t?a.product_standard:a.product_professional;if("string"==typeof r){const t=n.defineMessage({id:"gh2r5j",defaultMessage:"Upgrade to {product_name} to enable all link settings."});return e.formatMessage(t,{product_name:r})}return e.formatMessage({id:"QYqjgv",defaultMessage:"Upgrade to enable all link settings."})})(t,s,l));return E.createElement("div",{style:{margin:"24px 0px",overflow:"hidden"}},E.createElement(a.Banner,{className:"_bannerUpsell_9s35h_17",withLeftIcon:E.createElement(a.UIIcon,{src:_.UpsellLine})},E.createElement(a.Banner.Message,null,E.createElement(a.Text,{size:"small",isBold:!0},f))))};Zi.displayName="LinkSettingsUpsellBanner";const eo=({store:e})=>{const t=n.useIntl(),r=m.useStore(e.$compatLinkMetadata),i=m.useStore(e.$compatLinkPolicy),o=(e=>E.useCallback(((t,n)=>{const r=e.$compatLinkPolicy.get();n.audience&&(null==r?void 0:r.audience)&&a.isLinkAudienceLowerAccess(n.audience,null==r?void 0:r.audience)&&e.$isDowngradeBannerVisible.set(!0),e.$props.get().onCompatLinkPolicyChange(n)}),[e]))(e),s=(e=>E.useCallback((t=>{e.$props.get().onLinkClicked(t)}),[e]))(e),l=m.useStore(e.$isReadOnlyPolicy),c=m.useStore(e.$isRighteousLink),d=a.getIsPaperDoc(e.$objectMetadata.get());return null===r||null===i||null===c?E.createElement(Xi,{store:e}):E.createElement(Ii,{isPaperDoc:d,linkMetadata:r,linkPolicy:i,onPolicyUpdate:o,intl:t,onLinkClicked:s,readOnlyPolicy:l,"data-testid":"righteous-link-policy"})};eo.displayName="LinkSettingsPolicies";const to=({store:e})=>{const t=n.useIntl(),a=m.useStore(e.$isDowngradeBannerVisible),r=(e=>E.useCallback((()=>{e.$isDowngradeBannerVisible.set(!1)}),[e]))(e),i=(e=>E.useCallback((()=>{e.$props.get().onOpenManageAccess()}),[e]))(e);return a?E.createElement("div",{style:{marginTop:"16px"}},E.createElement(Oi,{header:tn(t),subheader:an(t),outlineButtonLabel:nn(t),transparentButtonLabel:rn(t),onClickOutlineButton:r,onClickCloseButton:r,onClickTransparentButton:i,showCloseButton:!0})):null};to.displayName="DowngradeAudienceBanner";const ao=({store:e})=>{const t=n.useIntl(),r=m.useStore(e.$compatLinkPolicy),i=m.useStore(e.$originalCompatLinkPolicy),s=m.useStore(e.$compatLinkMetadata);if(null===s||null===r||null===i)return null;const l=o.getLinkControlPolicyWarningText(i,r,s.link_permissions,t);return l?E.createElement("div",{style:{margin:"24px 0px",overflow:"hidden"}},E.createElement(a.Banner,{className:"_bannerForWarning_9s35h_36"},E.createElement(a.Banner.Message,null,l))):null};ao.displayName="LinkControlPolicyWarning";const no=({store:e})=>{const t=m.useStore(e.$linkMetadata),o=m.useStore(e.$isSavable),{onClick:s,copySuccess:l}=(e=>{const[t,n]=E.useState(!1),o=r.useLogger(),s=Hi(),l=r.usePlatform()===r.Platforms.METASERVER,c=m.useStore(e.$accessLevel),d=i.useShowSharingNotification(),u=E.useCallback((()=>{const t=e.$linkMetadata.get(),r=e.$compatLinkMetadata.get();t&&(n(!0),d({type:i.SharingNotificationType.COMPLETED,message:a.formatSuccessMessageForUrl(t.url,c[".tag"])}),a.trackUserLeapEvent(a.SharingUserLeapEvent.SHARE_LINK_COPY_SUCCESS,a.SHARE_ACTION_ORIGIN_TYPE.SHARE_LINK_MODAL),s.select(Fi).emit({requestedAccessLevel:c[".tag"],createdNewLink:!1,hasCachedLink:!0,linkMetadata:null!=r?r:void 0}),o("SHARE_MODAL_SETTINGS__COPY_LINK__COPY_SUCCESS",{linkMetadata:t}),setTimeout((()=>{n(!1)}),5e3))}),[e,s,o,c,d]),g=E.useCallback((()=>{const t=e.$linkMetadata.get(),n=e.$compatLinkMetadata.get();t&&(d({type:i.SharingNotificationType.FAILURE,message:a.formatFailErrorMessageForUrl(t.url)}),s.select(Bi).emit({requestedAccessLevel:c[".tag"],exception:a.CopyLinkException.FAILED_COPY_TO_CLIPBOARD,hasCachedLink:!0,linkMetadata:null!=n?n:void 0}))}),[e.$linkMetadata,e.$compatLinkMetadata,d,s,c]);return{onClick:E.useCallback((t=>{t.preventDefault();const a=e.$linkMetadata.get();if(!a)return;const n=()=>{const t=e.$compatLinkMetadata.get();s.select($i).emit({requestedAccessLevel:c[".tag"],hasCachedLink:!0,linkMetadata:null!=t?t:void 0}),navigator.clipboard.writeText(a.url).then(u,g)};l?w.showOQModalOrContinue({action:"share_link",continueCallback:n,abortCallback:()=>{e.$props.get().onClose()}}):n()}),[e,s,c,u,g,l]),copySuccess:t}})(e),c=n.useIntl(),d=g.is_mobile_or_tablet();if(!t)return null;if(l)return E.createElement("span",{style:{display:"flex",alignItems:"center"}},E.createElement(a.Text,{variant:"label",size:"small",isBold:!0},c.formatMessage({id:"KiS7vb",defaultMessage:"Link copied!"})));const u=E.createElement(a.Text,{size:"small"},E.createElement(a.Link,{href:"#",onClick:s,style:{fontSize:"12px",display:"flex",alignItems:"center",gap:"4px",margin:d?"8px":"0px"},"aria-label":c.formatMessage({id:"D/HxHm",defaultMessage:"Copy link"}),hasNoUnderline:!0,isBold:!0,display:"inline"},E.createElement(a.UIIcon,{src:a.LinkLine,size:"medium","aria-hidden":!0}),d?void 0:c.formatMessage({id:"D/HxHm",defaultMessage:"Copy link"})));return o?E.createElement(a.Tooltip,{title:c.formatMessage({id:"Nwdnda",defaultMessage:"Save your changes to copy a link with these settings."}),placement:"bottom"},E.createElement("span",{style:{fontSize:"12px"}},u)):u};no.displayName="CopyLinkAction";const ro=({store:e})=>{const t=m.useStore(e.$linkMetadata),r=(e=>E.useCallback((()=>{e.$isConfirmationModalOpen.set(!0),e.$props.get().onConfirmationModalShownChange(!0)}),[e]))(e),i=n.useIntl(),o=e.$canDeleteLink.get(),s=g.is_mobile_or_tablet();return t&&o?E.createElement(a.Button,{variant:"transparent",style:{margin:s?"8px":"0px",display:"flex",alignItems:"center",gap:"4px"},size:"small",onClick:r,"aria-label":Ua(i),"data-uxa-log":"sm24_link_settings_delete_link_button",hasUnderline:!s},s?E.createElement(a.UIIcon,{src:a.DeleteLine,size:"medium","aria-hidden":!0,color:"var(--dig-color__alert__base)"}):Ua(i)):null};ro.displayName="DeleteLinkAction";const io=({store:e})=>{const t=n.useIntl(),r=m.useStore(e.$accessLevel),i=m.useStore(e.$linkMetadata),o=g.is_mobile_or_tablet();return E.createElement("div",{style:{marginTop:"2em",marginBottom:"24px"}},E.createElement(f.CardNamespace,{hasBorders:!1},i?E.createElement(a.Banner,{className:"_bannerWithRightActions_9s35h_4",withLeftIcon:"editor"===r[".tag"]?E.createElement(a.UIIcon,{src:a.EditLine,"aria-label":"Edit link icon","aria-hidden":!0}):E.createElement(a.UIIcon,{src:a.ShowLine,"aria-label":"View link icon","aria-hidden":!0})},E.createElement(a.Banner.Message,{className:"_bannerMessage_9s35h_24"},E.createElement(a.Box,{display:"flex",alignItems:"center",style:{gap:"8px"}},E.createElement(a.Text,{size:"small",isBold:!0},"editor"===r[".tag"]?(e=>e.formatMessage({id:"s5wejr",defaultMessage:"People with this link can edit"}))(t):(e=>e.formatMessage({id:"OrDD0F",defaultMessage:"People with this link can view"}))(t)),o?void 0:E.createElement(no,{store:e}))),E.createElement(a.Banner.Actions,{className:"_bannerActions_9s35h_29"},o?E.createElement(no,{store:e}):void 0,E.createElement(ro,{store:e}))):void 0,E.createElement(eo,{store:e})))};io.displayName="LinkSettingsBody";const oo=e=>{const t=Vi(e),n=r.usePlatform()===r.Platforms.DESKTOP;return E.createElement(E.Fragment,null,E.createElement(a.Modal.Body,null,E.createElement("div",{style:n?{minHeight:"130px"}:void 0},E.createElement(Zi,{store:t}),E.createElement(ao,{store:t}),E.createElement(to,{store:t}),E.createElement(io,{store:t}),E.createElement(Ji,{store:t}),E.createElement(Qi,{store:t}))),E.createElement(a.Modal.Footer,null,E.createElement(zi,{store:t})))};oo.displayName="LinkSettings";const so=r.define({name:"sharing.updateFilePolicy"},(e=>t=>r.handler(e.sharingAlphaUpdateFilePolicy(t)))),lo=r.define({name:"sharing.updateFolderPolicy"},(e=>t=>r.handler(e.sharingAlphaUpdateFolderPolicyV2(t)))),co=(e,t)=>t?e.formatMessage({id:"/YIKIw",defaultMessage:"Show who can view to team members and people who can edit."}):e.formatMessage({id:"gwtTsq",defaultMessage:"Show who can view to people who can edit."}),uo=e=>({getPolicyDict(t,n){switch(t){case Mn:return{title:e.formatMessage({id:"sqWIHr",defaultMessage:"Who can be added as a member"}),optionsDict:{anyone:{label:e.formatMessage({id:"fCoK4r",defaultMessage:"Anyone"})},team_and_approved:{label:e.formatMessage({id:"iUy29B",defaultMessage:"Team + approved"})},team:{label:e.formatMessage({id:"7OP28A",defaultMessage:"Only team members"})}},type:In};case Sn:return{title:e.formatMessage({id:"FNEmDZ",defaultMessage:"Viewer info"}),description:co(e,a.getOwnerTeam(n)),optionsDict:{enabled:{label:e.formatMessage({id:"2QJJN/",defaultMessage:"On"}),value:!0},disabled:{label:e.formatMessage({id:"bxF53X",defaultMessage:"Off"}),value:!1}},type:Nn};case xn:return{title:e.formatMessage({id:"eX+ViB",defaultMessage:"Manage who can add people"}),optionsDict:{editors:{label:a.getIsTeamFolderTree(n)||a.getIsTeamMemberFolder(n)?e.formatMessage({id:"FSMn0f",defaultMessage:"Team members who can edit"}):e.formatMessage({id:"Y/OGdX",defaultMessage:"Folder members"}),description:a.getIsTeamFolderTree(n)||a.getIsTeamMemberFolder(n)?e.formatMessage({id:"uIRufc",defaultMessage:"Team members with edit access can add people."}):e.formatMessage({id:"fFxXXV",defaultMessage:"Members with edit access can add people."})},owner:{label:a.getIsTeamFolderTree(n)?e.formatMessage({id:"WFlZYD",defaultMessage:"Only Team Admins"}):e.formatMessage({id:"S2dbUj",defaultMessage:"Only the owner"}),description:a.getIsTeamFolderTree(n)?e.formatMessage({id:"SQ8IGZ",defaultMessage:"Only Team Admins."}):e.formatMessage({id:"FXj04X",defaultMessage:"Only the owner can add people."})}},type:In};case Tn:if(!a.getOwnerTeam(n))throw new Error("Policy only valid for teams");return"team"===a.getLinkAudiencePolicy(n)?((e,t)=>{if(!t)throw new Error("Policy only valid for teams");return{title:e.formatMessage({id:"2/keN+",defaultMessage:"Link restrictions"}),description:e.formatMessage({id:"hQVplF",defaultMessage:"Limits who can access this folder via a link."}),optionsDict:{anyone:{label:e.formatMessage({id:"M2hohn",defaultMessage:"No restrictions"}),description:e.formatMessage({id:"VWGUB4",defaultMessage:"Show all access options for links."})},members:{label:e.formatMessage({id:"fJsIEz",defaultMessage:"Invite-only"}),description:e.formatMessage({id:"w/Er4c",defaultMessage:"Show Only invited members only."})},team:{label:e.formatMessage({id:"BhDP0/",defaultMessage:"Team only"}),description:e.formatMessage({id:"p/lywD",defaultMessage:"Show Only people at {team_name}."},{team_name:i.Emstring.em_snippet(t.name,12)})}},type:In}})(e,a.getOwnerTeam(n)):{title:e.formatMessage({id:"rAsVLm",defaultMessage:"Link restrictions"}),description:e.formatMessage({id:"dto0Cn",defaultMessage:"Prevent non-members from accessing this folder by link."}),optionsDict:{members:{label:e.formatMessage({id:"Vz90Vu",defaultMessage:"On"}),value:!0},anyone:{label:e.formatMessage({id:"lcDiuF",defaultMessage:"Off"}),value:!1}},type:Nn};default:throw new Error("Policy name not found")}}}),mo=({intl:e,currentPolicy:t,resolvedMemberPolicy:a,onPolicyChange:n,disabled:r,objectMetadata:i})=>{const o=uo(e).getPolicyDict(Tn,i),s=o.optionsDict,l="team"===a?E.createElement(An,{currentValue:t,optionsDict:s,valuesList:Object.keys(s),onValueSelected:e=>{n(e)},disabled:r,ariaLabel:o.title}):E.createElement($n,{currentValue:t,optionsDict:s,onOptionChange:e=>{n(e?"members":"anyone")},disabled:r,ariaLabel:o.title});return E.createElement(Un,{policyName:Tn,policyDict:o,selector:l})};mo.displayName="SettingsLinkAudiencePolicy";const go=({intl:e,currentPolicy:t,onPolicyChange:n,objectMetadata:r,disabled:i})=>{let o=uo(e).getPolicyDict(Mn,r);const s=a.getOwnerTeamPolicies(r),l=null==s?void 0:s.shared_folder_member_policy,c=["anyone","team_and_approved","team"];o={...o,optionsDict:Object.fromEntries(Object.entries(o.optionsDict).filter((([e])=>(e=>{if(l){const t=l[".tag"];return c.indexOf(e)>=c.indexOf(t)}return!1})(e)&&(e=>"team_and_approved"!==e||"team_and_approved"===t||"team_and_approved"===(null==l?void 0:l[".tag"]))(e))))};let d=t;l&&l[".tag"]!==t&&c.indexOf(l[".tag"])>c.indexOf(t)&&(d=l[".tag"]);const u=1===Object.keys(o.optionsDict).length,m=i||u,g=E.createElement(An,{currentValue:d,optionsDict:o.optionsDict,valuesList:Object.keys(o.optionsDict),onValueSelected:e=>{const t=a.create(e);n(t)},disabled:m,ariaLabel:o.title});return E.createElement(Un,{policyName:Mn,policyDict:o,selector:g})};go.displayName="SettingsMemberPolicy";const fo=({intl:e,currentPolicy:t,onPolicyChange:n,objectMetadata:r,disabled:i})=>{const o=uo(e).getPolicyDict(xn,r),s=E.createElement(An,{currentValue:t,optionsDict:o.optionsDict,valuesList:Object.keys(o.optionsDict),onValueSelected:e=>{const t=a.create(e);n(t)},disabled:i,ariaLabel:o.title});return E.createElement(Un,{policyName:xn,policyDict:o,selector:s})};fo.displayName="SettingsACLUpdatePolicy";const po=({intl:e,isPolicyEnabled:t,canDisableViewerInfo:a,canEnableViewerInfo:n,onPolicyChange:r,objectMetadata:i})=>{const o=uo(e).getPolicyDict(Sn,i),s=t?"enabled":"disabled",l=t?a:n,c=E.createElement($n,{currentValue:s,optionsDict:o.optionsDict,onOptionChange:e=>{r(e)},disabled:!l,ariaLabel:o.title});return E.createElement(Un,{policyName:Sn,policyDict:o,selector:c})};po.displayName="SettingsViewerInfo";a.injectInternalStyle("/static/metaserver/static/js/sharing/sharing-sdk/legos/settings-page/internals/object-settings/object-settings.module.out-vfl-QU6B_.css",(e=>"._banner_wevur_4{align-items:center;background-color:var(--dig-color__opacity__surface);gap:var(--dig-spacing__micro__medium)}"));const ho="_banner_wevur_4",yo=({store:e})=>{const{msg:t,bannerType:r}=(e=>{const t=n.useIntl(),r=m.useStore(e.$canChangeOptions),i=m.useStore(e.$viewerInfoPolicyEnabled),o=m.useStore(e.$objectMetadata);return E.useMemo((()=>{if(r)return{msg:Ga(t),bannerType:"default"};let e;if(i){const t=a.getPermissionInfo(o,a.DISABLE_VIEWER_INFO_TAG);e=t?t.reason:""}else{const t=a.getPermissionInfo(o,a.ENABLE_VIEWER_INFO_TAG);e=t?t.reason:""}switch(e){case"restricted_by_parent_folder":return{msg:Wa(t),bannerType:"error"};case"restricted_by_team":return{msg:Ya(t),bannerType:"error"};default:return{msg:qa(t),bannerType:"error"}}}),[r,i,o,t])})(e);return E.createElement("div",{style:{margin:"24px 0px",overflow:"hidden"}},E.createElement(a.Banner,{className:ho,"data-testid":"file-settings-banner",withLeftIcon:"error"===r?E.createElement(a.UIIcon,{src:a.FailLine}):E.createElement(a.UIIcon,{src:a.InfoLine})},E.createElement(a.Banner.Message,null,E.createElement(a.Text,{size:"small",isBold:!0},t))))};yo.displayName="FileSettingsBanner";const vo=({store:e})=>{const t=(e=>{const t=n.useIntl(),o=m.useStore(e.$canChangeOptions),s=m.useStore(e.$objectMetadata),l=m.useStore(e.$accountMetadata),c=r.useOpenUrl(),{isNonUserRelativeContext:d}=a.useSharingApiContext();return E.useMemo((()=>{const e=l.team_id===a.getOwnerTeamId(s);return d&&a.getIsInsideTeamFolderTree(s)?{msg:mn(t,a.getName(s))}:a.getIsTeamSharedFolder(s)&&e?i.getIsTeamAdmin(l)?{msg:gn(t,a.getName(s)),actionMsg:fn(t,c)}:{msg:pn(t,a.getName(s)),actionMsg:hn(t,c)}:a.getIsInsideTeamFolderTree(s)?i.getIsTeamAdmin(l)?{msg:mn(t,a.getName(s))}:e?{msg:pn(t,a.getName(s)),actionMsg:hn(t,c)}:{msg:bn(t,a.getName(s))}:o?d&&!a.getIsInsideTeamFolderTree(s)?{msg:yn(t)}:void 0:{msg:bn(t,a.getName(s))}}),[l,s,d,o,t,c])})(e),o=(e=>{const t=n.useIntl(),r=m.useStore(e.$canChangeOptions),o=m.useStore(e.$objectMetadata),s=m.useStore(e.$accountMetadata),l=E.useMemo((()=>i.convertAccountMetadataToUser(s)),[s]);return E.useMemo((()=>{if(r&&!l.is_team_admin)return a.getIsInsideTeamFolderTree(o)?{msg:wn(t),bannerType:"error"}:a.getIsOwner(o)?{msg:vn(t,a.getName(o))}:{msg:bn(t,a.getName(o))}}),[r,l.is_team_admin,o,t])})(e);return E.createElement("div",{style:{margin:"24px 0px",borderRadius:"12px",overflow:"hidden"}},t&&E.createElement(a.Banner,{className:ho,"data-testid":"folder-settings-banner",withLeftIcon:E.createElement(a.UIIcon,{src:a.InfoLine})},E.createElement(a.Banner.Message,null,E.createElement(a.Text,{size:"small",isBold:!0},t.msg)),E.createElement(a.Banner.Actions,null,t.actionMsg)),o&&E.createElement(a.Banner,{className:ho,"data-testid":"folder-settings-banner",withLeftIcon:"error"===(null==o?void 0:o.bannerType)?E.createElement(a.UIIcon,{src:a.FailLine}):E.createElement(a.UIIcon,{src:a.InfoLine})},E.createElement(a.Banner.Message,null,E.createElement(a.Text,{size:"small",isBold:!0},o.msg))))};vo.displayName="FolderSettingsBanner";const bo=e=>E.useCallback((t=>{e.$viewerInfoPolicyEnabledUpdated.set(t)}),[e]),wo=({store:e})=>{const t=n.useIntl(),r=m.useStore(e.$objectMetadata),i=m.useStore(e.$viewerInfoPolicyEnabledUpdated),o=m.useStore(e.$memberPolicyUpdated),s=m.useStore(e.$aclUpdatePolicyUpdated),l=m.useStore(e.$linkAudiencePolicyUpdated),c=m.useStore(e.$resolvedMemberPolicy),d=m.useStore(e.$canDisableViewerInfo),u=m.useStore(e.$canEnableViewerInfo),g=m.useStore(e.$canChangeOptions),f="members"===m.useStore(e.$blanketLinkRestrictionsPolicy),p=m.useStore(e.$isFreemiumTeamMember),h=bo(e),y=(e=>E.useCallback((t=>{e.$memberPolicyUpdated.set(t[".tag"])}),[e]))(e),v=(e=>E.useCallback((t=>{e.$aclUpdatePolicyUpdated.set(t[".tag"])}),[e]))(e),b=(e=>E.useCallback((t=>{e.$linkAudiencePolicyUpdated.set(t)}),[e]))(e);return E.createElement("div",{style:{marginTop:"24px",marginBottom:"24px"}},a.getOwnerTeam(r)&&E.createElement(go,{intl:t,currentPolicy:o,objectMetadata:r,onPolicyChange:y,disabled:!g}),E.createElement(fo,{intl:t,currentPolicy:s,objectMetadata:r,onPolicyChange:v,disabled:!g}),a.getOwnerTeam(r)&&E.createElement(mo,{intl:t,currentPolicy:l,resolvedMemberPolicy:c,onPolicyChange:b,disabled:!g||f||p,objectMetadata:r}),E.createElement(po,{intl:t,isPolicyEnabled:i,canDisableViewerInfo:d,canEnableViewerInfo:u,onPolicyChange:h,objectMetadata:r}))};wo.displayName="FolderSettingsPolicies";const _o=({store:e})=>{const t=n.useIntl(),a=m.useStore(e.$objectMetadata),r=m.useStore(e.$viewerInfoPolicyEnabledUpdated),i=m.useStore(e.$canDisableViewerInfo),o=m.useStore(e.$canEnableViewerInfo),s=bo(e);return E.createElement("div",{style:{marginTop:"24px",marginBottom:"24px"}},E.createElement(po,{intl:t,isPolicyEnabled:r,canDisableViewerInfo:i,canEnableViewerInfo:o,objectMetadata:a,onPolicyChange:s}))};_o.displayName="FileSettingsPolicies";const ko=e=>E.useCallback((()=>e.$props.get().onRefreshModal()),[e]),Eo=({store:e})=>{const t=n.useIntl(),o=(e=>E.useCallback((()=>{e.$props.get().onCancelled()}),[e]))(e),s=m.useStore(e.$isSubmitting),l=m.useStore(e.$hasAnyPolicyChanged),c=m.useStore(e.$shouldShowUnshare),d=m.useStore(e.$objectMetadata),u=m.useStore(e.$isUnshareDisabled),g=a.getIsFolder(d),f=(e=>E.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!0)}),[e]))(e),p=(e=>{const t=n.useIntl(),o=r.useEndpoint(so),s=r.useEndpoint(lo),l=r.useEndpoint(i.shareFolder),c=r.useEndpoint(i.checkShareInternalJobStatus),d=r.useLogger(),u=ko(e),m=i.useShowSharingNotification();return E.useCallback((async()=>{var n;if(e.$hasAnyPolicyChanged.get()){const r=e.$objectMetadata.get();let g=e.$objectIdentifier.get();if("file_folder"===g[".tag"]){e.$isSubmitting.set(!0);const a={path:g.path};m({type:i.SharingNotificationType.IN_PROGRESS,message:Ba(t)});const r=await l(a);let o=g;if("SUCCESS"===r.status){if("complete"===r.output[".tag"])o={".tag":"shared_folder",sharedFolderId:r.output.shared_folder_id},await e.$props.get().onObjectIdentifierChanged(o);else if("async_job_id"===r.output[".tag"]){const t=r.output.async_job_id,a=await i.poll((async()=>{const e={async_job_id:t},a=await c(e);return"SUCCESS"===a.status&&"in_progress"===a.output[".tag"]?{status:"RETRY"}:{status:"COMPLETE",output:a}}),{interval:1e3,timeout:3e4});"COMPLETE"===a.status&&"SUCCESS"===(null===(n=a.output)||void 0===n?void 0:n.status)&&"complete"===a.output.output[".tag"]&&(o={".tag":"shared_folder",sharedFolderId:a.output.output.shared_folder_id},await e.$props.get().onObjectIdentifierChanged(o))}}else"ERROR"===r.status&&("bad_path"===r.error[".tag"]&&"already_shared"===r.error.bad_path[".tag"]?(o={".tag":"shared_folder",sharedFolderId:r.error.bad_path.shared_folder_id},await e.$props.get().onObjectIdentifierChanged(o)):"no_permission"===r.error[".tag"]&&(e.$isSubmitting.set(!1),m({type:i.SharingNotificationType.FAILURE,message:ja(t)})));await i.invalidateSharingObjectMetadata(g),await i.invalidateNewApiObjectMetadata(g),await i.invalidateSharingObjectMetadata(o),await i.invalidateNewApiObjectMetadata(o),g=o}if(a.getIsFile(r)){e.$isSubmitting.set(!0),d("SHARE_MODAL_SETTINGS__FILE_POLICY_UPDATE_API_START",null);const n=await o({file:a.isNewApiMetadata(r)?"":r.id,actions:[a.CHANGE_OPTIONS_TAG,a.CREATE_VIEW_LINK_TAG,a.CREATE_EDIT_LINK_TAG,a.DISABLE_VIEWER_INFO_TAG,a.ENABLE_VIEWER_INFO_TAG,a.INVITE_VIEWER_TAG,a.INVITE_EDITOR_TAG,a.INVITE_VIEWER_NO_COMMENT_TAG,a.RELINQUISH_MEMBERSHIP_TAG,a.REMOVE_DOWNLOAD_POLICY_TAG,a.SET_DOWNLOAD_POLICY_TAG,a.UNSHARE_TAG,a.SHARE_MESSAGE_AS_COMMENT_TAG],viewer_info_policy:e.$viewerInfoPolicyEnabledUpdated.get()?{".tag":"enabled"}:{".tag":"disabled"}});await Promise.resolve(e.$props.get().onRefreshObjectMetadata()),"SUCCESS"===n.status?(d("SHARE_MODAL_SETTINGS__FILE_POLICY_UPDATE_API_SUCCESS",null),m({type:i.SharingNotificationType.COMPLETED,message:Fa(t)}),e.$isSubmitting.set(!1),e.$props.get().onSaved()):("ERROR"===n.status?d("SHARE_MODAL_SETTINGS__FILE_POLICY_UPDATE_API_ERROR",{error:n.error}):d("SHARE_MODAL_SETTINGS__FILE_POLICY_UPDATE_API_FATAL",{error:n.error}),m({type:i.SharingNotificationType.FAILURE,message:$a(t)}),e.$isSubmitting.set(!1))}else if("shared_folder"===g[".tag"]){e.$isSubmitting.set(!0),d("SHARE_MODAL_SETTINGS__FOLDER_POLICY_UPDATE_API_START",null);const n=e.$hasMemberPolicyChanged.get(),o=e.$hasViewerInfoPolicyChanged.get(),l=e.$hasLinkAudiencePolicyChanged.get(),c=e.$hasAclUpdatePolicyChanged.get(),f=await s({shared_folder_id:g.sharedFolderId,actions:[a.CHANGE_OPTIONS_TAG,a.DISABLE_VIEWER_INFO_TAG,a.ENABLE_VIEWER_INFO_TAG,a.INVITE_VIEWER_TAG,a.INVITE_EDITOR_TAG,a.INVITE_VIEWER_NO_COMMENT_TAG,a.RELINQUISH_MEMBERSHIP_TAG,a.REMOVE_DOWNLOAD_POLICY_TAG,a.SET_DOWNLOAD_POLICY_TAG,a.UNSHARE_TAG],viewer_info_policy:o?e.$viewerInfoPolicyEnabledUpdated.get()?{".tag":"enabled"}:{".tag":"disabled"}:void 0,member_policy:n&&a.getOwnerTeam(r)?{".tag":e.$memberPolicyUpdated.get()}:void 0,shared_link_policy:l?{".tag":e.$linkAudiencePolicyUpdated.get()}:void 0,acl_update_policy:c?{".tag":e.$aclUpdatePolicyUpdated.get()}:void 0});await i.invalidateSharingObjectMetadata(g),await i.invalidateNewApiObjectMetadata(g),"SUCCESS"===f.status?(d("SHARE_MODAL_SETTINGS__FOLDER_POLICY_UPDATE_API_SUCCESS",null),m({type:i.SharingNotificationType.COMPLETED,message:Ha(t)}),e.$isSubmitting.set(!1),e.$props.get().onSaved(),await Promise.resolve(u())):("ERROR"===f.status?d("SHARE_MODAL_SETTINGS__FOLDER_POLICY_UPDATE_API_ERROR",{error:f.error}):d("SHARE_MODAL_SETTINGS__FOLDER_POLICY_UPDATE_API_FATAL",{error:f.error}),m({type:i.SharingNotificationType.FAILURE,message:$a(t)}),e.$isSubmitting.set(!1))}}}),[e,o,s,d,t,u,l,c,m])})(e);return E.createElement(E.Fragment,null,c?E.createElement(E.Fragment,null,u?E.createElement(a.Tooltip,{title:g?En(t):kn(t),placement:"right",maxWidth:125,"data-testid":"unshare-tooltip"},E.createElement(a.Box,{style:{marginLeft:0,marginRight:"auto"}},E.createElement(a.Button,{variant:"transparent",onClick:f,disabled:u,"data-uxa-log":"sm24_object_settings_unshare_button"},un(t,d)))):E.createElement(a.Button,{variant:"transparent",onClick:f,disabled:u,"data-uxa-log":"sm24_object_settings_unshare_button"},un(t,d)),E.createElement("div",{style:{flex:1}})):null,E.createElement(a.Button,{variant:"opacity",onClick:o,"data-uxa-log":"sm24_object_settings_cancel_button"},Na(t)),E.createElement(a.Button,{variant:"primary",disabled:!l||s,onClick:p,"data-uxa-log":"sm24_object_settings_save_button"},s?Aa(t):Oa(t)))};Eo.displayName="ObjectSettingsActions";const Mo=({store:e})=>{const t=m.useStore(e.$objectMetadata),n=m.useStore(e.$objectIdentifier),r=m.useStore(e.$isUnshareConfirmationModalOpen),i=(e=>E.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!1)}),[e]))(e),o=(e=>E.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!1)}),[e]))(e),s=(e=>E.useCallback((()=>{e.$props.get().onUnshareCompleted()}),[e]))(e),l=(e=>E.useCallback((()=>{e.$props.get().onClose()}),[e]))(e),c=(e=>E.useCallback((async t=>{await e.$props.get().onObjectIdentifierChanged(t)}),[e]))(e),d=(e=>E.useCallback((t=>{e.$props.get().onConfirmationModalShownChange(t)}),[e]))(e);return E.createElement(Gi,{objectMetadata:t,objectIdentifier:n,contentName:a.getName(t),onConfirm:o,onCancel:i,open:r,onUnshareCompleted:s,onClose:l,onObjectIdentifierChanged:c,onConfirmationModalShownChange:d})};Mo.displayName="UnshareConfirmationModalWrapper";const So=e=>{const t=(e=>{const{isNonUserRelativeContext:t}=a.useSharingApiContext();return m.useInitStore({props:e,isNonUserRelativeContext:t},(e=>{const t=m.proxy((()=>e.get().props)),n=m.proxy((()=>e.get().isNonUserRelativeContext)),r=m.proxy((()=>t.get().objectIdentifier)),i=m.proxy((()=>t.get().objectMetadata)),o=m.proxy((()=>t.get().accountMetadata)),s=m.proxy((()=>t.get().linksMetadata)),l=m.proxy((()=>t.get().members)),c=m.proxy((()=>a.getIsFolder(i.get()))),d=m.store(!1),u=m.proxy((()=>a.getCanChangeOptions(i.get()))),g=m.proxy((()=>a.getCanEnableViewerInfo(i.get()))),f=m.proxy((()=>a.getCanDisableViewerInfo(i.get()))),p=m.proxy((()=>a.getLinkAudiencePolicy(i.get()))),h=m.proxy((()=>a.getViewerInfoPolicyEnabled(i.get()))),y=m.store(h.get()),v=m.proxy((()=>a.getOwnerTeamPolicies(i.get()))),b=m.proxy((()=>{var e;return null===(e=v.get())||void 0===e?void 0:e.shared_folder_link_restriction_policy[".tag"]})),w=m.proxy((()=>"members"===b.get()?"members":a.getLinkAudiencePolicy(i.get()))),_=m.store(w.get()),k=m.proxy((()=>a.getMemberPolicy(i.get()))),E=m.store(k.get()),M=m.proxy((()=>a.getAclUpdatePolicy(i.get()))),S=m.store(M.get()),T=m.proxy((()=>k.get()!==E.get())),D=m.proxy((()=>h.get()!==y.get())),C=m.proxy((()=>w.get()!==_.get())),P=m.proxy((()=>M.get()!==S.get())),L=m.proxy((()=>D.get()||T.get()||P.get()||C.get())),x=m.proxy((()=>{var e;const t=n.get(),r=i.get(),o=a.getPermissionInfo(r,a.UNSHARE_TAG),s=a.getIsFolder(r),l=a.getIsSharedFolder(r),c=a.getIsCollection(r),d=a.getCanUnshareObject(r),u=s&&!d&&"folder_is_inside_shared_folder"===(null===(e=null==o?void 0:o.reason)||void 0===e?void 0:e[".tag"]);return d&&(!s||!t&&l)&&!c||u})),I=m.proxy((()=>{var e;const t=s.get(),n=l.get(),r=i.get(),c=a.getIsFolder(r),d=0!==t.links.length;if(!c&&!d){const e=n.invitees.length+n.groups.length+n.users.length;if(!e)return!0;if(1===e&&1===n.users.length){const e=n.users[0],t=o.get();return e.user.account_id===t.account_id}return!1}if(c){const t=a.getPermissionInfo(r,a.UNSHARE_TAG);return"folder_is_inside_shared_folder"===(null===(e=null==t?void 0:t.reason)||void 0===e?void 0:e[".tag"])}return!1})),N=m.store(!1),A=m.proxy((()=>{var e;return null!==(e=o.get().is_freemium_team_member)&&void 0!==e&&e}));return{$objectIdentifier:r,$objectMetadata:i,$accountMetadata:o,$linksMetadata:s,$members:l,$canChangeOptions:u,$isSubmitting:d,$resolvedMemberPolicy:p,$viewerInfoPolicyEnabled:h,$isFolder:c,$viewerInfoPolicyEnabledUpdated:y,$memberPolicy:k,$memberPolicyUpdated:E,$aclUpdatePolicy:M,$aclUpdatePolicyUpdated:S,$linkAudiencePolicy:w,$linkAudiencePolicyUpdated:_,$canEnableViewerInfo:g,$canDisableViewerInfo:f,$hasAnyPolicyChanged:L,$hasViewerInfoPolicyChanged:D,$hasMemberPolicyChanged:T,$hasLinkAudiencePolicyChanged:C,$hasAclUpdatePolicyChanged:P,$isUnshareConfirmationModalOpen:N,$shouldShowUnshare:x,$blanketLinkRestrictionsPolicy:b,$isUnshareDisabled:I,$isFreemiumTeamMember:A,$props:t}}))})(e),n=t.$isFolder.get(),i=r.usePlatform()===r.Platforms.DESKTOP;return E.createElement(E.Fragment,null,E.createElement(a.Modal.Body,null,E.createElement("div",{style:i?{minHeight:"130px"}:void 0},n?E.createElement(E.Fragment,null,E.createElement(vo,{store:t}),E.createElement(wo,{store:t})):E.createElement(E.Fragment,null,E.createElement(yo,{store:t}),E.createElement(_o,{store:t})))),E.createElement(a.Modal.Footer,null,E.createElement(Eo,{store:t})),E.createElement(Mo,{store:t}))};So.displayName="ObjectSettings";const To={".tag":"editor"},Do={".tag":"viewer"},Co="object_settings",Po="edit_link_settings",Lo="view_link_settings",xo=e=>{const t=n.useIntl(),a=r.useLogger(),o=r.useEndpoint(Ta),s=i.useShowSharingNotification();return E.useCallback((async()=>{if(!e.$hasUnsavedLinkChanges.get())return!0;let n=null;const r=e.$viewLinkCompatMetadata.get(),l=e.$viewLinkCompatPolicy.get(),c=e.$viewLinkCompatPolicyDraft.get();null!==r&&null!==l&&null!==c&&(n=Ca(t,r,l,c));let d=null;const u=e.$editLinkCompatMetadata.get(),m=e.$editLinkCompatPolicy.get(),g=e.$editLinkCompatPolicyDraft.get();if(null!==u&&null!==m&&null!==g&&(d=Ca(t,u,m,g)),n&&"error"in n)return s({type:i.SharingNotificationType.FAILURE,message:n.error}),!1;if(d&&"error"in d)return s({type:i.SharingNotificationType.FAILURE,message:d.error}),!1;const f=[...null===n?[]:[n],...null===d?[]:[d]];if(0===f.length)return e.$editLinkCompatPolicyDraft.set(null),e.$viewLinkCompatPolicyDraft.set(null),!0;e.$isUpdatingLinkSettings.set(!0),n&&l&&c&&l.audience&&c.audience&&l.audience!==c.audience&&a("SHARE_MODAL_SETTINGS__LINK_AUDIENCE_CHANGE",{link_access_level:Do,previous:Da(l.audience),next:Da(c.audience)}),d&&m&&g&&m.audience&&g.audience&&m.audience!==g.audience&&a("SHARE_MODAL_SETTINGS__LINK_AUDIENCE_CHANGE",{link_access_level:To,previous:Da(m.audience),next:Da(g.audience)});const p=await Promise.all([...f.map((e=>o((e=>{const t={url:e.url,remove_expiration:e.remove_expiration,settings:{}};return e.settings.access&&(t.settings.access={".tag":e.settings.access}),void 0!==e.settings.allow_download&&(t.settings.allow_download=e.settings.allow_download),e.settings.audience&&(t.settings.audience={".tag":e.settings.audience}),e.settings.expires&&(t.settings.expires=e.settings.expires),e.settings.link_password&&(t.settings.link_password=e.settings.link_password),void 0!==e.settings.require_password&&(t.settings.require_password=e.settings.require_password),t})(e))))]);return await e.$props.get().onRefreshLinksMetadata(),e.$isUpdatingLinkSettings.set(!1),p.every((e=>"SUCCESS"===e.status))?(e.$editLinkCompatPolicyDraft.set(null),e.$viewLinkCompatPolicyDraft.set(null),s({type:i.SharingNotificationType.COMPLETED,message:on(t)},{message:sn(t)}),!0):(s({type:i.SharingNotificationType.FAILURE,message:Za(t)}),!1)}),[e,t,o,a,s])},Io=e=>E.useCallback((async()=>{await e.$props.get().onRefreshObjectMetadata()}),[e]),No=e=>E.useCallback((async()=>{await e.$props.get().onRefreshModal()}),[e]),Ao=e=>E.useCallback((async t=>{await e.$props.get().onObjectIdentifierChanged(t)}),[e]),Oo=e=>E.useCallback((async()=>{e.$editLinkCompatPolicyDraft.set(null),e.$viewLinkCompatPolicyDraft.set(null),await e.$props.get().onRefreshLinksMetadata()}),[e]),Uo=e=>{const t=xo(e);return E.useCallback((async()=>{await t()&&e.$props.get().onManageLinkAccess()}),[e,t])},Ro=e=>{const t=xo(e);return E.useCallback((async()=>{await t()}),[t])},$o=e=>E.useCallback((()=>{e.$props.get().onCancel(!0)}),[e]),Fo=e=>E.useCallback((t=>{e.$props.get().onConfirmationModalShownChange(t)}),[e]),Bo=e=>{const t=r.useOpenUrl();return E.useCallback((e=>{t(e)}),[t])},jo=e=>E.useCallback((()=>{e.$props.get().onClose()}),[e]),Ho=e=>E.useCallback((()=>{e.$props.get().onUnshareCompleted()}),[e]),Wo=(e,t)=>E.useCallback((a=>{"editor"===t[".tag"]?e.$editLinkCompatPolicyDraft.set(a):"viewer"===t[".tag"]&&e.$viewLinkCompatPolicyDraft.set(a)}),[e,t]),Yo=({store:e})=>{const t=m.useStore(e.$objectIdentifier),a=m.useStore(e.$objectMetadata),n=m.useStore(e.$accountMetadata),r=m.useStore(e.$linksMetadata),i=m.useStore(e.$members),o=Ho(e),s=(e=>E.useCallback((()=>{e.$props.get().onCancel(!1)}),[e]))(e),l=(e=>E.useCallback((()=>{e.$props.get().onComplete(!1)}),[e]))(e),c=Io(e),d=Ao(e),u=(e=>E.useCallback((()=>{e.$props.get().onClose()}),[e]))(e),g=No(e),f=Fo(e);return E.createElement(So,{objectIdentifier:t,objectMetadata:a,accountMetadata:n,linksMetadata:r,members:i,onClose:u,onSaved:l,onCancelled:s,onRefreshObjectMetadata:c,onObjectIdentifierChanged:d,onRefreshModal:g,onConfirmationModalShownChange:f,onUnshareCompleted:o})};Yo.displayName="ObjectSettingsWrapper";const qo=({store:e})=>{const t=To,a=m.useStore(e.$accountMetadata),n=m.useStore(e.$editLinkCompatMetadata),i=m.useStore(e.$editLinkCompatPolicy),o=m.useStore(e.$editLinkCompatPolicyDraft),s=m.useStore(e.$editLinkMetadata),l=m.useStore(e.$objectIdentifier),c=m.useStore(e.$objectMetadata),d=m.useStore(e.$sharingPrefs),u=m.useStore(e.$hasUnsavedLinkChanges),g=m.useStore(e.$isUpdatingLinkSettings),f=Ro(e),p=$o(e),h=Bo(),y=Oo(e),v=Wo(e,To),b=Uo(e),w=Io(e),_=Ao(e),k=Fo(e),M=No(e),S=jo(e),T=Ho(e);return E.createElement(r.MetadataProvider,{sharingAccessLevel:To},E.createElement(oo,{accountMetadata:a,accessLevel:t,compatLinkMetadata:n,compatLinkPolicy:o||i,originalCompatLinkPolicy:i,linkMetadata:s,objectIdentifier:l,objectMetadata:c,sharingPrefs:d,isSavable:u,isSaving:g,onSave:f,onCancel:p,onOpenManageAccess:b,onLinkClicked:h,onRefreshLinksMetadata:y,onCompatLinkPolicyChange:v,onObjectIdentifierChanged:_,onRefreshObjectMetadata:w,onRefreshModal:M,onClose:S,onConfirmationModalShownChange:k,onUnshareCompleted:T}))};qo.displayName="EditLinkSettingsWrapper";const Go=({store:e})=>{const t=Do,a=m.useStore(e.$accountMetadata),n=m.useStore(e.$viewLinkCompatMetadata),i=m.useStore(e.$viewLinkCompatPolicy),o=m.useStore(e.$viewLinkCompatPolicyDraft),s=m.useStore(e.$viewLinkMetadata),l=m.useStore(e.$objectMetadata),c=m.useStore(e.$objectIdentifier),d=m.useStore(e.$sharingPrefs),u=m.useStore(e.$hasUnsavedLinkChanges),g=m.useStore(e.$isUpdatingLinkSettings),f=Ro(e),p=$o(e),h=Bo(),y=Oo(e),v=Wo(e,Do),b=Uo(e),w=Io(e),_=Ao(e),k=No(e),M=jo(e),S=Fo(e),T=Ho(e);return E.createElement(r.MetadataProvider,{sharingAccessLevel:Do},E.createElement(oo,{accountMetadata:a,accessLevel:t,compatLinkMetadata:n,compatLinkPolicy:o||i,originalCompatLinkPolicy:i,linkMetadata:s,objectIdentifier:c,objectMetadata:l,sharingPrefs:d,isSavable:u,isSaving:g,onSave:f,onCancel:p,onLinkClicked:h,onOpenManageAccess:b,onRefreshLinksMetadata:y,onCompatLinkPolicyChange:v,onObjectIdentifierChanged:_,onRefreshObjectMetadata:w,onRefreshModal:k,onClose:M,onConfirmationModalShownChange:S,onUnshareCompleted:T}))};Go.displayName="ViewLinkSettingsWrapper";const Vo=({store:e})=>{const t=n.useIntl(),i=m.useStore(e.$currentTab),o=m.useStore(e.$objectMetadata),s=m.useStore(e.$linksMetadata),l=m.useStore(e.$shouldShowViewLinkTab),c=m.useStore(e.$shouldShowEditLinkTab),d=m.useStore(e.$shouldShowObjectSettingsTab),g=(e=>{const t=r.useLogger();return E.useCallback((n=>{e.$currentTab.set(n),t("SHARE_MODAL_SETTINGS__TAB_CHANGE",{selected_tab:Ia(n,a.getIsFile(e.$objectMetadata.get()))})}),[e,t])})(e),f=a.getIsFile(o),p=r.useLogger(),h=Hi();return E.useEffect((()=>{const t=Ia(i,a.getIsFile(e.$objectMetadata.get()));p("SHARE_MODAL_SETTINGS__PAGE_VIEW",{selected_tab:t}),h.select(ji).emit(null)}),[]),E.createElement(r.MetadataProvider,{sharingLinksMetadata:s},E.createElement(u.Tabs,{selectedTab:i,onSelection:g},E.createElement(u.Tabs.Group,{variant:"justified"},d?E.createElement(u.Tabs.Tab,{id:Co,key:Co},f?t.formatMessage({id:"TdlC4Q",defaultMessage:"File settings"}):t.formatMessage({id:"jR9e/q",defaultMessage:"Folder settings"})):null,c?E.createElement(u.Tabs.Tab,{id:Po,key:Po},t.formatMessage({id:"DIbS2E",defaultMessage:"Link for editing"})):null,l?E.createElement(u.Tabs.Tab,{id:Lo,key:Lo},t.formatMessage({id:"rvYosE",defaultMessage:"Link for viewing"})):null),E.createElement(E.Fragment,null,d?E.createElement(u.Tabs.Panel,{tabId:Co,key:Co},E.createElement(Yo,{store:e})):null,c?E.createElement(u.Tabs.Panel,{tabId:Po,key:Po},E.createElement(qo,{store:e})):null,l?E.createElement(u.Tabs.Panel,{tabId:Lo,key:Lo},E.createElement(Go,{store:e})):null)))};Vo.displayName="ShareModalSettingsInner";const zo=e=>{const t=(e=>{const t=n.useIntl(),{isNonUserRelativeContext:r}=a.useSharingApiContext();return m.useInitStore(e,(e=>{const n=m.proxy((()=>e.get().accountMetadata)),i=m.proxy((()=>e.get().linksMetadata)),o=m.proxy((()=>e.get().objectMetadata)),s=m.proxy((()=>e.get().objectIdentifier)),l=m.proxy((()=>e.get().sharingPrefs)),c=m.proxy((()=>e.get().members)),d=m.atom(a.vendSenderTrackey$1()),u=m.proxy((()=>{const t=a.getByAccessLevel(e.get().linksMetadata,{".tag":"editor"});return t&&(t.url=a.appendTrackeyToSharedLinkAndSortParams$1(t.url,d.get())),t})),g=m.proxy((()=>La(o.get(),u.get()))),f=m.proxy((()=>xa(t,g.get()))),p=m.store(null),h=m.proxy((()=>{const t=a.getByAccessLevel(e.get().linksMetadata,{".tag":"viewer"});return t&&(t.url=a.appendTrackeyToSharedLinkAndSortParams$1(t.url,d.get())),t})),y=m.proxy((()=>La(o.get(),h.get()))),v=m.proxy((()=>xa(t,y.get()))),b=m.store(null),w=m.proxy((()=>null!==b.get()||null!==p.get())),_=e=>{let t;if(e===To)t=u;else{if(e!==Do)return!1;t=h}const r=null!==t.get(),i=a.getCanCreateLink(o.get(),e,n.get().is_tmr_member);return a.getIsConfidentialFolder(o.get())||r||i},k=a.getIsLinkOnlyMode(o.get()),E=m.proxy((()=>!k&&_(To)&&!r)),M=m.proxy((()=>_(Do)&&!r)),S=m.proxy((()=>!(a.getIsCollection(o.get())||a.getIsLinkOnlyMode(o.get())))),T=m.store(!1),D=m.store(Co);return e.get().initialTab!==Co||S.get()?e.get().initialTab===Po&&E.get()?D.set(Po):e.get().initialTab===Lo&&M.get()&&D.set(Lo):D.set(E.get()?Po:Lo),{$accountMetadata:n,$linksMetadata:i,$objectMetadata:o,$objectIdentifier:s,$sharingPrefs:l,$members:c,$editLinkMetadata:u,$editLinkCompatMetadata:g,$editLinkCompatPolicy:f,$editLinkCompatPolicyDraft:p,$viewLinkMetadata:h,$viewLinkCompatMetadata:y,$viewLinkCompatPolicy:v,$viewLinkCompatPolicyDraft:b,$hasUnsavedLinkChanges:w,$shouldShowEditLinkTab:E,$shouldShowViewLinkTab:M,$shouldShowObjectSettingsTab:S,$isUpdatingLinkSettings:T,$currentTab:D,$props:e}}))})(e);return E.createElement(Vo,{store:t})};zo.displayName="ShareModalSettings";const Qo=()=>E.createElement("div",{style:{minHeight:"200px",padding:"64px 0px 64px 0px"}},E.createElement(a.Interstitial,{in:!0,isIndeterminate:!0,onComplete:()=>{}}));Qo.displayName="LoadingState";const Ko=({error:e,onFallback:t,onRetry:r})=>{const i=n.useIntl();return E.createElement("div",{style:{padding:"24px",textAlign:"center"}},E.createElement("div",{style:{marginBottom:"16px"}},i.formatMessage({id:"mR7o5t",defaultMessage:"We couldnt load the sharing settings."})),E.createElement("div",{style:{display:"flex",gap:"8px",justifyContent:"center"}},r&&E.createElement(a.Button,{onClick:r,variant:"primary"},i.formatMessage({id:"3T2tjL",defaultMessage:"Try again"})),t&&E.createElement(a.Button,{onClick:t,variant:"opacity"},i.formatMessage({id:"tcMLuN",defaultMessage:"Use classic version"}))),e&&E.createElement("details",{style:{marginTop:"16px",fontSize:"12px",color:"#666"}},E.createElement("summary",null,"Technical Details"),E.createElement("pre",null,e.message)))};Ko.displayName="ErrorState";const Xo=e=>{const t=i.useLegacySharingObjectMetadata(e.objectIdentifier),r=a.useObjectMembers(e.objectIdentifier),s=d.useListSharedLinks(e.objectIdentifier,!0),l=o.useSharingPrefs(),c=i.useSharingAccountInfo(),u=n.useIntl(),m=!t.isLoading&&!t.isError,g=m?t.output:null,f=e.objectIdentifier,p=e.onObjectIdentifierChanged;E.useEffect((()=>{var e;if(g&&!a.isNewApiMetadata(g)&&"file_folder"===g[".tag"]&&g.folder_id!==f.fileId){const t={".tag":"file_folder",name:g.name,path:null!==(e=g.path_lower)&&void 0!==e?e:"",fileId:g.folder_id};p(t)}}),[m,f,g,p]);const h=E.useCallback((async()=>{await i.invalidateSharingObjectMetadata(e.objectIdentifier),await i.invalidateNewApiObjectMetadata(e.objectIdentifier)}),[e.objectIdentifier]),y=E.useCallback((()=>d.invalidateListSharedLinks(e.objectIdentifier)),[e.objectIdentifier]),v=E.useCallback((async()=>{await Promise.all([i.invalidateSharingObjectMetadata(e.objectIdentifier),i.invalidateNewApiObjectMetadata(e.objectIdentifier),d.invalidateListSharedLinks(e.objectIdentifier),a.invalidateObjectMembers(e.objectIdentifier),o.invalidateSharingPrefs(),i.invalidateSharingAccountInfo()])}),[e.objectIdentifier]);if(t.isLoading||!r.isFirstPageLoaded||!r.isFirstPageOnly&&r.isLoading||s.isLoading||l.isLoading||c.isLoading)return E.createElement(Qo,null);let b=null;if(t.isError?b=u.formatMessage({id:"Tym5Ts",defaultMessage:"We had trouble loading the sharing object metadata."}):r.hadContinuationError?b=u.formatMessage({id:"rTptgd",defaultMessage:"We couldnt fetch the members of the sharing object."}):!s.isLoading&&s.isError?b=u.formatMessage({id:"AQ3NNq",defaultMessage:"We couldnt fetch the shared links."}):!l.isLoading&&l.isError&&!("output"in l)||!l.output?b=u.formatMessage({id:"grfK5U",defaultMessage:"We couldnt fetch the sharing preferences."}):!c.isLoading&&c.isError&&(b=u.formatMessage({id:"I6Q3Cy",defaultMessage:"We had trouble loading the sharing account information."})),b)return E.createElement(Ko,{onFallback:e.onFallback,onRetry:v,error:{message:b}});if(!t.isError&&!s.isLoading&&!s.isError&&!c.isLoading&&!c.isError&&!l.isError&&"output"in l&&l.output){const a=t.output,n=r.isFirstPageOnly?r.firstPage:r.allMembers,i=s.output,o=l.output,d=c.output;return E.createElement(zo,{accountMetadata:d,linksMetadata:i,objectMetadata:a,sharingPrefs:o,members:n,onRefreshObjectMetadata:h,onRefreshLinksMetadata:y,...e})}return E.createElement(Ko,{onFallback:e.onFallback,onRetry:v})};Xo.displayName="SettingsPageWithoutCss";const Jo=a.requireCssWithComponent(Xo,["/static/typescript/component_libraries/spectrum-sharing/src/index.web-vflz7dTtC.css","/static/metaserver/static/css/dig-components/index.web-vflumqaCO.css","/static/metaserver/static/css/dig-illustrations/index.web-vflye-46V.css","/static/metaserver/static/css/maestro_layout-vflCdpQrA.css","/static/metaserver/static/css/foundation-vflH6wwwv.css"]);Jo.displayName="SettingsPage",e.ACL_UPDATE_POLICY="acl_update_policy",e.ALLOW_DOWNLOAD="allow_download",e.AUDIENCE="audience",e.BUTTON="button",e.DEFAULT="default",e.DROPDOWN="dropdown",e.DatePickerInput=ki,e.EDIT_LINK_SETTINGS="edit_link_settings",e.EXPIRES="expires",e.FILE_SETTINGS="file_settings",e.FOLDER_LINK_AUDIENCE_POLICY="shared_link_policy",e.FOLDER_SETTINGS="folder_settings",e.InbandEntryButton=ka,e.MEMBER_POLICY="member_policy",e.PAP_Hover_FlexibleSharingEntrypointAction=la,e.PAP_Log_FlexibleSharingEntrypointActionDwellTime=ca,e.PasswordInput=qn,e.REQUIRE_PASSWORD=sa,e.RestrictedVisibilityBanner=zn,e.ScooterLoader=Ni,e.SettingDropdown=An,e.SettingPolicyRow=Bn,e.SettingsPage=Jo,e.SettingsToggle=Hn,e.SharingModalBanner=Vn,e.SharingModalDowngradeBanner=Oi,e.SharingModalSettingsRow=Fn,e.SharingSettingsPassword=e=>{const{getPolicyDict:t,linkPolicy:a}=e,n=t(sa),r=E.createElement("div",null,(e=>{const{linkPolicy:t,linkPermissions:a,getPolicyDict:n,onPolicyUpdate:r}=e,i=n(sa),s=i.optionsDict,l=t.require_password?"enabled":"disabled";return E.createElement(Hn,{currentValue:l,optionsDict:s,onOptionChange:(e,t)=>{r({require_password:e})},disabled:!o.canTogglePassword(a)||Wn(a,t.audience)||e.readOnlyPolicy,ariaLabel:i.title})})(e),(a.require_password||Wn(e.linkPermissions,a.audience)&&!e.readOnlyPolicy)&&E.createElement(qn,{...e}));return E.createElement(Bn,{policyName:sa,policyDict:n,selector:r})},e.TOGGLE="toggle",e.TokenizerButton=Sa,e.VIEWER_INFO_POLICY="viewer_info_policy",e.VIEW_LINK_SETTINGS="view_link_settings"}));
//# sourceMappingURL=c_settings-page_internals_settings-page-wrapper.js-vflQG8k2I.map

//# debugId=0c3b799e-59d0-36e5-baf0-d85fd32e757a