!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="20b81b86-cfdf-31b0-9ef3-d7e50360cf02")}catch(e){}}();
define(["exports","./c_api_v2_routes_plan_configuration_provider","./c_security_csrf_hmac"],(function(r,e,t){"use strict";var o;r.ErrorType=void 0,(o=r.ErrorType||(r.ErrorType={}))[o.OtherError=1]="OtherError",o[o.SecurityError=2]="SecurityError",o[o.NotAllowedError=3]="NotAllowedError",o[o.InvalidStateError=4]="InvalidStateError",o[o.Canceled=5]="Canceled",o[o.Timeout=6]="Timeout",o[o.NotSupportedError=7]="NotSupportedError",o[o.RequestPendingError=8]="RequestPendingError",o[o.NotReadableError=9]="NotReadableError";const n={SecurityError:r.ErrorType.SecurityError,NotAllowedError:r.ErrorType.NotAllowedError,InvalidStateError:r.ErrorType.InvalidStateError,AbortError:r.ErrorType.Canceled,TimeoutError:r.ErrorType.Timeout,NotSupportedError:r.ErrorType.NotSupportedError,NotReadableError:r.ErrorType.NotReadableError};var a;!function(r){r[r.COSE=0]="COSE",r[r.DER=1]="DER"}(a||(a={}));const i=["internal","hybrid","usb"];function s(){return window.PublicKeyCredential&&(!0===e.mozilla&&parseInt(e.version,10)>=60||!0===e.chrome&&parseInt(e.version,10)>=66||!0===e.edge&&parseFloat(e.version)>=17.17682||!0===e.safari&&parseFloat(e.version)>=12.2)}function d(r){return!(!r||!s())&&((!0!==e.edge||!0!==r.disable_on_edge)&&(!0!==e.safari||!0!==r.disable_on_safari))}function l(e){if(e instanceof DOMException){if("OperationError"===e.name&&e.message.includes("pending"))return{errorCode:r.ErrorType.RequestPendingError,errorData:e.toString&&e.toString()};const t=n[e.name];if(void 0!==t)return{errorCode:t,errorData:e.toString&&e.toString()}}return{errorCode:r.ErrorType.OtherError,errorData:e.toString&&e.toString()}}r.LATEST_PROTOCOL="webauthn_wd07",r.LATEST_PROTOCOL_CAMEL_CASE="webauthnWd07",r.PROTOCOLS={webauthn_wd07:""},r.canRegisterAuthenticator=function(r){return d(r)},r.canUseAuthenticator=function(r){return d(r)&&function(r){if(!0===e.edge&&parseFloat(e.version)>=17.17682&&parseFloat(e.version)<17.17713||!0===e.chrome&&69===parseInt(e.version,10)||!0===e.safari&&parseFloat(e.version)<13.1){if(r.allowCredentials)for(const e of r.allowCredentials)if(e.key_format===a.COSE)return!0;return!1}return!0}(r)},r.isSupportedOnBrowser=s,r.isWebAuthnSignalApiSupported=function(){const r=window.PublicKeyCredential;return void 0!==r&&void 0!==r.signalAllAcceptedCredentials&&void 0!==r.signalCurrentUserDetails},r.register=function(r){const e={challenge:t.b64urldecode(r.challenge),timeout:r.timeout,rp:{id:r.rp.id,name:r.rp.name,icon:r.rp.icon},user:{id:t.b64urldecode(r.user.id),name:r.user.name,displayName:r.user.displayName,icon:r.user.icon},authenticatorSelection:r.authenticatorSelection};void 0!==r.excludeCredentials&&(e.excludeCredentials=r.excludeCredentials.map((r=>({type:r.type,id:t.b64urldecode(r.id),transports:r.transports})))),void 0!==r.pubKeyCredParams&&(e.pubKeyCredParams=r.pubKeyCredParams.map((r=>({type:r.type,alg:r.alg})))),void 0===r.attestation&&(e.attestation="direct");const o={publicKey:e};return void 0!==r.mediation&&(o.mediation=r.mediation),"conditional"!==r.mediation||e.authenticatorSelection.authenticatorAttachment||(e.authenticatorSelection.authenticatorAttachment="platform"),navigator.credentials.create(o).then((r=>({response:{clientDataJSON:t.b64urlencode(r.response.clientDataJSON),attestationObject:t.b64urlencode(r.response.attestationObject)}}))).catch((r=>l(r)))},r.sign=function(o,n,a){const s={challenge:t.b64urldecode(o.challenge),timeout:o.timeout,rpId:o.rpId,userVerification:o.userVerification,extensions:o.extensions};void 0!==o.allowCredentials&&(s.allowCredentials=o.allowCredentials.map((r=>{let o;return r.transports&&r.transports.length>0&&(o=r.transports),!e.mozilla||r.transports&&0!==r.transports.length||(o=i),{type:r.type,id:t.b64urldecode(r.id),transports:o}})));const d={publicKey:s};return n&&(d.mediation=n),a&&(d.signal=a),navigator.credentials.get(d).then((e=>{if(null===e)return{errorCode:r.ErrorType.Canceled,errorData:"No credential selected"};return{id:e.id,response:{clientDataJSON:t.b64urlencode(e.response.clientDataJSON),authenticatorData:t.b64urlencode(e.response.authenticatorData),signature:t.b64urlencode(e.response.signature),userHandle:e.response.userHandle&&t.b64urlencode(e.response.userHandle)}}})).catch((r=>l(r)))}}));
//# sourceMappingURL=c_auth_webauthn.js-vfljT9vFa.map

//# debugId=20b81b86-cfdf-31b0-9ef3-d7e50360cf02