!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="dc3e2bcc-c6e6-35a5-9b99-6b62b03d3913")}catch(e){}}();
define(["exports","./e_file_viewer_static_scl_page_file","./c_profile_services_profile_services_link","./c_core_i18n","react"],(function(e,t,a,i,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o,l=n(s);e.Strings=void 0,(o=e.Strings||(e.Strings={})).OK=i.intl.formatMessage({id:"G6rEKj",defaultMessage:"OK"}),o.NEXT=i.intl.formatMessage({id:"yah+je",defaultMessage:"Next"}),o.BACK=i.intl.formatMessage({id:"k9vJ0G",defaultMessage:"Back"}),o.CANCEL=i.intl.formatMessage({id:"S53N5s",defaultMessage:"Cancel"}),o.CREATE=i.intl.formatMessage({id:"cVVoCl",defaultMessage:"Create"}),o.SAVE=i.intl.formatMessage({id:"HqImMi",defaultMessage:"Save"}),o.LEARN_MORE=i.intl.formatMessage({id:"sUsXMb",defaultMessage:"Learn more"}),o.DONE=i.intl.formatMessage({id:"H/MlMr",defaultMessage:"Done"}),o.FINISH=i.intl.formatMessage({id:"n4dBJ7",defaultMessage:"Finish"}),o.CLOSE=i.intl.formatMessage({id:"/nCb7L",defaultMessage:"Close"}),o.DISMISS=i.intl.formatMessage({id:"h4rpeQ",defaultMessage:"Dismiss"}),o.CONFIGURE_NOW=i.intl.formatMessage({id:"vQKdKf",defaultMessage:"Configure now"}),o.RECONFIGURE=i.intl.formatMessage({id:"DN+Nvb",defaultMessage:"Reconfigure"}),o.CONFIRM_PREFERENCE=i.intl.formatMessage({id:"qlRt63",defaultMessage:"Confirm your preference"}),o.MANAGE_PREFERENCE=i.intl.formatMessage({id:"ILUbaa",defaultMessage:"Manage preference"}),o.SHOW_IN_GOOGLE_DRIVE=i.intl.formatMessage({id:"S0LHV5",defaultMessage:"Show in Google Drive"}),o.LINK_ACCOUNT=i.intl.formatMessage({id:"JhmneM",defaultMessage:"Link account"}),o.GET_MIGRATION_SETTINGS_ERROR=i.intl.formatMessage({id:"C40Kmf",defaultMessage:"Could not fetch migration settings"}),o.SET_MIGRATION_SETTINGS_ERROR=i.intl.formatMessage({id:"omeHSB",defaultMessage:"Could not update migration settings"}),o.EDIT_APP_PERMISSIONS=i.intl.formatMessage({id:"GYeDWi",defaultMessage:"Edit app permissions"}),o.MIGRATION_FOLDER=i.intl.formatMessage({id:"vp+jh3",defaultMessage:"Dropbox"}),o.DEFAULT_SHORTCUT_NAME=i.intl.formatMessage({id:"o9Zw70",defaultMessage:"Untitled"}),o.VIEW_SUMMARY=i.intl.formatMessage({id:"9m2UYm",defaultMessage:"View summary"}),o.LOADING_ANIMATION=i.intl.formatMessage({id:"SGA8pY",defaultMessage:"Loading animationâ€¦"}),o.DISABLED_MIGRATE_FILES_TO_GOOGLE_DRIVE_TOOLTIP_TEXT=i.intl.formatMessage({id:"hC4dZf",defaultMessage:"You do not have permission to move your Google files to Google Drive. Please reach to your admin to get permission"}),o.CONVERT_NOW=i.intl.formatMessage({id:"Iff87z",defaultMessage:"Convert now"}),o.LINK_TO_INCOMPATIBLE_GOOGLE_ACCOUNT=i.intl.formatMessage({id:"u9TFTP",defaultMessage:"Please link to the Google account of the same email as your Dropbox account."}),o.FAIL_TO_LINK_GOOGLE_ACCOUNT=i.intl.formatMessage({id:"4L5zkJ",defaultMessage:"Failed to link Google account."}),o.GOOGLE_AUTH_FAILED=i.intl.formatMessage({id:"4Mo3Jb",defaultMessage:"Google authentication failed"}),o.GOOGLE_AUTH_POPUP_BLOCKED=i.intl.formatMessage({id:"6EyPz0",defaultMessage:"Pop-up blocked. Please disable pop-up blockers in order to link your Google account"});const r=["documents"];var d;async function _(a,i){const s=new t.DefaultUserApiV2Client(a),n=await t.GetProfileServicesRoutes(s).rpc("list_linked_services",void 0,{});let o=!1;for(const t of n.linked_services){if(!("google"===t.service_type[".tag"]))continue;if(!("is_connected"===t.connection_state[".tag"]))continue;if(r.every((e=>t.granted_permissions.some((t=>t[".tag"]===e))))&&(o=!0,!i||t.display_name===i))return e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK}return o?e.GddMigrationCompatibleLinkStatus.HAS_INCOMPATIBLE_LINK:e.GddMigrationCompatibleLinkStatus.NOT_LINKED}async function m(i,s){const n=i.email;if(!s){const a=await _(i,n);if(a===e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK)return e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK;if(a===e.GddMigrationCompatibleLinkStatus.HAS_INCOMPATIBLE_LINK)try{await async function(e){const a=new t.DefaultUserApiV2Client(e);await t.GetProfileServicesRoutes(a).rpc("unlink",{service:{".tag":"google"}},{})}(i)}catch(e){}}const o=new a.ProfileServicesLinkingHandler,l=await o.auth_service_with_user_promise(t.ProfileServicesConstants.GOOGLE,i.id,null,"link_read_files",void 0,void 0,r,void 0,n);return l.success?l.display_name===n?e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK:e.GddMigrationCompatibleLinkStatus.HAS_INCOMPATIBLE_LINK:e.GddMigrationCompatibleLinkStatus.NOT_LINKED}e.GddMigrationCompatibleLinkStatus=void 0,(d=e.GddMigrationCompatibleLinkStatus||(e.GddMigrationCompatibleLinkStatus={}))[d.HAS_COMPATIBLE_LINK=0]="HAS_COMPATIBLE_LINK",d[d.HAS_INCOMPATIBLE_LINK=1]="HAS_INCOMPATIBLE_LINK",d[d.NOT_LINKED=2]="NOT_LINKED";const f=t=>"window_not_created"===t?e.Strings.GOOGLE_AUTH_POPUP_BLOCKED:"window_closed"!==t?e.Strings.GOOGLE_AUTH_FAILED:void 0;t.injectInternalStyle("/static/metaserver/static/js/shortcuts/shared_components/templates/modal_template.module.out-vflEkYJAG.css",(e=>"._modalTemplateWrapper_1iofx_1{display:flex;flex-direction:row}._modalTemplateContainer_1iofx_6{align-items:flex-start;display:flex;flex:1;flex-direction:column;padding:0}._modalTemplatePaper_1iofx_15{align-items:flex-start;align-self:stretch;display:flex;flex-direction:row;padding:var(--spacing__unit--3) var(--spacing__unit--3) 0}._modalTemplateContent_1iofx_24{align-items:flex-start;display:flex;flex-direction:column;flex-grow:1;justify-content:center;padding:0}._modalTemplateHeading_1iofx_34{align-items:flex-start;display:flex;flex-direction:row;padding:var(--spacing__unit--4) var(--spacing__unit--3) var(--spacing__unit--2)}._modalTemplateText_1iofx_42{padding:0 var(--spacing__unit--3)}._modalTemplateActions_1iofx_46{align-items:center;align-self:stretch;display:flex;flex-direction:row;gap:var(--spacing__unit--1);padding:var(--spacing__unit--3)}._modalTemplateButtonGroup_1iofx_56,._modalTemplateTertiaryActionContainer_1iofx_65{align-items:center;display:flex;flex-direction:row;gap:var(--spacing__unit--1);padding:0}._modalTemplateTertiaryActionContainer_1iofx_65{flex-grow:1;justify-content:flex-end}._modalTemplateImageFrame_1iofx_76{align-items:center;background:var(--color__opacity--3);display:flex;flex:1;flex-direction:column;justify-content:center;min-height:420px;min-width:400px;position:relative}@media (max-width:767.98px){._modalTemplateImageFrame_1iofx_76{display:none}}"));const c="_modalTemplateWrapper_1iofx_1",g="_modalTemplateContainer_1iofx_6",u="_modalTemplatePaper_1iofx_15",p="_modalTemplateContent_1iofx_24",M="_modalTemplateHeading_1iofx_34",E="_modalTemplateText_1iofx_42",L="_modalTemplateActions_1iofx_46",T="_modalTemplateButtonGroup_1iofx_56",C="_modalTemplateTertiaryActionContainer_1iofx_65",I="_modalTemplateImageFrame_1iofx_76",O=({actions:e,ariaLabel:a,appElement:i,bodyText:s,height:n,infoTextAboveModalTitle:o,tertiaryActions:r,title:d,rightFrameComponent:_,onRequestClose:m,open:f,width:O,withCloseButton:N})=>(t.Modal.setAppElement(i||document.body),l.default.createElement(t.Modal,{onRequestClose:m,open:null==f||f,width:O,isCentered:!0,shouldCloseOnOverlayClick:!1,withCloseButton:N,"aria-labelledby":a},l.default.createElement("div",{className:c,style:{minHeight:null!=n?n:"auto"}},l.default.createElement("div",{className:g},o&&l.default.createElement("div",{className:u},l.default.createElement(t.Text,{size:"small",color:"faint"},o)),l.default.createElement("div",{className:p},l.default.createElement("div",{className:M},l.default.createElement(t.Title,null,d)),l.default.createElement("div",{className:E},s)),l.default.createElement("div",{className:L},e&&l.default.createElement("div",{className:T},e),r&&l.default.createElement("div",{className:C},r))),_&&l.default.createElement("div",{className:I},_))));O.displayName="ModalTemplate",e.GetShortcutsRoutes=function(e){return e.ns("shortcuts")},e.ModalTemplate=O,e.ensureUserHasGddMigrationCompatibleLink=m,e.ensureUserHasLinkedAccountAndReport=async a=>{try{const i=await m(a);switch(i){case e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK:return!0;case e.GddMigrationCompatibleLinkStatus.HAS_INCOMPATIBLE_LINK:t.Snackbar.failSticky(e.Strings.LINK_TO_INCOMPATIBLE_GOOGLE_ACCOUNT);break;case e.GddMigrationCompatibleLinkStatus.NOT_LINKED:t.Snackbar.failSticky(e.Strings.FAIL_TO_LINK_GOOGLE_ACCOUNT);break;default:t.Snackbar.failSticky(e.Strings.FAIL_TO_LINK_GOOGLE_ACCOUNT),t.enforceExhaustive(i)}}catch(e){const a=f(e);a&&t.Snackbar.failSticky(a)}return!1},e.fetchUserHasGddMigrationCompatibleLink=_,e.getUserFriendlyLinkAccountErrorMessage=f}));
//# sourceMappingURL=c_shared_components_templates_modal_template.js-vfl2lZ6Wx.map

//# debugId=dc3e2bcc-c6e6-35a5-9b99-6b62b03d3913