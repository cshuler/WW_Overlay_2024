!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="75207880-3ab3-3cf7-bb3b-e45eb556878e")}catch(e){}}();
define(["require","exports","react","./e_file_viewer_static_scl_page_file","./c_flux_store_listener","./c_core_i18n","./c_flows_conversions_conversion_actions","./c_dig-icons_assets_ui-icon_line_print","./c_action_plugins_open_in_action_dropdown","./c_lodash-es_lodash","./c_file_viewer_components_titlebar_menu_content","./e_data_modules_stormcrow","./e_edison","./c_bem","./c_api_v2_routes_plan_configuration_provider","./c_spectrum_util_raf_throttle","./e_core_exception","./c_init_data_edison","./c_dotlottie_common_chunk-B7OIQIGJ","./c_src_sink_index","./c_react-use_misc_util","./c_api_v2_routes_restorations_provider","./c_api_v2_unauthed_client","./c_hive_schemas_sharing-request_access_user_events","./c_core_notify","react-dom","./c_api_v2_routes_team_insights_provider","./c_security_csrf_hmac","./c_react-use_useEffectOnce","./c_pap-events_navigation_select_create_folder_action","react/jsx-runtime","metaserver/static/js/langpack","./c_dig-icons_assets_ui-icon_line_quota-reached","./c_dig-icons_assets_ui-icon_line_video","./c_icon_templates_stateless_index","./c_spectrum_svg_icon_bundle","./c_shared_components_templates_modal_template","./c_profile_services_profile_services_link","./c_abuse_login_and_register_constants_fetch","./c_react_query_helpers_queries_login_and_register_constants","./c_gdd_migration_ui_utils","./c_file_imports_gdrive_file_picker","./c_shortcuts_conversion_utils","./c_icon_shortcuts_icon","./c_spectrum-content-icon-compatibility_src_file_icon","./c_dig-content-icons_icons_file-audio-large","./c_dig-content-icons_icons_file-link-large","./c_dig-content-icons_icons_folder-team-read-only-small","./c_dig-content-icons_icons_folder-shared-default-small","./c_dig-content-icons_icons_folder-base-default-large","./c_dig-content-icons_icons_folder-base-default-small","./c_icon_folder_icon","./c_ui_title_bubble","./c_ui_overlay","./c_extensions_open_button_utils","./c_spectrum_modal_utility_modal","./c_spectrum_button","./c_spectrum_tertiary_link","./c_icon_templates_actionable_index","./c_spectrum_icon_form_index","./c_ui_image","./c_dig-icons_assets_ui-icon_line_upload","./c_ui_sprite","./c_dig-icons_assets_ui-icon_line_sidebar-show-right","./c_dig-icons_assets_ui-icon_line_admin-console"],(function(e,i,t,n,o,r,c,s,a,l,_,u,d,S,f,v,p,A,I,w,E,h,P,C,D,T,g,m,b,N,L,O,R,F,y,K,M,U,k,x,G,V,H,B,W,z,Y,j,q,Q,X,Z,J,$,ee,ie,te,ne,oe,re,ce,se,ae,le,_e){"use strict";function ue(e){if(e&&e.__esModule)return e;var i=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(i,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),i.default=e,Object.freeze(i)}var de=ue(t);const Se={...n.fileActionCondition,filterValidFile:e=>{const i=n.fileActionCondition.filterValidFile(e);return!i||n.isPnmSuppressMoveSelected(i)||n.isEncryptedFile(i)?void 0:i}},fe=n.withActionCondition(Se,((i,t,r,c)=>({label:n.COPY_ACTION_STRING,userAction:n.UserAction.Copy,icon:o.CopyLine,action:{type:"click",handler:()=>new Promise((function(i,t){e(["./c_action_plugins_copy_action_action"],i,t)})).then((({copyActionWrapper:e})=>e({file:i.file,user:i.user,previewType:t,browseContext:r,browseExceptions:c})))},disabled:{disabled:!1}})),void 0),ve=n.withActionCondition(n.deleteActionCondition,((i,t,o,r,c)=>({label:n.DELETE_ACTION_STRING,icon:n.DeleteLine,userAction:n.UserAction.Delete,disabled:i.file.read_only?{disabled:!0,tooltipMessage:n.ACTION_DISABLED_STRING}:{disabled:!1},action:{type:"click",handler:()=>new Promise((function(i,t){e(["./c_action_plugins_delete_action_action"],i,t)})).then((({deleteActionWrapper:e})=>e({logUserAction:t,setDeleteFileModalOpenCallback:o,file:i.file,user:i.user,previewSurface:r,onFileChanged:c})))}})),void 0),pe=n.withActionCondition(n.duplicateFilesActionCondition,((e,i)=>({userAction:void 0,label:n.FIND_DUPLICATES_ACTION_STRING,accessibleLabel:n.FIND_DUPLICATES_ACTION_STRING,action:{type:"click",handler:async()=>i()},disabled:{disabled:!1},icon:n.DuplicateLine})),void 0),Ae=[n.SDKPreviewSurface.BROWSE,n.SDKPreviewSurface.FILE_LOCKING,n.SDKPreviewSurface.HELLOSIGN,n.SDKPreviewSurface.HOME,n.SDKPreviewSurface.INBAND_SHARE,n.SDKPreviewSurface.PHOTOS,n.SDKPreviewSurface.RECENTS,n.SDKPreviewSurface.SEARCH,n.SDKPreviewSurface.SHARED_COLLECTION,n.SDKPreviewSurface.SHARED_CONTENT_LINK,n.SDKPreviewSurface.SHARED_LINK,n.SDKPreviewSurface.SHARED_LINK_EMBED,n.SDKPreviewSurface.SHARED_COLLECTION,n.SDKPreviewSurface.STANDALONE_PREVIEW,n.SDKPreviewSurface.STARRED,n.SDKPreviewSurface.TRANSFER,n.SDKPreviewSurface.UNKNOWN,n.SDKPreviewSurface.VERSION_HISTORY,n.SDKPreviewSurface.FSS_DESKTOP_PREVIEW],Ie={filterValidFile:n.allowAllFiles,filterValidUser:n.filterLoggedInUser,shouldShowForPreviewSurface:n.filterSurfaceIn(Ae),shouldShowForPreviewType:n.alwaysShow},we=n.withActionCondition(Ie,((e,i)=>({userAction:void 0,icon:n.FileHistoryLine,label:n.FILE_ACTIVITY_ACTION_STRING,accessibleLabel:n.FILE_ACTIVITY_ACCESSIBILITY_STRING,action:{type:"click",handler:async()=>i()},disabled:{disabled:!1}})),void 0);const Ee=e=>{const{conversionActions:i,file:t}=e,n=i.filter((e=>e.actionGroup===c.ConversionActionGroup.VIDEO_SCALE)),o=i.filter((e=>e.actionGroup!==c.ConversionActionGroup.VIDEO_SCALE)),r=o.length>0?he(o,t,e):null,s=n.length>0?he(n,t,e):null;return de.default.createElement(de.default.Fragment,null,r,s)},he=(e,i,t)=>de.default.createElement(n.Menu.Segment,null,e.map((e=>{const o=i.bytes/Math.pow(1024,2),c=n.getConversionFileSizeLimitMB([n.file_extension(n.getFilename(i))],e.actionText),s=o>c,a=r.intl.formatMessage({id:"0vePbC",defaultMessage:"File is larger than the {fileSizeLimitMB}MB limit"},{fileSizeLimitMB:c}),l=de.default.createElement(n.Menu.ActionItem,{key:e.actionText,disabled:s,value:{handler:()=>(({file:e,user:i,action:t,encryptionOptions:o,logUserAction:r,context:c,shareToken:s,actionSurface:a="",sharedLinkInfo:l,sharePermissions:_,previewSurface:u})=>{if(r(n.UserAction.SelectSaveAs,c,{conversion_type:t.actionText,actionSurface:a}),i)t.convert([e],i,{shareToken:s,source:"preview"});else{const e=new URL(window.location.href);e.searchParams.set("save_as","true"),e.searchParams.set("save_as_action",t.actionText),window.history.replaceState(e.href,"",e.href),n.showAuthModal({mode:n.Mode.REGISTER,sharedLinkUrl:e.href,kind:n.LoginOrRegisterKind.POSTSAVEAS,encryptionOptions:o,loggingExtra:{signup_source:"save_as"},signupTag:n.RegistrationSource.SHMODEL_SAVE_AS_REGISTER,webSignInTag:n.getWebSignInTag(!1,u,_),authDialogPreviousElement:n.AuthDialogPreviousElementTag.SAVE_AS,sharedLinkInfo:l})}})({...t,action:e})},withLeftAccessory:de.default.createElement(n.UIIcon,{src:e.actionIcon,width:"20px",height:"20px"})},e.actionText);return s?de.default.createElement(n.Tooltip,{key:e.actionText,title:a,placement:"left",id:"flows-disabled-menu-item-tooltip"},de.default.createElement("div",null,l)):l}))),Pe=[n.SDKPreviewSurface.BROWSE,n.SDKPreviewSurface.FILE_LOCKING,n.SDKPreviewSurface.HELLOSIGN,n.SDKPreviewSurface.HOME,n.SDKPreviewSurface.INBAND_SHARE,n.SDKPreviewSurface.PHOTOS,n.SDKPreviewSurface.RECENTS,n.SDKPreviewSurface.SEARCH,n.SDKPreviewSurface.SHARED_CONTENT_LINK,n.SDKPreviewSurface.SHARED_LINK,n.SDKPreviewSurface.STANDALONE_PREVIEW,n.SDKPreviewSurface.STARRED,n.SDKPreviewSurface.FSS_DESKTOP_PREVIEW],Ce={filterValidFile:e=>!e||n.isInsideSharedFolder(e)||n.isEncryptedFile(e)?void 0:e,filterValidUser:e=>({user:e}),shouldShowForPreviewSurface:n.filterSurfaceIn(Pe),shouldShowForPreviewType:n.alwaysShow},De=n.withActionCondition(Ce,((e,i,t,o,r,a)=>{const l=function({getActiveFile:e,user:i},t){const{file:o,sharedLinkInfo:r,sharePermission:s}=e();return n.canConvertFile(o,s)&&n.canDownloadFile(r,s)?c.getConversionActionsForFiles(i,[o],{},t):[]}({getActiveFile:t,user:e.user},o);if(l.length)return{label:n.FILE_CONVERSION_STRING,userAction:n.UserAction.OpenSaveAs,disabled:{disabled:!1},icon:s.ConvertFileLine,action:{type:"menu",menu:de.default.createElement(Ee,{context:n.UserActionContext.FileMenu,conversionActions:l,encryptionOptions:r,file:e.file,logUserAction:i,user:e.user,sharedLinkInfo:t().sharedLinkInfo,sharePermissions:t().sharePermission,previewSurface:a})}}}),void 0),Te=e=>({userAction:void 0,disabled:{disabled:!1},action:{type:"click",handler:async()=>e()},label:n.INFO_ACTION_STRING,accessibleLabel:n.INFO_ACCESSIBILITY_STRING,icon:n.InfoLine}),ge=n.withActionCondition(n.moveActionCondition,((i,t,o,r,c,s)=>({label:n.MOVE_ACTION_STRING,icon:n.MoveLine,userAction:n.UserAction.Move,disabled:i.file.read_only?{disabled:!0,tooltipMessage:n.ACTION_DISABLED_STRING}:{disabled:!1},action:{type:"click",handler:()=>new Promise((function(i,t){e(["./c_action_plugins_move_action_action"],i,t)})).then((({moveActionWrapper:e})=>e({file:i.file,user:i.user,previewType:t,previewSurface:o,onFileChanged:r,browseContext:c,browseExceptions:s})))}})),void 0);const me=()=>{const{optionalIOClients:{printClient:e}}=n.useFileViewerContext(),i=function(){var e,i,t;const o=n.useRootPreviewMetadata();if(!o)return"";const{content:r}=o;return"image"===(null==r?void 0:r[".tag"])?null!==(e=null==r?void 0:r.full_size_src)&&void 0!==e?e:"":"ssr_doc"===(null==r?void 0:r[".tag"])?null!==(i=null==r?void 0:r.autoprint_url)&&void 0!==i?i:"":"text"===(null==r?void 0:r[".tag"])&&null!==(t=null==r?void 0:r.extracted_text)&&void 0!==t?t:""}(),t=n.useRootPreviewType();return de.default.useMemo((()=>()=>{i&&(null==e||e.print(i,t))}),[t,e,i])},be=[n.PreviewType.SsrDoc,n.PreviewType.Image,n.PreviewType.Text,n.PreviewType.Excel],Ne={shouldShowForPreviewSurface:n.alwaysShow,shouldShowForPreviewType:n.filterPreviewTypeIn(be),filterValidUser:e=>({user:e}),filterValidFile:(e,i,t)=>t||n.isEncryptedFile(e)?void 0:e},Le=n.withActionCondition(Ne,((e,i)=>({label:n.PRINT_ACTION_STRING,userAction:n.UserAction.Print,disabled:{disabled:!1},action:{type:"click",handler:async()=>i()},icon:s.PrintLine})),void 0),Oe=n.withActionCondition(n.renameActionConditions,((e,i)=>({label:n.RENAME_ACTION_STRING,icon:n.CursorLine,userAction:n.UserAction.Rename,action:{type:"click",handler:async()=>{i(!0)}},disabled:e.file.read_only?{disabled:!0,tooltipMessage:n.ACTION_DISABLED_STRING}:{disabled:!1}})),void 0),Re=n.withActionCondition(n.starActionConditions,((e,i,t,o,r)=>({label:o,icon:t,userAction:i?n.UserAction.Unstar:n.UserAction.Star,action:{type:"click",handler:async()=>r()},disabled:{disabled:!1}})),void 0),Fe=r.defineMessage({id:"pB6h1Y",defaultMessage:"Archive files over 512 MB cannot be extracted"}),ye=n.withActionCondition(n.unzipActionConditions,((i,t)=>{const o=i.file.bytes/1048576;return{label:n.UNZIP_ACTION_MESSAGE,icon:n.UnzipAction.actionIcon,disabled:o>=n.UNZIP_MAX_FILESIZE_MB?{disabled:!0,tooltipMessage:Fe}:{disabled:!1},userAction:n.UserAction.Unzip,action:{type:"click",handler:()=>new Promise((function(i,t){e(["./c_action_plugins_unzip_action_action"],i,t)})).then((({unzipAction:e})=>e({user:i.user,file:i.file,shareToken:t})))}}}),void 0),Ke=[n.SDKPreviewSurface.BROWSE,n.SDKPreviewSurface.BACKUP,n.SDKPreviewSurface.FILE_LOCKING,n.SDKPreviewSurface.HELLOSIGN,n.SDKPreviewSurface.HOME,n.SDKPreviewSurface.INBAND_SHARE,n.SDKPreviewSurface.PHOTOS,n.SDKPreviewSurface.RECENTS,n.SDKPreviewSurface.SEARCH,n.SDKPreviewSurface.SHARED_CONTENT_LINK,n.SDKPreviewSurface.SHARED_LINK,n.SDKPreviewSurface.STANDALONE_PREVIEW,n.SDKPreviewSurface.STARRED,n.SDKPreviewSurface.POLLUX_DESKTOP_PREVIEW,n.SDKPreviewSurface.POLLUX_DESKTOP_SEARCH_PREVIEW],Me={filterValidFile:e=>function(e){const i=n.fileActionCondition.filterValidFile(e);return!!i&&!n.isCloudBasedDoc(i)&&!n.isWebShortcutByExtension(i.fq_path)}(e)?e:void 0,filterValidUser:n.filterLoggedInUser,shouldShowForPreviewSurface:n.filterSurfaceIn(Ke),shouldShowForPreviewType:n.alwaysShow};const Ue=n.withActionCondition(Me,(i=>({label:n.VERSION_HISTORY_ACTION_STRING,icon:n.ClockLine,userAction:n.UserAction.VersionHistory,disabled:{disabled:!1},action:{type:"click",handler:()=>new Promise((function(i,t){e(["./c_action_plugins_version_history_action_action"],i,t)})).then((({versionHistoryActionWrapper:e})=>e(i.file,i.user)))}})),void 0);i.default=({contentProps:e})=>{var i,t;const{previewSurface:o,pluginArgs:r,fileConfig:c,hasOpenInActions:s}=n.usePluginMigrationContext(),{logUserAction:l}=n.useFileViewerContext(),d=null!==(i=n.useCurrentPreviewMetadata().previewType)&&void 0!==i?i:n.PreviewType.Loading,S=r.getActiveFile().file,f=r.getActiveFile().sharePermission,v=r.user,p=n.useRootFile(),{data:A}=n.useFileContentMetadataQuery(p),I=n.useIsNestedArchiveFile(),w=null===(t=null==A?void 0:A.apiData)||void 0===t?void 0:t.metadata,{onFileChanged:E,browseContext:h,browseExceptions:P,canRestoreRevision:C,getActiveFile:D,shareToken:T,encryptionOptions:g,reduceUpsells:m,onRestoreRevision:b,userPresentableVerdict:N}=r,L=de.useMemo((()=>({file:S,user:v,previewSurface:o,previewType:d,sharePermission:f,isNestedArchiveFile:I,canRestoreRevision:C})),[S,C,I,o,d,f,v]),O=(e=>{const i=n.useSetLeftSidebarCallback(n.UserActionContext.FileMenu);return de.default.useMemo((()=>we(e,(()=>i(n.FILE_ACTIVITY_PLUGIN_ID)))),[e,i])})(L),R=(()=>{const e=n.useSetLeftSidebarCallback(n.UserActionContext.FileMenu);return de.default.useMemo((()=>Te((()=>e(n.INFO_BLADE_PLUGIN_ID)))),[e])})(),F=((e,i)=>{const{onPrint:t}=n.usePreviewControls(),o=me(),r=n.useStabilizedCallback((()=>{null==t||t(),o()}));return de.default.useMemo((()=>i.enable_print?Le(e,r):void 0),[e,i.enable_print,r])})(L,c),y=((e,i)=>{const t=n.getStoreForStarred(),{isStarred:o,message:r,iconSrc:c,handleClick:s}=n.useStarControlWithStore({getActiveFile:i,user:e.user,starredStore:t});return de.default.useMemo((()=>Re(e,o,c,r,s)),[e,s,c,o,r])})(L,D),K=n.useToggleRenameStateCallback(),M=n.useSetDeleteFileModalOpenCallback(),U=((e,i)=>{const t=n.useRightSidebarId()===n.DUPLICATE_FILES_BLADE_PLUGIN_ID,o=n.useCloseSidebarCallback(i),r=n.useSetRightSidebarCallback(i),c=n.useDuplicateFilesExperimentVariant(),s=n.shouldShowDuplicateFiles(c,e.previewSurface),a=de.default.useCallback((()=>{t?o(n.DUPLICATE_FILES_BLADE_PLUGIN_ID):r(n.DUPLICATE_FILES_BLADE_PLUGIN_ID)}),[o,t,r]);return de.default.useMemo((()=>s?pe(e,a):void 0),[s,e,a])})(L,n.UserActionContext.FileMenu),k=n.useEmitter$2(),x=de.useCallback((e=>{n.isSharedFile(S)&&k.select(n.ON_CLICK_SHARED_CONTENT_ACTION).emit({actionElement:"action_bar",action:e})}),[k,S]),G=u.useQueryClient(),V=de.useMemo((()=>[[ge(L,d,o,E,h,P),fe(L,d,h,P),ve(L,l,M,o,E),Oe(L,K)],[y],[R,Ue(L),O],[a.makeOpenInAction(L,!!s),De(L,l,D,w,g,o),ye(L,T),...n.makeDownloadActions(L,D,l,w,o,m,T,f,g,null==p?void 0:p.name,n.UserActionContext.FileMenu,G,x,N),n.makeRestoreAction(L,b)],[U],[F]]),[L,d,o,E,h,P,l,M,K,y,R,O,s,D,w,g,T,m,f,null==p?void 0:p.name,x,N,G,b,U,F]),H=de.useCallback((e=>l(e,n.UserActionContext.FileMenu)),[l]);return de.createElement(_.TitlebarMenuContent,{options:V,elementId:"file-menu",contentProps:e,logAction:H})}}));
//# sourceMappingURL=c_title_bar_dropdowns_titlebar_file_dropdown.after-display.js-vfl085CWt.map

//# debugId=75207880-3ab3-3cf7-bb3b-e45eb556878e