!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="4154a93a-0ad7-3440-9abe-1b3305f0c502")}catch(e){}}();
define(["exports","./e_file_viewer_static_scl_page_file","./e_data_modules_stormcrow","./e_core_exception","./c_over-quota_over-quota-sweep-blocking-modal_open_over_quota_restrictions_modal"],(function(t,e,o,i,r){"use strict";function a(t){return{class:"quota",action:"eng",object:"should_show_oq_restrictions_modal",properties:t}}var n;t.Show=void 0,(n=t.Show||(t.Show={})).WarningOnly="WARNING_ONLY",n.EnforceRestrictionsOnly="ENFORCE_RESTRICTIONS_ONLY",n.All="ALL";const s=async(i,r,a)=>{var n,s,c,l,_;const[d,u,v]=await Promise.all([e.fetchExperimentVariant("end_state_web_overquota_restrictions"),e.fetchExperimentVariant("lifecycle_2026_01_12_locked_team_restriction"),e.fetchViewer()]),w=d.error||void 0===d.variant||d.variant===e.Variant.OFF,g=u.error||void 0===u.variant||u.variant===e.Variant.OFF;if(w&&g)return!1;const{apiData:O}=await e.getQuotaUpsellInfoPackage.fetchQuery(o.queryClient,{apiArg:{}},{refetchOnReconnect:!1,refetchOnWindowFocus:!0,staleTime:18e5,cacheTime:18e5,retry:1});return!!(null===(n=v.active_user)||void 0===n?void 0:n.is_team)&&v.team_is_locked?function(t,o,i){return!(void 0===t||![e.Variant.V1,e.Variant.CONTROL].includes(t))&&(e.logExposure({feature:"lifecycle_2026_01_12_locked_team_restriction",variant:t}),e.logAdditionalExposureDetailsForLockedStateTeam(t,i,o),t===e.Variant.V1)}(u.variant,O,r):(!a||!a.is_team)&&(!(i===t.Show.WarningOnly&&!(null===(s=O.restrictions)||void 0===s?void 0:s.show_restrictions_warning))&&(!(i===t.Show.EnforceRestrictionsOnly&&!(null===(c=O.restrictions)||void 0===c?void 0:c.enforce_restrictions))&&(!(void 0===d.variant||![e.Variant.V1,e.Variant.CONTROL,e.Variant.HOLDOUT].includes(d.variant)||!(null===(l=O.restrictions)||void 0===l?void 0:l.enforce_restrictions)&&!(null===(_=O.restrictions)||void 0===_?void 0:_.show_restrictions_warning))&&(e.logExposure({feature:"end_state_web_overquota_restrictions",variant:d.variant}),e.logAdditionalExposureDetails(d.variant,r,O),d.variant===e.Variant.V1))))},c=async(t,o,r)=>{const n=Math.random().toString(36).substring(2,15);e.UDCL.logStart(a({overQuotaSweepBlockingModalAction:o}),{key:n,tags:{overQuotaSweepBlockingModalAction:o}});try{const i=await s(t,o,r);return e.UDCL.logEnd(a({overQuotaSweepBlockingModalAction:o,eventState:"success"}),{key:n,tags:{overQuotaSweepBlockingModalAction:o}}),i}catch(t){return i.reportStack(`Error in showOQModalOrContinue: ${JSON.stringify(t)}`,{severity:i.SEVERITY.NONCRITICAL,tags:["over_quota_restrictions_modal"]}),e.UDCL.logEnd(a({overQuotaSweepBlockingModalAction:o,eventState:"failed"}),{key:n,tags:{overQuotaSweepBlockingModalAction:o}}),!1}};t.shouldShowOQModal=c,t.showOQModalOrContinue=async({beforeShowModal:e,user:o,show:i=t.Show.All,...a})=>{await c(i,a.action,o)?(null==e||e(),r.openOverQuotaRestrictionsModal(a)):a.continueCallback()}}));
//# sourceMappingURL=c_over-quota_over-quota-sweep-blocking-modal_show_over_quota_modal_or_continue.js-vflWeGcts.map

//# debugId=4154a93a-0ad7-3440-9abe-1b3305f0c502