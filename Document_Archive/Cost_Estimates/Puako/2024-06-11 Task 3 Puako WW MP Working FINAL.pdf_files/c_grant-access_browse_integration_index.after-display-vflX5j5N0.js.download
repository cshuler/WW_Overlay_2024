!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="efc1dd7d-c2c8-3e58-b493-cc7ef3acd9b8")}catch(e){}}();
define(["exports","react","./e_file_viewer_static_scl_page_file","./c_src_bindings_provider","./c_core_i18n","./c_inband-screen_internals_share-modal-share","./c_common_components_buttons","./c_src_utils_initials","./c_memoize-one","./c_common_components_layout","./e_edison","./c_api_v2_routes_password_confirmation_provider","./c_dotlottie_common_chunk-B7OIQIGJ","./e_core_exception","./c_init_data_edison","./c_hive_schemas_sharing-request_access_user_events","./c_src_sink_index","./c_lodash-es_lodash","./c_pap-events_navigation_select_create_folder_action","./c_api_v2_routes_restorations_provider","./e_data_modules_stormcrow","./c_react-use_misc_util","./c_api_v2_unauthed_client","./c_watermarking_utils_getImageDefaultSizes","./c_core_notify","react-dom","./c_security_csrf_hmac","./c_react-use_useEffectOnce","./c_bem","react/jsx-runtime","./c_api-v2-client_src_dropbox","./c_utils_dsx_dsx-react","./c_react_query_helpers_queries_login_and_register_constants","metaserver/static/js/langpack","./c_abuse_fingerprintjs_abuse_fpjs_provider","./c_abuse_fingerprintjs_abuse_fpjs_context","./c_fingerprintjs_fpjs-pro-static_fp","./c_contacts_contact","./c_validators","./c_domain_restriction_utils_response_helpers","./c_proto_storefront_platform_js_init_data_payment_method_pb","./c_proto_storefront_platform_js_init_data_transition_pb","./c_proto_checkout_js_init_data_checkout_page_pb","./c_cash_common_common_pb","./c_proto_storefront_platform_js_init_data_usage_data_pb","./c_sharing_sharing_pap_logging_send_share_invite_util","./c_dig-components_chip_index","./c_dig-components_typeahead_index","./c_over-quota_over-quota-sweep-blocking-modal_show_over_quota_modal_or_continue","./c_over-quota_over-quota-sweep-blocking-modal_open_over_quota_restrictions_modal","./c_over-quota_utils_use_get_plans","./c_trial-plan-card_components_header","./c_dig-components_combinations_index","./c_dig-icons_assets_ui-icon_line_tag","./c_trial-cards_trial-plan-card","./c_dig-components_meter_index","./c_react-hookz_web_useRafCallback","./c_growth-components_auto-layout-modal_auto_layout_modal","./c_growth-components_over-quota-file-viewer-modal","./c_over-quota_utils_oq_price_decrease_helper","./c_over-quota_over-quota-sweep-blocking-modal_open_over_quota_restrictions_modal_logger","./c_custom_campaigns_out_of_space_modal_out_of_space_checkout_modal_logger","./c_over-quota_over-quota-sweep-blocking-modal_open_locked_state_team_restrictions_modal","./c_checkout_components_portable_checkout_frame","./c_components_order_summary_redesign_order_summary_utils","./c_payments_skus_sku_content","./c_auth_common_captcha","./c_dig-icons_assets_ui-icon_line_share"],(function(e,t,a,r,n,o,s,c,i,_,l,d,m,u,p,f,g,h,b,v,E,I,C,S,O,j,w,y,M,x,q,k,N,A,P,R,T,F,L,B,D,G,z,H,W,U,$,Y,J,Q,V,K,X,Z,ee,te,ae,re,ne,oe,se,ce,ie,_e,le,de,me,ue){"use strict";function pe(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var r=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,r.get?r:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var fe=pe(t);const ge=({objectIdentifier:e,onRequestClose:t,onInbandShareCompleted:r,prefillContacts:n})=>{const[s,i]=fe.useState((()=>n?n.map((e=>({".tag":"email",email:e}))):[])),[_,l]=fe.useState(""),d=fe.useCallback((()=>{a.invalidateObjectMembers(e),c.invalidateSharingObjectMetadata(e),c.invalidateNewApiObjectMetadata(e),r()}),[e,r]),m=c.useSharingObjectMetadata(e.fileId),u=o.useSharingPrefs(),p=c.useSharingAccountInfo(),f=m.isLoading,g=u.isLoading,h=p.isLoading;return f||g||h?fe.createElement(o.LoadingScreen,null):fe.createElement(o.Inband,{oid:e,inviteMessage:_,inviteTargets:s,hasUpdatedAccountMetadata:!1,onCloseClick:t,onTargetsDropdownFocusChange:()=>{},onInviteMessageChange:l,onInviteTargetsChange:i,onShareStart:()=>{},onShareFailure:()=>{},onInbandShareSuccess:d,onStartInband:()=>{},onRefreshObjectMetadata:()=>{},onRefreshModal:()=>{}})};ge.displayName="GrantAccessInbandScreen";const he=e=>e.formatMessage({id:"azBLeN",defaultMessage:"Close"}),be=({children:e,objectIdentifier:t})=>{const n=c.useSharingObjectMetadata(t.fileId),s=!n.isLoading&&!n.isError,i=o.useSharingPrefs(),_=!i.isLoading&&!i.isError;return fe.createElement(a.ContextProvider,{context:a.Context$6,value:s?n.output:void 0},fe.createElement(r.MetadataProvider,{sharingObjectMetadata:s?n.output:void 0,sharingPrefs:_?i.output:void 0,sharingObjectIdentifier:t,shareMe24Metadata:{isShareMe24:!1}},e))};be.displayName="GrantAccessLoggingMetadataProvider";const ve=({objectIdentifier:e,fileOrFolder:t,sessionId:r,user:o,actionSurface:c,isOpen:l,onRequestClose:d,onInbandShareCompleted:m,prefillContacts:u})=>{const p=a.getFilename(t),f=()=>{d()},g=()=>fe.createElement(fe.Fragment,null,fe.createElement("div",{className:_.classes.headerSectionTextContainer},fe.createElement(a.Text,{size:"medium",isBold:!0,className:_.classes.headerSectionPrimaryText},fe.createElement(a.Truncate,{location:.5},n.intl.formatMessage({id:"spRUFl",defaultMessage:"Add people to"}))),fe.createElement(a.Text,{size:"small",color:"subtle"},fe.createElement(a.Truncate,{location:.5},p))),fe.createElement("div",{className:_.classes.headerSectionButtonContainer},fe.createElement(s.HeaderIconButton,{onClick:f,variant:"borderless","aria-label":he(n.intl),"data-testid":"grant-access-close-button"},fe.createElement(a.UIIcon,{src:a.CloseLine}))));return i.is_mobile_or_tablet()?fe.createElement(a.Drawer.ModalDrawer,{onRequestClose:f,"aria-label":"grant-access-modal-drawer","data-testid":"grant-access-modal-drawer",isOpen:l,alignment:"bottom",height:"100%",shouldAnimate:!0},fe.createElement("div",{className:_.classes.drawerOuterWrapper},fe.createElement(a.Drawer.Container,null,fe.createElement(a.Drawer.Header,{className:_.classes.drawerHeader},fe.createElement(a.Drawer.Layout,null,fe.createElement(a.Drawer.LayoutItem,{width:"fill"},fe.createElement(a.Drawer.Layout,null,fe.createElement(g,null))))),fe.createElement(a.Drawer.Body,{className:a.cx(_.classes.modalInnerWrapper,_.classes.drawerBody)},fe.createElement("div",{style:{padding:"6px"}},fe.createElement(be,{objectIdentifier:e},fe.createElement(ge,{objectIdentifier:e,onRequestClose:f,onInbandShareCompleted:m,prefillContacts:u}))))))):fe.createElement(a.Modal,{width:380,isCentered:!0,open:l,onRequestClose:f},fe.createElement("div",{"data-testid":"grant-access-modal",className:_.classes.outerWrapper},fe.createElement(a.Modal.Header,{className:_.classes.headerSection},fe.createElement(g,null)),fe.createElement(a.Modal.Body,{className:_.classes.modalInnerWrapper},fe.createElement("div",{style:{padding:"6px"}},fe.createElement(be,{objectIdentifier:e},fe.createElement(ge,{objectIdentifier:e,onRequestClose:f,onInbandShareCompleted:m,prefillContacts:u}))))))};ve.displayName="GrantAccessModal";const Ee=e=>{const t=fe.useMemo((()=>e.fileOrFolder.is_dir?e.fileOrFolder.target_ns?{type:"shared_folder"}:{type:"file_folder"}:{type:"file",name:a.filename(e.fileOrFolder.fq_path),size:e.fileOrFolder.bytes}),[e.fileOrFolder]),s=fe.useMemo((()=>({actionSurface:e.actionSurface,actionElement:e.actionElement,contentAction:"share",tiburonOrigin:a.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_PAGE,screen:"share_screen",shareModalType:"sm24"})),[e.actionSurface,e.actionElement]),[i,_]=fe.useState(a.getObjectIdentifier(e.fileOrFolder));return fe.useEffect((()=>{(async()=>{if(!i.fileId||""===i.fileId){const e=await c.fetchLegacySharingObjectMetadataObjectIdentifier(i);_(e)}})()}),[i]),e.isOpen?fe.createElement(n.Provider,{value:n.intl},fe.createElement(r.MetadataProvider,{shareModalSessionId:e.sessionId,sharingObjectIdentifier:i},fe.createElement(a.ContextProvider,{context:o.Context,value:e.sessionId},fe.createElement(a.ContextProvider,{context:a.Context$4,value:s},fe.createElement(a.ContextProvider,{context:a.Context$5,value:t},fe.createElement(ve,{objectIdentifier:i,fileOrFolder:e.fileOrFolder,sessionId:e.sessionId,user:e.user,actionSurface:e.actionSurface,isOpen:e.isOpen,onRequestClose:e.onRequestClose,onInbandShareCompleted:e.onInbandShareCompleted,prefillContacts:e.prefillContacts})))))):null};Ee.displayName="GrantAccessBrowseInner";const Ie=e=>fe.createElement(r.SharingSdkProvider,{userApiProps:e.user,origin:a.SHARE_ACTION_ORIGIN_TYPE.GRANT_ACCESS,actionInfo:{actionSurface:e.actionSurface}},fe.createElement(Ee,{...e}));Ie.displayName="GrantAccessBrowse",e.GrantAccessBrowse=Ie}));
//# sourceMappingURL=c_grant-access_browse_integration_index.after-display.js-vflLzC55u.map

//# debugId=efc1dd7d-c2c8-3e58-b493-cc7ef3acd9b8