!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="246c4d18-20ec-3c58-bcef-ed233f48d7d6")}catch(e){}}();
define(["exports","react","./e_file_viewer_static_scl_page_file","./c_core_i18n","./c_src_bindings_provider","./c_src_utils_initials","./c_inband-screen_internals_share-modal-share","./c_common_components_buttons","./c_dig-icons_assets_ui-icon_line_share","./c_dig-components_chip_index","./c_content-member-list_internals_content-member-list","./c_dig-components_tabs_index","./c_utils_dsx_dsx-react","./c_memoize-one","./c_dig-components_card_index","./c_components_icons_icon_dropdown_selected","./c_react-use_misc_util","./c_date-fns__lib_requiredArgs_index","./c_date-fns__lib_defaultOptions_index","./c_dig-components_combinations_index","./c_dig-icons_assets_ui-icon_line_settings","./c_over-quota_over-quota-sweep-blocking-modal_show_over_quota_modal_or_continue","./c_dig-icons_assets_ui-icon_line_upsell"],(function(e,t,a,n,r,i,o,s,l,c,d,u,g,m,f,p,h,y,v,w,b,_,k){"use strict";function E(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var M=E(t);function S(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function T(e,t){y.requiredArgs(2,arguments);var a=y.startOfDay(e),n=y.startOfDay(t);return a.getTime()===n.getTime()}function D(e){return y.requiredArgs(1,arguments),e instanceof Date||"object"===y._typeof(e)&&"[object Date]"===Object.prototype.toString.call(e)}function C(e){if(y.requiredArgs(1,arguments),!D(e)&&"number"!=typeof e)return!1;var t=y.toDate(e);return!isNaN(Number(t))}function P(e,t){return y.requiredArgs(2,arguments),function(e,t){y.requiredArgs(2,arguments);var a=y.toDate(e).getTime(),n=S(t);return new Date(a+n)}(e,-S(t))}function L(e){y.requiredArgs(1,arguments);var t=y.toDate(e),a=t.getUTCDay(),n=(a<1?7:0)+a-1;return t.setUTCDate(t.getUTCDate()-n),t.setUTCHours(0,0,0,0),t}function x(e){y.requiredArgs(1,arguments);var t=y.toDate(e),a=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(a+1,0,4),n.setUTCHours(0,0,0,0);var r=L(n),i=new Date(0);i.setUTCFullYear(a,0,4),i.setUTCHours(0,0,0,0);var o=L(i);return t.getTime()>=r.getTime()?a+1:t.getTime()>=o.getTime()?a:a-1}var I=6048e5;function N(e){y.requiredArgs(1,arguments);var t=y.toDate(e),a=L(t).getTime()-function(e){y.requiredArgs(1,arguments);var t=x(e),a=new Date(0);return a.setUTCFullYear(t,0,4),a.setUTCHours(0,0,0,0),L(a)}(t).getTime();return Math.round(a/I)+1}function O(e,t){var a,n,r,i,o,s,l,c;y.requiredArgs(1,arguments);var d=v.getDefaultOptions(),u=S(null!==(a=null!==(n=null!==(r=null!==(i=null==t?void 0:t.weekStartsOn)&&void 0!==i?i:null==t||null===(o=t.locale)||void 0===o||null===(s=o.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==r?r:d.weekStartsOn)&&void 0!==n?n:null===(l=d.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==a?a:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=y.toDate(e),m=g.getUTCDay(),f=(m<u?7:0)+m-u;return g.setUTCDate(g.getUTCDate()-f),g.setUTCHours(0,0,0,0),g}function A(e,t){var a,n,r,i,o,s,l,c;y.requiredArgs(1,arguments);var d=y.toDate(e),u=d.getUTCFullYear(),g=v.getDefaultOptions(),m=S(null!==(a=null!==(n=null!==(r=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(o=t.locale)||void 0===o||null===(s=o.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==r?r:g.firstWeekContainsDate)&&void 0!==n?n:null===(l=g.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==a?a:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(u+1,0,m),f.setUTCHours(0,0,0,0);var p=O(f,t),h=new Date(0);h.setUTCFullYear(u,0,m),h.setUTCHours(0,0,0,0);var w=O(h,t);return d.getTime()>=p.getTime()?u+1:d.getTime()>=w.getTime()?u:u-1}var U=6048e5;function R(e,t){y.requiredArgs(1,arguments);var a=y.toDate(e),n=O(a,t).getTime()-function(e,t){var a,n,r,i,o,s,l,c;y.requiredArgs(1,arguments);var d=v.getDefaultOptions(),u=S(null!==(a=null!==(n=null!==(r=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(o=t.locale)||void 0===o||null===(s=o.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==r?r:d.firstWeekContainsDate)&&void 0!==n?n:null===(l=d.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==a?a:1),g=A(e,t),m=new Date(0);return m.setUTCFullYear(g,0,u),m.setUTCHours(0,0,0,0),O(m,t)}(a,t).getTime();return Math.round(n/U)+1}function $(e,t){for(var a=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return a+n}var F={y:function(e,t){var a=e.getUTCFullYear(),n=a>0?a:1-a;return $("yy"===t?n%100:n,t.length)},M:function(e,t){var a=e.getUTCMonth();return"M"===t?String(a+1):$(a+1,2)},d:function(e,t){return $(e.getUTCDate(),t.length)},a:function(e,t){var a=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];default:return"am"===a?"a.m.":"p.m."}},h:function(e,t){return $(e.getUTCHours()%12||12,t.length)},H:function(e,t){return $(e.getUTCHours(),t.length)},m:function(e,t){return $(e.getUTCMinutes(),t.length)},s:function(e,t){return $(e.getUTCSeconds(),t.length)},S:function(e,t){var a=t.length,n=e.getUTCMilliseconds();return $(Math.floor(n*Math.pow(10,a-3)),t.length)}},B="midnight",j="noon",H="morning",Y="afternoon",q="evening",W="night",G={G:function(e,t,a){var n=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});default:return a.era(n,{width:"wide"})}},y:function(e,t,a){if("yo"===t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return a.ordinalNumber(r,{unit:"year"})}return F.y(e,t)},Y:function(e,t,a,n){var r=A(e,n),i=r>0?r:1-r;return"YY"===t?$(i%100,2):"Yo"===t?a.ordinalNumber(i,{unit:"year"}):$(i,t.length)},R:function(e,t){return $(x(e),t.length)},u:function(e,t){return $(e.getUTCFullYear(),t.length)},Q:function(e,t,a){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return $(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,a){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return $(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,a){var n=e.getUTCMonth();switch(t){case"M":case"MM":return F.M(e,t);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,a){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return $(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,a,n){var r=R(e,n);return"wo"===t?a.ordinalNumber(r,{unit:"week"}):$(r,t.length)},I:function(e,t,a){var n=N(e);return"Io"===t?a.ordinalNumber(n,{unit:"week"}):$(n,t.length)},d:function(e,t,a){return"do"===t?a.ordinalNumber(e.getUTCDate(),{unit:"date"}):F.d(e,t)},D:function(e,t,a){var n=function(e){y.requiredArgs(1,arguments);var t=y.toDate(e),a=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=a-t.getTime();return Math.floor(n/864e5)+1}(e);return"Do"===t?a.ordinalNumber(n,{unit:"dayOfYear"}):$(n,t.length)},E:function(e,t,a){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,a,n){var r=e.getUTCDay(),i=(r-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return $(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"});default:return a.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,a,n){var r=e.getUTCDay(),i=(r-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return $(i,t.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"});default:return a.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,a){var n=e.getUTCDay(),r=0===n?7:n;switch(t){case"i":return String(r);case"ii":return $(r,t.length);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,a){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,a){var n,r=e.getUTCHours();switch(n=12===r?j:0===r?B:r/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,a){var n,r=e.getUTCHours();switch(n=r>=17?q:r>=12?Y:r>=4?H:W,t){case"B":case"BB":case"BBB":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,a){if("ho"===t){var n=e.getUTCHours()%12;return 0===n&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return F.h(e,t)},H:function(e,t,a){return"Ho"===t?a.ordinalNumber(e.getUTCHours(),{unit:"hour"}):F.H(e,t)},K:function(e,t,a){var n=e.getUTCHours()%12;return"Ko"===t?a.ordinalNumber(n,{unit:"hour"}):$(n,t.length)},k:function(e,t,a){var n=e.getUTCHours();return 0===n&&(n=24),"ko"===t?a.ordinalNumber(n,{unit:"hour"}):$(n,t.length)},m:function(e,t,a){return"mo"===t?a.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):F.m(e,t)},s:function(e,t,a){return"so"===t?a.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):F.s(e,t)},S:function(e,t){return F.S(e,t)},X:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return z(r);case"XXXX":case"XX":return Q(r);default:return Q(r,":")}},x:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"x":return z(r);case"xxxx":case"xx":return Q(r);default:return Q(r,":")}},O:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+V(r,":");default:return"GMT"+Q(r,":")}},z:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+V(r,":");default:return"GMT"+Q(r,":")}},t:function(e,t,a,n){var r=n._originalDate||e;return $(Math.floor(r.getTime()/1e3),t.length)},T:function(e,t,a,n){return $((n._originalDate||e).getTime(),t.length)}};function V(e,t){var a=e>0?"-":"+",n=Math.abs(e),r=Math.floor(n/60),i=n%60;if(0===i)return a+String(r);var o=t||"";return a+String(r)+o+$(i,2)}function z(e,t){return e%60==0?(e>0?"-":"+")+$(Math.abs(e)/60,2):Q(e,t)}function Q(e,t){var a=t||"",n=e>0?"-":"+",r=Math.abs(e);return n+$(Math.floor(r/60),2)+a+$(r%60,2)}var K=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},X=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Z={p:X,P:function(e,t){var a,n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return K(e,t);switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",K(r,t)).replace("{{time}}",X(i,t))}},J=["D","DD"],ee=["YY","YYYY"];function te(e){return-1!==J.indexOf(e)}function ae(e){return-1!==ee.indexOf(e)}function ne(e,t,a){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var re=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,oe=/^'([^]*?)'?$/,se=/''/g,le=/[a-zA-Z]/;function ce(e,t,a){var n,r,i,o,s,l,c,d,u,g,m,f,p,h,w,b,_,k;y.requiredArgs(2,arguments);var E=String(t),M=v.getDefaultOptions(),T=null!==(n=null!==(r=null==a?void 0:a.locale)&&void 0!==r?r:M.locale)&&void 0!==n?n:v.locale,D=S(null!==(i=null!==(o=null!==(s=null!==(l=null==a?void 0:a.firstWeekContainsDate)&&void 0!==l?l:null==a||null===(c=a.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==s?s:M.firstWeekContainsDate)&&void 0!==o?o:null===(u=M.locale)||void 0===u||null===(g=u.options)||void 0===g?void 0:g.firstWeekContainsDate)&&void 0!==i?i:1);if(!(D>=1&&D<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var L=S(null!==(m=null!==(f=null!==(p=null!==(h=null==a?void 0:a.weekStartsOn)&&void 0!==h?h:null==a||null===(w=a.locale)||void 0===w||null===(b=w.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==p?p:M.weekStartsOn)&&void 0!==f?f:null===(_=M.locale)||void 0===_||null===(k=_.options)||void 0===k?void 0:k.weekStartsOn)&&void 0!==m?m:0);if(!(L>=0&&L<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!T.localize)throw new RangeError("locale must contain localize property");if(!T.formatLong)throw new RangeError("locale must contain formatLong property");var x=y.toDate(e);if(!C(x))throw new RangeError("Invalid time value");var I=P(x,y.getTimezoneOffsetInMilliseconds(x)),N={firstWeekContainsDate:D,weekStartsOn:L,locale:T,_originalDate:x};return E.match(ie).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,Z[t])(e,T.formatLong):e})).join("").match(re).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return function(e){var t=e.match(oe);if(!t)return e;return t[1].replace(se,"'")}(n);var i=G[r];if(i)return null!=a&&a.useAdditionalWeekYearTokens||!ae(n)||ne(n,t,String(e)),null!=a&&a.useAdditionalDayOfYearTokens||!te(n)||ne(n,t,String(e)),i(I,n,T.localize,N);if(r.match(le))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("")}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function ue(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return de(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?de(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw i}}}}function ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e,t){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},me(e,t)}function fe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&me(e,t)}function pe(e){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pe(e)}function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=pe(e);if(t){var r=pe(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return function(e,t){if(t&&("object"===y._typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ge(e)}(this,a)}}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e){var t=function(e,t){if("object"!==y._typeof(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==y._typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===y._typeof(t)?t:String(t)}function we(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ve(n.key),n)}}function be(e,t,a){return t&&we(e.prototype,t),a&&we(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function _e(e,t,a){return(t=ve(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ke=function(){function e(){ye(this,e),_e(this,"priority",void 0),_e(this,"subPriority",0)}return be(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),Ee=function(e){fe(a,e);var t=he(a);function a(e,n,r,i,o){var s;return ye(this,a),(s=t.call(this)).value=e,s.validateValue=n,s.setValue=r,s.priority=i,o&&(s.subPriority=o),s}return be(a,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,a){return this.setValue(e,t,this.value,a)}}]),a}(ke),Me=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",10),_e(ge(e),"subPriority",-1),e}return be(a,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var a=new Date(0);return a.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),a.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),a}}]),a}(ke),Se=function(){function e(){ye(this,e),_e(this,"incompatibleTokens",void 0),_e(this,"priority",void 0),_e(this,"subPriority",void 0)}return be(e,[{key:"run",value:function(e,t,a,n){var r=this.parse(e,t,a,n);return r?{setter:new Ee(r.value,this.validate,this.set,this.priority,this.subPriority),rest:r.rest}:null}},{key:"validate",value:function(e,t,a){return!0}}]),e}(),Te=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",140),_e(ge(e),"incompatibleTokens",["R","u","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){switch(t){case"G":case"GG":case"GGG":return a.era(e,{width:"abbreviated"})||a.era(e,{width:"narrow"});case"GGGGG":return a.era(e,{width:"narrow"});default:return a.era(e,{width:"wide"})||a.era(e,{width:"abbreviated"})||a.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,a){return t.era=a,e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e}}]),a}(Se),De=/^(1[0-2]|0?\d)/,Ce=/^(3[0-1]|[0-2]?\d)/,Pe=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Le=/^(5[0-3]|[0-4]?\d)/,xe=/^(2[0-3]|[0-1]?\d)/,Ie=/^(2[0-4]|[0-1]?\d)/,Ne=/^(1[0-1]|0?\d)/,Oe=/^(1[0-2]|0?\d)/,Ae=/^[0-5]?\d/,Ue=/^[0-5]?\d/,Re=/^\d/,$e=/^\d{1,2}/,Fe=/^\d{1,3}/,Be=/^\d{1,4}/,je=/^-?\d+/,He=/^-?\d/,Ye=/^-?\d{1,2}/,qe=/^-?\d{1,3}/,We=/^-?\d{1,4}/,Ge=/^([+-])(\d{2})(\d{2})?|Z/,Ve=/^([+-])(\d{2})(\d{2})|Z/,ze=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,Qe=/^([+-])(\d{2}):(\d{2})|Z/,Ke=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function Xe(e,t){return e?{value:t(e.value),rest:e.rest}:e}function Ze(e,t){var a=t.match(e);return a?{value:parseInt(a[0],10),rest:t.slice(a[0].length)}:null}function Je(e,t){var a=t.match(e);return a?"Z"===a[0]?{value:0,rest:t.slice(1)}:{value:("+"===a[1]?1:-1)*(36e5*(a[2]?parseInt(a[2],10):0)+6e4*(a[3]?parseInt(a[3],10):0)+1e3*(a[5]?parseInt(a[5],10):0)),rest:t.slice(a[0].length)}:null}function et(e){return Ze(je,e)}function tt(e,t){switch(e){case 1:return Ze(Re,t);case 2:return Ze($e,t);case 3:return Ze(Fe,t);case 4:return Ze(Be,t);default:return Ze(new RegExp("^\\d{1,"+e+"}"),t)}}function at(e,t){switch(e){case 1:return Ze(He,t);case 2:return Ze(Ye,t);case 3:return Ze(qe,t);case 4:return Ze(We,t);default:return Ze(new RegExp("^-?\\d{1,"+e+"}"),t)}}function nt(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function rt(e,t){var a,n=t>0,r=n?t:1-t;if(r<=50)a=e||100;else{var i=r+50;a=e+100*Math.floor(i/100)-(e>=i%100?100:0)}return n?a:1-a}function it(e){return e%400==0||e%4==0&&e%100!=0}var ot=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",130),_e(ge(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){var n=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return Xe(tt(4,e),n);case"yo":return Xe(a.ordinalNumber(e,{unit:"year"}),n);default:return Xe(tt(t.length,e),n)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,a){var n=e.getUTCFullYear();if(a.isTwoDigitYear){var r=rt(a.year,n);return e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}var i="era"in t&&1!==t.era?1-a.year:a.year;return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}}]),a}(Se),st=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",130),_e(ge(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){var n=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return Xe(tt(4,e),n);case"Yo":return Xe(a.ordinalNumber(e,{unit:"year"}),n);default:return Xe(tt(t.length,e),n)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,a,n){var r=A(e,n);if(a.isTwoDigitYear){var i=rt(a.year,r);return e.setUTCFullYear(i,0,n.firstWeekContainsDate),e.setUTCHours(0,0,0,0),O(e,n)}var o="era"in t&&1!==t.era?1-a.year:a.year;return e.setUTCFullYear(o,0,n.firstWeekContainsDate),e.setUTCHours(0,0,0,0),O(e,n)}}]),a}(Se),lt=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",130),_e(ge(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return be(a,[{key:"parse",value:function(e,t){return at("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,a){var n=new Date(0);return n.setUTCFullYear(a,0,4),n.setUTCHours(0,0,0,0),L(n)}}]),a}(Se),ct=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",130),_e(ge(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return be(a,[{key:"parse",value:function(e,t){return at("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,a){return e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e}}]),a}(Se),dt=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",120),_e(ge(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){switch(t){case"Q":case"QQ":return tt(t.length,e);case"Qo":return a.ordinalNumber(e,{unit:"quarter"});case"QQQ":return a.quarter(e,{width:"abbreviated",context:"formatting"})||a.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(e,{width:"narrow",context:"formatting"});default:return a.quarter(e,{width:"wide",context:"formatting"})||a.quarter(e,{width:"abbreviated",context:"formatting"})||a.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,a){return e.setUTCMonth(3*(a-1),1),e.setUTCHours(0,0,0,0),e}}]),a}(Se),ut=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",120),_e(ge(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){switch(t){case"q":case"qq":return tt(t.length,e);case"qo":return a.ordinalNumber(e,{unit:"quarter"});case"qqq":return a.quarter(e,{width:"abbreviated",context:"standalone"})||a.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(e,{width:"narrow",context:"standalone"});default:return a.quarter(e,{width:"wide",context:"standalone"})||a.quarter(e,{width:"abbreviated",context:"standalone"})||a.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,a){return e.setUTCMonth(3*(a-1),1),e.setUTCHours(0,0,0,0),e}}]),a}(Se),gt=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),_e(ge(e),"priority",110),e}return be(a,[{key:"parse",value:function(e,t,a){var n=function(e){return e-1};switch(t){case"M":return Xe(Ze(De,e),n);case"MM":return Xe(tt(2,e),n);case"Mo":return Xe(a.ordinalNumber(e,{unit:"month"}),n);case"MMM":return a.month(e,{width:"abbreviated",context:"formatting"})||a.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(e,{width:"narrow",context:"formatting"});default:return a.month(e,{width:"wide",context:"formatting"})||a.month(e,{width:"abbreviated",context:"formatting"})||a.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,a){return e.setUTCMonth(a,1),e.setUTCHours(0,0,0,0),e}}]),a}(Se),mt=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",110),_e(ge(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){var n=function(e){return e-1};switch(t){case"L":return Xe(Ze(De,e),n);case"LL":return Xe(tt(2,e),n);case"Lo":return Xe(a.ordinalNumber(e,{unit:"month"}),n);case"LLL":return a.month(e,{width:"abbreviated",context:"standalone"})||a.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(e,{width:"narrow",context:"standalone"});default:return a.month(e,{width:"wide",context:"standalone"})||a.month(e,{width:"abbreviated",context:"standalone"})||a.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,a){return e.setUTCMonth(a,1),e.setUTCHours(0,0,0,0),e}}]),a}(Se);var ft=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",100),_e(ge(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){switch(t){case"w":return Ze(Le,e);case"wo":return a.ordinalNumber(e,{unit:"week"});default:return tt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,a,n){return O(function(e,t,a){y.requiredArgs(2,arguments);var n=y.toDate(e),r=S(t),i=R(n,a)-r;return n.setUTCDate(n.getUTCDate()-7*i),n}(e,a,n),n)}}]),a}(Se);var pt=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",100),_e(ge(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){switch(t){case"I":return Ze(Le,e);case"Io":return a.ordinalNumber(e,{unit:"week"});default:return tt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,a){return L(function(e,t){y.requiredArgs(2,arguments);var a=y.toDate(e),n=S(t),r=N(a)-n;return a.setUTCDate(a.getUTCDate()-7*r),a}(e,a))}}]),a}(Se),ht=[31,28,31,30,31,30,31,31,30,31,30,31],yt=[31,29,31,30,31,30,31,31,30,31,30,31],vt=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",90),_e(ge(e),"subPriority",1),_e(ge(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){switch(t){case"d":return Ze(Ce,e);case"do":return a.ordinalNumber(e,{unit:"date"});default:return tt(t.length,e)}}},{key:"validate",value:function(e,t){var a=it(e.getUTCFullYear()),n=e.getUTCMonth();return a?t>=1&&t<=yt[n]:t>=1&&t<=ht[n]}},{key:"set",value:function(e,t,a){return e.setUTCDate(a),e.setUTCHours(0,0,0,0),e}}]),a}(Se),wt=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",90),_e(ge(e),"subpriority",1),_e(ge(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){switch(t){case"D":case"DD":return Ze(Pe,e);case"Do":return a.ordinalNumber(e,{unit:"date"});default:return tt(t.length,e)}}},{key:"validate",value:function(e,t){return it(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,a){return e.setUTCMonth(0,a),e.setUTCHours(0,0,0,0),e}}]),a}(Se);function bt(e,t,a){var n,r,i,o,s,l,c,d;y.requiredArgs(2,arguments);var u=v.getDefaultOptions(),g=S(null!==(n=null!==(r=null!==(i=null!==(o=null==a?void 0:a.weekStartsOn)&&void 0!==o?o:null==a||null===(s=a.locale)||void 0===s||null===(l=s.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(c=u.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==n?n:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=y.toDate(e),f=S(t),p=((f%7+7)%7<g?7:0)+f-m.getUTCDay();return m.setUTCDate(m.getUTCDate()+p),m}var _t=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",90),_e(ge(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){switch(t){case"E":case"EE":case"EEE":return a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});default:return a.day(e,{width:"wide",context:"formatting"})||a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,a,n){return(e=bt(e,a,n)).setUTCHours(0,0,0,0),e}}]),a}(Se),kt=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",90),_e(ge(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a,n){var r=function(e){var t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return Xe(tt(t.length,e),r);case"eo":return Xe(a.ordinalNumber(e,{unit:"day"}),r);case"eee":return a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"eeeee":return a.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});default:return a.day(e,{width:"wide",context:"formatting"})||a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,a,n){return(e=bt(e,a,n)).setUTCHours(0,0,0,0),e}}]),a}(Se),Et=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",90),_e(ge(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a,n){var r=function(e){var t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return Xe(tt(t.length,e),r);case"co":return Xe(a.ordinalNumber(e,{unit:"day"}),r);case"ccc":return a.day(e,{width:"abbreviated",context:"standalone"})||a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"});case"ccccc":return a.day(e,{width:"narrow",context:"standalone"});case"cccccc":return a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"});default:return a.day(e,{width:"wide",context:"standalone"})||a.day(e,{width:"abbreviated",context:"standalone"})||a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,a,n){return(e=bt(e,a,n)).setUTCHours(0,0,0,0),e}}]),a}(Se);var Mt=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",90),_e(ge(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){var n=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return tt(t.length,e);case"io":return a.ordinalNumber(e,{unit:"day"});case"iii":return Xe(a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return Xe(a.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return Xe(a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"}),n);default:return Xe(a.day(e,{width:"wide",context:"formatting"})||a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"}),n)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,a){return e=function(e,t){y.requiredArgs(2,arguments);var a=S(t);a%7==0&&(a-=7);var n=y.toDate(e),r=((a%7+7)%7<1?7:0)+a-n.getUTCDay();return n.setUTCDate(n.getUTCDate()+r),n}(e,a),e.setUTCHours(0,0,0,0),e}}]),a}(Se),St=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",80),_e(ge(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){switch(t){case"a":case"aa":case"aaa":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(e,{width:"narrow",context:"formatting"});default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,a){return e.setUTCHours(nt(a),0,0,0),e}}]),a}(Se),Tt=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",80),_e(ge(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){switch(t){case"b":case"bb":case"bbb":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(e,{width:"narrow",context:"formatting"});default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,a){return e.setUTCHours(nt(a),0,0,0),e}}]),a}(Se),Dt=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",80),_e(ge(e),"incompatibleTokens",["a","b","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){switch(t){case"B":case"BB":case"BBB":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(e,{width:"narrow",context:"formatting"});default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,a){return e.setUTCHours(nt(a),0,0,0),e}}]),a}(Se),Ct=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",70),_e(ge(e),"incompatibleTokens",["H","K","k","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){switch(t){case"h":return Ze(Oe,e);case"ho":return a.ordinalNumber(e,{unit:"hour"});default:return tt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,a){var n=e.getUTCHours()>=12;return n&&a<12?e.setUTCHours(a+12,0,0,0):n||12!==a?e.setUTCHours(a,0,0,0):e.setUTCHours(0,0,0,0),e}}]),a}(Se),Pt=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",70),_e(ge(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){switch(t){case"H":return Ze(xe,e);case"Ho":return a.ordinalNumber(e,{unit:"hour"});default:return tt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,a){return e.setUTCHours(a,0,0,0),e}}]),a}(Se),Lt=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",70),_e(ge(e),"incompatibleTokens",["h","H","k","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){switch(t){case"K":return Ze(Ne,e);case"Ko":return a.ordinalNumber(e,{unit:"hour"});default:return tt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,a){return e.getUTCHours()>=12&&a<12?e.setUTCHours(a+12,0,0,0):e.setUTCHours(a,0,0,0),e}}]),a}(Se),xt=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",70),_e(ge(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){switch(t){case"k":return Ze(Ie,e);case"ko":return a.ordinalNumber(e,{unit:"hour"});default:return tt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,a){var n=a<=24?a%24:a;return e.setUTCHours(n,0,0,0),e}}]),a}(Se),It=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",60),_e(ge(e),"incompatibleTokens",["t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){switch(t){case"m":return Ze(Ae,e);case"mo":return a.ordinalNumber(e,{unit:"minute"});default:return tt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,a){return e.setUTCMinutes(a,0,0),e}}]),a}(Se),Nt=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",50),_e(ge(e),"incompatibleTokens",["t","T"]),e}return be(a,[{key:"parse",value:function(e,t,a){switch(t){case"s":return Ze(Ue,e);case"so":return a.ordinalNumber(e,{unit:"second"});default:return tt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,a){return e.setUTCSeconds(a,0),e}}]),a}(Se),Ot=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",30),_e(ge(e),"incompatibleTokens",["t","T"]),e}return be(a,[{key:"parse",value:function(e,t){return Xe(tt(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,a){return e.setUTCMilliseconds(a),e}}]),a}(Se),At=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",10),_e(ge(e),"incompatibleTokens",["t","T","x"]),e}return be(a,[{key:"parse",value:function(e,t){switch(t){case"X":return Je(Ge,e);case"XX":return Je(Ve,e);case"XXXX":return Je(ze,e);case"XXXXX":return Je(Ke,e);default:return Je(Qe,e)}}},{key:"set",value:function(e,t,a){return t.timestampIsSet?e:new Date(e.getTime()-a)}}]),a}(Se),Ut=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",10),_e(ge(e),"incompatibleTokens",["t","T","X"]),e}return be(a,[{key:"parse",value:function(e,t){switch(t){case"x":return Je(Ge,e);case"xx":return Je(Ve,e);case"xxxx":return Je(ze,e);case"xxxxx":return Je(Ke,e);default:return Je(Qe,e)}}},{key:"set",value:function(e,t,a){return t.timestampIsSet?e:new Date(e.getTime()-a)}}]),a}(Se),Rt=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",40),_e(ge(e),"incompatibleTokens","*"),e}return be(a,[{key:"parse",value:function(e){return et(e)}},{key:"set",value:function(e,t,a){return[new Date(1e3*a),{timestampIsSet:!0}]}}]),a}(Se),$t=function(e){fe(a,e);var t=he(a);function a(){var e;ye(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _e(ge(e=t.call.apply(t,[this].concat(r))),"priority",20),_e(ge(e),"incompatibleTokens","*"),e}return be(a,[{key:"parse",value:function(e){return et(e)}},{key:"set",value:function(e,t,a){return[new Date(a),{timestampIsSet:!0}]}}]),a}(Se),Ft={G:new Te,y:new ot,Y:new st,R:new lt,u:new ct,Q:new dt,q:new ut,M:new gt,L:new mt,w:new ft,I:new pt,d:new vt,D:new wt,E:new _t,e:new kt,c:new Et,i:new Mt,a:new St,b:new Tt,B:new Dt,h:new Ct,H:new Pt,K:new Lt,k:new xt,m:new It,s:new Nt,S:new Ot,X:new At,x:new Ut,t:new Rt,T:new $t},Bt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,jt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ht=/^'([^]*?)'?$/,Yt=/''/g,qt=/\S/,Wt=/[a-zA-Z]/;function Gt(e,t,a,n){var r,i,o,s,l,c,d,u,g,m,f,p,h,w,b,_,k,E;y.requiredArgs(3,arguments);var M=String(e),T=String(t),D=v.getDefaultOptions(),C=null!==(r=null!==(i=null==n?void 0:n.locale)&&void 0!==i?i:D.locale)&&void 0!==r?r:v.locale;if(!C.match)throw new RangeError("locale must contain match property");var L=S(null!==(o=null!==(s=null!==(l=null!==(c=null==n?void 0:n.firstWeekContainsDate)&&void 0!==c?c:null==n||null===(d=n.locale)||void 0===d||null===(u=d.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==l?l:D.firstWeekContainsDate)&&void 0!==s?s:null===(g=D.locale)||void 0===g||null===(m=g.options)||void 0===m?void 0:m.firstWeekContainsDate)&&void 0!==o?o:1);if(!(L>=1&&L<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var x=S(null!==(f=null!==(p=null!==(h=null!==(w=null==n?void 0:n.weekStartsOn)&&void 0!==w?w:null==n||null===(b=n.locale)||void 0===b||null===(_=b.options)||void 0===_?void 0:_.weekStartsOn)&&void 0!==h?h:D.weekStartsOn)&&void 0!==p?p:null===(k=D.locale)||void 0===k||null===(E=k.options)||void 0===E?void 0:E.weekStartsOn)&&void 0!==f?f:0);if(!(x>=0&&x<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===T)return""===M?y.toDate(a):new Date(NaN);var I,N={firstWeekContainsDate:L,weekStartsOn:x,locale:C},O=[new Me],A=T.match(jt).map((function(e){var t=e[0];return t in Z?(0,Z[t])(e,C.formatLong):e})).join("").match(Bt),U=[],R=ue(A);try{var $=function(){var t=I.value;null!=n&&n.useAdditionalWeekYearTokens||!ae(t)||ne(t,T,e),null!=n&&n.useAdditionalDayOfYearTokens||!te(t)||ne(t,T,e);var a=t[0],r=Ft[a];if(r){var i=r.incompatibleTokens;if(Array.isArray(i)){var o=U.find((function(e){return i.includes(e.token)||e.token===a}));if(o)throw new RangeError("The format string mustn't contain `".concat(o.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===r.incompatibleTokens&&U.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));U.push({token:a,fullToken:t});var s=r.run(M,t,C.match,N);if(!s)return{v:new Date(NaN)};O.push(s.setter),M=s.rest}else{if(a.match(Wt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+a+"`");if("''"===t?t="'":"'"===a&&(t=t.match(Ht)[1].replace(Yt,"'")),0!==M.indexOf(t))return{v:new Date(NaN)};M=M.slice(t.length)}};for(R.s();!(I=R.n()).done;){var F=$();if("object"===y._typeof(F))return F.v}}catch(e){R.e(e)}finally{R.f()}if(M.length>0&&qt.test(M))return new Date(NaN);var B=O.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,a){return a.indexOf(e)===t})).map((function(e){return O.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),j=y.toDate(a);if(isNaN(j.getTime()))return new Date(NaN);var H,Y=P(j,y.getTimezoneOffsetInMilliseconds(j)),q={},W=ue(B);try{for(W.s();!(H=W.n()).done;){var G=H.value;if(!G.validate(Y,N))return new Date(NaN);var V=G.set(Y,q,N);Array.isArray(V)?(Y=V[0],v.assign(q,V[1])):Y=V}}catch(e){W.e(e)}finally{W.f()}return Y}const Vt="require_password";function zt(e){return{class:"sharing_sender",action:"hover",object:"flexible_sharing_entrypoint_action",properties:e}}function Qt(e){return{class:"sharing_sender",action:"log",object:"flexible_sharing_entrypoint_action_dwell_time",properties:e}}const Kt=e=>e.formatMessage({id:"b0sjjf",defaultMessage:"Learn more"}),Xt=e=>e.formatMessage({id:"O1FxvA",defaultMessage:"This folder can only be shared as a link."}),Zt=e=>e.formatMessage({id:"QpEuIr",defaultMessage:"You can view this folder, but youll need to ask the folder owner to give you permission to share it."}),Jt=e=>e.formatMessage({id:"/8sefF",defaultMessage:"You can view this folder, but only the folder owner can share it."}),ea=e=>e.formatMessage({id:"DuQ3Qu",defaultMessage:"Add people by name or email"}),ta=Symbol("ON_CLICK_PROGRESSIVE"),aa=Symbol("ON_MOUSE_ENTER_PROGRESSIVE"),na=Symbol("ON_MOUSE_LEAVE_PROGRESSIVE"),{useEmitter:ra,defaultEmitter:ia}=a.defineLogger((async({event:e,getContextValue:t})=>{const n=t(a.Context$4),r=t(a.Context$5),i=t(a.Context$6),s=t(a.Context$7),l={...a.getTags$4(n),...a.getTags$5(r),...a.getTags$6(i),...a.getTags$7(s)},c={...a.getProperties$4(n),...a.getProperties$5(r),...a.getProperties$6(i),...a.getProperties$7(s)};if(e.key===ta)return a.UDCL.logEvent(o.PAP_Select_FlexibleSharingEntrypointAction({...c,flexibleSharingEntryPointAction:"inband_progressive",flexibleSharingEntryPointTimeToAction:e.payload.timeSinceView}),{tags:{...l,action:"inband_progressive"}}),void a.UDCL.logEvent(Qt({...c,flexibleSharingEntryPointAction:"inband_progressive",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!0}),{tags:{...l,action:"inband_progressive"}});if(e.key!==aa){if(e.key!==na)return a.exhausts(e,void 0);a.UDCL.logEvent(Qt({...c,flexibleSharingEntryPointAction:"inband_progressive",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!1}),{tags:{...l,action:"inband_progressive"}})}else a.UDCL.logEvent(zt({...c,flexibleSharingEntryPointAction:"inband_progressive"}),{tags:{...l,action:"inband_progressive"}})})),oa=({accountMetadata:e})=>{const t=n.useIntl(),o=r.useOpenUrl(),s=i.getIsTeamAdmin(e),l=s?(e=>e.formatMessage({id:"QV0fMP",defaultMessage:"To share this folder, manage access in the admin console."}))(t):(e=>e.formatMessage({id:"C87Oa/",defaultMessage:"Only admins can directly share this content. Reach out and ask them to share it."}))(t),c=s?(e=>e.formatMessage({id:"S839MU",defaultMessage:"Go to admin console"}))(t):(e=>e.formatMessage({id:"0KHhX0",defaultMessage:"Find admin"}))(t);return M.createElement(a.Box,null,M.createElement(a.Text,{size:"medium","data-testid":"tmr-team-folder-subtitle"},l),M.createElement(a.Box,{marginTop:"Micro Large"},M.createElement(a.Button,{variant:"transparent",onClick:()=>{o(s?"/team/admin/content/home":"/team?_tk=left_nav_team")}},c)))};oa.displayName="TmrTeamFolder";const sa=e=>{var t;const{objectMetadata:c,accountMetadata:d,onInbandButtonClicked:u,componentViewTime:g}=e,m=a.isNewApiMetadata(c),[f,p]=M.useState(!1),[h,y]=M.useState(!1),[v,w]=M.useState(0),b=M.useRef(null),_=ra(),k=a.getCanInvite(c,o.VIEWER),E=a.getCanInvite(c,o.EDITOR)||k,S=a.getIsLinkOnlyMode(c),T=a.getIsNSLinkOnlyMode(c),D=a.getIsFolder(c),C=i.isUserOnSameTeamAsObject(d,c),P=i.isUserOnSameTeamAsTmrTeamFolder(d,c),L=!!a.getOwnerTeam(c),x=null!==(t=a.getOwnerTeamName(c))&&void 0!==t?t:"",I=a.getIsTeamSharedFolder(c),N="https://help.dropbox.com/files-folders/share/shared-folder-faq#cantcreate",O=r.useOpenUrl(),A=M.useCallback((e=>{O(e)}),[O]),U=()=>{switch(a.getInviteDeniedReason(c)){case"mount_exceeded":return M.createElement(a.Text,null,((e,t)=>{if(!t.metadata_response||!a.getIsFolder(t))return;const n=t.metadata_response;if(n.invite_viewer_folder_perm.invite_viewer_folder_denied_reason&&"mount_exceeded"===n.invite_viewer_folder_perm.invite_viewer_folder_denied_reason[".tag"]){const t=n.invite_viewer_folder_perm.invite_viewer_folder_denied_reason,a=t.limit,r=t.new_count-a;return e.formatMessage({id:"f3Mx9B",defaultMessage:"This folder can only be shared as a link because your Dropbox folder is {number, plural, one{1 shared folder} other {{number} shared folders}} over limit."},{number:r})}})(n.intl,c),M.createElement(a.Link,{style:{marginLeft:3},hasNoUnderline:!0,onClick:()=>A(N),href:"",isBold:!0,display:"inline"},Kt(n.intl)));case"contains_app_folder":case"inside_app_folder":case"is_app_folder":case"is_family_folder":return M.createElement(a.Text,null,Xt(n.intl));default:return M.createElement(a.Text,null,C?Zt(n.intl):Jt(n.intl))}},R=M.useCallback((()=>{const e=h?Date.now()-v:void 0,t=Date.now()-g;_.select(ta).emit({dwellTime:e,timeSinceView:t}),u()}),[g,_,h,u,v]),$=M.useCallback((()=>{w(Date.now()),y(!0),_.select(aa).emit(null),p(!0)}),[_]),F=M.useCallback((()=>{const e=h?Date.now()-v:void 0;y(!1),_.select(na).emit({dwellTime:e}),p(!1)}),[_,h,v]),B=m?!E:S||!E;return M.createElement(M.Fragment,null,M.createElement(s.ButtonWrapper,{ref:b,onMouseEnter:$,onMouseLeave:F,"data-uxa-log":"sm24-inband-button."+(B?"disabled":"loaded"),"data-uxa-interactions":"shown click"},M.createElement(s.HorizontalButton,{onClick:R,disabled:B,"data-testid":"inband-sharing-entry-button"},M.createElement(s.ButtonIconContainer,null,M.createElement(a.UIIcon,{src:l.ShareLine,size:"medium"})),M.createElement(s.ButtonInnerColumn,null,M.createElement(s.ButtonTitle,{content:(j=n.intl,j.formatMessage({id:"SC4EWs",defaultMessage:"Add people"}))})))),(()=>{let e=null;return m?P&&!E?e=M.createElement(oa,{accountMetadata:d}):E||(e=U()):S?e=(()=>{switch(S?T?"isNSLinkOnlyMode":"isFamily":"isLimitedPermissions"){case"isNSLinkOnlyMode":return M.createElement(a.Text,null,((e,t)=>{if(t.tooManyMountsError&&("total_mounts_exceeded"===t.tooManyMountsError[".tag"]||"home_mounts_exceeded"===t.tooManyMountsError[".tag"]||"tree_size_exceeded"===t.tooManyMountsError[".tag"])){const a=t.tooManyMountsError.limits_info;if(a){const t=a.limit,n=a.new_count-t;return e.formatMessage({id:"f3Mx9B",defaultMessage:"This folder can only be shared as a link because your Dropbox folder is {number, plural, one{1 shared folder} other {{number} shared folders}} over limit."},{number:n})}}})(n.intl,c),M.createElement(a.Link,{style:{marginLeft:3},hasNoUnderline:!0,onClick:()=>A(N),href:"",isBold:!0,display:"inline"},Kt(n.intl)));case"isLimitedPermissions":return L&&!C?I?M.createElement(a.Text,null,(e=n.intl,void 0!==(t=x)?e.formatMessage({id:"ToMYBy",defaultMessage:"This folder can only be managed by the {ownerTeamName} team."},{ownerTeamName:t}):e.formatMessage({id:"ReqZ5Y",defaultMessage:"This folder can only be managed by the owner team."}))):D?M.createElement(a.Text,null,(e=>e.formatMessage({id:"5iJXBE",defaultMessage:"You dont have permission to manage membership of this folder"}))(n.intl)):M.createElement(a.Text,null,(e=>e.formatMessage({id:"WVaUHn",defaultMessage:"You dont have permission to manage membership of this file"}))(n.intl)):M.createElement(a.Text,null,(e=>e.formatMessage({id:"TnTBTY",defaultMessage:"This can only be shared with the link."}))(n.intl));case"isFamily":return M.createElement(a.Text,null,Xt(n.intl))}var e,t})():P&&!E?e=M.createElement(oa,{accountMetadata:d}):E||(e=M.createElement(a.Text,null,C?Zt(n.intl):Jt(n.intl))),e?M.createElement(a.Tooltip.Control,{open:f,placement:"top",auto:!0,triggerRef:b,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1)},e):null})());var j};sa.displayName="InbandEntryButtonInner";const la=e=>{const{oid:t,onInbandButtonClicked:n,componentViewTime:r}=e,o=i.useSharingObjectMetadata(t.fileId),l=i.useSharingAccountInfo(),c=o.isLoading,d=!o.isLoading&&o.isError,u=c||d?void 0:o.output,g=l.isLoading,m=!l.isLoading&&l.isError,f=g||m?void 0:l.output;return c||g?M.createElement(s.ButtonWrapper,{"data-uxa-log":"sm24-inband-button.loading","data-uxa-interactions":"shown click"},M.createElement(s.HorizontalButton,{disabled:!0},M.createElement(a.Skeleton.Avatar,{size:"medium",style:{marginRight:"var(--dig-spacing__dimension__12)"}}),M.createElement(a.Skeleton.Text,{size:"large",width:200}))):u&&f?M.createElement(sa,{accountMetadata:f,objectMetadata:u,onInbandButtonClicked:n,componentViewTime:r}):null};la.displayName="InbandEntryButton";a.injectInternalStyle("/static/metaserver/static/js/sharing/sharing-sdk/legos/inband-entry-button/internals/restricted-chip.module.out-vflqEmUBH.css",(e=>"._restricted-chip_1nil8_1{background-color:hsla(45,91%,83%,.2);border:1px solid var(--dig-color__warning__surface--state-2)!important}._restricted-chip_1nil8_1 *{color:var(--dig-color__text__subtle)}"));const ca=({text:e,"data-testid":t})=>M.createElement(c.Chip,{size:"small",className:"_restricted-chip_1nil8_1","data-testid":t},M.createElement(c.Chip.IconAccessory,null,M.createElement(a.UIIcon,{src:a.WarningLine,size:"small"})),M.createElement(c.Chip.Content,null,e));ca.displayName="RestrictedChip";const da=({objectMetadata:e,accountMetadata:t,canInvite:r,handleButtonClick:o,handleKeyDown:c,componentViewTime:d,shareModalVersion:u})=>{const[g,m]=M.useState(!1),[f,p]=M.useState(0),[h,y]=M.useState(!1),v=M.useRef(null),w=ra(),b=i.isUserOnSameTeamAsTmrTeamFolder(t,e),_=M.useCallback((()=>{const e=g?Date.now()-f:void 0,t=Date.now()-d;w.select(ta).emit({dwellTime:e,timeSinceView:t}),o()}),[d,w,o,g,f]),k=M.useCallback((()=>{p(Date.now()),m(!0),w.select(aa).emit(null),y(!0)}),[w]),E=M.useCallback((()=>{const e=g?Date.now()-f:void 0;m(!1),w.select(na).emit({dwellTime:e}),y(!1)}),[w,g,f]),S=()=>{let o=null;if(b&&!r)o=M.createElement(oa,{accountMetadata:t});else if(!r){const r=i.isUserOnSameTeamAsObject(t,e);o=M.createElement(a.Text,null,r?Zt(n.intl):Jt(n.intl))}return o?M.createElement(a.Tooltip.Control,{open:h,placement:"top",auto:!0,triggerRef:v,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1)},o):null},T="inband-sharing-entry-button",D=i.getIsTeam(t),C=!r;if("sm26"===u){const e=C?M.createElement(ca,{text:(P=n.intl,P.formatMessage({id:"6x1P/s",defaultMessage:"Restricted"})),"data-testid":"inband-restricted-chip"}):void 0;return M.createElement(M.Fragment,null,M.createElement("div",{ref:v,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),onFocus:()=>y(!0),onBlur:()=>y(!1)},M.createElement(s.HorizontalInputButton,{placeholder:ea(n.intl),disabled:C,onChange:_,onClick:_,onKeyDown:c,autoFocus:!0,"data-testid":T,withRightAccessory:e,"aria-label":ea(n.intl),id:"targets-tokenizer-input",autoComplete:"off","data-1p-ignore":!0,"data-lpignore":!0,"data-protonpass-ignore":!0,"data-bwignore":1}),S()))}var P;return M.createElement(M.Fragment,null,M.createElement(s.ButtonWrapper,{ref:v,onMouseEnter:k,onMouseLeave:E},M.createElement(s.HorizontalFlatButton,{onClick:_,disabled:!r,"data-testid":T,autoFocus:!0},M.createElement(s.ButtonIconContainer,null,M.createElement(a.UIIcon,{src:l.ShareLine,size:"small"})),M.createElement(s.ButtonInnerColumn,null,M.createElement(a.Text,{color:"subtle",style:{marginLeft:-3,marginTop:4}},M.createElement(a.Truncate,{lines:2},D?(e=>e.formatMessage({id:"I1N8uC",defaultMessage:"Add an email, name, or group"}))(n.intl):(e=>e.formatMessage({id:"RynZbM",defaultMessage:"Add an email or name"}))(n.intl)))))),S())};da.displayName="Inner";const ua=e=>{const t=i.useSharingObjectMetadata(e.oid.fileId),r=i.useSharingAccountInfo(),l=t.isLoading,c=!t.isLoading&&t.isError,d=l||c?void 0:t.output,u=r.isLoading,g=!r.isLoading&&r.isError,m=u||g?void 0:r.output,f=l||u,p=!f&&d&&m;if(f)return"sm26"===e.shareModalVersion?M.createElement(s.ButtonWrapper,null,M.createElement(s.HorizontalInputButton,{disabled:!0,placeholder:ea(n.intl),"data-testid":"inband-sharing-entry-button-loading"})):M.createElement(s.ButtonWrapper,null,M.createElement(s.HorizontalButton,{disabled:!0},M.createElement(a.Skeleton.Avatar,{size:"medium",style:{marginRight:"var(--dig-spacing__dimension__12)"}}),M.createElement(a.Skeleton.Text,{size:"large",width:200})));if(p){const t=a.getCanInvite(d,o.VIEWER)||a.getCanInvite(d,o.EDITOR);return"sm26"===e.shareModalVersion?M.createElement(da,{accountMetadata:m,objectMetadata:d,canInvite:t,handleButtonClick:e.onTokenizerButtonClick,handleKeyDown:e.onTokenizerKeyDown,componentViewTime:0,shareModalVersion:e.shareModalVersion}):M.createElement(da,{accountMetadata:m,objectMetadata:d,canInvite:t,handleButtonClick:e.onTokenizerButtonClick,handleKeyDown:()=>{},componentViewTime:e.componentViewTime,shareModalVersion:e.shareModalVersion})}return null};ua.displayName="TokenizerButton";const ga=r.define({name:"sharing.modifySharedLinksettings"},(e=>t=>r.handler(e.sharingAlphaModifySharedLinkSettings(t)))),ma=e=>{switch(e){case"public":return a.PUBLIC;case"team":return a.TEAM;case"password":return a.PASSWORD;case"no_one":return a.NO_ONE;default:return a.OTHER$1}},fa=(e,t,a,n)=>{const r=o.SharingSettingsUtil(e).getModifiedSettings(t,n,a);return void 0===r?null:r},pa=e=>{var t,a,n,r,i,o,s,l;const c=null===(t=e.link_permissions.link_access_level)||void 0===t?void 0:t[".tag"],d=null===(a=e.link_permissions.resolved_visibility)||void 0===a?void 0:a[".tag"],u=null===(n=e.link_permissions.effective_audience)||void 0===n?void 0:n[".tag"];return{allow_comments:e.link_permissions.allow_comments,can_revoke:e.link_permissions.can_revoke,allow_download:e.link_permissions.allow_download,can_allow_download:e.link_permissions.can_allow_download,can_disallow_download:e.link_permissions.can_disallow_download,can_set_expiry:e.link_permissions.can_set_expiry,can_remove_expiry:e.link_permissions.can_remove_expiry,can_set_password:Boolean(e.link_permissions.can_set_password),can_remove_password:Boolean(e.link_permissions.can_remove_password),require_password:Boolean(e.link_permissions.require_password),link_access_level:"other"===c||void 0===c?"viewer":c,team_restricts_comments:e.link_permissions.team_restricts_comments,can_use_extended_sharing_controls:e.link_permissions.can_use_extended_sharing_controls,resolved_visibility:"other"===d||void 0===d?"no_one":d,effective_audience:"other"===u||"members"===u?void 0:u,requested_visibility:(null===(r=e.link_permissions.requested_visibility)||void 0===r?void 0:r[".tag"])||"public",revoke_failure_reason:null===(i=e.link_permissions.revoke_failure_reason)||void 0===i?void 0:i[".tag"],restricting_shared_folder_path:e.link_permissions.restricting_shared_folder_path,audience_options:(e.link_permissions.audience_options||[]).filter((e=>"other"!==e.audience[".tag"])).map((e=>{var t;return{audience:e.audience[".tag"],allowed:e.allowed,disallowed_reason:null===(t=e.disallowed_reason)||void 0===t?void 0:t[".tag"]}})),visibility_policies:e.link_permissions.visibility_policies.map((e=>({policy:e.policy[".tag"],resolved_policy:e.resolved_policy[".tag"],allowed:e.allowed,disallowed_reason:e.disallowed_reason}))),days_to_expire_policy:null===(o=e.link_permissions.days_to_expire_policy)||void 0===o?void 0:o[".tag"],change_shared_link_expiration_policy:null===(s=e.link_permissions.change_shared_link_expiration_policy)||void 0===s?void 0:s[".tag"],enforce_shared_link_password_policy:null===(l=e.link_permissions.enforce_shared_link_password_policy)||void 0===l?void 0:l[".tag"]}},ha=(e,t)=>null===t?null:{url:t.url,content_owner_team_info:t.content_owner_team_info,expires:t.expires?new Date(t.expires):void 0,require_password:t.link_permissions.require_password,file_type:a.getIsFile(e)?"file":a.getIsCollection(e)?"collection":"folder",id:t.id,link_permissions:pa(t),name:t.name,path_lower:t.path_lower,rev:void 0,server_modified:void 0,team_member_info:t.team_member_info?{...t.team_member_info,member_id:t.team_member_info.member_id||""}:void 0,preview_type:t.preview_type},ya=(e,t)=>null===t?null:o.SharingSettingsUtil(e).getLinkPolicy(t),va=(e,t)=>"edit_link_settings"===e?a.SettingsTabName.EditLinkSettingsTab:"view_link_settings"===e?a.SettingsTabName.ViewLinkSettingsTab:t?a.SettingsTabName.FileSettingsTab:a.SettingsTabName.FolderSettingsTab,wa=e=>e.formatMessage({id:"pTINM6",defaultMessage:"Cancel"}),ba=e=>e.formatMessage({id:"qIDtpl",defaultMessage:"Saving..."}),_a=e=>e.formatMessage({id:"rQzKcA",defaultMessage:"Save"}),ka=e=>e.formatMessage({id:"9P9QP9",defaultMessage:"Delete link"}),Ea=e=>e.formatMessage({id:"98ues2",defaultMessage:"Create link"}),Ma=e=>e.formatMessage({id:"5c/Fw9",defaultMessage:"There was a problem completing this request."}),Sa=e=>e.formatMessage({id:"thZih0",defaultMessage:"File settings updated."}),Ta=e=>e.formatMessage({id:"y/SwCN",defaultMessage:"Updating folder settings"}),Da=e=>e.formatMessage({id:"9KbrAJ",defaultMessage:"You don`t have permission to perform this action."}),Ca=e=>e.formatMessage({id:"/KMAtq",defaultMessage:"Folder settings updated."}),Pa=e=>e.formatMessage({id:"xbSGM1",defaultMessage:"This setting is turned off for all files in this folder."}),La=e=>e.formatMessage({id:"BUD+SU",defaultMessage:"Your admin has disabled this setting."}),xa=e=>e.formatMessage({id:"hIM/KB",defaultMessage:"You dont have permission to change the settings on this file."}),Ia=e=>e.formatMessage({id:"PLkx47",defaultMessage:"Anyone with edit access can change these settings."}),Na=(e,t,n)=>e.formatMessage({id:"7Lpr6B",defaultMessage:"Deleting link to <st>{name}</st>..."},{st:e=>M.createElement("strong",null,e),name:i.Emstring.em_snippet(t,n?a.SNIPPET_SIZES.DESKTOP_FILENAME:a.SNIPPET_SIZES.FILENAME)}),Oa=(e,t,n)=>e.formatMessage({id:"fghTgF",defaultMessage:"Deleted link to <st>{name}</st>."},{st:e=>M.createElement("strong",null,e),name:i.Emstring.em_snippet(t,n?a.SNIPPET_SIZES.DESKTOP_FILENAME:a.SNIPPET_SIZES.FILENAME)}),Aa=e=>e.formatMessage({id:"oW3nlu",defaultMessage:"Link deletion failed. Please retry."}),Ua=e=>e.formatMessage({id:"eqpbc5",defaultMessage:"Who still has access?"}),Ra=(e,t)=>"editor"===t[".tag"]?e.formatMessage({id:"OvEApa",defaultMessage:"Creating edit link..."}):e.formatMessage({id:"8PPImn",defaultMessage:"Creating view link..."}),$a=(e,t)=>t?e.formatMessage({id:"p1EB+W",defaultMessage:"You dont have permission to create a link to this file"}):e.formatMessage({id:"/ivxG2",defaultMessage:"You dont have permission to create a link to this folder"}),Fa=e=>e.formatMessage({id:"+iNJRS",defaultMessage:"There was a problem completing this request."}),Ba=(e,t)=>"editor"===t[".tag"]?e.formatMessage({id:"1+z1aQ",defaultMessage:"Edit link created"}):e.formatMessage({id:"IalA6p",defaultMessage:"View link created"}),ja=e=>e.formatMessage({id:"V2Zurn",defaultMessage:"People who have used this link might still have access"}),Ha=e=>e.formatMessage({id:"rqdCog",defaultMessage:"You can check the list of people with access and remove them."}),Ya=e=>e.formatMessage({id:"YCTkuR",defaultMessage:"Got It"}),qa=e=>e.formatMessage({id:"UBFEXr",defaultMessage:"Who still has access?"}),Wa=e=>e.formatMessage({id:"OMkgF4",defaultMessage:"Settings saved."}),Ga=e=>e.formatMessage({id:"k+OG4a",defaultMessage:"Link settings saved."}),Va=(e,t)=>e.formatMessage({id:"SuyTXe",defaultMessage:"Unsharing <st>{name}</st>..."},{st:e=>M.createElement("strong",null,e),name:i.Emstring.em_snippet(t,a.SNIPPET_SIZES.FILENAME)}),za=(e,t)=>e.formatMessage({id:"K7TiCS",defaultMessage:"Unshared <st>{name}</st>."},{st:e=>M.createElement("strong",null,e),name:i.Emstring.em_snippet(t,a.SNIPPET_SIZES.FILENAME)}),Qa=e=>e.formatMessage({id:"sL/c0K",defaultMessage:"Unshare failed. Please retry."}),Ka=(e,t)=>a.getIsFile(t)?(e=>e.formatMessage({id:"px+mde",defaultMessage:"Unshare file"}))(e):a.getIsInsideTeamFolderTree(t)?(e=>e.formatMessage({id:"11dNm1",defaultMessage:"Reset membership"}))(e):(e=>e.formatMessage({id:"qyAR1S",defaultMessage:"Unshare folder"}))(e),Xa=(e,t)=>e.formatMessage({id:"AvoJhZ",defaultMessage:"These settings will apply to all folders inside <st>{folder_name}.</st>"},{folder_name:t,st:e=>M.createElement("strong",null,e)}),Za=(e,t)=>e.formatMessage({id:"W4bv7f",defaultMessage:"These settings will apply to all folders inside <st>{folder_name}.</st> You can change these settings or manage access in the Admin Console."},{folder_name:t,st:e=>M.createElement("strong",null,e)}),Ja=(e,t)=>e.formatMessage({id:"M+bKji",defaultMessage:"<adminLink>Go to admin console</adminLink>"},{adminLink:e=>M.createElement(a.Button,{variant:"transparent",size:"small",onClick:()=>t("/team/admin/content/home")},e)}),en=(e,t)=>e.formatMessage({id:"kBmOrE",defaultMessage:"These settings will apply to all folders inside <st>{folder_name}.</st> To edit, ask your admin."},{folder_name:t,st:e=>M.createElement("strong",null,e)}),tn=(e,t)=>e.formatMessage({id:"FAe8j7",defaultMessage:"<findAdminLink>Find admin</findAdminLink>"},{findAdminLink:e=>M.createElement(a.Button,{variant:"transparent",size:"small",onClick:()=>t("/team?_tk=left_nav_team")},e)}),an=e=>e.formatMessage({id:"CKlNWd",defaultMessage:"Well let the owner know whenever you change these settings"}),nn=(e,t)=>e.formatMessage({id:"5Aqtnn",defaultMessage:"Only the owner (you) can change these settings. Settings apply to all folders in <st>{folder_name}.</st>"},{folder_name:i.Emstring.em_snippet(t,a.SNIPPET_SIZES.FILENAME),st:e=>M.createElement("strong",null,e)}),rn=(e,t)=>e.formatMessage({id:"o9IXBs",defaultMessage:"Only the owner can change these settings. Settings apply to all folders in <st>{folder_name}.</st>"},{folder_name:i.Emstring.em_snippet(t,a.SNIPPET_SIZES.FILENAME),st:e=>M.createElement("strong",null,e)}),on=e=>e.formatMessage({id:"iQBMyq",defaultMessage:"Only team admins can change these settings."}),sn=e=>e.formatMessage({id:"6K7VUR",defaultMessage:"Close"}),ln=e=>e.formatMessage({id:"RCQdy7",defaultMessage:"This file hasnt been shared yet"}),cn=e=>e.formatMessage({id:"+hXlVB",defaultMessage:"Cant unshare a folder that is within multiple shared folders."}),dn="member_policy",un="viewer_info_policy",gn="shared_link_policy",mn="expires",fn="allow_download",pn="audience",hn="require_password",yn="acl_update_policy",vn="dropdown",wn="toggle";class bn extends M.Component{render(){const e=this.props.optionsDict[this.props.currentValue].label;return M.createElement(a.Menu.Wrapper,{className:"sharing-settings-dropdown",onSelection:e=>{e!==this.props.currentValue&&this.props.onValueSelected(e)}},(({getContentProps:t,getTriggerProps:n})=>M.createElement(M.Fragment,null,M.createElement(a.Button,{...n(),withDropdownIcon:!0,variant:"opacity",disabled:this.props.disabled,"aria-label":`${e}, ${this.props.ariaLabel}`,"data-testid":"sharing-settings-dropdown"},M.createElement(a.Truncate,{maxWidth:180},e)),M.createElement(a.Menu.Content,{"data-sharing-sdk":"1",...t()},M.createElement(a.Menu.Segment,null,this.props.valuesList.map((e=>M.createElement(a.Menu.ActionItem,{key:e,value:e,"aria-label":this.props.optionsDict[e].label,className:e===this.props.currentValue?"selected":""},M.createElement("div",{style:{width:"250px",marginBottom:"8px"}},M.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},e===this.props.currentValue?M.createElement(p.IconDropdownSelected,{className:"scl-sharing-dropdown-menu-item-dig__path-color"}):null,M.createElement(a.Text,{isBold:!0,className:e===this.props.currentValue?"scl-sharing-dropdown-menu-item-dig__selected-color":"",style:{marginLeft:e===this.props.currentValue?"12px":"24px"}},this.props.optionsDict[e].label)),M.createElement("div",{style:{marginLeft:"24px",marginTop:"4px"}},M.createElement(a.Text,{color:"faint",size:"small",tagName:"div",style:{lineHeight:"18px"}},this.props.optionsDict[e].description)))))))))))}}bn.displayName="SettingDropdown";const _n=e=>{const{policyFieldName:t,rightSideElement:n,bottomElement:r}=e;return M.createElement("div",{"data-testid":t,style:{marginTop:"20px"}},M.createElement("div",{style:{display:"flex",paddingLeft:"8px",paddingRight:"8px",paddingTop:"4px",paddingBottom:"4px"}},M.createElement("div",{style:{marginRight:"16px"}},M.createElement("div",null,M.createElement("span",{title:e.displayNameTitle},M.createElement(a.Text,{size:"medium",isBold:!0},e.displayName))),M.createElement("div",null,M.createElement("span",{title:e.description},M.createElement(a.Text,{size:"small",color:"subtle"},e.description),e.descriptionLinkUrl&&e.descriptionLinkText&&M.createElement("span",null," ",M.createElement(a.Button,{variant:"transparent",onClick:t=>{t.preventDefault(),e.descriptionLinkOnClicked&&e.descriptionLinkUrl&&e.descriptionLinkOnClicked(e.descriptionLinkUrl)},size:"small",hasUnderline:!1},e.descriptionLinkText))))),n&&M.createElement("div",{style:{display:"flex",alignItems:"center",marginLeft:"auto"}},n)),r&&M.createElement("div",null,r))},kn=e=>{const{policyName:t,policyDict:a,selector:n,onLinkClicked:r,extra:i,className:o}=e;return M.createElement(_n,{policyFieldName:t,key:a.title,displayName:a.title,displayNameTitle:a.title,description:a.description,descriptionLinkUrl:a.descriptionLinkUrl,descriptionLinkText:a.descriptionLinkText,descriptionLinkOnClicked:r,rightSideElement:n,bottomElement:i,className:o})};let En=0;const Mn=e=>{const t=M.useMemo((()=>(En++,`settings-toggle-id-${En}`)),[]),{currentValue:n,optionsDict:r,disabled:i,ariaLabel:o}=e,s=r[n].label;return M.createElement(M.Fragment,null,M.createElement("p",{style:{display:"flex",justifyContent:"flex-end"}},M.createElement(a.Text,{tagName:"label",color:"faint",style:{marginRight:"8px"},htmlFor:t},s),M.createElement(a.Toggle,{id:t,"aria-label":o,className:"sharing-settings-modal__toggle",isToggled:r[n].value,disabled:i,onChange:t=>{i||e.onOptionChange(!r[n].value,t)}})))};class Sn extends M.PureComponent{constructor(){super(...arguments),this.handleLinkClicked=e=>{e.preventDefault(),this.props.descriptionLinkOnClicked&&this.props.descriptionLinkUrl&&this.props.descriptionLinkOnClicked(this.props.descriptionLinkUrl)}}render(){const{policyFieldName:e,className:t,rightSideElement:n,bottomElement:r}=this.props,i=a.cx("scl-sharing-modal-settings-row",t);return M.createElement("div",{className:i,"data-testid":e},M.createElement("div",{className:"scl-sharing-modal-settings-row-outer"},M.createElement("div",{className:"scl-sharing-modal-settings-row-info"},M.createElement("div",{className:"scl-sharing-modal-settings-row-display-name"},M.createElement("span",{className:"scl-sharing-modal-settings-row-info-display-name-title",title:this.props.displayNameTitle},this.props.displayName)),M.createElement("div",{className:"scl-sharing-modal-settings-row-details"},M.createElement("span",{className:"scl-sharing-modal-settings-row-details-span",title:this.props.description},this.props.description,this.props.descriptionLinkUrl&&this.props.descriptionLinkText&&M.createElement("span",null," ",M.createElement("a",{className:"scl-sharing-modal-settings-row-description-link",href:"#",onClick:this.handleLinkClicked},this.props.descriptionLinkText))))),n&&M.createElement("div",{className:"scl-sharing-modal-settings-right-element"},n)),r&&M.createElement("div",{className:"scl-sharing-modal-settings-bottom-element"},r))}}Sn.displayName="SharingModalSettingsRow";const Tn=e=>{const{policyName:t,policyDict:a,selector:n,onLinkClicked:r,extra:i,className:o}=e;return M.createElement(Sn,{policyFieldName:t,key:a.title,displayName:a.title,displayNameTitle:a.title,description:a.description,descriptionLinkUrl:a.descriptionLinkUrl,descriptionLinkText:a.descriptionLinkText,descriptionLinkOnClicked:r,rightSideElement:n,bottomElement:i,className:o})};let Dn=0;const Cn=e=>{const t=M.useMemo((()=>(Dn++,`settings-toggle-id-${Dn}`)),[]),{currentValue:n,optionsDict:r,disabled:i,ariaLabel:o}=e,s=r[n].label;return M.createElement(M.Fragment,null,M.createElement("p",{style:{display:"flex",justifyContent:"flex-end"}},M.createElement(a.Text,{tagName:"label",color:"faint",style:{marginRight:"8px"},htmlFor:t},s),M.createElement(a.Toggle,{id:t,"aria-label":o,className:"sharing-settings-modal__toggle",isToggled:r[n].value,disabled:i,onChange:t=>{i||e.onOptionChange(!r[n].value,t)}})))},Pn=(e,t)=>o.isPasswordPolicyEnforcedByAdmin(e)&&o.isExternalAudience(t);function Ln(e,t){return t.link_password||""===t.link_password?t.link_password:o.hasLinkPassword(e)?"123456":""}const xn=e=>{const{intl:t,linkPolicy:n,linkPermissions:r,onPolicyUpdate:i}=e;return M.createElement("div",{className:"sharing-settings-modal__input_spacing"},M.createElement(a.TextInput,{role:"textbox",className:"password-input__input",disabled:!o.canModifyPassword(r)||e.readOnlyPolicy,placeholder:t.formatMessage({id:"um5odk",defaultMessage:"Set password"}),name:"link_password",onChange:e=>{i({[e.target.name]:e.target.value})},type:"password",isInvalid:""===n.link_password,value:Ln(r,n)}))},In="scl-sharing-modal-banner";class Nn extends M.PureComponent{typeClassName(){return`${In}--${this.props.type}`}render(){const{borderHidden:e,className:t,message:n,descriptionLinkUrl:r,descriptionLinkText:i}=this.props,o=a.cx(In,this.typeClassName(),t,{[`${In}--bottom-border`]:!e}),s=r&&i?M.createElement("div",null,M.createElement(a.Link,{href:r,hasNoUnderline:!0,display:"inline"},i)):void 0;return M.createElement("div",{className:o,"data-testid":"sharing-modal-banner",role:"status"},n,s)}}Nn.defaultProps={type:"default"},Nn.displayName="SharingModalBanner";class On extends M.Component{render(){const e=this.props.linkPermissions.resolved_visibility,t=this.props.linkPermissions.audience_options[0].disallowed_reason;return t!==a.LinkAudienceDisallowedReason$1.RestrictedBySharedFolder&&t!==a.LinkAudienceDisallowedReason$1.DeleteAndRecreate?null:M.createElement(Nn,{className:"sharing-settings-modal__banner",type:"default",message:M.createElement("span",null,M.createElement("span",{className:"shared-link-settings-modal__audience-disallowed-text"},this.audienceDisallowedText(e))," ",M.createElement("span",{className:"shared-link-settings-modal__audience-disallowed-advice u-font-meta"},this.audienceDisallowedAdviceText(t)))})}audienceDisallowedText(e){if(e===a.ResolvedVisibilityPolicy.shared_folder_only){let e=this.props.linkPermissions.restricting_shared_folder_path;return void 0!==e?(e=i.Emstring.em_snippet(e,a.SNIPPET_SIZES.FILENAME),this.props.intl.formatMessage({id:"Wzk4tW",defaultMessage:"Only members of the shared folder {shared_folder_name} can view this link."},{shared_folder_name:e})):void 0}return e===a.ResolvedVisibilityPolicy.only_you?this.props.intl.formatMessage({id:"kp9e20",defaultMessage:"Only you can view this link."}):void 0}audienceDisallowedAdviceText(e){return e===a.LinkAudienceDisallowedReason$1.RestrictedBySharedFolder?this.props.intl.formatMessage({id:"D2VN2I",defaultMessage:"To change who can access the link, go to the shared folder options."}):e===a.LinkAudienceDisallowedReason$1.DeleteAndRecreate?this.props.intl.formatMessage({id:"HbDkss",defaultMessage:"To change who can access the link, delete this link and create a new one."}):void 0}}On.displayName="RestrictedVisibilityBanner";function An({intl:e,linkPermissions:t,linkPolicy:n,getPolicyDict:r,onPolicyUpdate:i,readOnlyPolicy:s}){const l=t.audience_options.filter((e=>!((e,t)=>"public"===e&&o.isPasswordPolicyEnforcedByAdmin(t)&&!a.isRighteousLink(t))(e.audience,t)&&e.allowed)).map((e=>e.audience)),c=r(pn),d=n.audience||"",u=l.length>0,g="password"===n.audience;let m;u||(m=M.createElement(On,{intl:e,linkPermissions:t}));const f=M.createElement("div",null,M.createElement(bn,{currentValue:d,valuesList:l,optionsDict:c.optionsDict,onValueSelected:e=>{const a={audience:e};!function(e,t,a,n){if(o.isExternalAudience(e)){if(o.isExpirationPolicySetByAdmin(t)){const e=new Date,r=new Date(e.getFullYear(),e.getMonth(),e.getDate()+o.daysExpirationPolicyToNumber[t.days_to_expire_policy]);(!a.expires||a.expires>r)&&(n.expires=r,n.display_expiration_warning=!0)}o.isPasswordPolicyEnforcedByAdmin(t)&&!a.require_password&&(n.require_password=!0,"public"===e&&(n.display_password_warning=!0))}else n.display_expiration_warning=!1,n.display_password_warning=!1}(e,t,n,a),i(a)},disabled:!u||s,ariaLabel:c.title}),g&&M.createElement(xn,{intl:e,linkPermissions:t,linkPolicy:n,getPolicyDict:r,onPolicyUpdate:i,readOnlyPolicy:s}));return M.createElement(kn,{policyName:pn,policyDict:c,selector:f,extra:m})}var Un={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Rn(e){return function(t){var a=t||{},n=a.width?String(a.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var $n={date:Rn({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Rn({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Rn({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Fn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Bn(e){return function(t,a){var n,r=a||{};if("formatting"===(r.context?String(r.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=r.width?String(r.width):i;n=e.formattingValues[o]||e.formattingValues[i]}else{var s=e.defaultWidth,l=r.width?String(r.width):e.defaultWidth;n=e.values[l]||e.values[s]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function jn(e){return function(t,a){var n=String(t),r=a||{},i=r.width,o=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],s=n.match(o);if(!s)return null;var l,c=s[0],d=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth];return l="[object Array]"===Object.prototype.toString.call(d)?function(e,t){for(var a=0;a<e.length;a++)if(t(e[a]))return a}(d,(function(e){return e.test(c)})):function(e,t){for(var a in e)if(e.hasOwnProperty(a)&&t(e[a]))return a}(d,(function(e){return e.test(c)})),l=e.valueCallback?e.valueCallback(l):l,{value:l=r.valueCallback?r.valueCallback(l):l,rest:n.slice(c.length)}}}var Hn,Yn={code:"en-US",formatDistance:function(e,t,a){var n;return a=a||{},n="string"==typeof Un[e]?Un[e]:1===t?Un[e].one:Un[e].other.replace("{{count}}",t),a.addSuffix?a.comparison>0?"in "+n:n+" ago":n},formatLong:$n,formatRelative:function(e,t,a,n){return Fn[e]},localize:{ordinalNumber:function(e,t){var a=Number(e),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},era:Bn({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Bn({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:Bn({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Bn({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Bn({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Hn={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e,t){var a=String(e),n=t||{},r=a.match(Hn.matchPattern);if(!r)return null;var i=r[0],o=a.match(Hn.parsePattern);if(!o)return null;var s=Hn.valueCallback?Hn.valueCallback(o[0]):o[0];return{value:s=n.valueCallback?n.valueCallback(s):s,rest:a.slice(i.length)}}),era:jn({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:jn({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:jn({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:jn({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:jn({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function qn(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Wn(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Gn(e){Wn(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function Vn(e,t){return Wn(2,arguments),function(e,t){Wn(2,arguments);var a=Gn(e).getTime(),n=qn(t);return new Date(a+n)}(e,-qn(t))}function zn(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function Qn(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}var Kn={p:Qn,P:function(e,t){var a,n=e.match(/(P+)(p+)?/),r=n[1],i=n[2];if(!i)return zn(e,t);switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",zn(r,t)).replace("{{time}}",Qn(i,t))}};function Xn(e){return e.getTime()%6e4}function Zn(e){var t=new Date(e.getTime()),a=Math.ceil(t.getTimezoneOffset());return t.setSeconds(0,0),6e4*a+(a>0?(6e4+Xn(t))%6e4:Xn(t))}var Jn=["D","DD"],er=["YY","YYYY"];function tr(e){return-1!==Jn.indexOf(e)}function ar(e){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` for formatting years; see: https://git.io/fxCyr");if("YY"===e)throw new RangeError("Use `yy` instead of `YY` for formatting years; see: https://git.io/fxCyr");if("D"===e)throw new RangeError("Use `d` instead of `D` for formatting days of the month; see: https://git.io/fxCyr");if("DD"===e)throw new RangeError("Use `dd` instead of `DD` for formatting days of the month; see: https://git.io/fxCyr")}function nr(e,t){Wn(1,arguments);var a=t||{},n=a.locale,r=n&&n.options&&n.options.weekStartsOn,i=null==r?0:qn(r),o=null==a.weekStartsOn?i:qn(a.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=Gn(e),l=s.getUTCDay(),c=(l<o?7:0)+l-o;return s.setUTCDate(s.getUTCDate()-c),s.setUTCHours(0,0,0,0),s}function rr(e,t){Wn(1,arguments);var a=Gn(e,t),n=a.getUTCFullYear(),r=t||{},i=r.locale,o=i&&i.options&&i.options.firstWeekContainsDate,s=null==o?1:qn(o),l=null==r.firstWeekContainsDate?s:qn(r.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(n+1,0,l),c.setUTCHours(0,0,0,0);var d=nr(c,t),u=new Date(0);u.setUTCFullYear(n,0,l),u.setUTCHours(0,0,0,0);var g=nr(u,t);return a.getTime()>=d.getTime()?n+1:a.getTime()>=g.getTime()?n:n-1}function ir(e){Wn(1,arguments);var t=Gn(e),a=t.getUTCDay(),n=(a<1?7:0)+a-1;return t.setUTCDate(t.getUTCDate()-n),t.setUTCHours(0,0,0,0),t}function or(e){Wn(1,arguments);var t=Gn(e),a=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(a+1,0,4),n.setUTCHours(0,0,0,0);var r=ir(n),i=new Date(0);i.setUTCFullYear(a,0,4),i.setUTCHours(0,0,0,0);var o=ir(i);return t.getTime()>=r.getTime()?a+1:t.getTime()>=o.getTime()?a:a-1}function sr(e){Wn(1,arguments);var t=Gn(e),a=ir(t).getTime()-function(e){Wn(1,arguments);var t=or(e),a=new Date(0);return a.setUTCFullYear(t,0,4),a.setUTCHours(0,0,0,0),ir(a)}(t).getTime();return Math.round(a/6048e5)+1}function lr(e,t){Wn(1,arguments);var a=Gn(e),n=nr(a,t).getTime()-function(e,t){Wn(1,arguments);var a=t||{},n=a.locale,r=n&&n.options&&n.options.firstWeekContainsDate,i=null==r?1:qn(r),o=null==a.firstWeekContainsDate?i:qn(a.firstWeekContainsDate),s=rr(e,t),l=new Date(0);return l.setUTCFullYear(s,0,o),l.setUTCHours(0,0,0,0),nr(l,t)}(a,t).getTime();return Math.round(n/6048e5)+1}function cr(e,t){for(var a=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return a+n}var dr={G:function(e,t,a){var n=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});default:return a.era(n,{width:"wide"})}},y:function(e,t,a){if("yo"===t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return a.ordinalNumber(r,{unit:"year"})}return function(e,t){var a=e.getUTCFullYear(),n=a>0?a:1-a;return cr("yy"===t?n%100:n,t.length)}(e,t)},Y:function(e,t,a,n){var r=rr(e,n),i=r>0?r:1-r;return"YY"===t?cr(i%100,2):"Yo"===t?a.ordinalNumber(i,{unit:"year"}):cr(i,t.length)},R:function(e,t){return cr(or(e),t.length)},u:function(e,t){return cr(e.getUTCFullYear(),t.length)},Q:function(e,t,a){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return cr(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,a){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return cr(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,a){var n=e.getUTCMonth();switch(t){case"M":case"MM":return function(e,t){var a=e.getUTCMonth();return"M"===t?String(a+1):cr(a+1,2)}(e,t);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,a){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return cr(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,a,n){var r=lr(e,n);return"wo"===t?a.ordinalNumber(r,{unit:"week"}):cr(r,t.length)},I:function(e,t,a){var n=sr(e);return"Io"===t?a.ordinalNumber(n,{unit:"week"}):cr(n,t.length)},d:function(e,t,a){return"do"===t?a.ordinalNumber(e.getUTCDate(),{unit:"date"}):function(e,t){return cr(e.getUTCDate(),t.length)}(e,t)},D:function(e,t,a){var n=function(e){Wn(1,arguments);var t=Gn(e),a=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=a-t.getTime();return Math.floor(n/864e5)+1}(e);return"Do"===t?a.ordinalNumber(n,{unit:"dayOfYear"}):cr(n,t.length)},E:function(e,t,a){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,a,n){var r=e.getUTCDay(),i=(r-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return cr(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"});default:return a.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,a,n){var r=e.getUTCDay(),i=(r-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return cr(i,t.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"});default:return a.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,a){var n=e.getUTCDay(),r=0===n?7:n;switch(t){case"i":return String(r);case"ii":return cr(r,t.length);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,a){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,a){var n,r=e.getUTCHours();switch(n=12===r?"noon":0===r?"midnight":r/12>=1?"pm":"am",t){case"b":case"bb":case"bbb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbbbb":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,a){var n,r=e.getUTCHours();switch(n=r>=17?"evening":r>=12?"afternoon":r>=4?"morning":"night",t){case"B":case"BB":case"BBB":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,a){if("ho"===t){var n=e.getUTCHours()%12;return 0===n&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return function(e,t){return cr(e.getUTCHours()%12||12,t.length)}(e,t)},H:function(e,t,a){return"Ho"===t?a.ordinalNumber(e.getUTCHours(),{unit:"hour"}):function(e,t){return cr(e.getUTCHours(),t.length)}(e,t)},K:function(e,t,a){var n=e.getUTCHours()%12;return"Ko"===t?a.ordinalNumber(n,{unit:"hour"}):cr(n,t.length)},k:function(e,t,a){var n=e.getUTCHours();return 0===n&&(n=24),"ko"===t?a.ordinalNumber(n,{unit:"hour"}):cr(n,t.length)},m:function(e,t,a){return"mo"===t?a.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):function(e,t){return cr(e.getUTCMinutes(),t.length)}(e,t)},s:function(e,t,a){return"so"===t?a.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):function(e,t){return cr(e.getUTCSeconds(),t.length)}(e,t)},S:function(e,t){return function(e,t){var a=t.length,n=e.getUTCMilliseconds();return cr(Math.floor(n*Math.pow(10,a-3)),t.length)}(e,t)},X:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return gr(r);case"XXXX":case"XX":return mr(r);default:return mr(r,":")}},x:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"x":return gr(r);case"xxxx":case"xx":return mr(r);default:return mr(r,":")}},O:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ur(r,":");default:return"GMT"+mr(r,":")}},z:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ur(r,":");default:return"GMT"+mr(r,":")}},t:function(e,t,a,n){var r=n._originalDate||e;return cr(Math.floor(r.getTime()/1e3),t.length)},T:function(e,t,a,n){return cr((n._originalDate||e).getTime(),t.length)}};function ur(e,t){var a=e>0?"-":"+",n=Math.abs(e),r=Math.floor(n/60),i=n%60;if(0===i)return a+String(r);var o=t||"";return a+String(r)+o+cr(i,2)}function gr(e,t){return e%60==0?(e>0?"-":"+")+cr(Math.abs(e)/60,2):mr(e,t)}function mr(e,t){var a=t||"",n=e>0?"-":"+",r=Math.abs(e);return n+cr(Math.floor(r/60),2)+a+cr(r%60,2)}var fr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,pr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,hr=/^'([^]*?)'?$/,yr=/''/g,vr=/[a-zA-Z]/;function wr(e,t,a){Wn(2,arguments);var n=String(t),r=a||{},i=r.locale||Yn,o=i.options&&i.options.firstWeekContainsDate,s=null==o?1:qn(o),l=null==r.firstWeekContainsDate?s:qn(r.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=i.options&&i.options.weekStartsOn,d=null==c?0:qn(c),u=null==r.weekStartsOn?d:qn(r.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!i.localize)throw new RangeError("locale must contain localize property");if(!i.formatLong)throw new RangeError("locale must contain formatLong property");var g=Gn(e);if(!function(e){Wn(1,arguments);var t=Gn(e);return!isNaN(t)}(g))throw new RangeError("Invalid time value");var m=Vn(g,Zn(g)),f={firstWeekContainsDate:l,weekStartsOn:u,locale:i,_originalDate:g},p=n.match(pr).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,Kn[t])(e,i.formatLong,f):e})).join("").match(fr).map((function(e){if("''"===e)return"'";var t=e[0];if("'"===t)return function(e){return e.match(hr)[1].replace(yr,"'")}(e);var a=dr[t];if(a)return!r.useAdditionalWeekYearTokens&&function(e){return-1!==er.indexOf(e)}(e)&&ar(e),!r.useAdditionalDayOfYearTokens&&tr(e)&&ar(e),a(m,e,i.localize,f);if(t.match(vr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return e})).join("");return p}function br(e,t){Wn(2,arguments);var a=Gn(e),n=qn(t);return isNaN(n)?new Date(NaN):n?(a.setDate(a.getDate()+n),a):a}function _r(e,t){Wn(1,arguments);var a=e||{},n=Gn(a.start),r=Gn(a.end).getTime();if(!(n.getTime()<=r))throw new RangeError("Invalid interval");var i=[],o=n;o.setHours(0,0,0,0);var s=t&&"step"in t?Number(t.step):1;if(s<1||isNaN(s))throw new RangeError("`options.step` must be a number greater than 1");for(;o.getTime()<=r;)i.push(Gn(o)),o.setDate(o.getDate()+s),o.setHours(0,0,0,0);return i}function kr(e,t){Wn(1,arguments);var a=t||{},n=a.locale,r=n&&n.options&&n.options.weekStartsOn,i=null==r?0:qn(r),o=null==a.weekStartsOn?i:qn(a.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=Gn(e),l=s.getDay(),c=6+(l<o?-7:0)-(l-o);return s.setDate(s.getDate()+c),s.setHours(23,59,59,999),s}function Er(e){Wn(1,arguments);var t=Gn(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Mr(e,t){Wn(1,arguments);var a=t||{},n=a.locale,r=n&&n.options&&n.options.weekStartsOn,i=null==r?0:qn(r),o=null==a.weekStartsOn?i:qn(a.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=Gn(e),l=s.getDay(),c=(l<o?7:0)+l-o;return s.setDate(s.getDate()-c),s.setHours(0,0,0,0),s}var Sr=function(e){return wr(e,"dd")},Tr=function(e){return wr(e,"eeeeee")},Dr=function(e){return wr(e,"MMMM yyyy")};function Cr(e){var a=e.year,n=e.month,r=e.firstDayOfWeek,i=void 0===r?1:r,o=e.dayLabelFormat,s=void 0===o?Sr:o,l=e.weekdayLabelFormat,c=void 0===l?Tr:l,d=e.monthLabelFormat,u=void 0===d?Dr:d;return{days:t.useMemo((function(){return function(e){var t=e.year,a=e.month,n=e.firstDayOfWeek,r=void 0===n?1:n,i=e.dayLabelFormat,o=void 0===i?function(e){return wr(e,"dd")}:i,s=new Date(t,a),l=Er(s),c=function(e){return Wn(1,arguments),Gn(e).getDay()}(l),d=function(e){Wn(1,arguments);var t=Gn(e),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(23,59,59,999),t}(s);return function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<a;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,r++)n[r]=i[o];return n}(Array.from(Array(c>=r?c-r:6-r+c+1).keys()).fill(0),_r({start:l,end:d}).map((function(e){return{date:e,dayLabel:o(e)}})))}({year:a,month:n,firstDayOfWeek:i,dayLabelFormat:s})}),[a,n,i,s]),weekdayLabels:t.useMemo((function(){return function(e){var t=void 0===e?{}:e,a=t.firstDayOfWeek,n=void 0===a?1:a,r=t.weekdayLabelFormat,i=void 0===r?function(e){return wr(e,"iiiiii")}:r,o=new Date;return _r({start:br(Mr(o),n),end:br(kr(o),n)}).reduce((function(e,t){return e.push(i(t)),e}),[])}({firstDayOfWeek:i,weekdayLabelFormat:c})}),[i,c]),monthLabel:u(new Date(a,n))}}function Pr(e,t){Wn(2,arguments);var a=Gn(e),n=Gn(t);return a.getTime()<n.getTime()}function Lr(e,t){Wn(2,arguments);var a=Gn(e),n=Gn(t);return a.getTime()>n.getTime()}function xr(e,t){Wn(2,arguments);var a=t||{},n=Gn(e).getTime(),r=Gn(a.start).getTime(),i=Gn(a.end).getTime();if(!(r<=i))throw new RangeError("Invalid interval");return n>=r&&n<=i}function Ir(e){Wn(1,arguments);var t=Gn(e);return t.setHours(0,0,0,0),t}function Nr(e,t){Wn(2,arguments);var a=Ir(e),n=Ir(t);return a.getTime()===n.getTime()}function Or(e,t){Wn(2,arguments);var a=Gn(e),n=qn(t);if(isNaN(n))return new Date(NaN);if(!n)return a;var r=a.getDate(),i=new Date(a.getTime());return i.setMonth(a.getMonth()+n+1,0),r>=i.getDate()?i:(a.setFullYear(i.getFullYear(),i.getMonth(),r),a)}var Ar=function(e,t){return void 0===e&&(e=[]),e.some((function(e){return Nr(t,e)}))};function Ur(e){var t=Er(e);return{year:function(e){return Wn(1,arguments),Gn(e).getFullYear()}(t),month:function(e){return Wn(1,arguments),Gn(e).getMonth()}(t),date:t}}function Rr(e,t){var a=Ur(t||Ir(Date.now())),n=a.date,r=[a];return e>1&&(r=Array.from(Array(e-1).keys()).reduce((function(e){return n=Or(e[e.length-1].date,1),e.concat([Ur(n)])}),r)),r}function $r(e,t,a,n){var r=e[n?a>0?0:e.length-n:a>0?e.length-1:0].date;return Array.from(Array(t).keys()).reduce((function(e){return r=0===e.length?Or(r,a):Or(r,a>=0?1:-1),a>0?e.concat([Ur(r)]):[Ur(r)].concat(e)}),[])}function Fr(e){var t=e.startDate,a=e.endDate,n=e.isDateBlocked,r=e.minBookingDays,i=e.exactMinBookingDays,o=e.minBookingDate,s=e.maxBookingDate,l=!o||!Pr(t,br(o,-1)),c=!s||!Lr(br(t,r-1),s);return!((!t||1!==r||a||n(t))&&(t&&r>1&&!a&&!i||t&&r>0&&i&&l&&c||t&&r>0&&i&&!o&&!s?_r({start:t,end:br(t,r-1)}).some((function(e){return n(e)})):!t||!a||i||Pr(a,br(t,r-1))||_r({start:t,end:a}).some((function(e){return n(e)}))))}function Br(e){var a=e.startDate,n=e.endDate,r=e.focusedInput,i=e.minBookingDate,o=e.maxBookingDate,s=e.onDatesChange,l=e.initialVisibleMonth,c=e.exactMinBookingDays,d=void 0!==c&&c,u=e.minBookingDays,g=void 0===u?1:u,m=e.numberOfMonths,f=void 0===m?2:m,p=e.firstDayOfWeek,h=void 0===p?1:p,y=e.isDateBlocked,v=void 0===y?function(){return!1}:y,w=e.unavailableDates,b=void 0===w?[]:w,_=e.changeActiveMonthOnSelect,k=void 0===_||_,E=t.useState((function(){return Rr(f,a||l||null)})),M=E[0],S=E[1],T=t.useState(null),D=T[0],C=T[1],P=t.useState(a),L=P[0],x=P[1];t.useEffect((function(){return"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("keydown",A),function(){window.removeEventListener&&window.removeEventListener("keydown",A)}}));var I=function(e){return Ar(b,e)||v(e)},N=function(e){x(e),(!L||L&&!Nr(e,L))&&S(Rr(f,e))},O=function(e){return function(e){var t=e.date,a=e.minBookingDate,n=e.maxBookingDate,r=e.isDateBlockedFn,i=e.startDate,o=e.endDate,s=e.minBookingDays,l=void 0===s?1:s,c=e.unavailableDates,d=void 0===c?[]:c,u=a?new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0):a,g=n?new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0):n;return!!(Ar(d,t)||u&&Pr(t,u)||g&&Lr(t,g)||i&&!o&&l>1&&xr(t,{start:i,end:br(i,l-2)})||r&&r(t))}({date:e,minBookingDate:i,maxBookingDate:o,startDate:a,endDate:n,minBookingDays:g,isDateBlockedFn:I})};function A(e){if(("ArrowRight"===e.key||"ArrowLeft"===e.key||"ArrowDown"===e.key||"ArrowUp"===e.key)&&!L){var t=M[0];N(t.date),S(Rr(f,t.date))}}var U=t.useCallback((function(){S($r(M,f,-1)),x(null)}),[M,f]),R=t.useCallback((function(){S($r(M,f,-1,1)),x(null)}),[M,f]),$=t.useCallback((function(){S($r(M,f,1)),x(null)}),[M,f]),F=t.useCallback((function(){S($r(M,f,1,1)),x(null)}),[M,f]),B=t.useCallback((function(e){S(Rr(f,e)),x(null)}),[f]),j=t.useCallback((function(e){void 0===e&&(e=1),S($r(M,f,-(12*e-f+1))),x(null)}),[M,f]),H=t.useCallback((function(e){void 0===e&&(e=1),S($r(M,f,12*e-f+1)),x(null)}),[M,f]);return{firstDayOfWeek:h,activeMonths:M,isDateSelected:function(e){return function(e,t,a){return!(!t||!a)&&xr(e,{start:t,end:a})}(e,a,n)},isDateHovered:function(e){return function(e){var t=e.date,a=e.startDate,n=e.endDate,r=e.isDateBlocked,i=e.hoveredDate,o=e.minBookingDays;return i&&o>1&&e.exactMinBookingDays&&xr(t,{start:i,end:br(i,o-1)})?!_r({start:i,end:br(i,o-1)}).some((function(e){return r(e)})):a&&!n&&i&&xr(t,{start:a,end:br(a,o-1)})&&Nr(a,i)&&o>1?!_r({start:a,end:br(a,o-1)}).some((function(e){return r(e)})):!(!a||n||!i||Pr(i,a)||!xr(t,{start:a,end:i})||_r({start:a,end:i}).some((function(e){return r(e)})))}({date:e,hoveredDate:D,startDate:a,endDate:n,minBookingDays:g,exactMinBookingDays:d,isDateBlocked:I})},isFirstOrLastSelectedDate:function(e){return function(e,t,a){return!!(t&&Nr(e,t)||a&&Nr(e,a))}(e,a,n)},isStartDate:function(e){return function(e,t){return!(!t||!Nr(e,t))}(e,a)},isEndDate:function(e){return function(e,t){return!(!t||!Nr(e,t))}(e,n)},isDateBlocked:O,numberOfMonths:f,isDateFocused:function(e){return!!L&&Nr(e,L)},focusedDate:L,hoveredDate:D,onResetDates:function(){s({startDate:null,endDate:null,focusedInput:"startDate"})},onDateHover:function(e){if(e){if(e){var t=!O(e)||a&&Nr(e,a),r=!i||!Pr(e,br(i,-1)),s=!o||!Lr(e,o),l=br(e,g-1),c=!i||!Pr(l,i),u=!o||!Lr(l,o),m=d&&g>1&&r&&s&&c&&u,f=a&&!n&&!d&&r&&s,p=!(g>1&&a)||xr(e,{start:a,end:br(a,g-2)}),h=a&&Nr(e,a)&&p;t&&(m||f||h)?C(e):null!==D&&C(null)}}else C(null)},onDateSelect:function(e){("endDate"===r||"startDate"===r)&&g>0&&d&&Fr({minBookingDays:g,exactMinBookingDays:d,minBookingDate:i,maxBookingDate:o,isDateBlocked:I,startDate:e,endDate:null})?s({startDate:e,endDate:br(e,g-1),focusedInput:null}):("endDate"===r&&a&&Pr(e,a)||"startDate"===r&&n&&Lr(e,n))&&!d&&Fr({minBookingDays:g,isDateBlocked:I,startDate:e,endDate:null})?s({endDate:null,startDate:e,focusedInput:"endDate"}):"startDate"===r&&!d&&Fr({minBookingDays:g,isDateBlocked:I,endDate:n,startDate:e})?s({endDate:n,startDate:e,focusedInput:"endDate"}):"startDate"===r&&!d&&Fr({minBookingDays:g,isDateBlocked:I,endDate:null,startDate:e})?s({endDate:null,startDate:e,focusedInput:"endDate"}):"endDate"===r&&a&&!Pr(e,a)&&!d&&Fr({minBookingDays:g,isDateBlocked:I,startDate:a,endDate:e})&&s({startDate:a,endDate:e,focusedInput:null}),"endDate"!==r&&(!L||L&&!Nr(e,L))&&k&&S(Rr(f,e))},onDateFocus:N,goToPreviousMonths:U,goToPreviousMonthsByOneMonth:R,goToNextMonths:$,goToNextMonthsByOneMonth:F,goToDate:B,goToPreviousYear:j,goToNextYear:H}}const jr=["onClick"],Hr=["id","value","onChange","onSelection","format","disabled","inverse","isInvalid","isTransparent","size","data-testid","aria-label","aria-labelledby","isDateBlocked","autocomplete","autoFocus","placeholder","readonly"];var Yr={previous:"Previous",next:"Next"},qr=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"]),Wr="L/d/y",Gr={datePickerId:"",triggerRef:void 0,close:()=>!1,open:()=>!1,toggle:()=>!1,closeOnSelection:!0,withPreviousLabel:Yr.previous,withNextLabel:Yr.next,focusedDate:null,isDateFocused:()=>!1,isDateSelected:()=>!1,isDateHovered:()=>!1,isDateBlocked:()=>!1,isFirstOrLastSelectedDate:()=>!1,onDateFocus:()=>!1,onDateHover:()=>!1,onDateSelect:()=>!1,goToPreviousMonths:()=>!1,goToNextMonths:()=>!1,goToDate:()=>!1,isStartDate:()=>!1,isEndDate:()=>!1},Vr=M.createContext(Gr);var zr=(e,t)=>D(e)&&D(t)?T(e,t):e===t,Qr=()=>new Date;var Kr=(e,t)=>e.focusedInput!==t.focusedInput?{focusedInput:e.focusedInput}:zr(t.startDate,e.startDate)&&zr(t.endDate,e.endDate)?void 0:e,Xr=" ",Zr=e=>{let{date:a}=e;const{close:n,triggerRef:r,closeOnSelection:i,focusedDate:o,isDateFocused:s,isDateSelected:l,isDateHovered:c,isDateBlocked:d,isFirstOrLastSelectedDate:u,onDateFocus:g,onDateSelect:m,onDateHover:f}=M.useContext(Vr),[p,h]=M.useState(!1),{onClick:y,onKeyDown:v,onMouseEnter:w,disabledDate:b,isSelected:_,isSelectedStartOrEnd:k,tabIndex:E}=function(e){var a=e.date,n=e.focusedDate,r=e.isDateSelected,i=e.isDateFocused,o=e.isFirstOrLastSelectedDate,s=e.isDateHovered,l=e.isDateBlocked,c=e.onDateSelect,d=e.onDateFocus,u=e.onDateHover,g=t.useCallback((function(){return c(a)}),[a,c]),m=t.useCallback((function(){return u(a)}),[a,u]),f=l(a)&&!s(a);return{tabIndex:null===n||i(a)?0:-1,isSelected:r(a),isSelectedStartOrEnd:o(a),isWithinHoverRange:s(a),disabledDate:f,onKeyDown:function(e){"ArrowRight"===e.key?d(br(a,1)):"ArrowLeft"===e.key?d(br(a,-1)):"ArrowUp"===e.key?d(br(a,-7)):"ArrowDown"===e.key&&d(br(a,7))},onClick:f?function(){}:g,onMouseEnter:m}}({date:a,focusedDate:o,isDateFocused:s,isDateSelected:l,isDateHovered:c,isDateBlocked:d,isFirstOrLastSelectedDate:u,onDateFocus:g,onDateSelect:m,onDateHover:f}),S=M.useCallback((e=>{p&&"Tab"===e.key?e.preventDefault():e.key===Xr?h(!0):p||v&&v(e)}),[v,p]),T=M.useCallback((e=>{e.key===Xr&&h(!1)}),[]),D=M.useCallback((e=>!_&&d(e)),[d,_]),C=M.useCallback((()=>{a&&D(a)||(y&&y(),i&&n({autoFocusRef:r}))}),[r,i,a,D,y,n]);return{getDayProps:M.useCallback((()=>({tabIndex:E,onClick:C,onKeyDown:S,onKeyUp:T,onMouseEnter:w})),[w,E,C,S,T]),isSelected:_,isSelectedStartOrEnd:k,isBlocked:D(a)||b,isFocused:s(a)}},Jr=e=>new Intl.DateTimeFormat("en-US",{month:"long",year:"numeric"}).format(e),ei=e=>new Intl.DateTimeFormat("en-US",{weekday:"narrow"}).format(e),ti=e=>new Intl.DateTimeFormat("en-US",{day:"numeric"}).format(e),ai=e=>{let{date:t,children:n}=e;const r=M.useRef(null),{getDayProps:i,isFocused:o,isBlocked:s,isSelected:l,isSelectedStartOrEnd:c}=Zr({date:t}),{isStartDate:d,isEndDate:u}=M.useContext(Vr);M.useEffect((()=>{r&&r.current&&o&&"focus"in r.current&&r.current.focus({preventScroll:!0})}),[r,o]);const g=T(t,Qr()),m=d(t),f=u(t),p=a.classNames2("dig-DatePicker-day dig-10x86n2b_23-4-0",{"dig-DatePicker-day--selected":l||c,"dig-10x86n2d_23-4-0":l||c,"dig-DatePicker-day--selectedEdge":c,"dig-10x86n2e_23-4-0":c,"dig-DatePicker-day--blocked":s,"dig-10x86n2f_23-4-0":s,"dig-DatePicker-day--today":g,"dig-10x86n2c_23-4-0":g,"dig-DatePicker-day--start":m,"dig-10x86n2g_23-4-0":m,"dig-DatePicker-day--end":f,"dig-10x86n2h_23-4-0":f});return M.createElement("button",h._objectSpread2({ref:r,className:p,type:"button",disabled:s,"aria-pressed":l},i()),n)};ai.displayName="Day";var ni=e=>{let{datePickerId:t,year:n,yearOptions:r,onYearChange:i,yearDropdownAriaLabel:o}=e;const s=M.useCallback((e=>{const t=e.target.value,a=parseInt(t,10);isNaN(a)||i(a)}),[i]);return 0===r.length?null:M.createElement("span",h._objectSpread2({},a.withShade({direction:"up",className:a.classNames2("dig-10x86n24_23-4-0")})),M.createElement("span",{className:"dig-10x86n26_23-4-0"},M.createElement(a.UIIcon,{size:"small",src:a.ChevronDownLine})),M.createElement("select",{id:`${t}-year-select`,value:n.toString(),onChange:s,"aria-label":o,"data-testid":"digDatePickerYearDropdown",className:"dig-10x86n25_23-4-0"},r.map((e=>M.createElement("option",{key:e,value:e.toString()},e.toString())))))},ri=e=>{let{year:t,month:n,firstDayOfWeek:r,format:i,weekdayLabelFormat:o,dayLabelFormat:s,hasYearDropdown:l=!1,yearOptions:c=[],yearDropdownAriaLabel:d}=e;const u=M.useContext(Vr),{datePickerId:g,withPreviousLabel:m,withNextLabel:f,monthLabel:p,weekdayLabels:y,days:v,getPreviousMonthProps:b,getNextMonthProps:_}=(e=>{let{year:t,month:a,firstDayOfWeek:n,format:r=Jr,weekdayLabelFormat:i=ei,dayLabelFormat:o=ti}=e;const{days:s,weekdayLabels:l,monthLabel:c}=Cr({year:t,month:a,firstDayOfWeek:n,monthLabelFormat:r,weekdayLabelFormat:i,dayLabelFormat:o}),{datePickerId:d,withPreviousLabel:u,withNextLabel:g,goToPreviousMonths:m,goToNextMonths:f}=M.useContext(Vr);return{datePickerId:d,withPreviousLabel:u,withNextLabel:g,days:s,weekdayLabels:l,monthLabel:c,getPreviousMonthProps:M.useCallback((()=>({onClick:m})),[m]),getNextMonthProps:M.useCallback((()=>({onClick:f})),[f])}})({year:t,month:n,firstDayOfWeek:r,format:i,weekdayLabelFormat:o,dayLabelFormat:s}),k=M.useCallback((e=>{u.goToDate(new Date(e,n,1))}),[u,n]);return M.createElement(M.Fragment,null,M.createElement("div",{className:"dig-DatePicker-header dig-10x86n27_23-4-0"},M.createElement(a.Text,{className:"dig-DatePicker-title",size:"large",variant:"label",color:"standard"},p),l&&d&&M.createElement(ni,{datePickerId:g,year:t,yearOptions:c,onYearChange:k,yearDropdownAriaLabel:d}),M.createElement(w.IconButtonGroup,{size:"small",className:"dig-10x86n23_23-4-0"},(e=>{let{getButtonProps:t}=e;return M.createElement(M.Fragment,null,M.createElement(a.Tooltip,{id:`${g}-previous`,title:m},M.createElement(a.IconButton,h._objectSpread2(h._objectSpread2({variant:"transparent",type:"button","data-testid":"digDatePickerPreviousMonth"},t()),b()),M.createElement(a.UIIcon,{size:"small",src:a.ChevronLeftLine}))),M.createElement(a.Tooltip,{id:`${g}-next`,title:f},M.createElement(a.IconButton,h._objectSpread2(h._objectSpread2({variant:"transparent",type:"button","data-testid":"digDatePickerNextMonth"},t()),_()),M.createElement(a.UIIcon,{size:"small",src:a.ChevronRightLine}))))}))),M.createElement("div",{className:"dig-DatePicker-weekdays dig-10x86n28_23-4-0"},y.map(((e,t)=>M.createElement(a.Text,{key:t,className:"dig-DatePicker-weekday dig-10x86n29_23-4-0",size:"xsmall",variant:"label",isBold:!0},e)))),M.createElement("div",{className:"dig-DatePicker-calendar-grid dig-10x86n2a_23-4-0"},v.map(((e,t)=>"object"==typeof e?M.createElement(ai,{key:e.date.toString(),date:e.date},e.dayLabel):M.createElement("div",{key:t})))))};ri.displayName="Month";var ii=M.createContext(void 0);var oi=e=>{let{id:t,selectedDate:n,disabledDays:r=[],focusedInput:i="startDate",isDateBlocked:o,onSelection:s,onDateFocus:l,withPreviousLabel:c=Yr.previous,withNextLabel:d=Yr.next,monthLabelFormat:u,weekdayLabelFormat:g,dayLabelFormat:m,auto:f=!0,placement:p="bottom-start",positioningStrategy:y="absolute",closeOnBlur:v=!0,closeOnSelection:w=!0,shouldPropagateClickOutsideMouseEvents:b=!1,shouldHideDropShadow:_=!1,isBlock:k=!1,isPortaled:E=!0,onToggle:S,firstDayOfWeek:T=0,hasYearDropdown:D=!1,yearOptions:C,yearDropdownAriaLabel:P,children:L}=e;const x=M.useMemo((()=>void 0===n?Qr():n),[n]),I=M.useRef(null),N=M.useRef(null),O=M.useRef(null),[A,U]=M.useState(!1),R=a.useUniqueId({prefix:"dig-DatePicker-",idOverride:t}),$=M.useContext(ii),[F,B]=M.useState(p),[j,H]=M.useState(p);j!==p&&(B(p),H(p));const Y=e=>{f&&B(e)};D&&function(e,t){if(!e)throw new Error(`dig-components - Invariant: ${t}`)}(P,"When hasYearDropdown is true, yearDropdownAriaLabel must be provided for accessibility.");const[q,W]=M.useState((()=>x));((e,t)=>{const a=M.useRef(!1);M.useEffect((()=>{a.current?e():a.current=!0}),t)})((()=>{"function"==typeof S&&S({isOpen:A})}),[A]),M.useEffect((()=>{W(x)}),[x]);const G=$?$.selectedRange[0]:q,V=$?$.selectedRange[1]:q,z=!!$,Q=M.useMemo((()=>z?((e,t,a)=>({type:1,focusedInput:a,createInitialState:()=>({startDate:e,endDate:t,focusedInput:a||"startDate"}),applyUpdates:Kr}))(G,V,i):(e=>({type:0,focusedInput:"startDate",createInitialState:()=>({startDate:e,endDate:e,focusedInput:"startDate"}),applyUpdates:Kr}))(G)),[z,G,V,i]),K=function(e){const[t,a]=M.useState(e.createInitialState()),n=M.useCallback((n=>{const r=e.applyUpdates(n,t);r&&a((e=>h._objectSpread2(h._objectSpread2({},e),r)))}),[t,e]),r=M.useCallback((e=>{let{startDate:t,endDate:a,focusedInput:r}=e;n({startDate:t,endDate:a,focusedInput:r||"startDate"})}),[n]),i=M.useCallback((t=>{let{startDate:a,endDate:r}=t;n({startDate:a,endDate:r,focusedInput:e.focusedInput})}),[n,e.focusedInput]);return{type:e.type,startDate:t.startDate,endDate:t.endDate,focusedInput:t.focusedInput,onDatesChange:r,sync:i}}(Q);M.useEffect((()=>{K.sync({startDate:G,endDate:V})}),[G,V,K]);const X=M.useCallback((e=>{s&&s(e),W(e.selectedDate)}),[s]),{activeMonths:Z,goToPreviousMonths:J,goToNextMonths:ee,focusedDate:te,isDateFocused:ae,isDateSelected:ne,isDateHovered:re,isDateBlocked:ie,isFirstOrLastSelectedDate:oe,onDateFocus:se,onDateSelect:le,onDateHover:ce,goToDate:de,isStartDate:ue,isEndDate:ge}=function(e){let{picker:t,disabledDays:a,isDateBlocked:n,onSelection:r,onDateFocus:i}=e;const o=M.useCallback((e=>{if(t.onDatesChange(e),r){const{startDate:t,focusedInput:a}=e;let{endDate:n}=e;const i="endDate"===a;i&&!n&&(n=t),r({startDate:t,endDate:n,selectedDate:i?t:n})}}),[t,r]),{activeMonths:s,goToPreviousMonths:l,goToNextMonths:c,focusedDate:d,isDateFocused:u,isDateSelected:g,isDateHovered:m,isDateBlocked:f,isFirstOrLastSelectedDate:p,onDateFocus:h,onDateSelect:y,onDateHover:v,goToDate:w,isStartDate:b,isEndDate:_}=Br({startDate:t.startDate,endDate:t.endDate,minBookingDays:0===t.type?1:void 0,exactMinBookingDays:0===t.type,minBookingDate:1===t.type&&"endDate"===t.focusedInput&&t.startDate||void 0,maxBookingDate:1===t.type&&"startDate"===t.focusedInput&&t.endDate||void 0,unavailableDates:a,isDateBlocked:n,focusedInput:t.focusedInput,onDatesChange:o,numberOfMonths:1}),k=M.useCallback((e=>{h&&h(e),i&&i(e)}),[i,h]),E=M.useCallback((e=>{1!==t.type||"endDate"!==t.focusedInput||null!==t.startDate||f(e)?y(e):o({focusedInput:"endDate",startDate:null,endDate:e})}),[f,o,y,t.type,t.focusedInput,t.startDate]);return{activeMonths:s,goToPreviousMonths:l,goToNextMonths:c,focusedDate:d,isDateFocused:u,isDateSelected:g,isDateHovered:m,isDateBlocked:f,isFirstOrLastSelectedDate:p,onDateFocus:k,onDateSelect:E,onDateHover:v,goToDate:w,isStartDate:b,isEndDate:_}}({picker:K,disabledDays:r,isDateBlocked:o,onSelection:X,onDateFocus:l});M.useEffect((()=>{z&&!x&&(G&&!V&&de(G),V&&!G&&de(V),V||G||de(Qr()))}),[G,V]);const me=1===Z.length&&Z[0],fe="object"==typeof me&&me.year,pe=M.useMemo((()=>{if(C)return C;if(!D||!fe)return[];const e=fe,t=[];for(let a=e-10;a<=e+10;a++)t.push(a);return t}),[C,D,fe]),he=M.useCallback((e=>{le(e),se(e)}),[le,se]),ye=M.useCallback((e=>{const t=e&&e.autoFocusRef;U(!1),t&&t.current&&"focus"in t.current&&t.current.focus()}),[]),ve=M.useCallback((e=>{const t=e&&e.autoFocusDate;U(!0);const a=t||("startDate"===K.focusedInput?K.startDate:K.endDate);a&&he(a)}),[K,he]),we=M.useCallback((e=>{const t=e&&e.autoFocusDate||("startDate"===K.focusedInput?K.startDate:K.endDate);t&&he(t)}),[K,he]),be=M.useCallback((()=>{U((e=>!e));const e="startDate"===K.focusedInput?K.startDate:K.endDate;e&&he(e)}),[K,he]),_e={datePickerId:R,triggerRef:N,closeOnSelection:w,close:ye,open:ve,toggle:be,withPreviousLabel:c,withNextLabel:d,monthLabelFormat:u,focusedDate:te,isDateFocused:ae,isDateSelected:ne,isDateHovered:re,isDateBlocked:ie,isFirstOrLastSelectedDate:oe,onDateFocus:se,onDateSelect:le,onDateHover:ce,goToPreviousMonths:J,goToNextMonths:ee,goToDate:de,isStartDate:ue,isEndDate:ge},ke=M.useCallback((()=>{v&&ye()}),[v,ye]),Ee=M.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onClick:t}=e,a=h._objectWithoutProperties(e,jr);return h._objectSpread2({onClick:e=>{U((e=>!e));const a="startDate"===K.focusedInput?K.startDate:K.endDate;a&&se(a),t&&t(e)},ref:N},a)}),[N,K,se]),Me=M.useCallback((e=>{qr.has(e.key)?e.preventDefault():A&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),ye({autoFocusRef:N}))}),[ye,A,N]),Se=M.createElement(Vr.Provider,{value:_e},M.createElement("div",{className:a.classNames2("dig-DatePicker","dig-10x86n21_23-4-0",{"dig-DatePicker--shouldHideDropShadow":_,"dig-10x86n22_23-4-0":_}),onKeyDown:Me,"data-testid":"digDatePicker"},me&&M.createElement(ri,{key:`${me.year}-${me.month}`,year:me.year,month:me.month,firstDayOfWeek:T,format:u,weekdayLabelFormat:g,dayLabelFormat:m,hasYearDropdown:D,yearOptions:pe,yearDropdownAriaLabel:P}))),Te=(e=>{switch(e){case"top":case"top-start":case"top-end":default:return"up";case"bottom":case"bottom-start":case"bottom-end":return"down"}})(F),De=M.useMemo((()=>(e=>{const{direction:t}=e;return new Map([["open",{keyFrames:{transform:"up"===t?"translate(0, -4px)":"translate(0, 4px)",opacity:1},options:{duration:a.toSeconds(a.values.Motion.Duration.XXFast),ease:a.values.Motion.Easing.Enter}}],["close",{keyFrames:{opacity:0},options:{duration:a.toSeconds(a.values.Motion.Duration.XXFast),ease:a.values.Motion.Easing.Exit}}]])})({direction:Te})),[Te]),{isMotionRunning:Ce}=a.useMotion({states:De,currentState:A?"open":"close",elementRef:I});if("function"==typeof L){const e=L({getTriggerProps:Ee,triggerRef:N,close:ye,open:ve,toggle:be,forceUpdate:we});return M.createElement(a.ClickOutside,{className:"dig-DatePicker-backdrop dig-10x86n20_23-4-0",isBlock:k,onClickOutside:ke,shouldPropagateMouseEvents:b,isClickThroughPortaled:E,isActive:A},e,A||Ce?M.createElement(a.Overlay,{className:`pleskac-${Te}`,auto:f,onChangePlacement:Y,isPortaled:E,placement:F,positioningStrategy:y,ref:O,anchorRef:N,"data-testid":"digDatePickerOverlay"},M.createElement("div",{ref:I},Se)):null)}return Se};oi.displayName="DatePicker";var si=(e,t)=>C(e)?"object"==typeof t?t.dateToString(e):ce(e,t||""):"",li=e=>{let{id:t,value:n,onChange:r,onSelection:i,format:o=Wr,disabled:s,inverse:l,isInvalid:c,isTransparent:d,size:u,"data-testid":g,"aria-label":m,"aria-labelledby":f,isDateBlocked:p,autocomplete:y,autoFocus:v,placeholder:w,readonly:_}=e,k=h._objectWithoutProperties(e,Hr);const[E,S]=M.useState(si(n,o)),T=M.useCallback((()=>{let e=null;return E.length&&(e=((e,t)=>"object"==typeof t?t.stringToDate(e):Gt(e,t,new Date))(E,o),!C(e)||p&&p(e))?(S(si(n,o)),n):(r&&!zr(e,n)&&r(e),e)}),[E,r,n,o,p]),D=e=>()=>{const t=T();e({autoFocusDate:t})},P=M.useCallback((e=>{S(e.target.value)}),[]),L=M.useCallback((e=>{r&&!zr(e.selectedDate,n)&&r(e.selectedDate),i&&i(e)}),[r,i,n]),x=M.useCallback((e=>t=>{switch(t.key){case Xr:return void t.preventDefault();case"Enter":if(t.preventDefault(),_)return;const a=T();return void e({autoFocusDate:a})}}),[T,_]),I=M.useCallback((e=>t=>{if(!_&&t.key===Xr){const t=T();e({autoFocusDate:t})}}),[T,_]),N=M.useCallback((e=>()=>{s||_||(T(),e())}),[s,T,_]);return M.useEffect((()=>{S(null===n?"":si(n,o))}),[o,n]),M.createElement(oi,h._objectSpread2({selectedDate:n,onSelection:L,isDateBlocked:p},k),(e=>{let{getTriggerProps:n,open:r,forceUpdate:i}=e;const o=n({onChange:P,onKeyDown:x(r),onKeyUp:I(r),onBlur:D(i)});return _&&(o.onClick=void 0),M.createElement(a.TextInput,h._objectSpread2(h._objectSpread2({id:t,value:E,disabled:s,inverse:l,isInvalid:c,isTransparent:d,size:u,"aria-label":m,"aria-labelledby":f,"data-testid":g},o),{},{withLeftAccessory:M.createElement(a.UIIcon,{src:b.CalendarLine,onClick:N(r)}),autoComplete:y,autoFocus:v,placeholder:w,readonly:_}))}))};const ci=({intl:e,getPolicyDict:t,linkMetadata:a,linkPolicy:n,onPolicyUpdate:r,readOnlyPolicy:i})=>{const s=t(mn),l=e=>{e&&e.expires instanceof Date&&e.expires.setHours(23,59,59),r(e)},c=(e=>{const{linkMetadata:t,linkPolicy:a}=e,n=new Date;let r;if(o.isExternalAudience(a.audience)){const{days_to_expire_policy:e}=t.link_permissions;o.isExpirationPolicyEnforcedByAdmin(t.link_permissions)&&(r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+o.daysExpirationPolicyToNumber[e]))}return{before:new Date(n.getFullYear(),n.getMonth(),n.getDate()+1),after:r}})({intl:e,getPolicyDict:t,linkMetadata:a,linkPolicy:n,onPolicyUpdate:r,readOnlyPolicy:i}),d=null!=n.expires,u=M.useCallback((t=>e.formatDate(t,{day:"2-digit"})),[e]),g=M.createElement("div",null,M.createElement(Mn,{currentValue:null!=n.expires?"enabled":"disabled",optionsDict:s.optionsDict,onOptionChange:e=>{let t=null;e&&(t=n.expires||o.daysAfterToday(o.isExternalAudience(n.audience)&&o.isExpirationPolicySetByAdmin(a.link_permissions)?o.daysExpirationPolicyToNumber[a.link_permissions.days_to_expire_policy]:30)),l({expires:t||void 0,display_expiration_warning:!1})},disabled:!(o.isExternalAudience(n.audience)&&o.isExpirationPolicyEnforcedByAdmin(a.link_permissions))&&!o.canModifyExpire(a)||i,ariaLabel:s.title}),d&&M.createElement("div",{className:"sharing-settings-modal__input_spacing"},M.createElement(li,{value:n.expires||new Date,disabled:!o.canModifyExpire(a)||i,isDateBlocked:e=>e<c.before||!!(c.after&&e>c.after),onChange:e=>e&&l({expires:e,display_expiration_warning:!1}),dayLabelFormat:u,monthLabelFormat:t=>e.formatDate(t,{month:"long",year:"numeric"}),weekdayLabelFormat:t=>e.formatDate(t,{weekday:"narrow"}),placement:"left"})));return M.createElement(kn,{policyName:mn,policyDict:s,selector:g})};ci.displayName="SettingsExpire";const di=(e,t)=>o.isPasswordPolicyEnforcedByAdmin(e)&&o.isExternalAudience(t),ui=({linkPolicy:e,linkPermissions:t,getPolicyDict:a,onPolicyUpdate:n,readOnlyPolicy:r})=>{const i=a(hn),s=e.require_password?"enabled":"disabled";return M.createElement(Mn,{currentValue:s,optionsDict:i.optionsDict,onOptionChange:e=>{n({require_password:e})},disabled:!o.canTogglePassword(t)||di(t,e.audience)||r,ariaLabel:i.title})};ui.displayName="PasswordToggle";function gi(e,t){return t.link_password||""===t.link_password?t.link_password:o.hasLinkPassword(e)?"123456":""}const mi=e=>{const{intl:t,linkPolicy:n,linkPermissions:r,onPolicyUpdate:i}=e;return M.createElement("div",{className:"sharing-settings-modal__input_spacing"},M.createElement(a.TextInput,{role:"textbox",className:"password-input__input",disabled:!o.canModifyPassword(r)||e.readOnlyPolicy,placeholder:t.formatMessage({id:"um5odk",defaultMessage:"Set password"}),name:"link_password",onChange:e=>{i({[e.target.name]:e.target.value})},type:"password",isInvalid:""===n.link_password,value:gi(r,n)}))},fi=e=>{const{getPolicyDict:t,linkPolicy:a,linkPermissions:n,readOnlyPolicy:r}=e,i=t(hn),o=a.require_password||di(n,a.audience)&&!r,s=M.createElement("div",null,M.createElement(ui,{...e}),o&&M.createElement(mi,{...e}));return M.createElement(kn,{policyName:hn,policyDict:i,selector:s})};fi.displayName="SettingsPassword";a.injectInternalStyle("/static/metaserver/static/js/sharing/sharing-sdk/legos/settings-page/internals/settings-row/settings-download.module.out-vfl4xZ7z9.css",(e=>"._banner_12h6n_3{align-items:center;background-color:var(--dig-color__opacity__surface);gap:var(--dig-spacing__micro__medium)}"));function pi(e){return Boolean(e&&e.allow_download?e.can_disallow_download:e.can_allow_download)}const hi=e=>{const{intl:t,linkPolicy:n,linkPermissions:r}=e;return!n.allow_download&&r.can_disallow_download?M.createElement(a.Banner,{className:"_banner_12h6n_3","data-testid":"sharing-settings-modal__banner",withLeftIcon:M.createElement(a.UIIcon,{src:a.InfoLine})},M.createElement(a.Banner.Message,null,M.createElement(a.Text,{size:"small",isBold:!0},(e=>e.formatMessage({id:"QdaCYw",defaultMessage:"This applies only within Dropbox."}))(t)))):null},yi=({linkPermissions:e,linkPolicy:t,getPolicyDict:a,onPolicyUpdate:n,onLinkClicked:r,banner:i,readOnlyPolicy:o,isEditFolderLink:s,isPaperDoc:l})=>{const c=a(fn),d=t.allow_download?"enabled":"disabled",u=s||l?void 0:M.createElement(Mn,{currentValue:d,optionsDict:c.optionsDict,onOptionChange:e=>{n(fn,e)},disabled:!pi(e)||o,ariaLabel:c.title}),g=s||l?"setting-disabled":"";return M.createElement(kn,{policyName:fn,policyDict:c,selector:u,onLinkClicked:r,extra:i,className:g})};yi.displayName="SettingsDownload";class vi extends M.Component{constructor(e){super(e),this.handleMultiplePolicyUpdate=e=>{const t={...this.props.linkPolicy,...e};this.props.onPolicyUpdate(this.props.linkMetadata,t)},this.handlePolicyUpdate=(e,t)=>{const a={...this.props.linkPolicy,[e]:t};this.props.onPolicyUpdate(this.props.linkMetadata,a)};const{getRLPolicyDict:t}=(a=this.props.intl,{getRLPolicyDict(e,t,n,r=!1){const i="editor"===t;switch(e){case pn:return{title:i?a.formatMessage({id:"nct28+",defaultMessage:"Who has access to edit"}):a.formatMessage({id:"UPYB+9",defaultMessage:"Who has access to view"}),optionsDict:{public:{label:a.formatMessage({id:"/zG9EQ",defaultMessage:"Anyone with link"}),description:i?n?a.formatMessage({id:"Zu3WQt",defaultMessage:"Anyone with this link can edit the folder."}):r?a.formatMessage({id:"w90q8W",defaultMessage:"Anyone with this link can edit the collection."}):a.formatMessage({id:"mFcDVj",defaultMessage:"Anyone with this link can edit the file."}):n?a.formatMessage({id:"ezaRwK",defaultMessage:"Anyone with this link can view the folder."}):r?a.formatMessage({id:"uINLfI",defaultMessage:"Anyone with this link can view the collection."}):a.formatMessage({id:"plWhaX",defaultMessage:"Anyone with this link can view the file."})},team:{label:a.formatMessage({id:"Abe4xf",defaultMessage:"Team members"}),description:i?n?a.formatMessage({id:"Mug0JF",defaultMessage:"Team members with this link can edit the folder."}):r?a.formatMessage({id:"6NeGPn",defaultMessage:"Team members with this link can edit the collection."}):a.formatMessage({id:"d0xPAZ",defaultMessage:"Team members with this link can edit the file."}):n?a.formatMessage({id:"XG/OYV",defaultMessage:"Team members with this link can view the folder."}):r?a.formatMessage({id:"+fXeLg",defaultMessage:"Team members with this link can view the collection."}):a.formatMessage({id:"ErXPpA",defaultMessage:"Team members with this link can view the file."})},no_one:{label:a.formatMessage({id:"70iNCa",defaultMessage:"Only people invited"}),description:a.formatMessage({id:"CyXDsT",defaultMessage:"The link is off and does not grant additional access to anyone."})}},type:vn};case hn:return{title:a.formatMessage({id:"LqPx8N",defaultMessage:"Require password"}),optionsDict:{enabled:{label:a.formatMessage({id:"oUP+qL",defaultMessage:"On"}),value:!0},disabled:{label:a.formatMessage({id:"h58mvf",defaultMessage:"Off"}),value:!1}},type:wn};case fn:return{title:a.formatMessage({id:"7V5NRy",defaultMessage:"Allow downloads on dropbox.com"}),optionsDict:{enabled:{label:a.formatMessage({id:"EeYSnq",defaultMessage:"On"}),value:!0},disabled:{label:a.formatMessage({id:"5pmKhs",defaultMessage:"Off"}),value:!1}},type:wn};case mn:return{title:a.formatMessage({id:"hnzZgk",defaultMessage:"Set expiration"}),optionsDict:{enabled:{label:a.formatMessage({id:"J8zY2i",defaultMessage:"On"}),value:!0},disabled:{label:a.formatMessage({id:"w6dVgn",defaultMessage:"Off"}),value:!1}},type:wn};case"default":return{title:a.formatMessage({id:"LtXXzz",defaultMessage:"Default sharing settings"}),description:a.formatMessage({id:"dVXrDR",defaultMessage:"Go to account settings to set a default sharing permission"}),optionsDict:{},type:"button"};default:throw new Error("Policy name not found")}}});var a;const{link_permissions:n}=e.linkMetadata,r="folder"===e.linkMetadata.file_type,i="collection"===e.linkMetadata.file_type;this.getPolicyDict=e=>t(e,n.link_access_level,r,i)}render(){const{linkMetadata:e,linkPolicy:t,onPolicyUpdate:a,intl:n,readOnlyPolicy:r,onLinkClicked:i,...o}=this.props;return M.createElement("div",{...o},M.createElement(An,{intl:this.props.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:r}),M.createElement(ci,{intl:this.props.intl,linkMetadata:this.props.linkMetadata,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:r}),M.createElement(fi,{intl:this.props.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:r}),M.createElement(yi,{linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handlePolicyUpdate,onLinkClicked:this.props.onLinkClicked,readOnlyPolicy:r,isPaperDoc:this.props.isPaperDoc,banner:M.createElement(hi,{intl:this.props.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy})}))}}vi.displayName="SettingsRighteousLinkPolicyView";const wi=({className:e,...t})=>M.createElement("div",{className:a.cx("scl-scooter-loader",e),...t},M.createElement("div",{className:"scl-scooter-loader-animation"}));wi.displayName="ScooterLoader",wi.displayName="ScooterLoader";const bi="scl-sharing-modal-downgrade-banner",_i=e=>{const{subheader:t,header:r,onClickCloseButton:i,onClickOutlineButton:o,onClickTransparentButton:s,outlineButtonLabel:l,transparentButtonLabel:c,showCloseButton:d}=e,u=n.useIntl();return M.createElement("div",{className:`${bi} dig-Theme---VIS`,"data-testid":"sharing-modal-downgrade-banner"},M.createElement("div",{className:`${bi}__header`},M.createElement(a.Text,{isBold:!0,size:"large"},r),d&&M.createElement(a.IconButton,{variant:"transparent","aria-label":u.formatMessage({id:"hhAj2K",defaultMessage:"Close"}),className:`${bi}__close`,onClick:i,size:"standard"},M.createElement(a.UIIcon,{src:a.CloseLine}))),M.createElement("div",{className:`${bi}__subheader`},M.createElement(a.Text,null,t)),M.createElement("div",{className:`${bi}__buttons`},M.createElement(a.Button,{variant:"outline",onClick:o},l),M.createElement(a.Button,{variant:"transparent",onClick:s},c)))};_i.displayName="SharingModalDowngradeBanner";const ki=r.define({name:"sharing.create_shared_link_with_settings"},(e=>t=>r.handler(e.sharingAlphaCreateSharedLinkWithSettings(t)))),Ei=r.define({name:"sharing.revokeSharedLink"},(e=>t=>r.handler(e.sharingRevokeSharedLink(t))));a.injectInternalStyle("/static/metaserver/static/js/sharing/sharing-sdk/legos/settings-page/internals/link-settings/link-settings.module.out-vflLC1i1i.css",(e=>"._bannerWithRightActions_doy0g_3{align-items:center;display:flex;gap:var(--dig-spacing__micro__medium)}._bannerWithRightActions_doy0g_3>span:last-child{align-items:center;display:flex!important;justify-content:space-between;width:100%}._bannerUpsell_doy0g_16{align-items:center;border:1px solid var(--dig-color__identity__green);gap:var(--dig-spacing__micro__medium);text-align:center}._bannerMessage_doy0g_23{flex:1;margin-right:auto}._bannerActions_doy0g_28{align-items:center;display:flex!important;margin-left:auto;padding-top:0}._bannerForWarning_doy0g_35{align-items:center;background-color:var(--dig-color__warning__surface);border-radius:8px;padding:8px 12px}"));const Mi=Symbol("ON_COPY_SHARED_LINK_START"),Si=Symbol("ON_COPY_SHARED_LINK_SUCCESS"),Ti=Symbol("ON_COPY_SHARED_LINK_ERROR"),Di=Symbol("ON_VIEW_SETTINGS_PAGE"),{useEmitter:Ci,defaultEmitter:Pi}=a.defineLogger((async({event:e,getContextValue:t})=>{var n,r,i,o,s;const l=t(a.Context$4),c=t(a.Context$5),d=t(a.Context$6),u=a.getProperties$4(l),g=a.getProperties$5(c),m=a.getProperties$6(d),f=null!==(n=u.actionSurface)&&void 0!==n?n:"share_modal_settings",p=null!==(r=u.actionElement)&&void 0!==r?r:"copy_link_button",h=null!==(i=u.contentAction)&&void 0!==i?i:"copy_link",y="settings_screen",v={isDir:null!==(o=g.isDir)&&void 0!==o&&o,type:g.fileType,fileId:m.contentIdentifier,ext:g.fileExtension},w=null!==(s=m.contentIdentifier)&&void 0!==s?s:"unknown";if(e.key!==Mi)if(e.key!==Si)if(e.key!==Ti)if(e.key!==Di);else a.UDCL.logEvent({class:"share",action:"view",object:"share_modal_settings",properties:{actionSurface:f,actionElement:p}},{tags:{actionSurface:f,actionElement:p}});else await a.logPAPCopySharedLinkEvent({eventState:"failed",screen:y,actionSurface:f,actionElement:p,contentAction:h,requestedAccessLevel:e.payload.requestedAccessLevel,fileIdOrPath:w,content:v,hasCachedLink:e.payload.hasCachedLink,metadata:e.payload.linkMetadata,httpCode:e.payload.httpCode,exception:e.payload.exception});else await a.logPAPCopySharedLinkEvent({eventState:"success",screen:y,actionSurface:f,actionElement:p,contentAction:h,requestedAccessLevel:e.payload.requestedAccessLevel,fileIdOrPath:w,content:v,hasCachedLink:e.payload.hasCachedLink,metadata:e.payload.linkMetadata,httpCode:e.payload.httpCode});else await a.logPAPCopySharedLinkEvent({eventState:"start",screen:y,actionSurface:f,actionElement:p,contentAction:h,requestedAccessLevel:e.payload.requestedAccessLevel,fileIdOrPath:w,content:v,hasCachedLink:e.payload.hasCachedLink,metadata:e.payload.linkMetadata})})),Li=r.define({name:"sharing.unshareFile"},(e=>t=>r.handler(e.sharingUnshareFile(t)))),xi=r.define({name:"sharing.unshareFolder"},(e=>t=>r.handler(e.sharingUnshareFolder(t)))),Ii=({objectMetadata:e,objectIdentifier:t,contentName:o,open:s,onCancel:l,onConfirm:c,onClose:u,onObjectIdentifierChanged:g,onConfirmationModalShownChange:m,onUnshareCompleted:f})=>{const p=n.useIntl(),h=r.useEndpoint(xi),y=r.useEndpoint(Li),v=r.useEndpoint(d.sharingCheckJobStatus),w=r.useLogger(),[b,_]=M.useState(!1),k=r.usePlatform(),E=k!==r.Platforms.DESKTOP,S=i.useShowSharingNotification(),T=a.getIsFile(e)?(e=>e.formatMessage({id:"+HG1Rr",defaultMessage:"Everyone will be removed from this file. Youll still keep a copy of this file in your Dropbox."}))(p):(e=>e.formatMessage({id:"SO6vAJ",defaultMessage:"Everyone will be removed from this folder. Youll still keep a copy of this folder in your Dropbox."}))(p),D=M.useCallback((async n=>{var o,s;if(c(n),k!==r.Platforms.DESKTOP&&u(),S({type:i.SharingNotificationType.IN_PROGRESS,message:Va(p,a.getName(e))}),"file"===t[".tag"]){w("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_START",null);const n=await y({file:t.fileId});"SUCCESS"===n.status?(w("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_SUCCESS",{response:n}),S({type:i.SharingNotificationType.COMPLETED,message:za(p,a.getName(e))})):("ERROR"===n.status?w("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_ERROR",{response:n}):w("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_FATAL",{response:n}),S({type:i.SharingNotificationType.FAILURE,message:Qa(p)}))}else if("shared_folder"===t[".tag"]){w("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_START",null);const r=await h({shared_folder_id:t.sharedFolderId,leave_a_copy:n});if("SUCCESS"===r.status){if("complete"===r.output[".tag"])S({type:i.SharingNotificationType.COMPLETED,message:za(p,a.getName(e))}),w("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_SUCCESS",{response:r}),await g({".tag":"file_folder",path:a.isNewApiMetadata(e)?"":null!==(o=e.path_lower)&&void 0!==o?o:"",name:a.getName(e)});else if("async_job_id"===r.output[".tag"]){const t=r.output.async_job_id;"COMPLETE"===(await i.poll((async()=>{const n={async_job_id:t},r=await v(n);return"SUCCESS"===r.status&&"in_progress"===r.output[".tag"]?{status:"RETRY"}:(S({type:i.SharingNotificationType.COMPLETED,message:za(p,a.getName(e))}),{status:"COMPLETE",output:r})}),{interval:1e3,timeout:18e4})).status&&(S({type:i.SharingNotificationType.COMPLETED,message:za(p,a.getName(e))}),w("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_SUCCESS",{response:r}),await g({".tag":"file_folder",path:a.isNewApiMetadata(e)?"":null!==(s=e.path_lower)&&void 0!==s?s:"",name:a.getName(e)}))}}else"ERROR"===r.status?w("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_ERROR",{response:r}):(S({type:i.SharingNotificationType.FAILURE,message:Qa(p)}),w("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_FATAL",{response:r}))}f(),await Promise.all([d.invalidateListSharedLinks(t),a.invalidateObjectMembers(t),i.invalidateSharingObjectMetadata(t),i.invalidateNewApiObjectMetadata(t)])}),[c,k,S,p,e,t,u,w,y,h,g,v,f]);return M.useEffect((()=>{m(s)}),[s,m]),M.createElement(a.Modal,{open:s,isCentered:!0,withCloseButton:E?sn(p):void 0,onRequestClose:l,overlayStyles:k===r.Platforms.DESKTOP?{maxHeight:"331px"}:void 0},M.createElement(a.Modal.Header,{"data-sharing-sdk":"1",hasBottomSpacing:"title-standard"},M.createElement(a.Modal.Title,null,((e,t)=>e.formatMessage({id:"C6YnHl",defaultMessage:"Unshare {content_name}?"},{content_name:i.Emstring.em_snippet(t,a.SNIPPET_SIZES.FILENAME)}))(p,o))),M.createElement(a.Modal.Body,{"data-sharing-sdk":"1",hasVerticalSpacing:!1},T,a.getIsSharedFolder(e)&&M.createElement("div",{style:{display:"flex",alignItems:"center",marginTop:"24px"}},M.createElement(a.Checkbox,{checked:b,onChange:()=>_(!b),style:{marginRight:"8px"}}),(e=>e.formatMessage({id:"N3y1Hr",defaultMessage:"Let removed members keep a copy of this shared folder."}))(p))),M.createElement(a.Modal.Footer,{"data-sharing-sdk":"1"},M.createElement(a.Button,{variant:"opacity",onClick:l,autoFocus:!0},p.formatMessage({id:"nSbXzb",defaultMessage:"Cancel"})),M.createElement(a.Button,{variant:"primary",onClick:()=>D(b)},p.formatMessage({id:"obuuKH",defaultMessage:"Unshare"}))))};Ii.displayName="UnshareConfirmationModal";const Ni=e=>g.useInitStore(e,(e=>{const t=g.proxy((()=>e.get().accessLevel)),n=g.proxy((()=>e.get().accountMetadata)),r=g.proxy((()=>e.get().compatLinkMetadata)),s=g.proxy((()=>e.get().compatLinkPolicy)),l=g.proxy((()=>e.get().linkMetadata)),c=g.proxy((()=>e.get().objectIdentifier)),d=g.proxy((()=>e.get().objectMetadata)),u=g.proxy((()=>e.get().originalCompatLinkPolicy)),m=g.proxy((()=>e.get().sharingPrefs)),f=g.proxy((()=>e.get().isSavable)),p=g.proxy((()=>e.get().isSaving)),h=g.proxy((()=>{const e=d.get(),r=t.get();return a.getCanCreateLink(e,r,n.get().is_tmr_member)})),y=g.proxy((()=>a.getCanDeleteLink(l.get()))),v=g.proxy((()=>{const e=r.get(),t=u.get();return null!==e&&null!==t&&((e,t)=>o.isReadOnlyPolicy(t,e.link_permissions))(e,t)})),w=g.proxy((()=>{const e=r.get();return null===e?null:(t=e,a.isRighteousLink(t.link_permissions));var t})),b=g.proxy((()=>n.get().is_family_user||!1)),_=g.proxy((()=>i.getIsTeam(n.get()))),k=g.proxy((()=>{var e;return null!==(e=n.get().is_freemium_team_member)&&void 0!==e&&e})),E=g.store(!1),M=g.store(!1),S=g.store(!1),T=g.store(!1),D=g.store(!1),C=g.proxy((()=>{const e=d.get(),t=l.get(),n=a.getIsFolder(e),r=a.getIsSharedFolder(e),i=a.getIsCollection(e);return a.getCanUnshareObject(e)&&(!n||r)&&null!==t&&!i}));return{$accessLevel:t,$accountMetadata:n,$compatLinkPolicy:s,$compatLinkMetadata:r,$linkMetadata:l,$objectIdentifier:c,$objectMetadata:d,$originalCompatLinkPolicy:u,$sharingPrefs:m,$isSavable:f,$isSaving:p,$canCreateLink:h,$canDeleteLink:y,$isFamilyUser:b,$isReadOnlyPolicy:v,$isRighteousLink:w,$isTeamUser:_,$isFreemiumTeamMember:k,$isConfirmationModalOpen:E,$isCreatingLink:M,$isDeletingLink:S,$isDowngradeBannerVisible:T,$shouldShowUnshare:C,$isUnshareConfirmationModalOpen:D,$props:e}})),Oi=({store:e})=>{const t=n.useIntl(),r=g.useStore(e.$isSavable),i=g.useStore(e.$isSaving),o=g.useStore(e.$isReadOnlyPolicy),s=g.useStore(e.$shouldShowUnshare),l=g.useStore(e.$objectMetadata),c=(e=>M.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!0)}),[e]))(e),d=(e=>M.useCallback((()=>{e.$props.get().onSave()}),[e]))(e),u=(e=>M.useCallback((()=>{e.$props.get().onCancel()}),[e]))(e);return M.createElement(M.Fragment,null,s?M.createElement(M.Fragment,null,M.createElement(a.Button,{variant:"transparent",onClick:c,"data-uxa-log":"sm24_link_settings_unshare_button"},Ka(t,l)),M.createElement("div",{style:{flex:1}})):null,M.createElement(a.Button,{variant:"opacity",onClick:u,"data-uxa-log":"sm24_link_settings_cancel_button"},wa(t)),M.createElement(a.Button,{variant:"primary",onClick:d,disabled:i||!r||o,"data-uxa-log":"sm24_link_settings_save_button"},i?ba(t):_a(t)))};Oi.displayName="LinkSettingsActions";const Ai=({store:e})=>{const t=g.useStore(e.$objectMetadata),n=g.useStore(e.$objectIdentifier),r=g.useStore(e.$isUnshareConfirmationModalOpen),i=(e=>M.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!1)}),[e]))(e),o=(e=>M.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!1)}),[e]))(e),s=(e=>M.useCallback((()=>{e.$props.get().onUnshareCompleted()}),[e]))(e),l=(e=>M.useCallback((()=>{e.$props.get().onClose()}),[e]))(e),c=(e=>M.useCallback((async t=>{await e.$props.get().onObjectIdentifierChanged(t)}),[e]))(e),d=(e=>M.useCallback((t=>{e.$props.get().onConfirmationModalShownChange(t)}),[e]))(e);return M.createElement(Ii,{objectMetadata:t,objectIdentifier:n,contentName:a.getName(t),onConfirm:o,onCancel:i,open:r,onUnshareCompleted:s,onClose:l,onObjectIdentifierChanged:c,onConfirmationModalShownChange:d})};Ai.displayName="UnshareConfirmationModalWrapper";const Ui=({store:e})=>{const t=n.useIntl(),o="editor"===g.useStore(e.$accessLevel)[".tag"]?(e=>e.formatMessage({id:"0daJiL",defaultMessage:"There isnt a link for editing."}))(t):(e=>e.formatMessage({id:"TEAu9g",defaultMessage:"There isnt a link for viewing."}))(t),s=g.useStore(e.$canCreateLink),l=(e=>{const t=r.useEndpoint(ki),o=r.useLogger(),s=n.useIntl(),l=r.usePlatform()===r.Platforms.METASERVER,c=i.useShowSharingNotification();return M.useCallback((async()=>{const n=e.$accessLevel.get(),r=e.$linkMetadata.get(),d=e.$isCreatingLink.get(),u=e.$isDeletingLink.get();if(null!==r||d||u)return;o("SHARE_MODAL_SETTINGS__CREATE_LINK__CLICK",null);const g=async()=>{e.$isCreatingLink.set(!0),c({type:i.SharingNotificationType.IN_PROGRESS,message:Ra(s,n)}),o("SHARE_MODAL_SETTINGS__CREATE_LINK_API_START",null);const r=e.$objectIdentifier.get(),l=a.getContentIdOrPathFromObjectIdentifier(r),d=await t({path:l,settings:{access:n}});return await e.$props.get().onRefreshLinksMetadata(),"ERROR"===d.status?(e.$isCreatingLink.set(!1),o("SHARE_MODAL_SETTINGS__CREATE_LINK_API_ERROR",{response:d}),"shared_link_already_exists"===d.error[".tag"]?void a.close():"access_denied"===d.error[".tag"]?void c({type:i.SharingNotificationType.FAILURE,message:$a(s,"file"===r[".tag"])}):void c({type:i.SharingNotificationType.FAILURE,message:Fa(s)})):"FATAL"===d.status?(e.$isCreatingLink.set(!1),o("SHARE_MODAL_SETTINGS__CREATE_LINK_API_FATAL",{response:d}),void c({type:i.SharingNotificationType.FAILURE,message:Fa(s)})):(o("SHARE_MODAL_SETTINGS__CREATE_LINK_API_SUCCESS",{response:d}),c({type:i.SharingNotificationType.COMPLETED,message:Ba(s,n)}),void e.$isCreatingLink.set(!1))};l?_.showOQModalOrContinue({action:"share_link",continueCallback:g,abortCallback:()=>{e.$props.get().onClose()}}):await g()}),[e,t,s,o,l])})(e);return s?M.createElement("span",null,o," ",M.createElement(a.Link,{href:"#",onClick:l,"aria-label":Ea(t),display:"inline"},Ea(t))):M.createElement("span",null,(e=>e.formatMessage({id:"ZMB2hv",defaultMessage:"Link not available."}))(t))};Ui.displayName="CreateLinkSection";const Ri=({store:e})=>{const t=n.useIntl();return g.useStore(e.$isCreatingLink)?M.createElement("div",{style:{fontSize:"12px",textAlign:"center"}},(e=>e.formatMessage({id:"6WeHGE",defaultMessage:"Creating link"}))(t)," ",M.createElement("span",{style:{display:"inline-block"}},M.createElement(wi,null))):M.createElement("div",{style:{fontSize:"12px",paddingTop:"20px",paddingBottom:"20px",lineHeight:"22px",textAlign:"center"}},M.createElement(Ui,{store:e}))};Ri.displayName="EmptyLinkPolicy";const $i=({store:e})=>{const t=n.useIntl(),o=g.useStore(e.$isConfirmationModalOpen),s=(e=>M.useCallback((()=>{e.$isConfirmationModalOpen.set(!1)}),[e]))(e),l=g.useStore(e.$objectMetadata),c=(e=>{const t=n.useIntl(),o=r.useEndpoint(Ei),s=r.useLogger(),l=r.usePlatform(),c=i.useShowSharingNotification(),d=M.useCallback((()=>{e.$props.get().onOpenManageAccess()}),[e]);return M.useCallback((async()=>{const n=e.$linkMetadata.get(),u=e.$objectMetadata.get(),m=e.$isDeletingLink.get(),f=l===r.Platforms.DESKTOP;if(m||null===n)return;g.batch((()=>{e.$isConfirmationModalOpen.set(!1),e.$isDeletingLink.set(!0)})),c({type:i.SharingNotificationType.IN_PROGRESS,message:Na(t,a.getName(u),f)}),s("SHARE_MODAL_SETTINGS__DELETE_LINK_API_START",null);const p=await o({url:n.url});await e.$props.get().onRefreshLinksMetadata(),"SUCCESS"===p.status?(s("SHARE_MODAL_SETTINGS__DELETE_LINK_API_SUCCESS",{response:p}),c({type:i.SharingNotificationType.COMPLETED_WITH_ACTION,message:Oa(t,a.getName(u),f),actionMessage:Ua(t),actionOnClick:d})):("ERROR"===p.status?s("SHARE_MODAL_SETTINGS__DELETE_LINK_API_ERROR",{response:p}):s("SHARE_MODAL_SETTINGS__DELETE_LINK_API_FATAL",{response:p}),c({type:i.SharingNotificationType.FAILURE,message:Aa(t)})),e.$isDeletingLink.set(!1)}),[e,o,s,t,l,d,c])})(e),d=r.usePlatform(),u=d!==r.Platforms.DESKTOP;return M.useEffect((()=>{e.$props.get().onConfirmationModalShownChange(o)}),[o,e.$props]),M.createElement(a.Modal,{open:o,isCentered:!0,withCloseButton:u?sn(t):void 0,onRequestClose:s,"data-testid":"delete-confirmation-modal",overlayStyles:d===r.Platforms.DESKTOP?{maxHeight:"331px"}:void 0},M.createElement(a.Modal.Header,{"data-sharing-sdk":"1",hasBottomSpacing:"title-standard"},M.createElement(a.Modal.Title,null,t.formatMessage({id:"hAG2ph",defaultMessage:"Delete link to {object_name}?"},{object_name:i.Emstring.em_snippet(a.getName(l),a.SNIPPET_SIZES.FILENAME)}))),M.createElement(a.Modal.Body,{"data-sharing-sdk":"1",hasVerticalSpacing:!1},(e=>e.formatMessage({id:"poEviS",defaultMessage:"If you want to further restrict access, check the list of people who still have access."}))(t)),M.createElement(a.Modal.Footer,{"data-sharing-sdk":"1"},M.createElement(a.Button,{variant:"opacity",onClick:s,autoFocus:!0},wa(t)),M.createElement(a.Button,{variant:"primary",onClick:c},(e=>e.formatMessage({id:"2xr+8c",defaultMessage:"Delete"}))(t))))};$i.displayName="DeleteLinkConfirmationModal";const Fi=({store:e})=>{const t=n.useIntl(),i=(e=>{const t=g.useStore(e.$accountMetadata),a=g.useStore(e.$isFamilyUser),n=g.useStore(e.$isTeamUser);return t.can_use_extended_sharing_controls||a?null:n?"/team/upgrade":t.is_paid?"/buy/professional?_tk=sg_pro_bundle_header":"/pro/try?_tk=sg_pro_bundle_header"})(e),o=((e,t)=>{const a=r.useLogger(),n=r.useOpenUrl();return M.useCallback((()=>{null!==t&&(n(t),a("SHARE_MODAL_SETTINGS__UPSELL_LINK__CLICKED",{href:t}))}),[t,a,n])})(0,i),s=g.useStore(e.$isTeamUser),l=g.useStore(e.$sharingPrefs),c=g.useStore(e.$isFreemiumTeamMember),d=g.useStore(e.$compatLinkMetadata),u=g.useStore(e.$compatLinkPolicy),m=g.useStore(e.$isRighteousLink);if(((e,t)=>{const a=r.useLogger();M.useEffect((()=>{null!==t&&a("SHARE_MODAL_SETTINGS__UPSELL_LINK__EXPOSED",{href:t})}),[t,a])})(0,i),r.usePlatform()===r.Platforms.MS_TEAMS_MOBILE)return null;if(null===i&&!c)return null;if(null===d||null===u||null===m)return null;const f=c?(e=>e.formatMessage({id:"Ujf2E1",defaultMessage:"These settings arent available in your current plan."}))(t):M.createElement(a.Link,{onClick:o,href:i,target:"_blank",rel:"noopener noreferrer",display:"inline"},((e,t,a)=>{const r=t?a.product_standard:a.product_professional;if("string"==typeof r){const t=n.defineMessage({id:"gh2r5j",defaultMessage:"Upgrade to {product_name} to enable all link settings."});return e.formatMessage(t,{product_name:r})}return e.formatMessage({id:"QYqjgv",defaultMessage:"Upgrade to enable all link settings."})})(t,s,l));return M.createElement("div",{style:{margin:"24px 0px",overflow:"hidden"}},M.createElement(a.Banner,{className:"_bannerUpsell_doy0g_16",withLeftIcon:M.createElement(a.UIIcon,{src:k.UpsellLine})},M.createElement(a.Banner.Message,null,M.createElement(a.Text,{size:"small",isBold:!0},f))))};Fi.displayName="LinkSettingsUpsellBanner";const Bi=({store:e})=>{const t=n.useIntl(),r=g.useStore(e.$compatLinkMetadata),i=g.useStore(e.$compatLinkPolicy),o=(e=>M.useCallback(((t,n)=>{const r=e.$compatLinkPolicy.get();n.audience&&(null==r?void 0:r.audience)&&a.isLinkAudienceLowerAccess(n.audience,null==r?void 0:r.audience)&&e.$isDowngradeBannerVisible.set(!0),e.$props.get().onCompatLinkPolicyChange(n)}),[e]))(e),s=(e=>M.useCallback((t=>{e.$props.get().onLinkClicked(t)}),[e]))(e),l=g.useStore(e.$isReadOnlyPolicy),c=g.useStore(e.$isRighteousLink),d=a.getIsPaperDoc(e.$objectMetadata.get());return null===r||null===i||null===c?M.createElement(Ri,{store:e}):M.createElement(vi,{isPaperDoc:d,linkMetadata:r,linkPolicy:i,onPolicyUpdate:o,intl:t,onLinkClicked:s,readOnlyPolicy:l,"data-testid":"righteous-link-policy"})};Bi.displayName="LinkSettingsPolicies";const ji=({store:e})=>{const t=n.useIntl(),a=g.useStore(e.$isDowngradeBannerVisible),r=(e=>M.useCallback((()=>{e.$isDowngradeBannerVisible.set(!1)}),[e]))(e),i=(e=>M.useCallback((()=>{e.$props.get().onOpenManageAccess()}),[e]))(e);return a?M.createElement("div",{style:{marginTop:"16px"}},M.createElement(_i,{header:ja(t),subheader:Ha(t),outlineButtonLabel:Ya(t),transparentButtonLabel:qa(t),onClickOutlineButton:r,onClickCloseButton:r,onClickTransparentButton:i,showCloseButton:!0})):null};ji.displayName="DowngradeAudienceBanner";const Hi=({store:e})=>{const t=n.useIntl(),r=g.useStore(e.$compatLinkPolicy),i=g.useStore(e.$originalCompatLinkPolicy),s=g.useStore(e.$compatLinkMetadata);if(null===s||null===r||null===i)return null;const l=o.getLinkControlPolicyWarningText(i,r,s.link_permissions,t);return l?M.createElement("div",{style:{margin:"24px 0px",overflow:"hidden"}},M.createElement(a.Banner,{className:"_bannerForWarning_doy0g_35"},M.createElement(a.Banner.Message,null,l))):null};Hi.displayName="LinkControlPolicyWarning";const Yi=({store:e})=>{const t=g.useStore(e.$linkMetadata),o=g.useStore(e.$isSavable),{onClick:s,copySuccess:l}=(e=>{const[t,n]=M.useState(!1),o=r.useLogger(),s=Ci(),l=r.usePlatform()===r.Platforms.METASERVER,c=g.useStore(e.$accessLevel),d=i.useShowSharingNotification(),u=M.useCallback((()=>{const t=e.$linkMetadata.get(),r=e.$compatLinkMetadata.get();t&&(n(!0),d({type:i.SharingNotificationType.COMPLETED,message:a.formatSuccessMessageForUrl(t.url,c[".tag"])}),a.trackUserLeapEvent(a.SharingUserLeapEvent.SHARE_LINK_COPY_SUCCESS,a.SHARE_ACTION_ORIGIN_TYPE.SHARE_LINK_MODAL),s.select(Si).emit({requestedAccessLevel:c[".tag"],createdNewLink:!1,hasCachedLink:!0,linkMetadata:null!=r?r:void 0}),o("SHARE_MODAL_SETTINGS__COPY_LINK__COPY_SUCCESS",{linkMetadata:t}),setTimeout((()=>{n(!1)}),5e3))}),[e,s,o,c,d]),m=M.useCallback((()=>{const t=e.$linkMetadata.get(),n=e.$compatLinkMetadata.get();t&&(d({type:i.SharingNotificationType.FAILURE,message:a.formatFailErrorMessageForUrl(t.url)}),s.select(Ti).emit({requestedAccessLevel:c[".tag"],exception:a.CopyLinkException.FAILED_COPY_TO_CLIPBOARD,hasCachedLink:!0,linkMetadata:null!=n?n:void 0}))}),[e.$linkMetadata,e.$compatLinkMetadata,d,s,c]);return{onClick:M.useCallback((t=>{t.preventDefault();const a=e.$linkMetadata.get();if(!a)return;const n=()=>{const t=e.$compatLinkMetadata.get();s.select(Mi).emit({requestedAccessLevel:c[".tag"],hasCachedLink:!0,linkMetadata:null!=t?t:void 0}),navigator.clipboard.writeText(a.url).then(u,m)};l?_.showOQModalOrContinue({action:"share_link",continueCallback:n,abortCallback:()=>{e.$props.get().onClose()}}):n()}),[e,s,c,u,m,l]),copySuccess:t}})(e),c=n.useIntl(),d=m.is_mobile_or_tablet();if(!t)return null;if(l)return M.createElement("span",{style:{display:"flex",alignItems:"center"}},M.createElement(a.Text,{variant:"label",size:"small",isBold:!0},c.formatMessage({id:"KiS7vb",defaultMessage:"Link copied!"})));const u=M.createElement(a.Text,{size:"small"},M.createElement(a.Link,{href:"#",onClick:s,style:{fontSize:"12px",display:"flex",alignItems:"center",gap:"4px",margin:d?"8px":"0px"},"aria-label":c.formatMessage({id:"D/HxHm",defaultMessage:"Copy link"}),hasNoUnderline:!0,isBold:!0,display:"inline"},M.createElement(a.UIIcon,{src:a.LinkLine,size:"medium","aria-hidden":!0}),d?void 0:c.formatMessage({id:"D/HxHm",defaultMessage:"Copy link"})));return o?M.createElement(a.Tooltip,{title:c.formatMessage({id:"Nwdnda",defaultMessage:"Save your changes to copy a link with these settings."}),placement:"bottom"},M.createElement("span",{style:{fontSize:"12px"}},u)):u};Yi.displayName="CopyLinkAction";const qi=({store:e})=>{const t=g.useStore(e.$linkMetadata),r=(e=>M.useCallback((()=>{e.$isConfirmationModalOpen.set(!0),e.$props.get().onConfirmationModalShownChange(!0)}),[e]))(e),i=n.useIntl(),o=e.$canDeleteLink.get(),s=m.is_mobile_or_tablet();return t&&o?M.createElement(a.Button,{variant:"transparent",style:{margin:s?"8px":"0px",display:"flex",alignItems:"center",gap:"4px"},size:"small",onClick:r,"aria-label":ka(i),"data-uxa-log":"sm24_link_settings_delete_link_button",hasUnderline:!s},s?M.createElement(a.UIIcon,{src:a.DeleteLine,size:"medium","aria-hidden":!0,color:"var(--dig-color__alert__base)"}):ka(i)):null};qi.displayName="DeleteLinkAction";const Wi=({store:e})=>{const t=n.useIntl(),r=g.useStore(e.$accessLevel),i=g.useStore(e.$linkMetadata),o=m.is_mobile_or_tablet();return M.createElement("div",{style:{marginTop:"2em",marginBottom:"24px"}},M.createElement(f.CardNamespace,{hasBorders:!1},i?M.createElement(a.Banner,{className:"_bannerWithRightActions_doy0g_3",withLeftIcon:"editor"===r[".tag"]?M.createElement(a.UIIcon,{src:a.EditLine,"aria-label":"Edit link icon","aria-hidden":!0}):M.createElement(a.UIIcon,{src:a.ShowLine,"aria-label":"View link icon","aria-hidden":!0})},M.createElement(a.Banner.Message,{className:"_bannerMessage_doy0g_23"},M.createElement(a.Box,{display:"flex",alignItems:"center",style:{gap:"8px"}},M.createElement(a.Text,{size:"small",isBold:!0},"editor"===r[".tag"]?(e=>e.formatMessage({id:"s5wejr",defaultMessage:"People with this link can edit"}))(t):(e=>e.formatMessage({id:"OrDD0F",defaultMessage:"People with this link can view"}))(t)),o?void 0:M.createElement(Yi,{store:e}))),M.createElement(a.Banner.Actions,{className:"_bannerActions_doy0g_28"},o?M.createElement(Yi,{store:e}):void 0,M.createElement(qi,{store:e}))):void 0,M.createElement(Bi,{store:e})))};Wi.displayName="LinkSettingsBody";const Gi=e=>{const t=Ni(e),n=r.usePlatform()===r.Platforms.DESKTOP;return M.createElement(M.Fragment,null,M.createElement(a.Modal.Body,null,M.createElement("div",{style:n?{minHeight:"130px"}:void 0},M.createElement(Fi,{store:t}),M.createElement(Hi,{store:t}),M.createElement(ji,{store:t}),M.createElement(Wi,{store:t}),M.createElement($i,{store:t}),M.createElement(Ai,{store:t}))),M.createElement(a.Modal.Footer,null,M.createElement(Oi,{store:t})))};Gi.displayName="LinkSettings";const Vi=r.define({name:"sharing.updateFilePolicy"},(e=>t=>r.handler(e.sharingAlphaUpdateFilePolicy(t)))),zi=r.define({name:"sharing.updateFolderPolicy"},(e=>t=>r.handler(e.sharingAlphaUpdateFolderPolicyV2(t)))),Qi=(e,t)=>t?e.formatMessage({id:"/YIKIw",defaultMessage:"Show who can view to team members and people who can edit."}):e.formatMessage({id:"gwtTsq",defaultMessage:"Show who can view to people who can edit."}),Ki=e=>({getPolicyDict(t,n){switch(t){case dn:return{title:e.formatMessage({id:"sqWIHr",defaultMessage:"Who can be added as a member"}),optionsDict:{anyone:{label:e.formatMessage({id:"fCoK4r",defaultMessage:"Anyone"})},team_and_approved:{label:e.formatMessage({id:"iUy29B",defaultMessage:"Team + approved"})},team:{label:e.formatMessage({id:"7OP28A",defaultMessage:"Only team members"})}},type:vn};case un:return{title:e.formatMessage({id:"FNEmDZ",defaultMessage:"Viewer info"}),description:Qi(e,a.getOwnerTeam(n)),optionsDict:{enabled:{label:e.formatMessage({id:"2QJJN/",defaultMessage:"On"}),value:!0},disabled:{label:e.formatMessage({id:"bxF53X",defaultMessage:"Off"}),value:!1}},type:wn};case yn:return{title:e.formatMessage({id:"eX+ViB",defaultMessage:"Manage who can add people"}),optionsDict:{editors:{label:a.getIsTeamFolderTree(n)||a.getIsTeamMemberFolder(n)?e.formatMessage({id:"FSMn0f",defaultMessage:"Team members who can edit"}):e.formatMessage({id:"Y/OGdX",defaultMessage:"Folder members"}),description:a.getIsTeamFolderTree(n)||a.getIsTeamMemberFolder(n)?e.formatMessage({id:"uIRufc",defaultMessage:"Team members with edit access can add people."}):e.formatMessage({id:"fFxXXV",defaultMessage:"Members with edit access can add people."})},owner:{label:a.getIsTeamFolderTree(n)?e.formatMessage({id:"WFlZYD",defaultMessage:"Only Team Admins"}):e.formatMessage({id:"S2dbUj",defaultMessage:"Only the owner"}),description:a.getIsTeamFolderTree(n)?e.formatMessage({id:"SQ8IGZ",defaultMessage:"Only Team Admins."}):e.formatMessage({id:"FXj04X",defaultMessage:"Only the owner can add people."})}},type:vn};case gn:if(!a.getOwnerTeam(n))throw new Error("Policy only valid for teams");return"team"===a.getLinkAudiencePolicy(n)?((e,t)=>{if(!t)throw new Error("Policy only valid for teams");return{title:e.formatMessage({id:"2/keN+",defaultMessage:"Link restrictions"}),description:e.formatMessage({id:"hQVplF",defaultMessage:"Limits who can access this folder via a link."}),optionsDict:{anyone:{label:e.formatMessage({id:"M2hohn",defaultMessage:"No restrictions"}),description:e.formatMessage({id:"VWGUB4",defaultMessage:"Show all access options for links."})},members:{label:e.formatMessage({id:"fJsIEz",defaultMessage:"Invite-only"}),description:e.formatMessage({id:"w/Er4c",defaultMessage:"Show Only invited members only."})},team:{label:e.formatMessage({id:"BhDP0/",defaultMessage:"Team only"}),description:e.formatMessage({id:"p/lywD",defaultMessage:"Show Only people at {team_name}."},{team_name:i.Emstring.em_snippet(t.name,12)})}},type:vn}})(e,a.getOwnerTeam(n)):{title:e.formatMessage({id:"rAsVLm",defaultMessage:"Link restrictions"}),description:e.formatMessage({id:"dto0Cn",defaultMessage:"Prevent non-members from accessing this folder by link."}),optionsDict:{members:{label:e.formatMessage({id:"Vz90Vu",defaultMessage:"On"}),value:!0},anyone:{label:e.formatMessage({id:"lcDiuF",defaultMessage:"Off"}),value:!1}},type:wn};default:throw new Error("Policy name not found")}}}),Xi=({intl:e,currentPolicy:t,resolvedMemberPolicy:a,onPolicyChange:n,disabled:r,objectMetadata:i})=>{const o=Ki(e).getPolicyDict(gn,i),s=o.optionsDict,l="team"===a?M.createElement(bn,{currentValue:t,optionsDict:s,valuesList:Object.keys(s),onValueSelected:e=>{n(e)},disabled:r,ariaLabel:o.title}):M.createElement(Mn,{currentValue:t,optionsDict:s,onOptionChange:e=>{n(e?"members":"anyone")},disabled:r,ariaLabel:o.title});return M.createElement(kn,{policyName:gn,policyDict:o,selector:l})};Xi.displayName="SettingsLinkAudiencePolicy";const Zi=({intl:e,currentPolicy:t,onPolicyChange:n,objectMetadata:r,disabled:i})=>{let o=Ki(e).getPolicyDict(dn,r);const s=a.getOwnerTeamPolicies(r),l=null==s?void 0:s.shared_folder_member_policy,c=["anyone","team_and_approved","team"];o={...o,optionsDict:Object.fromEntries(Object.entries(o.optionsDict).filter((([e])=>(e=>{if(l){const t=l[".tag"];return c.indexOf(e)>=c.indexOf(t)}return!1})(e)&&(e=>"team_and_approved"!==e||"team_and_approved"===t||"team_and_approved"===(null==l?void 0:l[".tag"]))(e))))};let d=t;l&&l[".tag"]!==t&&c.indexOf(l[".tag"])>c.indexOf(t)&&(d=l[".tag"]);const u=1===Object.keys(o.optionsDict).length,g=i||u,m=M.createElement(bn,{currentValue:d,optionsDict:o.optionsDict,valuesList:Object.keys(o.optionsDict),onValueSelected:e=>{const t=a.create(e);n(t)},disabled:g,ariaLabel:o.title});return M.createElement(kn,{policyName:dn,policyDict:o,selector:m})};Zi.displayName="SettingsMemberPolicy";const Ji=({intl:e,currentPolicy:t,onPolicyChange:n,objectMetadata:r,disabled:i})=>{const o=Ki(e).getPolicyDict(yn,r),s=M.createElement(bn,{currentValue:t,optionsDict:o.optionsDict,valuesList:Object.keys(o.optionsDict),onValueSelected:e=>{const t=a.create(e);n(t)},disabled:i,ariaLabel:o.title});return M.createElement(kn,{policyName:yn,policyDict:o,selector:s})};Ji.displayName="SettingsACLUpdatePolicy";const eo=({intl:e,isPolicyEnabled:t,canDisableViewerInfo:a,canEnableViewerInfo:n,onPolicyChange:r,objectMetadata:i})=>{const o=Ki(e).getPolicyDict(un,i),s=t?"enabled":"disabled",l=t?a:n,c=M.createElement(Mn,{currentValue:s,optionsDict:o.optionsDict,onOptionChange:e=>{r(e)},disabled:!l,ariaLabel:o.title});return M.createElement(kn,{policyName:un,policyDict:o,selector:c})};eo.displayName="SettingsViewerInfo";a.injectInternalStyle("/static/metaserver/static/js/sharing/sharing-sdk/legos/settings-page/internals/object-settings/object-settings.module.out-vflUmp0Ds.css",(e=>"._banner_a1j5d_3{align-items:center;background-color:var(--dig-color__opacity__surface);gap:var(--dig-spacing__micro__medium)}"));const to="_banner_a1j5d_3",ao=({store:e})=>{const{msg:t,bannerType:r}=(e=>{const t=n.useIntl(),r=g.useStore(e.$canChangeOptions),i=g.useStore(e.$viewerInfoPolicyEnabled),o=g.useStore(e.$objectMetadata);return M.useMemo((()=>{if(r)return{msg:Ia(t),bannerType:"default"};let e;if(i){const t=a.getPermissionInfo(o,a.DISABLE_VIEWER_INFO_TAG);e=t?t.reason:""}else{const t=a.getPermissionInfo(o,a.ENABLE_VIEWER_INFO_TAG);e=t?t.reason:""}switch(e){case"restricted_by_parent_folder":return{msg:Pa(t),bannerType:"error"};case"restricted_by_team":return{msg:La(t),bannerType:"error"};default:return{msg:xa(t),bannerType:"error"}}}),[r,i,o,t])})(e);return M.createElement("div",{style:{margin:"24px 0px",overflow:"hidden"}},M.createElement(a.Banner,{className:to,"data-testid":"file-settings-banner",withLeftIcon:"error"===r?M.createElement(a.UIIcon,{src:a.FailLine}):M.createElement(a.UIIcon,{src:a.InfoLine})},M.createElement(a.Banner.Message,null,M.createElement(a.Text,{size:"small",isBold:!0},t))))};ao.displayName="FileSettingsBanner";const no=({store:e})=>{const t=(e=>{const t=n.useIntl(),o=g.useStore(e.$canChangeOptions),s=g.useStore(e.$objectMetadata),l=g.useStore(e.$accountMetadata),c=r.useOpenUrl(),{isNonUserRelativeContext:d}=a.useSharingApiContext();return M.useMemo((()=>{const e=l.team_id===a.getOwnerTeamId(s);return d&&a.getIsInsideTeamFolderTree(s)?{msg:Xa(t,a.getName(s))}:a.getIsTeamSharedFolder(s)&&e?i.getIsTeamAdmin(l)?{msg:Za(t,a.getName(s)),actionMsg:Ja(t,c)}:{msg:en(t,a.getName(s)),actionMsg:tn(t,c)}:a.getIsInsideTeamFolderTree(s)?i.getIsTeamAdmin(l)?{msg:Xa(t,a.getName(s))}:e?{msg:en(t,a.getName(s)),actionMsg:tn(t,c)}:{msg:rn(t,a.getName(s))}:o?d&&!a.getIsInsideTeamFolderTree(s)?{msg:an(t)}:void 0:{msg:rn(t,a.getName(s))}}),[l,s,d,o,t,c])})(e),o=(e=>{const t=n.useIntl(),r=g.useStore(e.$canChangeOptions),o=g.useStore(e.$objectMetadata),s=g.useStore(e.$accountMetadata),l=M.useMemo((()=>i.convertAccountMetadataToUser(s)),[s]);return M.useMemo((()=>{if(r&&!l.is_team_admin)return a.getIsInsideTeamFolderTree(o)?{msg:on(t),bannerType:"error"}:a.getIsOwner(o)?{msg:nn(t,a.getName(o))}:{msg:rn(t,a.getName(o))}}),[r,l.is_team_admin,o,t])})(e);return M.createElement("div",{style:{margin:"24px 0px",borderRadius:"12px",overflow:"hidden"}},t&&M.createElement(a.Banner,{className:to,"data-testid":"folder-settings-banner",withLeftIcon:M.createElement(a.UIIcon,{src:a.InfoLine})},M.createElement(a.Banner.Message,null,M.createElement(a.Text,{size:"small",isBold:!0},t.msg)),M.createElement(a.Banner.Actions,null,t.actionMsg)),o&&M.createElement(a.Banner,{className:to,"data-testid":"folder-settings-banner",withLeftIcon:"error"===(null==o?void 0:o.bannerType)?M.createElement(a.UIIcon,{src:a.FailLine}):M.createElement(a.UIIcon,{src:a.InfoLine})},M.createElement(a.Banner.Message,null,M.createElement(a.Text,{size:"small",isBold:!0},o.msg))))};no.displayName="FolderSettingsBanner";const ro=e=>M.useCallback((t=>{e.$viewerInfoPolicyEnabledUpdated.set(t)}),[e]),io=({store:e})=>{const t=n.useIntl(),r=g.useStore(e.$objectMetadata),i=g.useStore(e.$viewerInfoPolicyEnabledUpdated),o=g.useStore(e.$memberPolicyUpdated),s=g.useStore(e.$aclUpdatePolicyUpdated),l=g.useStore(e.$linkAudiencePolicyUpdated),c=g.useStore(e.$resolvedMemberPolicy),d=g.useStore(e.$canDisableViewerInfo),u=g.useStore(e.$canEnableViewerInfo),m=g.useStore(e.$canChangeOptions),f="members"===g.useStore(e.$blanketLinkRestrictionsPolicy),p=g.useStore(e.$isFreemiumTeamMember),h=ro(e),y=(e=>M.useCallback((t=>{e.$memberPolicyUpdated.set(t[".tag"])}),[e]))(e),v=(e=>M.useCallback((t=>{e.$aclUpdatePolicyUpdated.set(t[".tag"])}),[e]))(e),w=(e=>M.useCallback((t=>{e.$linkAudiencePolicyUpdated.set(t)}),[e]))(e);return M.createElement("div",{style:{marginTop:"24px",marginBottom:"24px"}},a.getOwnerTeam(r)&&M.createElement(Zi,{intl:t,currentPolicy:o,objectMetadata:r,onPolicyChange:y,disabled:!m}),M.createElement(Ji,{intl:t,currentPolicy:s,objectMetadata:r,onPolicyChange:v,disabled:!m}),a.getOwnerTeam(r)&&M.createElement(Xi,{intl:t,currentPolicy:l,resolvedMemberPolicy:c,onPolicyChange:w,disabled:!m||f||p,objectMetadata:r}),M.createElement(eo,{intl:t,isPolicyEnabled:i,canDisableViewerInfo:d,canEnableViewerInfo:u,onPolicyChange:h,objectMetadata:r}))};io.displayName="FolderSettingsPolicies";const oo=({store:e})=>{const t=n.useIntl(),a=g.useStore(e.$objectMetadata),r=g.useStore(e.$viewerInfoPolicyEnabledUpdated),i=g.useStore(e.$canDisableViewerInfo),o=g.useStore(e.$canEnableViewerInfo),s=ro(e);return M.createElement("div",{style:{marginTop:"24px",marginBottom:"24px"}},M.createElement(eo,{intl:t,isPolicyEnabled:r,canDisableViewerInfo:i,canEnableViewerInfo:o,objectMetadata:a,onPolicyChange:s}))};oo.displayName="FileSettingsPolicies";const so=e=>M.useCallback((()=>e.$props.get().onRefreshModal()),[e]),lo=({store:e})=>{const t=n.useIntl(),o=(e=>M.useCallback((()=>{e.$props.get().onCancelled()}),[e]))(e),s=g.useStore(e.$isSubmitting),l=g.useStore(e.$hasAnyPolicyChanged),c=g.useStore(e.$shouldShowUnshare),d=g.useStore(e.$objectMetadata),u=g.useStore(e.$isUnshareDisabled),m=a.getIsFolder(d),f=(e=>M.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!0)}),[e]))(e),p=(e=>{const t=n.useIntl(),o=r.useEndpoint(Vi),s=r.useEndpoint(zi),l=r.useEndpoint(i.shareFolder),c=r.useEndpoint(i.checkShareInternalJobStatus),d=r.useLogger(),u=so(e),g=i.useShowSharingNotification();return M.useCallback((async()=>{var n;if(e.$hasAnyPolicyChanged.get()){const r=e.$objectMetadata.get();let m=e.$objectIdentifier.get();if("file_folder"===m[".tag"]){e.$isSubmitting.set(!0);const a={path:m.path};g({type:i.SharingNotificationType.IN_PROGRESS,message:Ta(t)});const r=await l(a);let o=m;if("SUCCESS"===r.status){if("complete"===r.output[".tag"])o={".tag":"shared_folder",sharedFolderId:r.output.shared_folder_id},await e.$props.get().onObjectIdentifierChanged(o);else if("async_job_id"===r.output[".tag"]){const t=r.output.async_job_id,a=await i.poll((async()=>{const e={async_job_id:t},a=await c(e);return"SUCCESS"===a.status&&"in_progress"===a.output[".tag"]?{status:"RETRY"}:{status:"COMPLETE",output:a}}),{interval:1e3,timeout:3e4});"COMPLETE"===a.status&&"SUCCESS"===(null===(n=a.output)||void 0===n?void 0:n.status)&&"complete"===a.output.output[".tag"]&&(o={".tag":"shared_folder",sharedFolderId:a.output.output.shared_folder_id},await e.$props.get().onObjectIdentifierChanged(o))}}else"ERROR"===r.status&&("bad_path"===r.error[".tag"]&&"already_shared"===r.error.bad_path[".tag"]?(o={".tag":"shared_folder",sharedFolderId:r.error.bad_path.shared_folder_id},await e.$props.get().onObjectIdentifierChanged(o)):"no_permission"===r.error[".tag"]&&(e.$isSubmitting.set(!1),g({type:i.SharingNotificationType.FAILURE,message:Da(t)})));await i.invalidateSharingObjectMetadata(m),await i.invalidateNewApiObjectMetadata(m),await i.invalidateSharingObjectMetadata(o),await i.invalidateNewApiObjectMetadata(o),m=o}if(a.getIsFile(r)){e.$isSubmitting.set(!0),d("SHARE_MODAL_SETTINGS__FILE_POLICY_UPDATE_API_START",null);const n=await o({file:a.isNewApiMetadata(r)?"":r.id,actions:[a.CHANGE_OPTIONS_TAG,a.CREATE_VIEW_LINK_TAG,a.CREATE_EDIT_LINK_TAG,a.DISABLE_VIEWER_INFO_TAG,a.ENABLE_VIEWER_INFO_TAG,a.INVITE_VIEWER_TAG,a.INVITE_EDITOR_TAG,a.INVITE_VIEWER_NO_COMMENT_TAG,a.RELINQUISH_MEMBERSHIP_TAG,a.REMOVE_DOWNLOAD_POLICY_TAG,a.SET_DOWNLOAD_POLICY_TAG,a.UNSHARE_TAG,a.SHARE_MESSAGE_AS_COMMENT_TAG],viewer_info_policy:e.$viewerInfoPolicyEnabledUpdated.get()?{".tag":"enabled"}:{".tag":"disabled"}});await Promise.resolve(e.$props.get().onRefreshObjectMetadata()),"SUCCESS"===n.status?(d("SHARE_MODAL_SETTINGS__FILE_POLICY_UPDATE_API_SUCCESS",null),g({type:i.SharingNotificationType.COMPLETED,message:Sa(t)}),e.$isSubmitting.set(!1),e.$props.get().onSaved()):("ERROR"===n.status?d("SHARE_MODAL_SETTINGS__FILE_POLICY_UPDATE_API_ERROR",{error:n.error}):d("SHARE_MODAL_SETTINGS__FILE_POLICY_UPDATE_API_FATAL",{error:n.error}),g({type:i.SharingNotificationType.FAILURE,message:Ma(t)}),e.$isSubmitting.set(!1))}else if("shared_folder"===m[".tag"]){e.$isSubmitting.set(!0),d("SHARE_MODAL_SETTINGS__FOLDER_POLICY_UPDATE_API_START",null);const n=e.$hasMemberPolicyChanged.get(),o=e.$hasViewerInfoPolicyChanged.get(),l=e.$hasLinkAudiencePolicyChanged.get(),c=e.$hasAclUpdatePolicyChanged.get(),f=await s({shared_folder_id:m.sharedFolderId,actions:[a.CHANGE_OPTIONS_TAG,a.DISABLE_VIEWER_INFO_TAG,a.ENABLE_VIEWER_INFO_TAG,a.INVITE_VIEWER_TAG,a.INVITE_EDITOR_TAG,a.INVITE_VIEWER_NO_COMMENT_TAG,a.RELINQUISH_MEMBERSHIP_TAG,a.REMOVE_DOWNLOAD_POLICY_TAG,a.SET_DOWNLOAD_POLICY_TAG,a.UNSHARE_TAG],viewer_info_policy:o?e.$viewerInfoPolicyEnabledUpdated.get()?{".tag":"enabled"}:{".tag":"disabled"}:void 0,member_policy:n&&a.getOwnerTeam(r)?{".tag":e.$memberPolicyUpdated.get()}:void 0,shared_link_policy:l?{".tag":e.$linkAudiencePolicyUpdated.get()}:void 0,acl_update_policy:c?{".tag":e.$aclUpdatePolicyUpdated.get()}:void 0});await i.invalidateSharingObjectMetadata(m),await i.invalidateNewApiObjectMetadata(m),"SUCCESS"===f.status?(d("SHARE_MODAL_SETTINGS__FOLDER_POLICY_UPDATE_API_SUCCESS",null),g({type:i.SharingNotificationType.COMPLETED,message:Ca(t)}),e.$isSubmitting.set(!1),e.$props.get().onSaved(),await Promise.resolve(u())):("ERROR"===f.status?d("SHARE_MODAL_SETTINGS__FOLDER_POLICY_UPDATE_API_ERROR",{error:f.error}):d("SHARE_MODAL_SETTINGS__FOLDER_POLICY_UPDATE_API_FATAL",{error:f.error}),g({type:i.SharingNotificationType.FAILURE,message:Ma(t)}),e.$isSubmitting.set(!1))}}}),[e,o,s,d,t,u,l,c,g])})(e);return M.createElement(M.Fragment,null,c?M.createElement(M.Fragment,null,u?M.createElement(a.Tooltip,{title:m?cn(t):ln(t),placement:"right",maxWidth:125,"data-testid":"unshare-tooltip"},M.createElement(a.Box,{style:{marginLeft:0,marginRight:"auto"}},M.createElement(a.Button,{variant:"transparent",onClick:f,disabled:u,"data-uxa-log":"sm24_object_settings_unshare_button"},Ka(t,d)))):M.createElement(a.Button,{variant:"transparent",onClick:f,disabled:u,"data-uxa-log":"sm24_object_settings_unshare_button"},Ka(t,d)),M.createElement("div",{style:{flex:1}})):null,M.createElement(a.Button,{variant:"opacity",onClick:o,"data-uxa-log":"sm24_object_settings_cancel_button"},wa(t)),M.createElement(a.Button,{variant:"primary",disabled:!l||s,onClick:p,"data-uxa-log":"sm24_object_settings_save_button"},s?ba(t):_a(t)))};lo.displayName="ObjectSettingsActions";const co=({store:e})=>{const t=g.useStore(e.$objectMetadata),n=g.useStore(e.$objectIdentifier),r=g.useStore(e.$isUnshareConfirmationModalOpen),i=(e=>M.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!1)}),[e]))(e),o=(e=>M.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!1)}),[e]))(e),s=(e=>M.useCallback((()=>{e.$props.get().onUnshareCompleted()}),[e]))(e),l=(e=>M.useCallback((()=>{e.$props.get().onClose()}),[e]))(e),c=(e=>M.useCallback((async t=>{await e.$props.get().onObjectIdentifierChanged(t)}),[e]))(e),d=(e=>M.useCallback((t=>{e.$props.get().onConfirmationModalShownChange(t)}),[e]))(e);return M.createElement(Ii,{objectMetadata:t,objectIdentifier:n,contentName:a.getName(t),onConfirm:o,onCancel:i,open:r,onUnshareCompleted:s,onClose:l,onObjectIdentifierChanged:c,onConfirmationModalShownChange:d})};co.displayName="UnshareConfirmationModalWrapper";const uo=e=>{const t=(e=>{const{isNonUserRelativeContext:t}=a.useSharingApiContext();return g.useInitStore({props:e,isNonUserRelativeContext:t},(e=>{const t=g.proxy((()=>e.get().props)),n=g.proxy((()=>e.get().isNonUserRelativeContext)),r=g.proxy((()=>t.get().objectIdentifier)),i=g.proxy((()=>t.get().objectMetadata)),o=g.proxy((()=>t.get().accountMetadata)),s=g.proxy((()=>t.get().linksMetadata)),l=g.proxy((()=>t.get().members)),c=g.proxy((()=>a.getIsFolder(i.get()))),d=g.store(!1),u=g.proxy((()=>a.getCanChangeOptions(i.get()))),m=g.proxy((()=>a.getCanEnableViewerInfo(i.get()))),f=g.proxy((()=>a.getCanDisableViewerInfo(i.get()))),p=g.proxy((()=>a.getLinkAudiencePolicy(i.get()))),h=g.proxy((()=>a.getViewerInfoPolicyEnabled(i.get()))),y=g.store(h.get()),v=g.proxy((()=>a.getOwnerTeamPolicies(i.get()))),w=g.proxy((()=>{var e;return null===(e=v.get())||void 0===e?void 0:e.shared_folder_link_restriction_policy[".tag"]})),b=g.proxy((()=>"members"===w.get()?"members":a.getLinkAudiencePolicy(i.get()))),_=g.store(b.get()),k=g.proxy((()=>a.getMemberPolicy(i.get()))),E=g.store(k.get()),M=g.proxy((()=>a.getAclUpdatePolicy(i.get()))),S=g.store(M.get()),T=g.proxy((()=>k.get()!==E.get())),D=g.proxy((()=>h.get()!==y.get())),C=g.proxy((()=>b.get()!==_.get())),P=g.proxy((()=>M.get()!==S.get())),L=g.proxy((()=>D.get()||T.get()||P.get()||C.get())),x=g.proxy((()=>{var e;const t=n.get(),r=i.get(),o=a.getPermissionInfo(r,a.UNSHARE_TAG),s=a.getIsFolder(r),l=a.getIsSharedFolder(r),c=a.getIsCollection(r),d=a.getCanUnshareObject(r),u=s&&!d&&"folder_is_inside_shared_folder"===(null===(e=null==o?void 0:o.reason)||void 0===e?void 0:e[".tag"]);return d&&(!s||!t&&l)&&!c||u})),I=g.proxy((()=>{var e;const t=s.get(),n=l.get(),r=i.get(),c=a.getIsFolder(r),d=0!==t.links.length;if(!c&&!d){const e=n.invitees.length+n.groups.length+n.users.length;if(!e)return!0;if(1===e&&1===n.users.length){const e=n.users[0],t=o.get();return e.user.account_id===t.account_id}return!1}if(c){const t=a.getPermissionInfo(r,a.UNSHARE_TAG);return"folder_is_inside_shared_folder"===(null===(e=null==t?void 0:t.reason)||void 0===e?void 0:e[".tag"])}return!1})),N=g.store(!1),O=g.proxy((()=>{var e;return null!==(e=o.get().is_freemium_team_member)&&void 0!==e&&e}));return{$objectIdentifier:r,$objectMetadata:i,$accountMetadata:o,$linksMetadata:s,$members:l,$canChangeOptions:u,$isSubmitting:d,$resolvedMemberPolicy:p,$viewerInfoPolicyEnabled:h,$isFolder:c,$viewerInfoPolicyEnabledUpdated:y,$memberPolicy:k,$memberPolicyUpdated:E,$aclUpdatePolicy:M,$aclUpdatePolicyUpdated:S,$linkAudiencePolicy:b,$linkAudiencePolicyUpdated:_,$canEnableViewerInfo:m,$canDisableViewerInfo:f,$hasAnyPolicyChanged:L,$hasViewerInfoPolicyChanged:D,$hasMemberPolicyChanged:T,$hasLinkAudiencePolicyChanged:C,$hasAclUpdatePolicyChanged:P,$isUnshareConfirmationModalOpen:N,$shouldShowUnshare:x,$blanketLinkRestrictionsPolicy:w,$isUnshareDisabled:I,$isFreemiumTeamMember:O,$props:t}}))})(e),n=t.$isFolder.get(),i=r.usePlatform()===r.Platforms.DESKTOP;return M.createElement(M.Fragment,null,M.createElement(a.Modal.Body,null,M.createElement("div",{style:i?{minHeight:"130px"}:void 0},n?M.createElement(M.Fragment,null,M.createElement(no,{store:t}),M.createElement(io,{store:t})):M.createElement(M.Fragment,null,M.createElement(ao,{store:t}),M.createElement(oo,{store:t})))),M.createElement(a.Modal.Footer,null,M.createElement(lo,{store:t})),M.createElement(co,{store:t}))};uo.displayName="ObjectSettings";const go={".tag":"editor"},mo={".tag":"viewer"},fo="object_settings",po="edit_link_settings",ho="view_link_settings",yo=e=>{const t=n.useIntl(),a=r.useLogger(),o=r.useEndpoint(ga),s=i.useShowSharingNotification();return M.useCallback((async()=>{if(!e.$hasUnsavedLinkChanges.get())return!0;let n=null;const r=e.$viewLinkCompatMetadata.get(),l=e.$viewLinkCompatPolicy.get(),c=e.$viewLinkCompatPolicyDraft.get();null!==r&&null!==l&&null!==c&&(n=fa(t,r,l,c));let d=null;const u=e.$editLinkCompatMetadata.get(),g=e.$editLinkCompatPolicy.get(),m=e.$editLinkCompatPolicyDraft.get();if(null!==u&&null!==g&&null!==m&&(d=fa(t,u,g,m)),n&&"error"in n)return s({type:i.SharingNotificationType.FAILURE,message:n.error}),!1;if(d&&"error"in d)return s({type:i.SharingNotificationType.FAILURE,message:d.error}),!1;const f=[...null===n?[]:[n],...null===d?[]:[d]];if(0===f.length)return e.$editLinkCompatPolicyDraft.set(null),e.$viewLinkCompatPolicyDraft.set(null),!0;e.$isUpdatingLinkSettings.set(!0),n&&l&&c&&l.audience&&c.audience&&l.audience!==c.audience&&a("SHARE_MODAL_SETTINGS__LINK_AUDIENCE_CHANGE",{link_access_level:mo,previous:ma(l.audience),next:ma(c.audience)}),d&&g&&m&&g.audience&&m.audience&&g.audience!==m.audience&&a("SHARE_MODAL_SETTINGS__LINK_AUDIENCE_CHANGE",{link_access_level:go,previous:ma(g.audience),next:ma(m.audience)});const p=await Promise.all([...f.map((e=>o((e=>{const t={url:e.url,remove_expiration:e.remove_expiration,settings:{}};return e.settings.access&&(t.settings.access={".tag":e.settings.access}),void 0!==e.settings.allow_download&&(t.settings.allow_download=e.settings.allow_download),e.settings.audience&&(t.settings.audience={".tag":e.settings.audience}),e.settings.expires&&(t.settings.expires=e.settings.expires),e.settings.link_password&&(t.settings.link_password=e.settings.link_password),void 0!==e.settings.require_password&&(t.settings.require_password=e.settings.require_password),t})(e))))]);return await e.$props.get().onRefreshLinksMetadata(),e.$isUpdatingLinkSettings.set(!1),p.every((e=>"SUCCESS"===e.status))?(e.$editLinkCompatPolicyDraft.set(null),e.$viewLinkCompatPolicyDraft.set(null),s({type:i.SharingNotificationType.COMPLETED,message:Wa(t)},{message:Ga(t)}),!0):(s({type:i.SharingNotificationType.FAILURE,message:Fa(t)}),!1)}),[e,t,o,a,s])},vo=e=>M.useCallback((async()=>{await e.$props.get().onRefreshObjectMetadata()}),[e]),wo=e=>M.useCallback((async()=>{await e.$props.get().onRefreshModal()}),[e]),bo=e=>M.useCallback((async t=>{await e.$props.get().onObjectIdentifierChanged(t)}),[e]),_o=e=>M.useCallback((async()=>{e.$editLinkCompatPolicyDraft.set(null),e.$viewLinkCompatPolicyDraft.set(null),await e.$props.get().onRefreshLinksMetadata()}),[e]),ko=e=>{const t=yo(e);return M.useCallback((async()=>{await t()&&e.$props.get().onManageLinkAccess()}),[e,t])},Eo=e=>{const t=yo(e);return M.useCallback((async()=>{await t()}),[t])},Mo=e=>M.useCallback((()=>{e.$props.get().onCancel(!0)}),[e]),So=e=>M.useCallback((t=>{e.$props.get().onConfirmationModalShownChange(t)}),[e]),To=e=>{const t=r.useOpenUrl();return M.useCallback((e=>{t(e)}),[t])},Do=e=>M.useCallback((()=>{e.$props.get().onClose()}),[e]),Co=e=>M.useCallback((()=>{e.$props.get().onUnshareCompleted()}),[e]),Po=(e,t)=>M.useCallback((a=>{"editor"===t[".tag"]?e.$editLinkCompatPolicyDraft.set(a):"viewer"===t[".tag"]&&e.$viewLinkCompatPolicyDraft.set(a)}),[e,t]),Lo=({store:e})=>{const t=g.useStore(e.$objectIdentifier),a=g.useStore(e.$objectMetadata),n=g.useStore(e.$accountMetadata),r=g.useStore(e.$linksMetadata),i=g.useStore(e.$members),o=Co(e),s=(e=>M.useCallback((()=>{e.$props.get().onCancel(!1)}),[e]))(e),l=(e=>M.useCallback((()=>{e.$props.get().onComplete(!1)}),[e]))(e),c=vo(e),d=bo(e),u=(e=>M.useCallback((()=>{e.$props.get().onClose()}),[e]))(e),m=wo(e),f=So(e);return M.createElement(uo,{objectIdentifier:t,objectMetadata:a,accountMetadata:n,linksMetadata:r,members:i,onClose:u,onSaved:l,onCancelled:s,onRefreshObjectMetadata:c,onObjectIdentifierChanged:d,onRefreshModal:m,onConfirmationModalShownChange:f,onUnshareCompleted:o})};Lo.displayName="ObjectSettingsWrapper";const xo=({store:e})=>{const t=go,a=g.useStore(e.$accountMetadata),n=g.useStore(e.$editLinkCompatMetadata),i=g.useStore(e.$editLinkCompatPolicy),o=g.useStore(e.$editLinkCompatPolicyDraft),s=g.useStore(e.$editLinkMetadata),l=g.useStore(e.$objectIdentifier),c=g.useStore(e.$objectMetadata),d=g.useStore(e.$sharingPrefs),u=g.useStore(e.$hasUnsavedLinkChanges),m=g.useStore(e.$isUpdatingLinkSettings),f=Eo(e),p=Mo(e),h=To(),y=_o(e),v=Po(e,go),w=ko(e),b=vo(e),_=bo(e),k=So(e),E=wo(e),S=Do(e),T=Co(e);return M.createElement(r.MetadataProvider,{sharingAccessLevel:go},M.createElement(Gi,{accountMetadata:a,accessLevel:t,compatLinkMetadata:n,compatLinkPolicy:o||i,originalCompatLinkPolicy:i,linkMetadata:s,objectIdentifier:l,objectMetadata:c,sharingPrefs:d,isSavable:u,isSaving:m,onSave:f,onCancel:p,onOpenManageAccess:w,onLinkClicked:h,onRefreshLinksMetadata:y,onCompatLinkPolicyChange:v,onObjectIdentifierChanged:_,onRefreshObjectMetadata:b,onRefreshModal:E,onClose:S,onConfirmationModalShownChange:k,onUnshareCompleted:T}))};xo.displayName="EditLinkSettingsWrapper";const Io=({store:e})=>{const t=mo,a=g.useStore(e.$accountMetadata),n=g.useStore(e.$viewLinkCompatMetadata),i=g.useStore(e.$viewLinkCompatPolicy),o=g.useStore(e.$viewLinkCompatPolicyDraft),s=g.useStore(e.$viewLinkMetadata),l=g.useStore(e.$objectMetadata),c=g.useStore(e.$objectIdentifier),d=g.useStore(e.$sharingPrefs),u=g.useStore(e.$hasUnsavedLinkChanges),m=g.useStore(e.$isUpdatingLinkSettings),f=Eo(e),p=Mo(e),h=To(),y=_o(e),v=Po(e,mo),w=ko(e),b=vo(e),_=bo(e),k=wo(e),E=Do(e),S=So(e),T=Co(e);return M.createElement(r.MetadataProvider,{sharingAccessLevel:mo},M.createElement(Gi,{accountMetadata:a,accessLevel:t,compatLinkMetadata:n,compatLinkPolicy:o||i,originalCompatLinkPolicy:i,linkMetadata:s,objectIdentifier:c,objectMetadata:l,sharingPrefs:d,isSavable:u,isSaving:m,onSave:f,onCancel:p,onLinkClicked:h,onOpenManageAccess:w,onRefreshLinksMetadata:y,onCompatLinkPolicyChange:v,onObjectIdentifierChanged:_,onRefreshObjectMetadata:b,onRefreshModal:k,onClose:E,onConfirmationModalShownChange:S,onUnshareCompleted:T}))};Io.displayName="ViewLinkSettingsWrapper";const No=({store:e})=>{const t=n.useIntl(),i=g.useStore(e.$currentTab),o=g.useStore(e.$objectMetadata),s=g.useStore(e.$linksMetadata),l=g.useStore(e.$shouldShowViewLinkTab),c=g.useStore(e.$shouldShowEditLinkTab),d=g.useStore(e.$shouldShowObjectSettingsTab),m=(e=>{const t=r.useLogger();return M.useCallback((n=>{e.$currentTab.set(n),t("SHARE_MODAL_SETTINGS__TAB_CHANGE",{selected_tab:va(n,a.getIsFile(e.$objectMetadata.get()))})}),[e,t])})(e),f=a.getIsFile(o),p=r.useLogger(),h=Ci();return M.useEffect((()=>{const t=va(i,a.getIsFile(e.$objectMetadata.get()));p("SHARE_MODAL_SETTINGS__PAGE_VIEW",{selected_tab:t}),h.select(Di).emit(null)}),[]),M.createElement(r.MetadataProvider,{sharingLinksMetadata:s},M.createElement(u.Tabs,{selectedTab:i,onSelection:m},M.createElement(u.Tabs.Group,{variant:"justified"},d?M.createElement(u.Tabs.Tab,{id:fo,key:fo},f?t.formatMessage({id:"TdlC4Q",defaultMessage:"File settings"}):t.formatMessage({id:"jR9e/q",defaultMessage:"Folder settings"})):null,c?M.createElement(u.Tabs.Tab,{id:po,key:po},t.formatMessage({id:"DIbS2E",defaultMessage:"Link for editing"})):null,l?M.createElement(u.Tabs.Tab,{id:ho,key:ho},t.formatMessage({id:"rvYosE",defaultMessage:"Link for viewing"})):null),M.createElement(M.Fragment,null,d?M.createElement(u.Tabs.Panel,{tabId:fo,key:fo},M.createElement(Lo,{store:e})):null,c?M.createElement(u.Tabs.Panel,{tabId:po,key:po},M.createElement(xo,{store:e})):null,l?M.createElement(u.Tabs.Panel,{tabId:ho,key:ho},M.createElement(Io,{store:e})):null)))};No.displayName="ShareModalSettingsInner";const Oo=e=>{const t=(e=>{const t=n.useIntl(),{isNonUserRelativeContext:r}=a.useSharingApiContext();return g.useInitStore(e,(e=>{const n=g.proxy((()=>e.get().accountMetadata)),i=g.proxy((()=>e.get().linksMetadata)),o=g.proxy((()=>e.get().objectMetadata)),s=g.proxy((()=>e.get().objectIdentifier)),l=g.proxy((()=>e.get().sharingPrefs)),c=g.proxy((()=>e.get().members)),d=g.atom(a.vendSenderTrackey$1()),u=g.proxy((()=>{const t=a.getByAccessLevel(e.get().linksMetadata,{".tag":"editor"});return t&&(t.url=a.appendTrackeyToSharedLinkAndSortParams$1(t.url,d.get())),t})),m=g.proxy((()=>ha(o.get(),u.get()))),f=g.proxy((()=>ya(t,m.get()))),p=g.store(null),h=g.proxy((()=>{const t=a.getByAccessLevel(e.get().linksMetadata,{".tag":"viewer"});return t&&(t.url=a.appendTrackeyToSharedLinkAndSortParams$1(t.url,d.get())),t})),y=g.proxy((()=>ha(o.get(),h.get()))),v=g.proxy((()=>ya(t,y.get()))),w=g.store(null),b=g.proxy((()=>null!==w.get()||null!==p.get())),_=e=>{let t;if(e===go)t=u;else{if(e!==mo)return!1;t=h}const r=null!==t.get(),i=a.getCanCreateLink(o.get(),e,n.get().is_tmr_member);return a.getIsConfidentialFolder(o.get())||r||i},k=a.getIsLinkOnlyMode(o.get()),E=g.proxy((()=>!k&&_(go)&&!r)),M=g.proxy((()=>_(mo)&&!r)),S=g.proxy((()=>!(a.getIsCollection(o.get())||a.getIsLinkOnlyMode(o.get())))),T=g.store(!1),D=g.store(fo);return e.get().initialTab!==fo||S.get()?e.get().initialTab===po&&E.get()?D.set(po):e.get().initialTab===ho&&M.get()&&D.set(ho):D.set(E.get()?po:ho),{$accountMetadata:n,$linksMetadata:i,$objectMetadata:o,$objectIdentifier:s,$sharingPrefs:l,$members:c,$editLinkMetadata:u,$editLinkCompatMetadata:m,$editLinkCompatPolicy:f,$editLinkCompatPolicyDraft:p,$viewLinkMetadata:h,$viewLinkCompatMetadata:y,$viewLinkCompatPolicy:v,$viewLinkCompatPolicyDraft:w,$hasUnsavedLinkChanges:b,$shouldShowEditLinkTab:E,$shouldShowViewLinkTab:M,$shouldShowObjectSettingsTab:S,$isUpdatingLinkSettings:T,$currentTab:D,$props:e}}))})(e);return M.createElement(No,{store:t})};Oo.displayName="ShareModalSettings";const Ao=()=>M.createElement("div",{style:{minHeight:"200px",padding:"64px 0px 64px 0px"}},M.createElement(a.Interstitial,{in:!0,isIndeterminate:!0,onComplete:()=>{}}));Ao.displayName="LoadingState";const Uo=({error:e,onFallback:t,onRetry:r})=>{const i=n.useIntl();return M.createElement("div",{style:{padding:"24px",textAlign:"center"}},M.createElement("div",{style:{marginBottom:"16px"}},i.formatMessage({id:"mR7o5t",defaultMessage:"We couldnt load the sharing settings."})),M.createElement("div",{style:{display:"flex",gap:"8px",justifyContent:"center"}},r&&M.createElement(a.Button,{onClick:r,variant:"primary"},i.formatMessage({id:"3T2tjL",defaultMessage:"Try again"})),t&&M.createElement(a.Button,{onClick:t,variant:"opacity"},i.formatMessage({id:"tcMLuN",defaultMessage:"Use classic version"}))),e&&M.createElement("details",{style:{marginTop:"16px",fontSize:"12px",color:"#666"}},M.createElement("summary",null,"Technical Details"),M.createElement("pre",null,e.message)))};Uo.displayName="ErrorState";const Ro=e=>{const t=i.useLegacySharingObjectMetadata(e.objectIdentifier),r=a.useObjectMembers(e.objectIdentifier),s=d.useListSharedLinks(e.objectIdentifier,!0),l=o.useSharingPrefs(),c=i.useSharingAccountInfo(),u=n.useIntl(),g=!t.isLoading&&!t.isError,m=g?t.output:null,f=e.objectIdentifier,p=e.onObjectIdentifierChanged;M.useEffect((()=>{var e;if(m&&!a.isNewApiMetadata(m)&&"file_folder"===m[".tag"]&&m.folder_id!==f.fileId){const t={".tag":"file_folder",name:m.name,path:null!==(e=m.path_lower)&&void 0!==e?e:"",fileId:m.folder_id};p(t)}}),[g,f,m,p]);const h=M.useCallback((async()=>{await i.invalidateSharingObjectMetadata(e.objectIdentifier),await i.invalidateNewApiObjectMetadata(e.objectIdentifier)}),[e.objectIdentifier]),y=M.useCallback((()=>d.invalidateListSharedLinks(e.objectIdentifier)),[e.objectIdentifier]),v=M.useCallback((async()=>{await Promise.all([i.invalidateSharingObjectMetadata(e.objectIdentifier),i.invalidateNewApiObjectMetadata(e.objectIdentifier),d.invalidateListSharedLinks(e.objectIdentifier),a.invalidateObjectMembers(e.objectIdentifier),o.invalidateSharingPrefs(),i.invalidateSharingAccountInfo()])}),[e.objectIdentifier]);if(t.isLoading||!r.isFirstPageLoaded||!r.isFirstPageOnly&&r.isLoading||s.isLoading||l.isLoading||c.isLoading)return M.createElement(Ao,null);let w=null;if(t.isError?w=u.formatMessage({id:"Tym5Ts",defaultMessage:"We had trouble loading the sharing object metadata."}):r.hadContinuationError?w=u.formatMessage({id:"rTptgd",defaultMessage:"We couldnt fetch the members of the sharing object."}):!s.isLoading&&s.isError?w=u.formatMessage({id:"AQ3NNq",defaultMessage:"We couldnt fetch the shared links."}):!l.isLoading&&l.isError&&!("output"in l)||!l.output?w=u.formatMessage({id:"grfK5U",defaultMessage:"We couldnt fetch the sharing preferences."}):!c.isLoading&&c.isError&&(w=u.formatMessage({id:"I6Q3Cy",defaultMessage:"We had trouble loading the sharing account information."})),w)return M.createElement(Uo,{onFallback:e.onFallback,onRetry:v,error:{message:w}});if(!t.isError&&!s.isLoading&&!s.isError&&!c.isLoading&&!c.isError&&!l.isError&&"output"in l&&l.output){const a=t.output,n=r.isFirstPageOnly?r.firstPage:r.allMembers,i=s.output,o=l.output,d=c.output;return M.createElement(Oo,{accountMetadata:d,linksMetadata:i,objectMetadata:a,sharingPrefs:o,members:n,onRefreshObjectMetadata:h,onRefreshLinksMetadata:y,...e})}return M.createElement(Uo,{onFallback:e.onFallback,onRetry:v})};Ro.displayName="SettingsPageWithoutCss";const $o=a.requireCssWithComponent(Ro,["/static/typescript/component_libraries/spectrum-sharing/src/index.web-vflz7dTtC.css","/static/metaserver/static/css/dig-components/index.web-vflumqaCO.css","/static/metaserver/static/css/dig-illustrations/index.web-vflye-46V.css","/static/metaserver/static/css/maestro_layout-vflCdpQrA.css","/static/metaserver/static/css/foundation-vflH6wwwv.css"]);$o.displayName="SettingsPage",e.ACL_UPDATE_POLICY="acl_update_policy",e.ALLOW_DOWNLOAD="allow_download",e.AUDIENCE="audience",e.BUTTON="button",e.DEFAULT="default",e.DROPDOWN="dropdown",e.DatePickerInput=li,e.EDIT_LINK_SETTINGS="edit_link_settings",e.EXPIRES="expires",e.FILE_SETTINGS="file_settings",e.FOLDER_LINK_AUDIENCE_POLICY="shared_link_policy",e.FOLDER_SETTINGS="folder_settings",e.InbandEntryButton=la,e.MEMBER_POLICY="member_policy",e.PAP_Hover_FlexibleSharingEntrypointAction=zt,e.PAP_Log_FlexibleSharingEntrypointActionDwellTime=Qt,e.PasswordInput=xn,e.REQUIRE_PASSWORD=Vt,e.RestrictedVisibilityBanner=On,e.ScooterLoader=wi,e.SettingDropdown=bn,e.SettingPolicyRow=Tn,e.SettingsPage=$o,e.SettingsToggle=Cn,e.SharingModalBanner=Nn,e.SharingModalDowngradeBanner=_i,e.SharingModalSettingsRow=Sn,e.SharingSettingsPassword=e=>{const{getPolicyDict:t,linkPolicy:a}=e,n=t(Vt),r=M.createElement("div",null,(e=>{const{linkPolicy:t,linkPermissions:a,getPolicyDict:n,onPolicyUpdate:r}=e,i=n(Vt),s=i.optionsDict,l=t.require_password?"enabled":"disabled";return M.createElement(Cn,{currentValue:l,optionsDict:s,onOptionChange:(e,t)=>{r({require_password:e})},disabled:!o.canTogglePassword(a)||Pn(a,t.audience)||e.readOnlyPolicy,ariaLabel:i.title})})(e),(a.require_password||Pn(e.linkPermissions,a.audience)&&!e.readOnlyPolicy)&&M.createElement(xn,{...e}));return M.createElement(Tn,{policyName:Vt,policyDict:n,selector:r})},e.TOGGLE="toggle",e.TokenizerButton=ua,e.VIEWER_INFO_POLICY="viewer_info_policy",e.VIEW_LINK_SETTINGS="view_link_settings"}));
//# sourceMappingURL=c_settings-page_internals_settings-page-wrapper.js-vflAyoGdw.map

//# debugId=246c4d18-20ec-3c58-bcef-ed233f48d7d6