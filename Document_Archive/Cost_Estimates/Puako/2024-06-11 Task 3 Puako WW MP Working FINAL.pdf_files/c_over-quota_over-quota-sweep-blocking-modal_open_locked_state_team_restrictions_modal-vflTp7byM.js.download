!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="fa66cdb0-19a3-3ce4-abb1-cadbfd5705fb")}catch(e){}}();
define(["require","exports","react","./e_file_viewer_static_scl_page_file","./e_data_modules_stormcrow","./c_core_i18n","./c_over-quota_utils_use_get_plans","./c_growth-components_auto-layout-modal_auto_layout_modal","./c_over-quota_over-quota-sweep-blocking-modal_open_over_quota_restrictions_modal_logger","./c_checkout_components_portable_checkout_frame","./c_trial-cards_trial-plan-card","./c_dotlottie_common_chunk-B7OIQIGJ","./e_edison","./c_api_v2_routes_password_confirmation_provider","./c_memoize-one","./c_init_data_edison","./c_hive_schemas_sharing-request_access_user_events","./c_src_sink_index","./c_lodash-es_lodash","./e_core_exception","./c_pap-events_navigation_select_create_folder_action","./c_api_v2_routes_restorations_provider","./c_api_v2_unauthed_client","./c_watermarking_utils_getImageDefaultSizes","./c_core_notify","react-dom","./c_react-use_misc_util","./c_security_csrf_hmac","./c_react-use_useEffectOnce","./c_bem","react/jsx-runtime","metaserver/static/js/langpack","./c_trial-plan-card_components_header","./c_dig-components_combinations_index","./c_dig-icons_assets_ui-icon_line_tag","./c_custom_campaigns_out_of_space_modal_out_of_space_checkout_modal_logger","./c_components_order_summary_redesign_order_summary_utils","./c_payments_skus_sku_content","./c_auth_common_captcha","./c_proto_checkout_js_init_data_checkout_page_pb","./c_cash_common_common_pb","./c_proto_storefront_platform_js_init_data_transition_pb","./c_proto_storefront_platform_js_init_data_usage_data_pb","./c_proto_storefront_platform_js_init_data_payment_method_pb","./c_dig-components_meter_index","./c_react-hookz_web_useRafCallback"],(function(e,a,t,n,o,r,l,i,s,_,c,d,u,m,p,f,g,h,P,v,S,C,M,y,w,E,T,b,k,I,L,O,A,D,N,U,B,R,x,F,V,H,q,W,X,Y){"use strict";function j(e){return e&&e.__esModule?e:{default:e}}var z=j(t);const Q={PLUS:n.ProductPlanType.PLUS,PROFESSIONAL:n.ProductPlanType.PROFESSIONAL,PROFESSIONALTRIAL:n.ProductPlanType.PROFESSIONAL_TRIAL,HELLOSIGNPROBUNDLE:n.ProductPlanType.HS_DBX_PRO_BUNDLE,STANDARD:n.ProductPlanType.STANDARD,STANDARDTRIAL:n.ProductPlanType.STANDARD_TRIAL,ADVANCED:n.ProductPlanType.ADVANCED,ADVANCEDTRIAL:n.ProductPlanType.ADVANCED_TRIAL,DBXBUSINESS:n.ProductPlanType.DBX_BUSINESS,DBXBUSINESSTRIAL:n.ProductPlanType.DBX_BUSINESS_TRIAL,DBXBUSINESSPLUS:n.ProductPlanType.DBX_BUSINESS_PLUS,DBXBUSINESSPLUSTRIAL:n.ProductPlanType.DBX_BUSINESS_PLUS_TRIAL,BASIC500:n.ProductPlanType.BASIC_PLUS};const G="https://help.dropbox.com/account-access/team-locked-state?_tk=locked_state_team_restrictions_modal",K=r.intl.formatMessage({id:"eSoydF",defaultMessage:"Buy plan"}),$=r.intl.formatMessage({id:"6nTx7I",defaultMessage:"View all plans"}),J=r.intl.formatMessage({id:"nIcME2",defaultMessage:"More options"});r.intl.formatMessage({id:"7SnUbM",defaultMessage:"Leave team"}),r.intl.formatMessage({id:"7hFL0/",defaultMessage:"Notify admin"});const Z=r.intl.formatMessage({id:"o6SBs8",defaultMessage:"Buy a plan to share files"}),ee=r.intl.formatMessage({id:"xr4fnx",defaultMessage:"Sharing is unavailable"}),ae=r.intl.formatMessage({id:"UaswrB",defaultMessage:"When your team’s plan is resumed, file sharing, previews, syncing, and uploads will work again. Only a team admin can make this change."}),te=r.intl.formatMessage({id:"4az3Mr",defaultMessage:"Can’t share. Your team has <a>limited features</a>."},{a:e=>z.default.createElement("a",{href:G,target:"_blank",rel:"noreferrer noopener"},e)}),ne=r.intl.formatMessage({id:"ugrPcP",defaultMessage:"Can’t view. Your team has <a>limited features</a>."},{a:e=>z.default.createElement("a",{href:G,target:"_blank",rel:"noreferrer noopener"},e)}),oe=r.intl.formatMessage({id:"YHJ6LK",defaultMessage:"File preview is unavailable"}),re=r.intl.formatMessage({id:"RyKYwO",defaultMessage:"Download file"}),le=r.intl.formatMessage({id:"Awm4Wl",defaultMessage:"Buy a plan to add content"}),ie=r.intl.formatMessage({id:"qhrDE+",defaultMessage:"Your team has <a>limited features</a>."},{a:e=>z.default.createElement("a",{href:G,target:"_blank",rel:"noreferrer noopener"},e)}),se=r.intl.formatMessage({id:"aZ8uMJ",defaultMessage:"File upload is unavailable"}),_e=r.intl.formatMessage({id:"JlekCx",defaultMessage:"Can’t add content. Your team has <a>limited features</a>."},{a:e=>z.default.createElement("a",{href:G,target:"_blank",rel:"noreferrer noopener"},e)}),ce=r.intl.formatMessage({id:"hWObgN",defaultMessage:"You’ll need to buy a plan"});var de;!function(e){e.Sharing="SHARING",e.Preview="PREVIEW",e.UploadOrCreate="UPLOAD_OR_CREATE",e.UploadNearQuota="UPLOAD_NEAR_QUOTA",e.Invite="INVITE"}(de||(de={}));function ue(e){switch(e){case"share_modal":case"share_link":case"share_add_people":case"transfer":case"photos_copy_link":case"share_qr_code":case"shared_page_create_shared_folder":return de.Sharing;case"file_viewer":case"quick_view":case"standalone_preview":return de.Preview;case"upload":case"create":case"upload_menu_action_bar":return de.UploadOrCreate;case"invite":return de.Invite;default:return(e=>{throw new Error(`Unhandled value: ${e}`)})(e)}}const me=(e,a,t)=>{switch(e){case de.Sharing:return a?Z:ee;case de.Preview:return a?(e=>r.intl.formatMessage({id:"f18qDj",defaultMessage:"Buy a plan to view {fileName}"},{fileName:e}))(t||""):oe;case de.UploadOrCreate:return a?le:se;case de.Invite:return ce;default:throw new Error(`Unhandled view mode: ${e}`)}},pe=(e,a,t)=>{switch(e){case de.Sharing:return te;case de.Preview:return a?ne:(e=>r.intl.formatMessage({id:"jSOcKm",defaultMessage:"Can’t view {fileName}. Your team has <a>limited features</a>."},{fileName:e,a:e=>z.default.createElement("a",{href:G,target:"_blank",rel:"noreferrer noopener"},e)}))(t||"");case de.UploadOrCreate:return a?ie:_e;case de.Invite:return ie;default:throw new Error(`Unhandled view mode: ${e}`)}},fe=({viewMode:e,hasUpgradeBillingPermission:a,fileName:t,filePreview:o,isMobileView:r,planContent:l,onViewPlansClick:i,onManageFilesClick:s,onDownloadFileClick:_,onGetPlanClick:u,onCloseClick:m})=>{const p=void 0!==_&&e===de.Preview,f={title:me(e,a,t),bannerOptions:{type:"alert",text:pe(e,a,t),ctaText:p?re:void 0,ctaOnClick:p?_:void 0},firstChild:z.default.createElement(z.default.Fragment,null),primaryCtaText:$,primaryCtaOnClick:i,secondaryCtaText:J,secondaryCtaOnClick:s,showCloseButton:r,onCloseButtonClick:m,centerMobileView:!0};if(l&&a){const a=(({planContent:e,planType:a,isMobileView:t,onGetPlanClick:o})=>{var r;const l=e.advertised_space_short_gb_rounded||e.advertised_space_short_tb||e.advertised_minimum_space_short_gb_rounded||e.advertised_minimum_space_short_tb||e.display_name||"",i={planSelectorName:a,monthlyBillingByMonth:e.monthly_billing_by_month||"",annualBillingByMonth:e.annual_billing_by_month||"",annualBillingByMonthPerLicense:e.annual_billing_by_month_per_license||"",monthlyBillingByMonthPerLicense:e.monthly_billing_by_month_per_license||"",advertisedYearlyPriceSavingsPercentage:e.advertised_yearly_price_savings_percentage||"",includedTaxString:e.included_tax_string||"",countryCode:d.getCountryCodeFromIP()||"US"},s=(null!==(r=e.features)&&void 0!==r?r:[]).slice(0,3).map((e=>[n.CheckmarkLine,e])),_=e.dropbox_brand_name?`${e.dropbox_brand_name} ${e.display_name||""}`.trim():e.display_name||"",c={productFamily:e.display_name||a,heading:l,eyebrow:_,eyebrowSubtle:!0,primaryCtaText:K,primaryOnClick:o,boldHeading:!0,cardSizeVariant:"narrow-full-height",pricingInfo:i,bullets:s,bulletsPlacement:"above-cta",stretchToFillHeight:!0,centerInFlexContainer:!0,headingMarginTopSmall:!0,isRecommended:!1,allowHorizontalExpansion:!t};return e.allowed_users_count_text&&(c.isMultiUser=!0),c})({planContent:l,planType:n.PLAN_SELECTOR_NAME_TO_PLAN_TYPE[l.plan_selector_name||""]||n.PlanTypes.dropboxBusiness,isMobileView:r,onGetPlanClick:u}),t=z.default.createElement(c.TrialPlanCard,{...a});e===de.Preview&&o&&!r?(f.firstChild=o,f.secondChild=t,f.primaryCtaProps={variant:"outline"},f.secondaryCtaProps={variant:"transparent"},f.maxWidth=700,f.minWidth=700,f.width=700):(f.firstChild=t,f.primaryCtaProps=r?{variant:"transparent"}:{variant:"outline"},f.maxWidth=400,f.minWidth=400,f.width=400)}else f.firstChild=z.default.createElement("div",null,z.default.createElement(n.Text,null,ae));return f},ge="LOCKED_STATE_TEAM_RESTRICTIONS_MODAL",he="DbxBusiness",Pe=({action:a,abortCallback:o,filePreview:c,fileName:d,downloadFileHandler:u})=>{var m,p;const[f,g]=z.default.useState(!1),[h,P]=z.default.useState(void 0),{user:v}=n.useActiveUser(),{quotaUpsellInfo:S,isLoadingQuotaUpsellInfo:C}=n.useQuotaUpsellInfo(v),M=function(e){if(!e)return n.ProductPlanType.DBX_BUSINESS;const a=Q[e.toUpperCase()];return _.PORTABLE_CHECKOUT_SUPPORTED_PRODUCT_PLAN_TYPES.includes(a)?a:n.ProductPlanType.DBX_BUSINESS}(h),y=null!==(p=null===(m=null==S?void 0:S.team_info)||void 0===m?void 0:m.current_user_can_change_or_upgrade_billing)&&void 0!==p&&p,{plansInfo:w,isLoadingPlansInfo:E}=l.useGetPlans({planNames:[h||he],revenueContentLocation:"locked_state_team_restriction",enabled:!C&&!!h&&!!y}),T=t.useRef(!1),b="ON"===n.useExperimentVariant("overquota_glide_modal").variant,k=ue(a),[I,L]=z.default.useState(window.innerWidth<=l.OVER_QUOTA_RESTRICTIONS_MODAL_MIN_WIDTH_DESKTOP);if(z.default.useLayoutEffect((()=>{function e(){L(window.innerWidth<=l.OVER_QUOTA_RESTRICTIONS_MODAL_MIN_WIDTH_DESKTOP)}return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),t.useEffect((()=>{var e;if(!C){const a=(null===(e=null==S?void 0:S.team_info)||void 0===e?void 0:e.most_recent_inactive_team_plan_name)||he;a.toUpperCase()in Q?P(a):P(he)}}),[C,S]),t.useEffect((()=>{E||C||T.current||(T.current=!0)}),[E,C]),t.useEffect((()=>{E||C||T.current||(new Promise((function(a,t){e(["./c_custom_campaigns_out_of_space_modal_out_of_space_modal_doorman_wrapper"],a,t)})),new Promise((function(a,t){e(["./c_checkout_components_portable_checkout_frame"],a,t)})).then((function(e){return e.portable_checkout_frame_esnext})))}),[E,C]),C)return null;const O=w?Object.values(w)[0]:void 0;if(y&&!O)return null;let A;u&&(A=()=>{null==u||u()});const D=fe({viewMode:k,hasUpgradeBillingPermission:y,fileName:d,filePreview:c,isMobileView:I,planContent:O,onViewPlansClick:()=>{b?(g(!0),n.openDoormanUpsellModal({modalVersion:"glide-upsell-modal-dp-only",trialCardsLocation:n.TrialCardsLocation.OVERQUOTA_RESTRICTIONS_MODAL,reloadPageAfterPurchase:!0,onClose:()=>{o()},onDisplayed:()=>{n.unmountModal(void 0,ge),g(!1)}})):(o(),n.redirect("/plans?_tk=locked_state_team_restrictions_modal"),n.unmountModal(void 0,ge))},onManageFilesClick:()=>{n.redirect("/home?_tk=locked_state_team_restrictions_modal&pathway=download_and_delete_tooltip_tour&sort_by_size_desc=true"),o(),n.unmountModal(void 0,ge)},onDownloadFileClick:A,onGetPlanClick:()=>{l.openPortableCheckoutModal({isOpen:!0,productPlanType:M,onCloseClick:()=>{o(),n.unmountModal(void 0,l.PORTABLE_CHECKOUT_MODAL_ID)},onIframeLoadSuccess:()=>{s.logShownPortableCheckoutModalSuccess("locked_state_team_restrictions_modal"),n.unmountModal(void 0,ge)},onIframeLoadError:()=>{o(),s.logShownPortableCheckoutModalError("locked_state_team_restrictions_modal"),n.unmountModal(void 0,ge),(null==O?void 0:O.cta_url)?n.redirect(O.cta_url):n.redirect("/plans?_tk=locked_state_team_restrictions_modal")},onPurchaseSuccess:()=>{o(),s.logSelectPortableCheckoutModalPurchaseSuccess("locked_state_team_restrictions_modal"),n.reload()}})},onCloseClick:e=>{e.preventDefault(),e.stopPropagation(),o(),n.unmountModal(void 0,ge)}});return z.default.createElement(r.Provider,{value:r.intl},z.default.createElement(i.AutoLayoutModal,{...D,isPrimaryCtaLoading:f}))};Pe.displayName="FunctionalLockedStateTeamRestrictionsModal";a.openLockedStateTeamRestrictionsModal=e=>{n.mountModal(z.default.createElement(o.QueryClientProvider,{client:o.queryClient},z.default.createElement(Pe,{action:e.action,continueCallback:e.continueCallback,abortCallback:e.abortCallback,filePreview:e.filePreview,fileName:e.fileName,downloadFileHandler:e.downloadFileHandler})),void 0,ge)}}));
//# sourceMappingURL=c_over-quota_over-quota-sweep-blocking-modal_open_locked_state_team_restrictions_modal.js-vflhAZcpj.map

//# debugId=fa66cdb0-19a3-3ce4-abb1-cadbfd5705fb