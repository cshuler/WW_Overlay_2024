!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="1d83a85d-ffc6-3601-8599-9849f30401e5")}catch(e){}}();
define(["exports","./e_file_viewer_static_scl_page_file"],(function(t,e){"use strict";let n=null;const s="variants",o=",",r=":";let a=0;const i=(t=!1)=>{const n=(t,e)=>{const n=[],s=document.head.querySelectorAll(`meta[${t}]`);return s?(Array.prototype.forEach.call(s,(s=>{try{const o=s.getAttribute(t);if(!o)return;e?n.push(...JSON.parse(o)):n.push(o)}catch{}})),n):[]};if(t&&a>1||!t&&a)return;a++,(()=>{const t=e.getUXVariantsFromDOM();if(!t)return;const n=m(t,"matchers"),s=[];for(const[t,e]of n){const n={feature_name:t,event_name:JSON.parse(e).event_name};s.push(n)}u({variant_tokens:t,matchers:s})})();const s=n("data-uxa-matcher-configs",!0),r=n("data-uxa-variant-tokens",!1);if(!s.length||!r.length)return;u({variant_tokens:r.join(o),matchers:s})},c=(t,e)=>{let n;n=t.startsWith("adobetarget")?"adobe_target_variants":"variants",e[n]?e[n]+=o+t:e[n]=t};const f=(t,e)=>{const n=t=>decodeURIComponent(escape(t)),[s,o,r]=t.split(".").map((t=>atob(t.split("_").join("/").split("-").join("+"))));if(!r)return;if("JWT"!==JSON.parse(n(s)).typ)return;const a=JSON.parse(n(o)),i=a[e];return"https://dropbox.com/ux_analytics"===a.iss?i:void 0},m=(t,e)=>{const n=f(t,e),s=[];for(const t of n.split(o)){const e=t.split(r);2===e.length&&s.push(e.map(decodeURIComponent))}return s},p=t=>t.startsWith("adobetarget:")?(t=>{const e=t.split(o),n=[];for(const t of e)try{const[e,s,o]=t.split(r);n.push([e+r+decodeURIComponent(s),decodeURIComponent(o)])}catch{continue}return n})(t):m(t,s);function u(t){if(!t)return;n=n||{assignments:{},matchers:{}};const{variant_tokens:e,matchers:s}=t;if(e)for(const t of e.split(o)){const e=p(t);if(e)for(const[s,o]of e)n.assignments=n.assignments||{},n.assignments[s]={variant:o,variantToken:t}}if(s)for(const t of s){n.matchers=n.matchers||{};const e=t.event_name;n.matchers[e]=n.matchers[e]||{};const s={feature_name:t.feature_name,event_name:e,is_pre_tti:t.is_pre_tti,like:t.like},o=JSON.stringify(s);n.matchers[e][o]=s}}t.addConfigsFromDOM=i,t.addMatchedVariantsToEvent=function(t){const e=(t,e)=>void 0===t||((t,e)=>{if(void 0===t)return!0;const n=t;for(const t in n)if(String(e[t])!==String(n[t]))return!1;return!0})(t.extra,e.extra);let s;i();const o={};if(t&&n&&n.matchers&&t.eventName&&(s=n.matchers[t.eventName]))for(const r in s){if(!n.assignments||!s.hasOwnProperty(r))continue;const a=s[r],i=n.assignments[a.feature_name];i&&(void 0===o[i.variantToken]&&e(a.like,t)&&(t.extra||(t.extra={}),c(i.variantToken,t.extra),o[i.variantToken]=!0))}},t.parseJWTToDict=t=>{const e=f(t,s),n={};for(const t of e.split(o)){const e=t.split(r);2===e.length&&(n[decodeURIComponent(e[0])]=decodeURIComponent(e[1]))}return n}}));
//# sourceMappingURL=c_ux_analytics_ux_variants.js-vfl_ZhS5u.map

//# debugId=1d83a85d-ffc6-3601-8599-9849f30401e5