!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="3c6c060e-5d0b-338f-bed6-08b107e7179d")}catch(e){}}();
define(["exports","./e_file_viewer_static_scl_page_file","./e_data_modules_stormcrow","./e_core_exception","./c_over-quota_over-quota-sweep-blocking-modal_open_over_quota_restrictions_modal","./c_over-quota_over-quota-sweep-blocking-modal_open_locked_state_team_restrictions_modal"],(function(e,o,t,i,a,r){"use strict";function n(e){return{class:"quota",action:"eng",object:"should_show_oq_restrictions_modal",properties:e}}var s;e.Show=void 0,(s=e.Show||(e.Show={})).WarningOnly="WARNING_ONLY",s.EnforceRestrictionsOnly="ENFORCE_RESTRICTIONS_ONLY",s.All="ALL";const c=async(i,a,r)=>{var n,s,c,l,_;const[d,u,v]=await Promise.all([o.fetchExperimentVariant("end_state_web_overquota_restrictions"),o.fetchExperimentVariant("lifecycle_2026_01_12_locked_team_restriction"),o.fetchViewer()]),w=d.error||void 0===d.variant||d.variant===o.Variant.OFF,g=u.error||void 0===u.variant||u.variant===o.Variant.OFF;if(w&&g)return!1;const{apiData:p}=await o.getQuotaUpsellInfoPackage.fetchQuery(t.queryClient,{apiArg:{}},{refetchOnReconnect:!1,refetchOnWindowFocus:!0,staleTime:18e5,cacheTime:18e5,retry:1});return!!(null===(n=v.active_user)||void 0===n?void 0:n.is_team)&&v.team_is_locked?function(e,t,i){return!(void 0===e||![o.Variant.V1,o.Variant.CONTROL].includes(e))&&(o.logExposure({feature:"lifecycle_2026_01_12_locked_team_restriction",variant:e}),o.logAdditionalExposureDetailsForLockedStateTeam(e,i,t),e===o.Variant.V1)}(u.variant,p,a):(!r||!r.is_team)&&(!(i===e.Show.WarningOnly&&!(null===(s=p.restrictions)||void 0===s?void 0:s.show_restrictions_warning))&&(!(i===e.Show.EnforceRestrictionsOnly&&!(null===(c=p.restrictions)||void 0===c?void 0:c.enforce_restrictions))&&(!(void 0===d.variant||![o.Variant.V1,o.Variant.CONTROL,o.Variant.HOLDOUT].includes(d.variant)||!(null===(l=p.restrictions)||void 0===l?void 0:l.enforce_restrictions)&&!(null===(_=p.restrictions)||void 0===_?void 0:_.show_restrictions_warning))&&(o.logExposure({feature:"end_state_web_overquota_restrictions",variant:d.variant}),o.logAdditionalExposureDetails(d.variant,a,p),d.variant===o.Variant.V1))))},l=async(e,t,a)=>{const r=Math.random().toString(36).substring(2,15);o.UDCL.logStart(n({overQuotaSweepBlockingModalAction:t}),{key:r,tags:{overQuotaSweepBlockingModalAction:t}});try{const i=await c(e,t,a);return o.UDCL.logEnd(n({overQuotaSweepBlockingModalAction:t,eventState:"success"}),{key:r,tags:{overQuotaSweepBlockingModalAction:t}}),i}catch(e){return i.reportStack(`Error in showOQModalOrContinue: ${JSON.stringify(e)}`,{severity:i.SEVERITY.NONCRITICAL,tags:["over_quota_restrictions_modal"]}),o.UDCL.logEnd(n({overQuotaSweepBlockingModalAction:t,eventState:"failed"}),{key:r,tags:{overQuotaSweepBlockingModalAction:t}}),!1}};e.shouldShowOQModal=l,e.showOQModalOrContinue=async({beforeShowModal:o,user:t,show:i=e.Show.All,...n})=>{var s;const c=await l(i,n.action,t),_=null===(s=null==t?void 0:t.team)||void 0===s?void 0:s.is_locked;c?(null==o||o(),_?r.openLockedStateTeamRestrictionsModal(n):a.openOverQuotaRestrictionsModal(n)):n.continueCallback()}}));
//# sourceMappingURL=c_over-quota_over-quota-sweep-blocking-modal_show_over_quota_modal_or_continue.js-vflVD-SBq.map

//# debugId=3c6c060e-5d0b-338f-bed6-08b107e7179d