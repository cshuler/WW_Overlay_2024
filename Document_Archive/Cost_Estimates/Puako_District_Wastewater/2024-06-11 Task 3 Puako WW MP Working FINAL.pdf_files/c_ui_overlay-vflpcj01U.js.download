!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="fc8a5a6e-6437-3790-9d89-3604b3390000")}catch(e){}}();
define(["exports","./e_file_viewer_static_scl_page_file","react","react-dom","./c_lodash-es_lodash"],(function(t,e,o,s,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(o){if("default"!==o){var s=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:function(){return t[o]}})}})),e.default=t,Object.freeze(e)}var r,l=n(o),a=n(s);t.StickyPosition=void 0,(r=t.StickyPosition||(t.StickyPosition={}))[r.TOP_LEFT=1]="TOP_LEFT",r[r.TOP=2]="TOP",r[r.TOP_RIGHT=3]="TOP_RIGHT",r[r.LEFT_TOP=4]="LEFT_TOP",r[r.LEFT=5]="LEFT",r[r.LEFT_BOTTOM=6]="LEFT_BOTTOM",r[r.RIGHT_TOP=7]="RIGHT_TOP",r[r.RIGHT=8]="RIGHT",r[r.RIGHT_BOTTOM=9]="RIGHT_BOTTOM",r[r.BOTTOM_LEFT=10]="BOTTOM_LEFT",r[r.BOTTOM=11]="BOTTOM",r[r.BOTTOM_RIGHT=12]="BOTTOM_RIGHT",r[r.TOP_ALIGN_LEFT=13]="TOP_ALIGN_LEFT",r[r.TOP_ALIGN_RIGHT=14]="TOP_ALIGN_RIGHT",r[r.LEFT_ALIGN_TOP=15]="LEFT_ALIGN_TOP",r[r.LEFT_ALIGN_BOTTOM=16]="LEFT_ALIGN_BOTTOM",r[r.RIGHT_ALIGN_TOP=17]="RIGHT_ALIGN_TOP",r[r.RIGHT_ALIGN_BOTTOM=18]="RIGHT_ALIGN_BOTTOM",r[r.BOTTOM_ALIGN_LEFT=19]="BOTTOM_ALIGN_LEFT",r[r.BOTTOM_ALIGN_RIGHT=20]="BOTTOM_ALIGN_RIGHT";const h=function({targetNode:o,isTargetFixed:s,position:i,offset:n}){return(r,l)=>{if(null==o)return null;const a=o.getBoundingClientRect(),h={top:a.top+document.body.scrollTop,left:a.left+document.body.scrollLeft};if(s&&(h.top-=window.pageYOffset,l&&(h.left-=window.pageXOffset)),null==r)return{top:h.top,left:h.left};switch((null==n?void 0:n.vertical)&&(h.top+=n.vertical),(null==n?void 0:n.horizontal)&&(h.left+=n.horizontal),i){case t.StickyPosition.TOP_LEFT:return{top:h.top-r.offsetHeight,left:h.left+.5*o.offsetWidth-.75*r.offsetWidth};case t.StickyPosition.TOP:return{top:h.top-r.offsetHeight,left:h.left+.5*(o.offsetWidth-r.offsetWidth)};case t.StickyPosition.TOP_RIGHT:return{top:h.top-r.offsetHeight,left:h.left+.5*o.offsetWidth-.25*r.offsetWidth};case t.StickyPosition.LEFT_TOP:return{top:h.top+.5*o.offsetHeight-.75*r.offsetHeight,left:h.left-r.offsetWidth};case t.StickyPosition.LEFT:return{top:h.top+.5*(o.offsetHeight-r.offsetHeight),left:h.left-r.offsetWidth};case t.StickyPosition.LEFT_BOTTOM:return{top:h.top+.5*o.offsetHeight-.25*r.offsetHeight,left:h.left-r.offsetWidth};case t.StickyPosition.RIGHT_TOP:return{top:h.top+.5*o.offsetHeight-.75*r.offsetHeight,left:h.left+o.offsetWidth};case t.StickyPosition.RIGHT:return{top:h.top+.5*(o.offsetHeight-r.offsetHeight),left:h.left+o.offsetWidth};case t.StickyPosition.RIGHT_BOTTOM:return{top:h.top+.5*o.offsetHeight-.25*r.offsetHeight,left:h.left+o.offsetWidth};case t.StickyPosition.BOTTOM_LEFT:return{top:h.top+o.offsetHeight,left:h.left+.5*o.offsetWidth-.75*r.offsetWidth};case t.StickyPosition.BOTTOM:return{top:h.top+o.offsetHeight,left:h.left+.5*(o.offsetWidth-r.offsetWidth)};case t.StickyPosition.BOTTOM_RIGHT:return{top:h.top+o.offsetHeight,left:h.left+.5*o.offsetWidth-.25*r.offsetWidth};case t.StickyPosition.TOP_ALIGN_LEFT:return{top:h.top-r.offsetHeight,left:h.left};case t.StickyPosition.TOP_ALIGN_RIGHT:return{top:h.top-r.offsetHeight,left:h.left+o.offsetWidth-r.offsetWidth};case t.StickyPosition.LEFT_ALIGN_TOP:return{top:h.top,left:h.left-r.offsetWidth};case t.StickyPosition.LEFT_ALIGN_BOTTOM:return{top:h.top+o.offsetHeight-r.offsetHeight,left:h.left-r.offsetWidth};case t.StickyPosition.RIGHT_ALIGN_TOP:return{top:h.top,left:h.left+o.offsetWidth};case t.StickyPosition.RIGHT_ALIGN_BOTTOM:return{top:h.top+o.offsetHeight-r.offsetHeight,left:h.left+o.offsetWidth};case t.StickyPosition.BOTTOM_ALIGN_LEFT:return{top:h.top+o.offsetHeight,left:h.left};case t.StickyPosition.BOTTOM_ALIGN_RIGHT:return{top:h.top+o.offsetHeight,left:h.left+o.offsetWidth-r.offsetWidth};default:return e.enforceExhaustive(i)}}};class p extends l.default.Component{constructor(t){super(t),this._getStyle=()=>{const t=this.props.isTargetFixed?"fixed":"absolute";return i.assignIn({outline:0,position:t},this.state.positioning)},this._createScrollHandler=()=>{const t=i.debounce(this._throttle.request,500);return()=>(this._throttle.request(),t())},this._updatePositioning=()=>{if(!this.refs.root)return;const t=this.props.getPositioning(a.findDOMNode(this),this.props.compensateForHorizontalScroll);return null!=t?this.setState({positioning:t},(()=>"function"==typeof this.props.onReposition?this.props.onReposition(this.state.positioning):void 0)):void 0},this._throttle=new e.RafThrottle(this._updatePositioning),this.state={positioning:this.props.initialPositioning}}componentDidMount(){window.addEventListener("resize",this._throttle.request),this.props.compensateForHorizontalScroll&&(this._scrollHandler=this._createScrollHandler(),window.addEventListener("scroll",this._scrollHandler)),this._updatePositioning()}componentDidUpdate(t){if(this.props!==t)return this._throttle.request()}componentWillUnmount(){this._throttle.cancelPending(),window.removeEventListener("resize",this._throttle.request),this.props.compensateForHorizontalScroll&&window.removeEventListener("scroll",this._scrollHandler)}render(){return l.default.createElement("div",{ref:"root",style:this._getStyle(),tabIndex:-1},this.props.children)}}p.displayName="FreePositioned",p.defaultProps={isTargetFixed:!1,initialPositioning:null,compensateForHorizontalScroll:!0};class c extends l.PureComponent{constructor(){super(...arguments),this.el=null,this.parentEl=null,this.portal=null}componentDidMount(){this.mountPortal()}componentDidUpdate(t){const{className:e,style:o,tagName:s,parentElement:i,replaceParent:n,children:r}=this.props;if(s!==t.tagName||i!==t.parentElement||n!==t.replaceParent)return this.unmountPortal(),void this.mountPortal();e===t.className&&o===t.style||!this.el||n||this.applyContainerAttributes(this.el),r!==t.children&&this.renderPortal()}componentWillUnmount(){this.unmountPortal()}mountPortal(){null!==this.props.parentElement&&(this.el||(this.props.replaceParent&&this.props.parentElement?this.el=this.props.parentElement:(this.el=this.props.document.createElement(this.props.tagName||"div"),this.applyContainerAttributes(this.el),this.parentEl=this.props.parentElement||this.props.document.body,this.parentEl.appendChild(this.el))),this.renderPortal())}unmountPortal(){this.el&&this.parentEl&&(a.unmountComponentAtNode(this.el),this.props.replaceParent||this.parentEl.removeChild(this.el)),this.el=null,this.portal=null}applyContainerAttributes(t){const{className:o,style:s}=this.props;t.className=e.cx("react-portal-container",o),void 0!==s&&Object.assign(t.style,s)}renderPortal(){if(!this.el)throw new Error("No portal element found");this.portal=a.unstable_renderSubtreeIntoContainer(this,l.Children.only(this.props.children),this.el,this.props.onRendered)}render(){return null}}c.displayName="Portal";const f=e.withDocument(c);class d extends l.default.Component{constructor(){super(...arguments),this.overlayContentRef=l.default.createRef(),this.overlayContentDidMount=()=>{this.props.isContentFocusable&&(this._focusElementInOverlay(),this._bindOverlayHandlers()),this.props.isFullScreen&&(this._setScreenReaderHiddenForSiblingsAndAncestors(this.overlayContentRef.current,!0),e.scroll_lock_document()),this.props.onRendered()},this._bindOverlayHandlers=()=>{window.addEventListener("mousedown",this._handleFocusOutOverlay,!0),window.addEventListener("blur",this._handleFocusIntoIframe,!0)},this._unbindOverlayHandlers=()=>{window.removeEventListener("mousedown",this._handleFocusOutOverlay,!0),window.removeEventListener("blur",this._handleFocusIntoIframe,!0)},this._getContentStyle=()=>this.props.position&&!this.props.isFullScreen?{top:this.props.position.top,left:this.props.position.left}:{},this._setScreenReaderHiddenForSiblingsAndAncestors=(t,e)=>{if(!t)return;const{parentElement:o}=t;if(o){const s=Array.from(o.children).filter((e=>e!==t&&"#accessible-announce"!==e.id));e?s.forEach((t=>{t.setAttribute("aria-hidden","true")})):s.forEach((t=>{t.removeAttribute("aria-hidden")})),o!==this._rootContainer&&this._setScreenReaderHiddenForSiblingsAndAncestors(o,e)}},this._focusElementInOverlay=()=>{var t;let o=null===(t=this.overlayContentRef.current)||void 0===t?void 0:t.firstElementChild;if(o&&null==o.getAttribute("tabindex")&&(o=this.overlayContentRef.current),this.props.shouldAutoFocusOverlayContent&&this.overlayContentRef.current){const t=e.getTabbableElementsIn(this.overlayContentRef.current);t.length>0&&(o=t[0])}requestAnimationFrame((()=>{o instanceof HTMLElement&&o.focus()}))},this._handleKeyDown=t=>{this.props.isContentFocusable&&(t.key===e.Key_enum.Key.Tab?this._handleTabNavigate(t):t.key===e.Key_enum.Key.Escape&&this._blur(t,this.overlayTarget))},this._handleFocusOutOverlay=t=>{var e;this.props.isContentFocusable&&(t.target===this.overlayTarget||this.overlayTarget.contains(t.target)||(null===(e=this.overlayContentRef.current)||void 0===e?void 0:e.contains(t.target))||this._blur(t,t.target||this.overlayTarget))},this._handleFocusIntoIframe=t=>{this.props.document.activeElement&&"IFRAME"===this.props.document.activeElement.tagName&&this._blur(t,this.props.document.activeElement)},this._handleTabNavigate=t=>{const o=this.overlayContentRef.current;if(o)if(this.props.shouldTrapKeyboardFocus||this.props.isFullScreen)t.target instanceof Element&&e.keepFocusIn(o,t.target,t.nativeEvent);else{let s,i;const n=e.getTabbableElementsIn(o),r=n[0],l=n[n.length-1];if(t.shiftKey&&(s=t.target,[o,r].includes(s)))this._blur(t,this.overlayTarget);else if(!t.shiftKey&&(i=t.target,[o,l].includes(i))){let o=this.overlayTarget;if(this.overlayTarget.parentNode){const t=e.getFocusableElementsIn(this.overlayTarget.parentNode),s=t.indexOf(o);s<t.length-1&&(o=t[s+1])}this._blur(t,o)}}},this._blur=(t,e)=>{t.preventDefault(),t.stopPropagation(),e.focus(),this.props.onBlur&&this.props.onBlur()}}UNSAFE_componentWillMount(){this._rootContainer=this.props.document.body,this.overlayTarget=this.props.overlayTarget||this.props.document.activeElement}componentDidUpdate(t){this.overlayContentRef.current&&!t.isContentFocusable&&this.props.isContentFocusable&&(this._focusElementInOverlay(),this._bindOverlayHandlers())}componentWillUnmount(){this._unbindOverlayHandlers(),this.props.isFullScreen&&(this._setScreenReaderHiddenForSiblingsAndAncestors(this.overlayContentRef.current,!1),e.scroll_unlock_document())}render(){return l.default.createElement(f,{className:"react-overlay-portal-container",parentElement:this.props.overlayRoot||this._rootContainer,onRendered:this.overlayContentDidMount},l.default.createElement("div",{ref:this.overlayContentRef,tabIndex:-1,className:e.cx(this.props.className,{"react-overlay":!0,"react-overlay--is-fullscreen":this.props.isFullScreen}),style:this._getContentStyle(),role:this.props.isFullScreen?"dialog":void 0,onKeyDown:this._handleKeyDown},this.props.children))}}d.displayName="Overlay",d.defaultProps={overlayRoot:null,overlayTarget:null,isFullScreen:!1,shouldTrapKeyboardFocus:!1,isContentFocusable:!0,shouldAutoFocusOverlayContent:!0,position:null,onRendered:i.noop,onBlur:i.noop};const u=e.requireCssWithComponent(e.withDocument(d),["/static/metaserver/static/css/react/overlay-vflNXoFem.css"]);class T extends l.default.Component{constructor(){super(...arguments),this.state={readyToFocusInOverlay:!1},this._handlePositionUpdated=t=>{!this.currentPositioning&&this.props.isContentFocusable&&this.setState({readyToFocusInOverlay:!0}),this.currentPositioning=t,this.props.onReposition&&this.props.onReposition(t)}}render(){const{position:t,children:e,onReposition:o,...s}=this.props;return l.default.createElement(u,{overlayTarget:this.props.targetNode,isFullScreen:!1,isContentFocusable:this.state.readyToFocusInOverlay,className:this.props.className,...s},l.default.createElement(p,{getPositioning:h({targetNode:this.props.targetNode,isTargetFixed:Boolean(this.props.isTargetPositionFixed),position:this.props.position,offset:this.props.positionOffset}),isTargetFixed:this.props.isTargetPositionFixed,onReposition:this._handlePositionUpdated,...s},this.props.children))}}T.displayName="PositionedOverlay",T.defaultProps={isTargetPositionFixed:!1,isContentFocusable:!0},t.Overlay=u,t.Portal=f,t.PositionedOverlay=T}));
//# sourceMappingURL=c_ui_overlay.js-vflRiv9zf.map

//# debugId=fc8a5a6e-6437-3790-9d89-3604b3390000