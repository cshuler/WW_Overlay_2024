!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="8520ec84-aeb4-358d-8d2f-1a4b5472bf56")}catch(e){}}();
define(["require","exports","react","./c_core_i18n","./e_file_viewer_static_scl_page_file","./c_trial-plan-card_components_header","./c_trial-cards_trial-plan-card","./c_dotlottie_common_chunk-B7OIQIGJ","./e_data_modules_stormcrow","./c_bem"],(function(e,a,t,i,l,o,r,n,s,d){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}var c=u(t);const g=i.intl.formatMessage({id:"RwfIPM",defaultMessage:"Upgrade"}),f=i.intl.formatMessage({id:"Ts3pxe",defaultMessage:"Manage files"}),v=i.intl.formatMessage({id:"1Puvc2",defaultMessage:"Contact admin"}),m=e=>i.intl.formatMessage({id:"oZoBRB",defaultMessage:"Get {planSize}"},{planSize:e}),p=i.intl.formatMessage({id:"gAT+r8",defaultMessage:"View plans"}),_=i.intl.formatMessage({id:"fkOQG8",defaultMessage:"Download file"}),M=(e,a)=>i.intl.formatMessage({id:"Ju0e9k",defaultMessage:"You're using <b>{usedBytes} of {quotaBytes}</b> of your free Dropbox storage space. Upgrade to a plan that scales with your work—or your over-quota files may be deleted."},{usedBytes:e,quotaBytes:a,b:e=>c.default.createElement("strong",null,e)}),y=i.intl.formatMessage({id:"r5pMlA",defaultMessage:"Warning"}),C=i.intl.formatMessage({id:"gW6Dlh",defaultMessage:"Current plan"}),h=i.intl.formatMessage({id:"XHZW23",defaultMessage:"Upgrade to continue collaborating on shared files"}),b=e=>i.intl.formatMessage({id:"QRtV/H",defaultMessage:"<b>Sharing will be restricted on {restrictionsDate}</b> if you're still over your storage limit."},{restrictionsDate:e,b:e=>c.default.createElement("strong",null,e)}),w=i.intl.formatMessage({id:"ac6d5L",defaultMessage:"<b>Sharing will be restricted soon</b> if you’re still over your storage limit."},{b:e=>c.default.createElement("strong",null,e)}),I=i.intl.formatMessage({id:"4pCtin",defaultMessage:"Sharing is unavailable because your team has <a>limited features</a>."},{a:e=>c.default.createElement("a",{href:"https://help.dropbox.com/account-access/team-locked-state?_tk=oq_restrictions_modal",target:"_blank",rel:"noreferrer noopener"},e)}),S=i.intl.formatMessage({id:"tELEKM",defaultMessage:"Sharing is restricted because you’re over your storage limit."}),P=e=>i.intl.formatMessage({id:"+CKpIi",defaultMessage:"Upgrade to view {fileName}"},{fileName:e}),E=e=>i.intl.formatMessage({id:"8t0sN4",defaultMessage:"<b>Preview will be restricted on {restrictionsDate}</b> if you're still over your storage limit."},{restrictionsDate:e,b:e=>c.default.createElement("strong",null,e)}),T=i.intl.formatMessage({id:"D9G/dF",defaultMessage:"<b>Preview will be restricted soon</b> if you’re still over your storage limit."},{b:e=>c.default.createElement("strong",null,e)}),U=i.intl.formatMessage({id:"e3Hu53",defaultMessage:"Preview is restricted because you’re over your storage limit."}),A=i.intl.formatMessage({id:"cp1Kff",defaultMessage:"Upgrade to continue adding content"}),D=i.intl.formatMessage({id:"FMGZlv",defaultMessage:"You’ve exceeded your storage limit. Upgrade to get more storage."});i.intl.formatMessage({id:"RwfIPM",defaultMessage:"Upgrade"}),i.intl.formatMessage({id:"Ts3pxe",defaultMessage:"Manage files"}),i.intl.formatMessage({id:"s+3YBE",defaultMessage:"Includes"}),i.intl.formatMessage({id:"gAT+r8",defaultMessage:"View plans"});const L=i.intl.formatMessage({id:"Z6zJXZ",defaultMessage:"Show all plans"}),x=i.intl.formatMessage({id:"YvYJx0",defaultMessage:"Your special savings"}),N=i.intl.formatMessage({id:"5kkHg1",defaultMessage:"Redeem offer"});i.intl.formatMessage({id:"fkOQG8",defaultMessage:"Download file"}),i.intl.formatMessage({id:"r5pMlA",defaultMessage:"Warning"}),i.intl.formatMessage({id:"gW6Dlh",defaultMessage:"Current plan"}),i.intl.formatMessage({id:"XHZW23",defaultMessage:"Upgrade to continue collaborating on shared files"}),i.intl.formatMessage({id:"ac6d5L",defaultMessage:"<b>Sharing will be restricted soon</b> if you’re still over your storage limit."},{b:e=>c.default.createElement("strong",null,e)}),i.intl.formatMessage({id:"tELEKM",defaultMessage:"Sharing is restricted because you’re over your storage limit."}),i.intl.formatMessage({id:"D9G/dF",defaultMessage:"<b>Preview will be restricted soon</b> if you’re still over your storage limit."},{b:e=>c.default.createElement("strong",null,e)}),i.intl.formatMessage({id:"e3Hu53",defaultMessage:"Preview is restricted because you’re over your storage limit."}),i.intl.formatMessage({id:"cp1Kff",defaultMessage:"Upgrade to continue adding content"}),i.intl.formatMessage({id:"FMGZlv",defaultMessage:"You’ve exceeded your storage limit. Upgrade to get more storage."});const k=i.intl.formatMessage({id:"aRx2b4",defaultMessage:"Get more storage to upload your file(s)"}),V=i.intl.formatMessage({id:"VPYpFU",defaultMessage:"Uploading the selected file(s) would put you over your storage limit."});i.intl.formatMessage({id:"EcxI0t",defaultMessage:"Compare plans"});const O=i.intl.formatMessage({id:"LPgo9r",defaultMessage:"*Take 25% off for the first year of your annual subscription to Dropbox Plus"}),R="portable-checkout-modal";var B;a.ViewMode=void 0,(B=a.ViewMode||(a.ViewMode={})).Sharing="SHARING",B.Preview="PREVIEW",B.UploadOrCreate="UPLOAD_OR_CREATE",B.UploadNearQuota="UPLOAD_NEAR_QUOTA";const F=e=>{throw new Error(`Unhandled value: ${e}`)};function G(e){if(null==e)return"";const a=new Date(1e3*e);return i.intl.formatDate(a,{year:"numeric",month:"long",day:"numeric"})}const q=l.createDefaultApiv2QueryFn(d.GetSpaceUpsellsRoutes,"get_plans"),H=l.createApiv2Query({nsClient:d.GetSpaceUpsellsRoutes,rpc:"get_plans",queryFn:(...e)=>(...a)=>l.reportExceptionIfRequestFails((async()=>await q(...e)(...a)),["get_plans"])});a.CONTACT_ADMIN=v,a.CURRENT_PLAN=C,a.DOWNLOAD_FILE=_,a.GET_PLAN=m,a.MANAGE_FILES=f,a.OVER_QUOTA_DELETION_WARNING=M,a.OVER_QUOTA_RESTRICTIONS_MODAL_MIN_WIDTH_DESKTOP=706,a.PORTABLE_CHECKOUT_MODAL_ID=R,a.PREVIEW_TITLE=P,a.SHARING_ENFORCE_RESTRICTIONS=S,a.SHARING_ENFORCE_RESTRICTION_LOCKED_STATE_TEAM=I,a.SHARING_RESTRICTION_WARNING=b,a.SHARING_RESTRICTION_WARNING_NO_DATE=w,a.UPGRADE=g,a.VIEW_PLANS=p,a.WARNING_BADGE=y,a.getAutoLayoutModalProps=function({viewMode:e,isMobileView:t,fileName:s,quotaUpsellInfo:d,warningMode:u,usedLessThanPlusQuota:g,filePreview:v,planContent:y,quotaUsedBytes:I,quotaAllocatedBytes:R,shouldUseSmallSkus:B,shouldUseHeavyDiscount:q,onViewPlansClick:H,onCloseClick:W,onDownloadFileClick:z,onManageFilesClick:Q,onGetPlanClick:Y}){const K=function(e,t){switch(e){case a.ViewMode.Sharing:return h;case a.ViewMode.Preview:return P(t||"");case a.ViewMode.UploadOrCreate:return A;case a.ViewMode.UploadNearQuota:return k;default:return F(e)}}(e,s),Z=function(e,t){var i;const l=null===(i=null==t?void 0:t.restrictions)||void 0===i?void 0:i.restrictions_start_time_utc_seconds;switch(e){case a.ViewMode.Sharing:return l?b(G(l)):w;case a.ViewMode.Preview:return l?E(G(l)):T;case a.ViewMode.UploadOrCreate:return D;case a.ViewMode.UploadNearQuota:return V;default:return F(e)}}(e,d),J=function(e){switch(e){case a.ViewMode.Sharing:return S;case a.ViewMode.Preview:return U;case a.ViewMode.UploadOrCreate:return D;case a.ViewMode.UploadNearQuota:return V;default:return F(e)}}(e),X=void 0!==z&&e===a.ViewMode.Preview&&!u&&(!t||t&&!g),j={title:K,bannerOptions:{type:u?"warning":"alert",text:u?Z:J,ctaText:X?_:void 0,ctaOnClick:X?z:void 0},firstChild:c.default.createElement(c.default.Fragment,null),primaryCtaText:B||q?L:p,primaryCtaOnClick:H,showCloseButton:u||t,onCloseButtonClick:e=>W(e),width:706,minWidth:706,maxWidth:1200,footnoteText:q?O:void 0};if(g&&y){const i=function(e,a,t,i,o,r,n){var s,d,u,c,g,v,m;const p={heading:null===(s=null==e?void 0:e.INDIVIDUAL)||void 0===s?void 0:s.advertised_space_short_gb_rounded,productFamily:(null===(d=null==e?void 0:e.INDIVIDUAL)||void 0===d?void 0:d.display_name)||"",eyebrow:n?(null===(u=null==e?void 0:e.INDIVIDUAL)||void 0===u?void 0:u.dropbox_brand_name)+" "+(null===(c=null==e?void 0:e.INDIVIDUAL)||void 0===c?void 0:c.display_name):null===(g=null==e?void 0:e.INDIVIDUAL)||void 0===g?void 0:g.display_name,eyebrowSubtle:!0,primaryCtaText:f,primaryOnClick:r,boldHeading:!0,fillMode:"outline",cardSizeVariant:"narrow-full-height",bullets:a?[]:[[l.CheckmarkLine,(null===(m=null===(v=null==e?void 0:e.INDIVIDUAL)||void 0===v?void 0:v.features)||void 0===m?void 0:m[0])||""]],alternativeToPricingSectionText:C,alternativeToPricingSectionTextSize:n?"medium":"large",stretchToFillHeight:!0,centerInFlexContainer:!0,headingMarginTopSmall:!0,allowHorizontalExpansion:!a};return t||(p.quotaIndicatorInfo={usedBytes:i,quotaBytes:o,subtextVerbForm:"imperative",meterColor:"red",textSize:"small"}),p}(y,t,u,I,R,Q,B),s=function(e,a,t,i,r,s){var d,u,c,g,f,v,p,_,M,y,C,h,b,w,I,S,P,E,T,U,A,D,L,k,V;let O;if(s){const s={planSelectorName:l.PlanTypes.basicPlus500GB,monthlyBillingByMonth:(null===(d=null==e?void 0:e.BASIC500)||void 0===d?void 0:d.monthly_billing_by_month)||"",annualBillingByMonth:(null===(u=null==e?void 0:e.BASIC500)||void 0===u?void 0:u.annual_billing_by_month)||"",advertisedYearlyPriceSavingsPercentage:(null===(c=null==e?void 0:e.BASIC500)||void 0===c?void 0:c.advertised_yearly_price_savings_percentage)||"",includedTaxString:(null===(g=null==e?void 0:e.BASIC500)||void 0===g?void 0:g.included_tax_string)||"",countryCode:n.getCountryCodeFromIP()||"US"};O={productFamily:(null===(f=null==e?void 0:e.BASIC500)||void 0===f?void 0:f.display_name)||"",heading:(null===(v=null==e?void 0:e.BASIC500)||void 0===v?void 0:v.advertised_space_short_gb_rounded)||"",eyebrow:(null===(p=null==e?void 0:e.BASIC500)||void 0===p?void 0:p.display_name)||"",eyebrowSubtle:!0,primaryCtaText:N,primaryOnClick:r,boldHeading:!0,cardSizeVariant:"narrow-full-height",pricingInfo:{...s,priceTextSize:"medium"},bullets:[[l.CheckmarkLine,(null===(M=null===(_=null==e?void 0:e.BASIC500)||void 0===_?void 0:_.features)||void 0===M?void 0:M[0])||""]],stretchToFillHeight:!0,centerInFlexContainer:!0,headingMarginTopSmall:!0,isRecommended:!0,recommendationVariant:o.TrialCardRecommendationVariants.PILL,recommendationIcon:l.UpsellFill,recommendedText:x,allowHorizontalExpansion:!a},t||(O.quotaIndicatorInfo={usedBytes:i,quotaBytes:(null===(y=null==e?void 0:e.BASIC500)||void 0===y?void 0:y.quota_bytes)||0,subtextVerbForm:"present_participle",meterColor:"black",quotaString:(null===(C=null==e?void 0:e.BASIC500)||void 0===C?void 0:C.advertised_space_short_gb_rounded)||"",textSize:"small"})}else{const o={planSelectorName:l.PlanTypes.plus,monthlyBillingByMonth:(null===(h=null==e?void 0:e.PLUS)||void 0===h?void 0:h.monthly_billing_by_month)||"",annualBillingByMonth:(null===(b=null==e?void 0:e.PLUS)||void 0===b?void 0:b.annual_billing_by_month)||"",advertisedYearlyPriceSavingsPercentage:(null===(w=null==e?void 0:e.PLUS)||void 0===w?void 0:w.advertised_yearly_price_savings_percentage)||"",includedTaxString:(null===(I=null==e?void 0:e.PLUS)||void 0===I?void 0:I.included_tax_string)||"",countryCode:n.getCountryCodeFromIP()||"US"};O={productFamily:(null===(S=null==e?void 0:e.PLUS)||void 0===S?void 0:S.display_name)||"",heading:(null===(P=null==e?void 0:e.PLUS)||void 0===P?void 0:P.advertised_space_short_gb_rounded)||"",eyebrow:(null===(E=null==e?void 0:e.PLUS)||void 0===E?void 0:E.display_name)||"",eyebrowSubtle:!0,primaryCtaText:m((null===(T=null==e?void 0:e.PLUS)||void 0===T?void 0:T.advertised_space_short_gb_rounded)||""),primaryOnClick:r,boldHeading:!0,cardSizeVariant:"narrow-full-height",pricingInfo:o,bullets:[[l.CheckmarkLine,(null===(A=null===(U=null==e?void 0:e.PLUS)||void 0===U?void 0:U.features)||void 0===A?void 0:A[0])||""],[l.CheckmarkLine,(null===(L=null===(D=null==e?void 0:e.PLUS)||void 0===D?void 0:D.features)||void 0===L?void 0:L[1])||""]],stretchToFillHeight:!0,centerInFlexContainer:!0,headingMarginTopSmall:!0,allowHorizontalExpansion:!a},t||(O.quotaIndicatorInfo={usedBytes:i,quotaBytes:(null===(k=null==e?void 0:e.PLUS)||void 0===k?void 0:k.quota_bytes)||0,subtextVerbForm:"present_participle",meterColor:"black",quotaString:(null===(V=null==e?void 0:e.PLUS)||void 0===V?void 0:V.advertised_space_short_gb_rounded)||"",textSize:"small"})}return O}(y,t,u,I,Y,B);t?(j.firstChild=c.default.createElement(r.TrialPlanCard,{...s}),j.secondChild=c.default.createElement(r.TrialPlanCard,{...i})):(j.firstChild=c.default.createElement(r.TrialPlanCard,{...i}),j.secondChild=c.default.createElement(r.TrialPlanCard,{...s})),j.centerMobileView=!0,e!==a.ViewMode.Preview||u?j.primaryCtaProps=t?{variant:"transparent"}:{variant:"outline"}:t?(j.primaryCtaProps={variant:"opacity",size:"xlarge",fullWidth:!0,style:{maxWidth:"384px"}},void 0!==z&&(j.secondaryCtaProps={variant:"transparent",size:"large"},j.secondaryCtaText=_,j.secondaryCtaOnClick=z)):(j.firstChild=v,j.secondChild=c.default.createElement(r.TrialPlanCard,{...s}),j.primaryCtaProps={variant:"outline"},j.secondaryCtaText=f,j.secondaryCtaOnClick=Q,j.secondaryCtaProps={variant:"transparent"})}else j.firstChild=c.default.createElement(l.Text,null,M(l.format_bytes(i.intl,I),l.format_bytes(i.intl,R))),j.secondaryCtaText=f,j.secondaryCtaOnClick=Q,j.primaryCtaProps={variant:"primary"};return j},a.getRestrictionsDateString=G,a.getViewMode=function(e){switch(e){case"share_modal":case"share_link":case"share_add_people":case"transfer":case"photos_copy_link":case"share_qr_code":case"shared_page_create_shared_folder":return a.ViewMode.Sharing;case"file_viewer":case"quick_view":case"standalone_preview":return a.ViewMode.Preview;case"upload":case"create":case"upload_menu_action_bar":return a.ViewMode.UploadOrCreate;default:return F(e)}},a.openPortableCheckoutModal=a=>{new Promise((function(a,t){e(["./c_checkout_components_portable_checkout_frame"],a,t)})).then((function(e){return e.portable_checkout_frame_esnext})).then((async({PortableCheckoutModal:e})=>{l.mountModal(c.default.createElement(i.Provider,{value:i.intl},c.default.createElement(s.QueryClientProvider,{client:l.queryClient},c.default.createElement(e,{...a}))),void 0,R)}))},a.useGetPlans=({planNames:e,revenueContentLocation:a,locale:t=n.getPageLocale(),countryOverride:i=n.getCountryOverride(),enabled:o=!0})=>{var r;const s=a,{isError:d,data:u,isLoading:g,error:f}=H.useQuery({apiArg:{plan_names:e,revenue_content_location:s,locale:t,country_override:i}},{enabled:o});return c.default.useEffect((()=>{var e,t;d?l.UDCL.logEvent("get_plans",{tags:{status:"failed",location:a,errorMessage:(null===(e=null==f?void 0:f.apiError)||void 0===e?void 0:e.summary)||"unknown error"}}):!g&&(null==u?void 0:u.apiData)&&(null===(t=u.apiData)||void 0===t?void 0:t.plans)&&Object.keys(u.apiData.plans).length&&l.UDCL.logEvent("get_plans",{tags:{status:"success",location:a}})}),[u,f,d,a,g]),{plansInfo:null===(r=null==u?void 0:u.apiData)||void 0===r?void 0:r.plans,isLoadingPlansInfo:g,plansInfoError:f}}}));
//# sourceMappingURL=c_over-quota_utils_use_get_plans.js-vfluj44Wy.map

//# debugId=8520ec84-aeb4-358d-8d2f-1a4b5472bf56